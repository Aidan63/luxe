!function(){"use strict";function e(e,t){function n(){}n.prototype=e;var i=new n;for(var s in t)i[s]=t[s];return t.toString!==Object.prototype.toString&&(i.toString=t.toString),i}function t(e){return e instanceof Array?function(){return r.iter(e)}:"function"==typeof e.iterator?n(e,e.iterator):e.iterator}function n(e,t){if(null==t)return null;null==t.__id__&&(t.__id__=T++);var n;return null==e.hx__closures__?e.hx__closures__={}:n=e.hx__closures__[t.__id__],null==n&&(n=function(){return n.method.apply(n.scope,arguments)},n.scope=e,n.method=t,e.hx__closures__[t.__id__]=n),n}var i=function(){return v.Boot.__string_rec(this,"")},s=function(e,t){t=t.split("u").join(""),this.r=new RegExp(e,t)};s.__name__=!0,s.prototype={r:null,match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},replace:function(e,t){return e.replace(this.r,t)},__class__:s};var r=function(){};r.__name__=!0,r.cca=function(e,t){var n=e.charCodeAt(t);return n!=n?void 0:n},r.substr=function(e,t,n){return null!=t&&0!=t&&null!=n&&0>n?"":(null==n&&(n=e.length),0>t?(t=e.length+t,0>t&&(t=0)):0>n&&(n=e.length+n-t),e.substr(t,n))},r.indexOf=function(e,t,n){var i=e.length;for(0>n&&(n+=i,0>n&&(n=0));i>n;){if(e[n]===t)return n;n++}return-1},r.remove=function(e,t){var n=r.indexOf(e,t,0);return-1==n?!1:(e.splice(n,1),!0)},r.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var o=function(){};o.__name__=!0,o.array=function(e){for(var n=new Array,i=t(e)();i.hasNext();){var s=i.next();n.push(s)}return n},o.has=function(e,n){for(var i=t(e)();i.hasNext();){var s=i.next();if(s==n)return!0}return!1},o.count=function(e,n){var i=0;if(null==n)for(var s=t(e)();s.hasNext();){{s.next()}i++}else for(var r=t(e)();r.hasNext();){var o=r.next();n(o)&&i++}return i};var a=function(){this.length=0};a.__name__=!0,a.prototype={h:null,q:null,length:null,add:function(e){var t=[e];null==this.h?this.h=t:this.q[1]=t,this.q=t,this.length++},push:function(e){var t=[e,this.h];this.h=t,null==this.q&&(this.q=t),this.length++},remove:function(e){for(var t=null,n=this.h;null!=n;){if(n[0]==e)return null==t?this.h=n[1]:t[1]=n[1],this.q==n&&(this.q=t),this.length--,!0;t=n,n=n[1]}return!1},iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var e=this.h[0];return this.h=this.h[1],e}}},__class__:a};var l=function(){};l.__name__=!0,l.__properties__={set_alpha:"set_alpha",get_alpha:"get_alpha",set_cur_frame_start:"set_cur_frame_start",get_cur_frame_start:"get_cur_frame_start",set_current_time:"set_current_time",get_current_time:"get_current_time",set_last_frame_start:"set_last_frame_start",get_last_frame_start:"get_last_frame_start",set_delta_sim:"set_delta_sim",get_delta_sim:"get_delta_sim",set_dt:"set_dt",get_dt:"get_dt",set_max_frame_time:"set_max_frame_time",get_max_frame_time:"get_max_frame_time",set_update_rate:"set_update_rate",get_update_rate:"get_update_rate",set_fixed_delta:"set_fixed_delta",get_fixed_delta:"get_fixed_delta",set_timescale:"set_timescale",get_timescale:"get_timescale",get_screen:"get_screen",get_time:"get_time"},l.on=function(e,t){l.core.emitter.on(e,t,{fileName:"Luxe.hx",lineNumber:89,className:"Luxe",methodName:"on"})},l.off=function(e,t){return l.core.emitter.off(e,t,{fileName:"Luxe.hx",lineNumber:94,className:"Luxe",methodName:"off"})},l.get_screen=function(){return l.core.screen},l.get_time=function(){return b.Snow.core.timestamp()},l.shutdown=function(){l.core.shutdown()},l.showConsole=function(e){l.core.show_console(e)},l.loadJSON=function(e,t){var n=l.core.app.assets.text(e).text,i=new _.utils.json.JSONDecoder(n,!1).getValue(),s=new _.JSONResource(e,i,l.resources);return null!=t&&t(s),l.resources.cache(s),s},l.loadText=function(e,t){var n=l.core.app.assets.text(e).text,i=new _.TextResource(e,n,l.resources);return null!=t&&t(i),l.resources.cache(i),i},l.loadData=function(e,t){var n=l.core.app.assets.bytes(e).bytes,i=new _.DataResource(e,n,l.resources);return null!=t&&t(i),l.resources.cache(i),i},l.loadSound=function(e,t,n,i){null==n&&(n=!1);var s=l.resources.find_sound(t);if(null!=s)return w.Log.trace("     i / luxe / "+("sound at "+t+" was already a registered resource, returning existing instance"),{fileName:"Luxe.hx",lineNumber:177,className:"Luxe",methodName:"loadSound"}),null!=i&&i(s),s;l.audio.create(t,e,n);var r=new _.SoundResource(t,e,l.resources);return null!=i&&i(r),l.resources.cache(r),r},l.loadTexture=function(e,t,n){return null==n&&(n=!1),x.Texture.load(e,t,n)},l.loadTextures=function(e,t,n){null==n&&(n=!1);for(var i=e.length,s=0,r=[],o=function(e){r.push(e),s++,s==i&&t(r)},a=0;a<e.length;){var u=e[a];++a,l.loadTexture(u,o,n)}},l.loadFont=function(e,t,n){return x.BitmapFont.load(e,t,n)},l.loadShader=function(e,t,n){return null==t&&(t="default"),null==e&&(e="default"),x.Shader.load(e,t,n)},l.openURL=function(e){l.core.app.io.url_open(e)},l.get_timescale=function(){return l.core.timescale},l.get_fixed_delta=function(){return l.core.fixed_delta},l.get_update_rate=function(){return l.core.update_rate},l.get_max_frame_time=function(){return l.core.max_frame_time},l.get_dt=function(){return l.core.delta_time},l.get_delta_sim=function(){return l.core.delta_sim},l.get_last_frame_start=function(){return l.core.last_frame_start},l.get_current_time=function(){return l.core.current_time},l.get_cur_frame_start=function(){return l.core.cur_frame_start},l.get_alpha=function(){return l.core.alpha},l.set_timescale=function(e){return l.core.timescale=e},l.set_fixed_delta=function(e){return l.core.fixed_delta=e},l.set_update_rate=function(e){return l.core.update_rate=e},l.set_max_frame_time=function(e){return l.core.max_frame_time=e},l.set_dt=function(e){return l.core.delta_time=e},l.set_delta_sim=function(e){return l.core.delta_sim=e},l.set_last_frame_start=function(e){return l.core.last_frame_start=e},l.set_current_time=function(e){return l.core.current_time=e},l.set_cur_frame_start=function(e){return l.core.cur_frame_start=e},l.set_alpha=function(e){return l.core.alpha=e};var u=function(){};u.__name__=!0,u.main=function(){u._snow=new b.Snow,u._game=new h,u._core=new _.Core(u._game);var e={has_loop:!0,config_custom_assets:!1,config_custom_runtime:!1,config_runtime_path:"config.json",config_assets_path:"manifest"};u._snow.init(e,u._core)};var _={};_.Emitter=function(){this._checking=!1,this._to_remove=new a,this.connected=new a,this.bindings=new w.ds.StringMap},_.Emitter.__name__=!0,_.Emitter.prototype={bindings:null,connected:null,_to_remove:null,emit:function(e,t){if(this._check(),this.bindings.exists(e)){var n=this.bindings.get(e);if(n.length>0)for(var i=0;i<n.length;){var s=n[i];++i,s(t)}}this._check()},on:function(e,t,n){if(this._check(),this.bindings.exists(e)){var i=this.bindings.get(e);-1==r.indexOf(i,t,0)&&(i.push(t),this.connected.push({handler:t,event:e,pos:n}))}else this.bindings.set(e,[t]),this.connected.push({handler:t,event:e,pos:n})},off:function(e,t){this._check();var n=!1;if(this.bindings.exists(e)){this._to_remove.push({event:e,handler:t});for(var i=this.connected.iterator();i.hasNext();){var s=i.next();s.event==e&&s.handler==t&&this.connected.remove(s)}n=!0}return n},connections:function(e){for(var t=[],n=this.connected.iterator();n.hasNext();){var i=n.next();i.handler==e&&t.push(i)}return t},_checking:null,_check:function(){if(!this._checking){if(this._checking=!0,this._to_remove.length>0){for(var e=this._to_remove.iterator();e.hasNext();){var t=e.next(),n=this.bindings.get(t.event);r.remove(n,t.handler),0==n.length&&this.bindings.remove(t.event)}this._to_remove=null,this._to_remove=new a}this._checking=!1}},__class__:_.Emitter},_.Game=function(){_.Emitter.call(this)},_.Game.__name__=!0,_.Game.__super__=_.Emitter,_.Game.prototype=e(_.Emitter.prototype,{app:null,config:function(e){return e},ready:function(){},update:function(){},ondestroy:function(){},onprerender:function(){},onrender:function(){},onpostrender:function(){},oninputdown:function(){},oninputup:function(){},onmousedown:function(){},onmouseup:function(){},onmousewheel:function(){},onmousemove:function(){},onkeydown:function(){},onkeyup:function(){},ontextinput:function(){},ontouchdown:function(){},ontouchup:function(){},ontouchmove:function(){},ongamepadaxis:function(){},ongamepaddown:function(){},ongamepadup:function(){},ongamepaddevice:function(){},__class__:_.Game});var h=function(){_.Game.call(this)};h.__name__=!0,h.__super__=_.Game,h.prototype=e(_.Game.prototype,{block:null,config:function(e){return e.window.width=640,e.window.height=427,e},ready:function(){this.block=new _.Sprite({name:"a sprite",pos:l.get_screen().get_mid(),color:(new x.Color).rgb(16337668),size:new x.Vector(128,128)})},onmousemove:function(e){this.block.set_pos(e.pos)},onkeyup:function(e){e.keycode==b.input.Keycodes.escape&&l.shutdown()},update:function(e){var t=this.block;t.set_rotation_z(t.get_rotation_z()+40*e)},__class__:h});var c={};c.Map_Impl_=function(){},c.Map_Impl_.__name__=!0;var p=function(){};p.__name__=!0,p.prototype={set:null,remove:null,iterator:null,__class__:p},Math.__name__=!0;var d=function(){};d.__name__=!0,d.field=function(e,t){try{return e[t]}catch(n){return null}},d.setField=function(e,t,n){e[t]=n},d.getProperty=function(e,t){var n;return null==e?null:e.__properties__&&(n=e.__properties__["get_"+t])?e[n]():e[t]},d.setProperty=function(e,t,n){var i;e.__properties__&&(i=e.__properties__["set_"+t])?e[i](n):e[t]=n},d.fields=function(e){var t=[];if(null!=e){var n=Object.prototype.hasOwnProperty;for(var i in e)"__id__"!=i&&"hx__closures__"!=i&&n.call(e,i)&&t.push(i)}return t},d.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},d.compare=function(e,t){return e==t?0:e>t?1:-1},d.isEnumValue=function(e){return null!=e&&null!=e.__enum__};var m=function(){};m.__name__=!0,m.string=function(e){return v.Boot.__string_rec(e,"")},m["int"]=function(e){return 0|e},m.parseInt=function(e){var t=parseInt(e,10);return 0!=t||120!=r.cca(e,1)&&88!=r.cca(e,1)||(t=parseInt(e)),isNaN(t)?null:t},m.parseFloat=function(e){return parseFloat(e)};var f=function(){this.b=""};f.__name__=!0,f.prototype={b:null,addChar:function(e){this.b+=String.fromCharCode(e)},__class__:f};var g=function(){};g.__name__=!0,g.isSpace=function(e,t){var n=r.cca(e,t);return n>8&&14>n||32==n},g.ltrim=function(e){for(var t=e.length,n=0;t>n&&g.isSpace(e,n);)n++;return n>0?r.substr(e,n,t-n):e},g.rtrim=function(e){for(var t=e.length,n=0;t>n&&g.isSpace(e,t-n-1);)n++;return n>0?r.substr(e,0,t-n):e},g.trim=function(e){return g.ltrim(g.rtrim(e))},g.rpad=function(e,t,n){if(t.length<=0)return e;for(;e.length<n;)e+=t;return e},g.replace=function(e,t,n){return e.split(t).join(n)},g.hex=function(e,t){var n="",i="0123456789ABCDEF";do n=i.charAt(15&e)+n,e>>>=4;while(e>0);if(null!=t)for(;n.length<t;)n="0"+n;return n},g.fastCodeAt=function(e,t){return e.charCodeAt(t)};var y=function(){};y.__name__=!0,y.getClass=function(e){return null==e?null:e instanceof Array&&null==e.__enum__?Array:e.__class__},y.getEnum=function(e){return null==e?null:e.__enum__},y.createInstance=function(e,t){var n=t.length;switch(n){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);case 8:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);default:throw"Too many arguments"}return null},y.getInstanceFields=function(e){var t=[];for(var n in e.prototype)t.push(n);return r.remove(t,"__class__"),r.remove(t,"__properties__"),t},y.enumIndex=function(e){return e[1]};var w={};w.StackItem={__ename__:!0,__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"]},w.StackItem.CFunction=["CFunction",0],w.StackItem.CFunction.toString=i,w.StackItem.CFunction.__enum__=w.StackItem,w.StackItem.Module=function(e){var t=["Module",1,e];return t.__enum__=w.StackItem,t.toString=i,t},w.StackItem.FilePos=function(e,t,n){var s=["FilePos",2,e,t,n];return s.__enum__=w.StackItem,s.toString=i,s},w.StackItem.Method=function(e,t){var n=["Method",3,e,t];return n.__enum__=w.StackItem,n.toString=i,n},w.StackItem.LocalFunction=function(e){var t=["LocalFunction",4,e];return t.__enum__=w.StackItem,t.toString=i,t},w.CallStack=function(){},w.CallStack.__name__=!0,w.CallStack.callStack=function(){var e=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){for(var n=[],i=0;i<t.length;){var s=t[i];++i;var o=null,a=s.getFunctionName();if(null!=a){var l=a.lastIndexOf(".");if(l>=0){var u=r.substr(a,0,l),_=r.substr(a,l+1,null);o=w.StackItem.Method(u,_)}}n.push(w.StackItem.FilePos(o,s.getFileName(),s.getLineNumber()))}return n};var t=w.CallStack.makeStack((new Error).stack);return t.shift(),Error.prepareStackTrace=e,t},w.CallStack.makeStack=function(e){if("string"==typeof e){for(var t=e.split("\n"),n=[],i=0;i<t.length;){var s=t[i];++i,n.push(w.StackItem.Module(s))}return n}return e},w.Log=function(){},w.Log.__name__=!0,w.Log.trace=function(e,t){v.Boot.__trace(e,t)},w.Resource=function(){},w.Resource.__name__=!0,w.Resource.getString=function(e){for(var t=0,n=w.Resource.content;t<n.length;){var i=n[t];if(++t,i.name==e){if(null!=i.str)return i.str;var s=w.crypto.Base64.decode(i.data);return s.toString()}}return null},w.Resource.getBytes=function(e){for(var t=0,n=w.Resource.content;t<n.length;){var i=n[t];if(++t,i.name==e)return null!=i.str?w.io.Bytes.ofString(i.str):w.crypto.Base64.decode(i.data)}return null},w.Timer=function(){},w.Timer.__name__=!0,w.Timer.stamp=function(){return(new Date).getTime()/1e3},w.Utf8=function(){this.__b=""},w.Utf8.__name__=!0,w.Utf8.prototype={__b:null,__class__:w.Utf8},w.io={},w.io.Bytes=function(e,t){this.length=e,this.b=t},w.io.Bytes.__name__=!0,w.io.Bytes.alloc=function(e){for(var t=new Array,n=0;e>n;){{n++}t.push(0)}return new w.io.Bytes(e,t)},w.io.Bytes.ofString=function(e){for(var t=new Array,n=0;n<e.length;){var i=g.fastCodeAt(e,n++);i>=55296&&56319>=i&&(i=i-55232<<10|1023&g.fastCodeAt(e,n++)),127>=i?t.push(i):2047>=i?(t.push(192|i>>6),t.push(128|63&i)):65535>=i?(t.push(224|i>>12),t.push(128|i>>6&63),t.push(128|63&i)):(t.push(240|i>>18),t.push(128|i>>12&63),t.push(128|i>>6&63),t.push(128|63&i))}return new w.io.Bytes(t.length,t)},w.io.Bytes.prototype={length:null,b:null,get:function(e){return this.b[e]},set:function(e,t){this.b[e]=255&t},blit:function(e,t,n,i){if(0>e||0>n||0>i||e+i>this.length||n+i>t.length)throw w.io.Error.OutsideBounds;var s=this.b,r=t.b;if(s==r&&e>n)for(var o=i;o>0;)o--,s[o+e]=r[o+n];else for(var a=0;i>a;){var l=a++;s[l+e]=r[l+n]}},getString:function(e,t){if(0>e||0>t||e+t>this.length)throw w.io.Error.OutsideBounds;for(var n="",i=this.b,s=String.fromCharCode,r=e,o=e+t;o>r;){var a=i[r++];if(128>a){if(0==a)break;n+=s(a)}else if(224>a)n+=s((63&a)<<6|127&i[r++]);else if(240>a){var l=i[r++];n+=s((31&a)<<12|(127&l)<<6|127&i[r++])}else{var u=i[r++],_=i[r++],h=(15&a)<<18|(127&u)<<12|(127&_)<<6|127&i[r++];n+=s((h>>10)+55232),n+=s(1023&h|56320)}}return n},toString:function(){return this.getString(0,this.length)},__class__:w.io.Bytes},w.crypto={},w.crypto.Base64=function(){},w.crypto.Base64.__name__=!0,w.crypto.Base64.decode=function(e,t){if(null==t&&(t=!0),t)for(;61==r.cca(e,e.length-1);)e=r.substr(e,0,-1);return new w.crypto.BaseCode(w.crypto.Base64.BYTES).decodeBytes(w.io.Bytes.ofString(e))},w.crypto.BaseCode=function(e){for(var t=e.length,n=1;t>1<<n;)n++;if(n>8||t!=1<<n)throw"BaseCode : base length must be a power of two.";this.base=e,this.nbits=n},w.crypto.BaseCode.__name__=!0,w.crypto.BaseCode.prototype={base:null,nbits:null,tbl:null,initTable:function(){for(var e=new Array,t=0;256>t;){var n=t++;e[n]=-1}for(var i=0,s=this.base.length;s>i;){var r=i++;e[this.base.b[r]]=r}this.tbl=e},decodeBytes:function(e){{var t=this.nbits;this.base}null==this.tbl&&this.initTable();for(var n=this.tbl,i=e.length*t>>3,s=w.io.Bytes.alloc(i),r=0,o=0,a=0,l=0;i>l;){for(;8>o;){o+=t,r<<=t;var u=n[e.get(a++)];if(-1==u)throw"BaseCode : invalid encoded char";r|=u}o-=8,s.set(l++,r>>o&255)}return s},__class__:w.crypto.BaseCode},w.crypto.Crc32=function(){this.crc=-1},w.crypto.Crc32.__name__=!0,w.crypto.Crc32.prototype={crc:null,"byte":function(e){for(var t=255&(this.crc^e),n=0;8>n;){{n++}1==(1&t)?t=t>>>1^-306674912:t>>>=1}this.crc=this.crc>>>8^t},update:function(e,t,n){for(var i=e.b,s=t,r=t+n;r>s;){for(var o=s++,a=255&(this.crc^i[o]),l=0;8>l;){{l++}1==(1&a)?a=a>>>1^-306674912:a>>>=1}this.crc=this.crc>>>8^a}},get:function(){return-1^this.crc},__class__:w.crypto.Crc32},w.crypto.Md5=function(){},w.crypto.Md5.__name__=!0,w.crypto.Md5.encode=function(e){var t=new w.crypto.Md5,n=t.doEncode(w.crypto.Md5.str2blks(e));return t.hex(n)},w.crypto.Md5.str2blks=function(e){for(var t=(e.length+8>>6)+1,n=new Array,i=16*t,s=0;i>s;){var o=s++;n[o]=0}for(var a=0;a<e.length;)n[a>>2]|=r.cca(e,a)<<(8*e.length+a)%4*8,a++;n[a>>2]|=128<<(8*e.length+a)%4*8;var l=8*e.length,u=16*t-2;return n[u]=255&l,n[u]|=(l>>>8&255)<<8,n[u]|=(l>>>16&255)<<16,n[u]|=(l>>>24&255)<<24,n},w.crypto.Md5.prototype={bitOR:function(e,t){var n=1&e|1&t,i=e>>>1|t>>>1;return i<<1|n},bitXOR:function(e,t){var n=1&e^1&t,i=e>>>1^t>>>1;return i<<1|n},bitAND:function(e,t){var n=1&e&(1&t),i=e>>>1&t>>>1;return i<<1|n},addme:function(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n},hex:function(e){for(var t="",n="0123456789abcdef",i=0;i<e.length;){var s=e[i];++i;for(var r=0;4>r;){var o=r++;t+=n.charAt(s>>8*o+4&15)+n.charAt(s>>8*o&15)}}return t},rol:function(e,t){return e<<t|e>>>32-t},cmn:function(e,t,n,i,s,r){return this.addme(this.rol(this.addme(this.addme(t,e),this.addme(i,r)),s),n)},ff:function(e,t,n,i,s,r,o){return this.cmn(this.bitOR(this.bitAND(t,n),this.bitAND(~t,i)),e,t,s,r,o)},gg:function(e,t,n,i,s,r,o){return this.cmn(this.bitOR(this.bitAND(t,i),this.bitAND(n,~i)),e,t,s,r,o)},hh:function(e,t,n,i,s,r,o){return this.cmn(this.bitXOR(this.bitXOR(t,n),i),e,t,s,r,o)},ii:function(e,t,n,i,s,r,o){return this.cmn(this.bitXOR(n,this.bitOR(t,~i)),e,t,s,r,o)},doEncode:function(e){for(var t,n=1732584193,i=-271733879,s=-1732584194,r=271733878,o=0;o<e.length;){var a=n,l=i,u=s,_=r;t=0,n=this.ff(n,i,s,r,e[o],7,-680876936),r=this.ff(r,n,i,s,e[o+1],12,-389564586),s=this.ff(s,r,n,i,e[o+2],17,606105819),i=this.ff(i,s,r,n,e[o+3],22,-1044525330),n=this.ff(n,i,s,r,e[o+4],7,-176418897),r=this.ff(r,n,i,s,e[o+5],12,1200080426),s=this.ff(s,r,n,i,e[o+6],17,-1473231341),i=this.ff(i,s,r,n,e[o+7],22,-45705983),n=this.ff(n,i,s,r,e[o+8],7,1770035416),r=this.ff(r,n,i,s,e[o+9],12,-1958414417),s=this.ff(s,r,n,i,e[o+10],17,-42063),i=this.ff(i,s,r,n,e[o+11],22,-1990404162),n=this.ff(n,i,s,r,e[o+12],7,1804603682),r=this.ff(r,n,i,s,e[o+13],12,-40341101),s=this.ff(s,r,n,i,e[o+14],17,-1502002290),i=this.ff(i,s,r,n,e[o+15],22,1236535329),n=this.gg(n,i,s,r,e[o+1],5,-165796510),r=this.gg(r,n,i,s,e[o+6],9,-1069501632),s=this.gg(s,r,n,i,e[o+11],14,643717713),i=this.gg(i,s,r,n,e[o],20,-373897302),n=this.gg(n,i,s,r,e[o+5],5,-701558691),r=this.gg(r,n,i,s,e[o+10],9,38016083),s=this.gg(s,r,n,i,e[o+15],14,-660478335),i=this.gg(i,s,r,n,e[o+4],20,-405537848),n=this.gg(n,i,s,r,e[o+9],5,568446438),r=this.gg(r,n,i,s,e[o+14],9,-1019803690),s=this.gg(s,r,n,i,e[o+3],14,-187363961),i=this.gg(i,s,r,n,e[o+8],20,1163531501),n=this.gg(n,i,s,r,e[o+13],5,-1444681467),r=this.gg(r,n,i,s,e[o+2],9,-51403784),s=this.gg(s,r,n,i,e[o+7],14,1735328473),i=this.gg(i,s,r,n,e[o+12],20,-1926607734),n=this.hh(n,i,s,r,e[o+5],4,-378558),r=this.hh(r,n,i,s,e[o+8],11,-2022574463),s=this.hh(s,r,n,i,e[o+11],16,1839030562),i=this.hh(i,s,r,n,e[o+14],23,-35309556),n=this.hh(n,i,s,r,e[o+1],4,-1530992060),r=this.hh(r,n,i,s,e[o+4],11,1272893353),s=this.hh(s,r,n,i,e[o+7],16,-155497632),i=this.hh(i,s,r,n,e[o+10],23,-1094730640),n=this.hh(n,i,s,r,e[o+13],4,681279174),r=this.hh(r,n,i,s,e[o],11,-358537222),s=this.hh(s,r,n,i,e[o+3],16,-722521979),i=this.hh(i,s,r,n,e[o+6],23,76029189),n=this.hh(n,i,s,r,e[o+9],4,-640364487),r=this.hh(r,n,i,s,e[o+12],11,-421815835),s=this.hh(s,r,n,i,e[o+15],16,530742520),i=this.hh(i,s,r,n,e[o+2],23,-995338651),n=this.ii(n,i,s,r,e[o],6,-198630844),r=this.ii(r,n,i,s,e[o+7],10,1126891415),s=this.ii(s,r,n,i,e[o+14],15,-1416354905),i=this.ii(i,s,r,n,e[o+5],21,-57434055),n=this.ii(n,i,s,r,e[o+12],6,1700485571),r=this.ii(r,n,i,s,e[o+3],10,-1894986606),s=this.ii(s,r,n,i,e[o+10],15,-1051523),i=this.ii(i,s,r,n,e[o+1],21,-2054922799),n=this.ii(n,i,s,r,e[o+8],6,1873313359),r=this.ii(r,n,i,s,e[o+15],10,-30611744),s=this.ii(s,r,n,i,e[o+6],15,-1560198380),i=this.ii(i,s,r,n,e[o+13],21,1309151649),n=this.ii(n,i,s,r,e[o+4],6,-145523070),r=this.ii(r,n,i,s,e[o+11],10,-1120210379),s=this.ii(s,r,n,i,e[o+2],15,718787259),i=this.ii(i,s,r,n,e[o+9],21,-343485551),n=this.addme(n,a),i=this.addme(i,l),s=this.addme(s,u),r=this.addme(r,_),o+=16}return[n,i,s,r]},__class__:w.crypto.Md5},w.ds={},w.ds.BalancedTree=function(){},w.ds.BalancedTree.__name__=!0,w.ds.BalancedTree.prototype={root:null,set:function(e,t){this.root=this.setLoop(e,t,this.root)},remove:function(e){try{return this.root=this.removeLoop(e,this.root),!0}catch(t){if(v.Boot.__instanceof(t,String))return!1;throw t}},exists:function(e){for(var t=this.root;null!=t;){var n=this.compare(e,t.key);if(0==n)return!0;t=0>n?t.left:t.right}return!1},iterator:function(){var e=[];return this.iteratorLoop(this.root,e),r.iter(e)},setLoop:function(e,t,n){if(null==n)return new w.ds.TreeNode(null,e,t,null);var i=this.compare(e,n.key);if(0==i)return new w.ds.TreeNode(n.left,e,t,n.right,null==n?0:n._height);if(0>i){var s=this.setLoop(e,t,n.left);return this.balance(s,n.key,n.value,n.right)}var r=this.setLoop(e,t,n.right);return this.balance(n.left,n.key,n.value,r)},removeLoop:function(e,t){if(null==t)throw"Not_found";var n=this.compare(e,t.key);return 0==n?this.merge(t.left,t.right):0>n?this.balance(this.removeLoop(e,t.left),t.key,t.value,t.right):this.balance(t.left,t.key,t.value,this.removeLoop(e,t.right))},iteratorLoop:function(e,t){null!=e&&(this.iteratorLoop(e.left,t),t.push(e.value),this.iteratorLoop(e.right,t))},merge:function(e,t){if(null==e)return t;if(null==t)return e;var n=this.minBinding(t);return this.balance(e,n.key,n.value,this.removeMinBinding(t))},minBinding:function(e){if(null==e)throw"Not_found";return null==e.left?e:this.minBinding(e.left)},removeMinBinding:function(e){return null==e.left?e.right:this.balance(this.removeMinBinding(e.left),e.key,e.value,e.right)},balance:function(e,t,n,i){var s;s=null==e?0:e._height;var r;return r=null==i?0:i._height,s>r+2?function(){var t,n=e.left;return t=null==n?0:n._height}(this)>=function(){var t,n=e.right;return t=null==n?0:n._height}(this)?new w.ds.TreeNode(e.left,e.key,e.value,new w.ds.TreeNode(e.right,t,n,i)):new w.ds.TreeNode(new w.ds.TreeNode(e.left,e.key,e.value,e.right.left),e.right.key,e.right.value,new w.ds.TreeNode(e.right.right,t,n,i)):r>s+2?function(){var e,t=i.right;return e=null==t?0:t._height}(this)>function(){var e,t=i.left;return e=null==t?0:t._height}(this)?new w.ds.TreeNode(new w.ds.TreeNode(e,t,n,i.left),i.key,i.value,i.right):new w.ds.TreeNode(new w.ds.TreeNode(e,t,n,i.left.left),i.left.key,i.left.value,new w.ds.TreeNode(i.left.right,i.key,i.value,i.right)):new w.ds.TreeNode(e,t,n,i,(s>r?s:r)+1)},compare:function(e,t){return d.compare(e,t)},__class__:w.ds.BalancedTree},w.ds.TreeNode=function(e,t,n,i,s){null==s&&(s=-1),this.left=e,this.key=t,this.value=n,this.right=i,this._height=-1==s?(function(e){var t,n=e.left;return t=null==n?0:n._height}(this)>function(e){var t,n=e.right;return t=null==n?0:n._height}(this)?function(e){var t,n=e.left;return t=null==n?0:n._height}(this):function(e){var t,n=e.right;return t=null==n?0:n._height}(this))+1:s},w.ds.TreeNode.__name__=!0,w.ds.TreeNode.prototype={left:null,right:null,key:null,value:null,_height:null,__class__:w.ds.TreeNode},w.ds.EnumValueMap=function(){w.ds.BalancedTree.call(this)},w.ds.EnumValueMap.__name__=!0,w.ds.EnumValueMap.__interfaces__=[p],w.ds.EnumValueMap.__super__=w.ds.BalancedTree,w.ds.EnumValueMap.prototype=e(w.ds.BalancedTree.prototype,{compare:function(e,t){var n=e[1]-t[1];if(0!=n)return n;var i=e.slice(2),s=t.slice(2);return 0==i.length&&0==s.length?0:this.compareArgs(i,s)},compareArgs:function(e,t){var n=e.length-t.length;if(0!=n)return n;for(var i=0,s=e.length;s>i;){var r=i++,o=this.compareArg(e[r],t[r]);if(0!=o)return o}return 0},compareArg:function(e,t){return d.isEnumValue(e)&&d.isEnumValue(t)?this.compare(e,t):e instanceof Array&&null==e.__enum__&&t instanceof Array&&null==t.__enum__?this.compareArgs(e,t):d.compare(e,t)},__class__:w.ds.EnumValueMap}),w.ds.IntMap=function(){this.h={}},w.ds.IntMap.__name__=!0,w.ds.IntMap.__interfaces__=[p],w.ds.IntMap.prototype={h:null,set:function(e,t){this.h[e]=t},get:function(e){return this.h[e]},exists:function(e){return this.h.hasOwnProperty(e)},remove:function(e){return this.h.hasOwnProperty(e)?(delete this.h[e],!0):!1},keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(0|t);return r.iter(e)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e]}}},__class__:w.ds.IntMap},w.ds.ObjectMap=function(){this.h={},this.h.__keys__={}},w.ds.ObjectMap.__name__=!0,w.ds.ObjectMap.__interfaces__=[p],w.ds.ObjectMap.prototype={h:null,set:function(e,t){var n=e.__id__||(e.__id__=++w.ds.ObjectMap.count);this.h[n]=t,this.h.__keys__[n]=e},get:function(e){return this.h[e.__id__]},exists:function(e){return null!=this.h.__keys__[e.__id__]},remove:function(e){var t=e.__id__;return null==this.h.__keys__[t]?!1:(delete this.h[t],delete this.h.__keys__[t],!0)},keys:function(){var e=[];for(var t in this.h.__keys__)this.h.hasOwnProperty(t)&&e.push(this.h.__keys__[t]);return r.iter(e)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e.__id__]}}},__class__:w.ds.ObjectMap},w.ds.StringMap=function(){this.h={}},w.ds.StringMap.__name__=!0,w.ds.StringMap.__interfaces__=[p],w.ds.StringMap.prototype={h:null,set:function(e,t){this.h["$"+e]=t},get:function(e){return this.h["$"+e]},exists:function(e){return this.h.hasOwnProperty("$"+e)},remove:function(e){return e="$"+e,this.h.hasOwnProperty(e)?(delete this.h[e],!0):!1},keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(t.substr(1));return r.iter(e)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref["$"+e]}}},__class__:w.ds.StringMap},w.io.BytesBuffer=function(){this.b=new Array},w.io.BytesBuffer.__name__=!0,w.io.BytesBuffer.prototype={b:null,add:function(e){for(var t=(this.b,e.b),n=0,i=e.length;i>n;){var s=n++;this.b.push(t[s])}},addBytes:function(e,t,n){if(0>t||0>n||t+n>e.length)throw w.io.Error.OutsideBounds;for(var i=(this.b,e.b),s=t,r=t+n;r>s;){var o=s++;this.b.push(i[o])}},getBytes:function(){var e=new w.io.Bytes(this.b.length,this.b);return this.b=null,e},__class__:w.io.BytesBuffer},w.io.Input=function(){},w.io.Input.__name__=!0,w.io.Input.prototype={bigEndian:null,readByte:function(){throw"Not implemented"},readBytes:function(e,t,n){var i=n,s=e.b;if(0>t||0>n||t+n>e.length)throw w.io.Error.OutsideBounds;for(;i>0;)s[t]=this.readByte(),t++,i--;return n},set_bigEndian:function(e){return this.bigEndian=e,e},readFullBytes:function(e,t,n){for(;n>0;){var i=this.readBytes(e,t,n);t+=i,n-=i}},read:function(e){for(var t=w.io.Bytes.alloc(e),n=0;e>0;){var i=this.readBytes(t,n,e);if(0==i)throw w.io.Error.Blocked;n+=i,e-=i}return t},readUInt16:function(){var e=this.readByte(),t=this.readByte();return this.bigEndian?t|e<<8:e|t<<8},readInt32:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte();return this.bigEndian?i|n<<8|t<<16|e<<24:e|t<<8|n<<16|i<<24},readString:function(e){var t=w.io.Bytes.alloc(e);return this.readFullBytes(t,0,e),t.toString()},__class__:w.io.Input,__properties__:{set_bigEndian:"set_bigEndian"}},w.io.BytesInput=function(e,t,n){if(null==t&&(t=0),null==n&&(n=e.length-t),0>t||0>n||t+n>e.length)throw w.io.Error.OutsideBounds;this.b=e.b,this.pos=t,this.len=n,this.totlen=n},w.io.BytesInput.__name__=!0,w.io.BytesInput.__super__=w.io.Input,w.io.BytesInput.prototype=e(w.io.Input.prototype,{b:null,pos:null,len:null,totlen:null,readByte:function(){if(0==this.len)throw new w.io.Eof;return this.len--,this.b[this.pos++]},readBytes:function(e,t,n){if(0>t||0>n||t+n>e.length)throw w.io.Error.OutsideBounds;if(0==this.len&&n>0)throw new w.io.Eof;this.len<n&&(n=this.len);for(var i=this.b,s=e.b,r=0;n>r;){var o=r++;s[t+o]=i[this.pos+o]}return this.pos+=n,this.len-=n,n},__class__:w.io.BytesInput}),w.io.Eof=function(){},w.io.Eof.__name__=!0,w.io.Eof.prototype={toString:function(){return"Eof"},__class__:w.io.Eof},w.io.Error={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]},w.io.Error.Blocked=["Blocked",0],w.io.Error.Blocked.toString=i,w.io.Error.Blocked.__enum__=w.io.Error,w.io.Error.Overflow=["Overflow",1],w.io.Error.Overflow.toString=i,w.io.Error.Overflow.__enum__=w.io.Error,w.io.Error.OutsideBounds=["OutsideBounds",2],w.io.Error.OutsideBounds.toString=i,w.io.Error.OutsideBounds.__enum__=w.io.Error,w.io.Error.Custom=function(e){var t=["Custom",3,e];return t.__enum__=w.io.Error,t.toString=i,t},w.io.Path=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("\\");n>t?(this.dir=r.substr(e,0,n),e=r.substr(e,n+1,null),this.backslash=!0):t>n?(this.dir=r.substr(e,0,t),e=r.substr(e,t+1,null)):this.dir=null;var i=e.lastIndexOf(".");-1!=i?(this.ext=r.substr(e,i+1,null),this.file=r.substr(e,0,i)):(this.ext=null,this.file=e)},w.io.Path.__name__=!0,w.io.Path.directory=function(e){var t=new w.io.Path(e);return null==t.dir?"":t.dir},w.io.Path.extension=function(e){var t=new w.io.Path(e);return null==t.ext?"":t.ext},w.io.Path.join=function(e){var t=e.filter(function(e){return null!=e&&""!=e});if(0==t.length)return"";for(var n=t[0],i=1,s=t.length;s>i;){var r=i++;n=w.io.Path.addTrailingSlash(n),n+=t[r]}return w.io.Path.normalize(n)},w.io.Path.normalize=function(e){var t="/";if(e=e.split("\\").join("/"),null==e||e==t)return t;var n,i,r=[];n=e.split(t);for(var o=0,a=n.length;a>o;){var l=o++;i=n[l],".."==i?r.pop():"."!=i&&r.push(i)}var u=r.join(t),_=new s("([^:])/+","g"),h=_.replace(u,"$1"+t);return h},w.io.Path.addTrailingSlash=function(e){if(0==e.length)return"/";var t=e.lastIndexOf("/"),n=e.lastIndexOf("\\");return n>t?n!=e.length-1?e+"\\":e:t!=e.length-1?e+"/":e},w.io.Path.prototype={dir:null,file:null,ext:null,backslash:null,__class__:w.io.Path};var v={};v.Boot=function(){},v.Boot.__name__=!0,v.Boot.__unhtml=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},v.Boot.__trace=function(e,t){var n;if(n=null!=t?t.fileName+":"+t.lineNumber+": ":"",n+=v.Boot.__string_rec(e,""),null!=t&&null!=t.customParams)for(var i=0,s=t.customParams;i<s.length;){var r=s[i];++i,n+=","+v.Boot.__string_rec(r,"")}var o;"undefined"!=typeof document&&null!=(o=document.getElementById("haxe:trace"))?o.innerHTML+=v.Boot.__unhtml(n)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(n)},v.Boot.getClass=function(e){return e instanceof Array&&null==e.__enum__?Array:e.__class__},v.Boot.__string_rec=function(e,t){if(null==e)return"null";if(t.length>=5)return"<...>";var n=typeof e;switch("function"==n&&(e.__name__||e.__ename__)&&(n="object"),n){case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];var i=e[0]+"(";t+="	";for(var s=2,r=e.length;r>s;){var o=s++;i+=2!=o?","+v.Boot.__string_rec(e[o],t):v.Boot.__string_rec(e[o],t)}return i+")"}var a=e.length,l="[";t+="	";for(var u=0;a>u;){var _=u++;l+=(_>0?",":"")+v.Boot.__string_rec(e[_],t)}return l+="]"}var h;try{h=e.toString}catch(c){return"???"}if(null!=h&&h!=Object.toString){var p=e.toString();if("[object Object]"!=p)return p
}var d=null,m="{\n";t+="	";var f=null!=e.hasOwnProperty;for(var d in e)(!f||e.hasOwnProperty(d))&&"prototype"!=d&&"__class__"!=d&&"__super__"!=d&&"__interfaces__"!=d&&"__properties__"!=d&&(2!=m.length&&(m+=", \n"),m+=t+d+" : "+v.Boot.__string_rec(e[d],t));return t=t.substring(1),m+="\n"+t+"}";case"function":return"<function>";case"string":return e;default:return String(e)}},v.Boot.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var n=e.__interfaces__;if(null!=n)for(var i=0,s=n.length;s>i;){var r=i++,o=n[r];if(o==t||v.Boot.__interfLoop(o,t))return!0}return v.Boot.__interfLoop(e.__super__,t)},v.Boot.__instanceof=function(e,t){if(null==t)return!1;switch(t){case E:return(0|e)===e;case N:return"number"==typeof e;case L:return"boolean"==typeof e;case String:return"string"==typeof e;case Array:return e instanceof Array&&null==e.__enum__;case k:return!0;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t)return!0;if(v.Boot.__interfLoop(v.Boot.getClass(e),t))return!0}return t==G&&null!=e.__name__?!0:t==A&&null!=e.__ename__?!0:e.__enum__==t}},v.Boot.__cast=function(e,t){if(v.Boot.__instanceof(e,t))return e;throw"Cannot cast "+m.string(e)+" to "+m.string(t)},v.html={},v.html._CanvasElement={},v.html._CanvasElement.CanvasUtil=function(){},v.html._CanvasElement.CanvasUtil.__name__=!0,v.html._CanvasElement.CanvasUtil.getContextWebGL=function(e,t){for(var n=0,i=["webgl","experimental-webgl"];n<i.length;){var s=i[n];++n;var r=e.getContext(s,t);if(null!=r)return r}return null},_.Audio=function(e){this.core=e},_.Audio.__name__=!0,_.Audio.prototype={core:null,init:function(){},destroy:function(){},create:function(e,t,n){return null==n&&(n=!1),this.core.app.audio.create(e,t,n)},uncreate:function(e){return this.core.app.audio.uncreate(e)},on:function(e,t,n){return this.core.app.audio.on(e,t,n)},off:function(e,t,n){return this.core.app.audio.off(e,t,n)},get:function(e){return this.core.app.audio.get(e)},exists:function(e){return null!=this.get(e)},on_complete:function(){},loop:function(e){return this.core.app.audio.loop(e)},stop:function(e){return this.core.app.audio.stop(e)},play:function(e){return this.core.app.audio.play(e)},pause:function(e){return this.core.app.audio.pause(e)},toggle:function(e){return this.core.app.audio.toggle(e)},volume:function(e,t){return this.core.app.audio.volume(e,t)},pan:function(e,t){return this.core.app.audio.pan(e,t)},pitch:function(e,t){return this.core.app.audio.pitch(e,t)},position:function(e,t){return this.core.app.audio.position(e,t)},duration:function(e){return this.core.app.audio.duration(e)},process:function(){},__class__:_.Audio},_.Objects=function(e,t){null==t&&(t=""),null==e&&(e=""),this.name="",this.id="",_.Emitter.call(this),this.name=e,this.id=""==t?l.utils.uniqueid():t},_.Objects.__name__=!0,_.Objects.__super__=_.Emitter,_.Objects.prototype=e(_.Emitter.prototype,{id:null,name:null,__class__:_.Objects}),_.Entity=function(e){if(this.active=!0,this.fixed_rate=0,this.started=!1,this.inited=!1,this.destroyed=!1,_.Objects.call(this,"entity"),this.name+="."+this.id,this.options=e,this._components=new _.components.Components(this),this.children=new Array,this.events=new _.Events,this.transform=new x.Transform,this.transform.listen_pos(n(this,this.set_pos_from_transform)),this.transform.listen_scale(n(this,this.set_scale_from_transform)),this.transform.listen_origin(n(this,this.set_origin_from_transform)),this.transform.listen_parent(n(this,this.set_parent_from_transform)),this.transform.listen_rotation(n(this,this.set_rotation_from_transform)),null!=this.options){null!=this.options.name&&(this.name=this.options.name),null!=this.options.pos&&this.set_pos(this.options.pos.clone()),null!=this.options.scale&&this.set_scale(this.options.scale.clone());var t=!0;null!=this.options.no_scene&&1==this.options.no_scene&&(t=!1),null!=this.options.parent&&(t=!1,this.set_parent(this.options.parent)),t&&this.set_scene(null!=this.options.scene?this.options.scene:l.scene)}else this.set_scene(l.scene);null!=this.get_scene()&&this.get_scene().add(this)},_.Entity.__name__=!0,_.Entity.__super__=_.Objects,_.Entity.prototype=e(_.Objects.prototype,{events:null,children:null,destroyed:null,inited:null,started:null,fixed_rate:null,parent:null,scene:null,active:null,transform:null,_components:null,fixed_rate_timer:null,options:null,init:function(){},update:function(){},onreset:function(){},ondestroy:function(){},onkeyup:function(){},onkeydown:function(){},ontextinput:function(){},oninputdown:function(){},oninputup:function(){},onmousedown:function(){},onmouseup:function(){},onmousemove:function(){},onmousewheel:function(){},ontouchdown:function(){},ontouchup:function(){},ontouchmove:function(){},ongamepadup:function(){},ongamepaddown:function(){},ongamepadaxis:function(){},ongamepaddevice:function(){},add:function(e){this._components.add(e)},remove:function(e){return this._components.remove(e)},get:function(e,t){return null==t&&(t=!1),this._components.get(e,t)},get_any:function(e,t,n){return null==n&&(n=!0),null==t&&(t=!1),this._components.get_any(e,t,n)},has:function(e){return this._components.has(e)},_init:function(){this.init(),this.emit("init",null,{fileName:"Entity.hx",lineNumber:234,className:"luxe.Entity",methodName:"_init"});for(var e=function(e){var t,n=e.get_components();return t=n.iterator()}(this);e.hasNext();){var t=e.next();t.init()}for(var n=0,i=this.children;n<i.length;){var s=i[n];++n,s._init()}this.inited=!0},_reset:function(e){this.onreset(),this.emit("reset",null,{fileName:"Entity.hx",lineNumber:260,className:"luxe.Entity",methodName:"_reset"});for(var t=function(e){var t,n=e.get_components();return t=n.iterator()}(this);t.hasNext();){var n=t.next();n.onreset()}for(var i=0,s=this.children;i<s.length;){var r=s[i];++i,r._reset(e)}this._start_fixed_rate_timer(this.get_fixed_rate()),this.started=!0},destroy:function(e){null==e&&(e=!1);for(var t=0,n=this.children;t<n.length;){var i=n[t];++t,i.destroy(!0)}this.children=null,this.children=[];for(var s=function(e){var t,n=e.get_components();return t=n.iterator()}(this);s.hasNext();){var r=s.next();r.onremoved(),r.ondestroy()}this.emit("destroy",null,{fileName:"Entity.hx",lineNumber:302,className:"luxe.Entity",methodName:"destroy"}),this.ondestroy(),null==this.get_parent()||e||this.get_parent()._remove_child(this),this._stop_fixed_rate_timer(),this.destroyed=!0,this.inited=!1,this.started=!1,null!=this.get_scene()&&this.get_scene().remove(this),null!=this.events&&(this.events.destroy(),this.events=null)},_update:function(e){if(!this.destroyed&&this.get_active()&&this.inited&&this.started){this.transform.clean_check(),this.update(e),null!=this.events&&this.events.process();for(var t=function(e){var t,n=e.get_components();return t=n.iterator()}(this);t.hasNext();){var n=t.next();n.update(e)}if(this.children.length>0)for(var i=0,s=this.children;i<s.length;){var r=s[i];++i,r._update(e)}}},_fixed_update:function(){if(!this.destroyed&&this.get_active()&&this.inited&&this.started){this.emit("fixed_update",null,{fileName:"Entity.hx",lineNumber:388,className:"luxe.Entity",methodName:"_fixed_update"});for(var e=function(e){var t,n=e.get_components();return t=n.iterator()}(this);e.hasNext();){var t=e.next();t.onfixedupdate()}for(var n=0,i=this.children;n<i.length;){var s=i[n];++n,s._fixed_update()}}},_listen:function(e,t){if(this.on(e,t,{fileName:"Entity.hx",lineNumber:411,className:"luxe.Entity",methodName:"_listen"}),null!=this.get_scene())switch(e){case"keyup":this.get_scene().on(e,n(this,this._keyup),{fileName:"Entity.hx",lineNumber:416,className:"luxe.Entity",methodName:"_listen"});break;case"keydown":this.get_scene().on(e,n(this,this._keydown),{fileName:"Entity.hx",lineNumber:417,className:"luxe.Entity",methodName:"_listen"});break;case"textinput":this.get_scene().on(e,n(this,this._textinput),{fileName:"Entity.hx",lineNumber:418,className:"luxe.Entity",methodName:"_listen"});break;case"mousedown":this.get_scene().on(e,n(this,this._mousedown),{fileName:"Entity.hx",lineNumber:420,className:"luxe.Entity",methodName:"_listen"});break;case"mouseup":this.get_scene().on(e,n(this,this._mouseup),{fileName:"Entity.hx",lineNumber:421,className:"luxe.Entity",methodName:"_listen"});break;case"mousemove":this.get_scene().on(e,n(this,this._mousemove),{fileName:"Entity.hx",lineNumber:422,className:"luxe.Entity",methodName:"_listen"});break;case"mousewheel":this.get_scene().on(e,n(this,this._mousewheel),{fileName:"Entity.hx",lineNumber:423,className:"luxe.Entity",methodName:"_listen"});break;case"touchdown":this.get_scene().on(e,n(this,this._touchdown),{fileName:"Entity.hx",lineNumber:425,className:"luxe.Entity",methodName:"_listen"});break;case"touchup":this.get_scene().on(e,n(this,this._touchup),{fileName:"Entity.hx",lineNumber:426,className:"luxe.Entity",methodName:"_listen"});break;case"touchmove":this.get_scene().on(e,n(this,this._touchmove),{fileName:"Entity.hx",lineNumber:427,className:"luxe.Entity",methodName:"_listen"});break;case"inputup":this.get_scene().on(e,n(this,this._inputup),{fileName:"Entity.hx",lineNumber:429,className:"luxe.Entity",methodName:"_listen"});break;case"inputdown":this.get_scene().on(e,n(this,this._inputdown),{fileName:"Entity.hx",lineNumber:430,className:"luxe.Entity",methodName:"_listen"});break;case"gamepaddown":this.get_scene().on(e,n(this,this._gamepaddown),{fileName:"Entity.hx",lineNumber:432,className:"luxe.Entity",methodName:"_listen"});break;case"gamepadup":this.get_scene().on(e,n(this,this._gamepadup),{fileName:"Entity.hx",lineNumber:433,className:"luxe.Entity",methodName:"_listen"});break;case"gamepadaxis":this.get_scene().on(e,n(this,this._gamepadaxis),{fileName:"Entity.hx",lineNumber:434,className:"luxe.Entity",methodName:"_listen"});break;case"gamepaddevice":this.get_scene().on(e,n(this,this._gamepaddevice),{fileName:"Entity.hx",lineNumber:435,className:"luxe.Entity",methodName:"_listen"})}},_unlisten:function(e,t){this.off(e,t,{fileName:"Entity.hx",lineNumber:444,className:"luxe.Entity",methodName:"_unlisten"})},_detach_scene:function(){null!=this.get_scene()&&(this.get_scene().off("reset",n(this,this._reset),{fileName:"Entity.hx",lineNumber:455,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("destroy",n(this,this.destroy),{fileName:"Entity.hx",lineNumber:456,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("keyup",n(this,this._keyup),{fileName:"Entity.hx",lineNumber:459,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("keydown",n(this,this._keydown),{fileName:"Entity.hx",lineNumber:460,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("textinput",n(this,this._textinput),{fileName:"Entity.hx",lineNumber:461,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("mousedown",n(this,this._mousedown),{fileName:"Entity.hx",lineNumber:462,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("mouseup",n(this,this._mouseup),{fileName:"Entity.hx",lineNumber:463,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("mousemove",n(this,this._mousemove),{fileName:"Entity.hx",lineNumber:464,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("mousewheel",n(this,this._mousewheel),{fileName:"Entity.hx",lineNumber:465,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("touchdown",n(this,this._touchdown),{fileName:"Entity.hx",lineNumber:466,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("touchup",n(this,this._touchup),{fileName:"Entity.hx",lineNumber:467,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("touchmove",n(this,this._touchmove),{fileName:"Entity.hx",lineNumber:468,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("inputup",n(this,this._inputup),{fileName:"Entity.hx",lineNumber:469,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("inputdown",n(this,this._inputdown),{fileName:"Entity.hx",lineNumber:470,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("gamepaddown",n(this,this._gamepaddown),{fileName:"Entity.hx",lineNumber:471,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("gamepadup",n(this,this._gamepadup),{fileName:"Entity.hx",lineNumber:472,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("gamepadaxis",n(this,this._gamepadaxis),{fileName:"Entity.hx",lineNumber:473,className:"luxe.Entity",methodName:"_detach_scene"}),this.get_scene().off("gamepaddevice",n(this,this._gamepaddevice),{fileName:"Entity.hx",lineNumber:474,className:"luxe.Entity",methodName:"_detach_scene"}))},_attach_scene:function(){null!=this.get_scene()&&(this.get_scene().on("reset",n(this,this._reset),{fileName:"Entity.hx",lineNumber:483,className:"luxe.Entity",methodName:"_attach_scene"}),this.get_scene().on("destroy",n(this,this.destroy),{fileName:"Entity.hx",lineNumber:484,className:"luxe.Entity",methodName:"_attach_scene"}))},_keyup:function(e){this.get_active()&&this.inited&&this.started&&(this.onkeyup(e),this.emit("keyup",e,{fileName:"Entity.hx",lineNumber:500,className:"luxe.Entity",methodName:"_keyup"}))},_keydown:function(e){this.get_active()&&this.inited&&this.started&&(this.onkeydown(e),this.emit("keydown",e,{fileName:"Entity.hx",lineNumber:513,className:"luxe.Entity",methodName:"_keydown"}))},_textinput:function(e){this.get_active()&&this.inited&&this.started&&(this.ontextinput(e),this.emit("textinput",e,{fileName:"Entity.hx",lineNumber:526,className:"luxe.Entity",methodName:"_textinput"}))},_mousedown:function(e){this.get_active()&&this.inited&&this.started&&(this.onmousedown(e),this.emit("mousedown",e,{fileName:"Entity.hx",lineNumber:542,className:"luxe.Entity",methodName:"_mousedown"}))},_mouseup:function(e){this.get_active()&&this.inited&&this.started&&(this.onmouseup(e),this.emit("mouseup",e,{fileName:"Entity.hx",lineNumber:556,className:"luxe.Entity",methodName:"_mouseup"}))},_mousewheel:function(e){this.get_active()&&this.inited&&this.started&&(this.onmousewheel(e),this.emit("mousewheel",e,{fileName:"Entity.hx",lineNumber:569,className:"luxe.Entity",methodName:"_mousewheel"}))},_mousemove:function(e){this.get_active()&&this.inited&&this.started&&(this.onmousemove(e),this.emit("mousemove",e,{fileName:"Entity.hx",lineNumber:582,className:"luxe.Entity",methodName:"_mousemove"}))},_touchdown:function(e){this.get_active()&&this.inited&&this.started&&(this.ontouchdown(e),this.emit("touchdown",e,{fileName:"Entity.hx",lineNumber:596,className:"luxe.Entity",methodName:"_touchdown"}))},_touchup:function(e){this.get_active()&&this.inited&&this.started&&(this.ontouchup(e),this.emit("touchup",e,{fileName:"Entity.hx",lineNumber:609,className:"luxe.Entity",methodName:"_touchup"}))},_touchmove:function(e){this.get_active()&&this.inited&&this.started&&(this.ontouchmove(e),this.emit("touchmove",e,{fileName:"Entity.hx",lineNumber:622,className:"luxe.Entity",methodName:"_touchmove"}))},_gamepadaxis:function(e){this.get_active()&&this.inited&&this.started&&(this.ongamepadaxis(e),this.emit("gamepadaxis",e,{fileName:"Entity.hx",lineNumber:636,className:"luxe.Entity",methodName:"_gamepadaxis"}))},_gamepaddown:function(e){this.get_active()&&this.inited&&this.started&&(this.ongamepaddown(e),this.emit("gamepaddown",e,{fileName:"Entity.hx",lineNumber:649,className:"luxe.Entity",methodName:"_gamepaddown"}))},_gamepadup:function(e){this.get_active()&&this.inited&&this.started&&(this.ongamepadup(e),this.emit("gamepadup",e,{fileName:"Entity.hx",lineNumber:662,className:"luxe.Entity",methodName:"_gamepadup"}))},_gamepaddevice:function(e){this.get_active()&&this.inited&&this.started&&(this.ongamepaddevice(e),this.emit("gamepaddevice",e,{fileName:"Entity.hx",lineNumber:675,className:"luxe.Entity",methodName:"_gamepaddevice"}))},_inputdown:function(e){this.get_active()&&this.inited&&this.started&&(this.oninputdown(e.name,e.event),this.emit("inputdown",e,{fileName:"Entity.hx",lineNumber:690,className:"luxe.Entity",methodName:"_inputdown"}))},_inputup:function(e){this.get_active()&&this.inited&&this.started&&(this.oninputup(e.name,e.event),this.emit("inputup",e,{fileName:"Entity.hx",lineNumber:703,className:"luxe.Entity",methodName:"_inputup"}))},get_fixed_rate:function(){return this.fixed_rate},set_fixed_rate:function(e){return this.fixed_rate=e,this._stop_fixed_rate_timer(),this._start_fixed_rate_timer(e),this.get_fixed_rate()},_stop_fixed_rate_timer:function(){null!=this.fixed_rate_timer&&(this.fixed_rate_timer.stop(),this.fixed_rate_timer=null)},_start_fixed_rate_timer:function(e){0==e||null!=this.get_parent()||this.destroyed||(this.fixed_rate_timer=new b.utils.Timer(e),this.fixed_rate_timer.run=n(this,this._fixed_update))},get_components:function(){return this._components.components},_add_child:function(e){if(this.children.push(e),null!=e.get_scene()){e.get_scene().remove(e)}},_remove_child:function(e){r.remove(this.children,e)},set_pos_from_transform:function(e){for(var t=function(e){var t,n=e.get_components();return t=n.iterator()}(this);t.hasNext();){var n=t.next();n.entity_pos_change(e)}},set_rotation_from_transform:function(e){for(var t=function(e){var t,n=e.get_components();return t=n.iterator()}(this);t.hasNext();){var n=t.next();n.entity_rotation_change(e)}},set_scale_from_transform:function(e){for(var t=function(e){var t,n=e.get_components();return t=n.iterator()}(this);t.hasNext();){var n=t.next();n.entity_scale_change(e)}},set_origin_from_transform:function(e){for(var t=function(e){var t,n=e.get_components();return t=n.iterator()}(this);t.hasNext();){var n=t.next();n.entity_origin_change(e)}},set_parent_from_transform:function(e){for(var t=function(e){var t,n=e.get_components();return t=n.iterator()}(this);t.hasNext();){var n=t.next();n.entity_parent_change(e)}},set_pos:function(e){return this.transform.set_pos(e)},get_pos:function(){return this.transform.get_pos()},set_rotation:function(e){return this.transform.set_rotation(e)},get_rotation:function(){return this.transform.get_rotation()},set_scale:function(e){return this.transform.set_scale(e)},get_scale:function(){return this.transform.get_scale()},set_origin:function(e){return this.transform.set_origin(e)},get_origin:function(){return this.transform.get_origin()},set_parent:function(e){return null!=this.get_parent()&&this.get_parent()._remove_child(this),this.parent=e,null!=this.get_parent()?(this.get_parent()._add_child(this),this.transform.set_parent(this.get_parent().transform)):this.transform.set_parent(null),this.get_parent()},get_parent:function(){return this.parent},set_scene:function(e){return this._detach_scene(),this.scene=e,this._attach_scene(),this.get_scene()},get_scene:function(){return this.scene},set_active:function(e){return this.active=e},get_active:function(){return this.active},__class__:_.Entity,__properties__:{set_origin:"set_origin",get_origin:"get_origin",set_scale:"set_scale",get_scale:"get_scale",set_rotation:"set_rotation",get_rotation:"get_rotation",set_pos:"set_pos",get_pos:"get_pos",set_active:"set_active",get_active:"get_active",set_scene:"set_scene",get_scene:"get_scene",set_parent:"set_parent",get_parent:"get_parent",set_fixed_rate:"set_fixed_rate",get_fixed_rate:"get_fixed_rate",get_components:"get_components"}}),_.Camera=function(e){this.minimum_shake=.1,this.shaking=!1,this._rotation_radian=new x.Vector,this._rotation_cache=new x.Quaternion;var t="untitled camera";null!=e?null!=e.name&&(t=e.name):e={no_scene:!1},_.Entity.call(this,{name:t,no_scene:e.no_scene}),this.view=null==e.view?new x.Camera(e):e.view,this._final_pos=this.view.get_pos()},_.Camera.__name__=!0,_.Camera.__super__=_.Entity,_.Camera.prototype=e(_.Entity.prototype,{view:null,bounds:null,shake_vector:null,shake_amount:null,shaking:null,minimum_shake:null,update_view_pos:null,_final_pos:null,_rotation_radian:null,_rotation_cache:null,get_viewport:function(){return this.view.get_viewport()},set_viewport:function(e){return this.view.set_viewport(e)},get_center:function(){return this.view.get_center()},set_center:function(e){return this.set_pos(new x.Vector(e.x-this.get_viewport().w/2,e.y-this.get_viewport().h/2)),this.view.set_center(e)},get_minimum_zoom:function(){return this.view.minimum_zoom},set_minimum_zoom:function(e){return this.view.minimum_zoom=e},get_zoom:function(){return this.view.zoom},set_zoom:function(e){return this.view.set_zoom(e)},focus:function(e,t,n){null==t&&(t=.6);var i=this;_.tween.Actuate.tween(this.view.get_center(),t,{x:e.x,y:e.y},!0).onComplete(n).ease(_.tween.easing.Quad.get_easeInOut()).onUpdate(function(){i.set_pos(i.view.get_pos().clone()),i._final_pos.set_xyz(i.get_pos().x,i.get_pos().y,i.get_pos().z)})},screen_point_to_world:function(e){return this.view.screen_point_to_world(e)},world_point_to_screen:function(e,t){return this.view.world_point_to_screen(e,t)},set_pos_from_transform:function(e){_.Entity.prototype.set_pos_from_transform.call(this,e),null!=this.bounds&&(e.x<this.bounds.x&&e.set_x(this.bounds.x),e.y<this.bounds.y&&e.set_y(this.bounds.y),e.x>this.bounds.w-this.view.get_viewport().w&&e.set_x(this.bounds.w-this.view.get_viewport().w),e.y>this.bounds.h-this.view.get_viewport().h&&e.set_y(this.bounds.h-this.view.get_viewport().h)),this.update_view_pos=e},set_rotation_from_transform:function(e){_.Entity.prototype.set_rotation_from_transform.call(this,e),null!=this.view&&this.view.set_rotation(e)},set_scale_from_transform:function(e){_.Entity.prototype.set_scale_from_transform.call(this,e),null!=this.view&&this.view.set_scale(e)},shake:function(e){this.shake_amount=e,this.shaking=!0},update:function(){if(this.shaking){this._final_pos.set_xyz(this.transform.get_pos().x,this.transform.get_pos().y,this.transform.get_pos().z),this.shake_vector=l.utils.geometry.random_point_in_unit_circle();var e=this.shake_vector;e.set_x(e.x*this.shake_amount);var t=this.shake_vector;t.set_y(t.y*this.shake_amount);var n=this.shake_vector;n.set_z(n.z*this.shake_amount),this.shake_amount*=.9,this.shake_amount<=this.minimum_shake&&(this.shake_amount=0,this.shaking=!1),this._final_pos.set_xyz(this._final_pos.x+this.shake_vector.x,this._final_pos.y+this.shake_vector.y,this._final_pos.z+this.shake_vector.z),this.update_view_pos=this._final_pos}null!=this.update_view_pos&&null!=this.view&&(this.view.set_pos(this.update_view_pos.clone()),this.update_view_pos=null)},__class__:_.Camera,__properties__:e(_.Entity.prototype.__properties__,{set_minimum_zoom:"set_minimum_zoom",get_minimum_zoom:"get_minimum_zoom",set_zoom:"set_zoom",get_zoom:"get_zoom",set_center:"set_center",get_center:"get_center",set_viewport:"set_viewport",get_viewport:"get_viewport"})}),_.ID=function(e,t){null==t&&(t=""),null==e&&(e=""),this.name="",this.name=e,this.id=""==t?l.utils.uniqueid():t},_.ID.__name__=!0,_.ID.prototype={id:null,name:null,__class__:_.ID},_.Component=function(e){var t="";null!=e&&null!=e.name&&(t=e.name),_.ID.call(this,""==t?l.utils.uniqueid():t)},_.Component.__name__=!0,_.Component.__super__=_.ID,_.Component.prototype=e(_.ID.prototype,{entity:null,init:function(){},update:function(){},onadded:function(){},onremoved:function(){},onreset:function(){},ondestroy:function(){},onfixedupdate:function(){},onkeyup:function(){},onkeydown:function(){},onmousedown:function(){},onmouseup:function(){},onmousemove:function(){},onmousewheel:function(){},ontouchdown:function(){},ontouchup:function(){},ontouchmove:function(){},ongamepadup:function(){},ongamepaddown:function(){},ongamepadaxis:function(){},ongamepaddevice:function(){},add:function(e){this.get_entity().add(e)},remove:function(e){return this.get_entity().remove(e)},get:function(e,t){return null==t&&(t=!1),this.get_entity().get(e,t)},get_any:function(e,t,n){return null==n&&(n=!0),null==t&&(t=!1),this.get_entity().get_any(e,t,n)},_detach_entity:function(){null!=this.get_entity()},_attach_entity:function(){null!=this.get_entity()},set_entity:function(e){return this._detach_entity(),this.entity=e,this._attach_entity(),this.get_entity()},get_entity:function(){return this.entity},set_pos:function(e){return this.get_entity().transform.set_pos(e)},get_pos:function(){return this.get_entity().transform.get_pos()},set_rotation:function(e){return this.get_entity().transform.set_rotation(e)},get_rotation:function(){return this.get_entity().transform.get_rotation()},set_scale:function(e){return this.get_entity().transform.set_scale(e)},get_scale:function(){return this.get_entity().transform.get_scale()},set_origin:function(e){return this.get_entity().transform.set_origin(e)},get_origin:function(){return this.get_entity().transform.get_origin()},set_transform:function(e){return this.get_entity().transform=e},get_transform:function(){return this.get_entity().transform},entity_pos_change:function(){},entity_scale_change:function(){},entity_rotation_change:function(){},entity_origin_change:function(){},entity_parent_change:function(){},__class__:_.Component,__properties__:{set_transform:"set_transform",get_transform:"get_transform",set_origin:"set_origin",get_origin:"get_origin",set_scale:"set_scale",get_scale:"get_scale",set_rotation:"set_rotation",get_rotation:"get_rotation",set_pos:"set_pos",get_pos:"get_pos",set_entity:"set_entity",get_entity:"get_entity"}});var b={};b.App=function(){this.next_render=0,this.next_tick=0,this.alpha=1,this.cur_frame_start=0,this.current_time=0,this.last_frame_start=0,this.delta_sim=.016666666666666666,this.delta_time=.016666666666666666,this.max_frame_time=.25,this.update_rate=0,this.render_rate=.016666666666666666,this.fixed_delta=0,this.timescale=1},b.App.__name__=!0,b.App.prototype={app:null,timescale:null,fixed_delta:null,render_rate:null,update_rate:null,max_frame_time:null,delta_time:null,delta_sim:null,last_frame_start:null,current_time:null,cur_frame_start:null,alpha:null,next_tick:null,next_render:null,config:function(e){return e},ready:function(){},update:function(){},destroyed:function(){},on_event:function(){},onkeydown:function(){},onkeyup:function(){},ontextinput:function(){},onmousedown:function(){},onmouseup:function(){},onmousewheel:function(){},onmousemove:function(){},ontouchdown:function(){},ontouchup:function(){},ontouchmove:function(){},ongamepadaxis:function(){},ongamepaddown:function(){},ongamepadup:function(){},ongamepaddevice:function(){},on_internal_init:function(){this.cur_frame_start=b.Snow.core.timestamp(),this.last_frame_start=this.cur_frame_start,this.current_time=0,this.delta_time=.016},on_internal_update:function(){if(0!=this.update_rate){if(!(this.next_tick<b.Snow.core.timestamp()))return;this.next_tick=b.Snow.core.timestamp()+this.update_rate}this.cur_frame_start=b.Snow.core.timestamp(),this.delta_time=this.cur_frame_start-this.last_frame_start,this.last_frame_start=this.cur_frame_start;var e;e=0==this.fixed_delta?this.delta_time:this.fixed_delta,e*=this.timescale,this.delta_sim=e,this.current_time+=e,this.app.do_internal_update(e),0!=this.render_rate&&this.next_render<b.Snow.core.timestamp()&&(this.app.render(),this.next_render+=this.render_rate)},__class__:b.App},_.Core=function(e){this.has_inited=!1,this.has_shutdown=!1,this.shutting_down=!1,this.headless=!1,this.console_visible=!1,b.App.call(this),this.game=e,this.game.app=this,this.emitter=new _.Emitter,this._mouse_pos=new x.Vector,this._touch_pos=new x.Vector,l.mouse=this._mouse_pos,l.core=this,l.utils=new _.utils.Utils(this)},_.Core.__name__=!0,_.Core.__super__=b.App,_.Core.prototype=e(b.App.prototype,{game:null,console_visible:null,headless:null,emitter:null,debug:null,draw:null,timer:null,events:null,input:null,audio:null,scene:null,renderer:null,screen:null,physics:null,_mouse_pos:null,_touch_pos:null,shutting_down:null,has_shutdown:null,has_inited:null,ready:function(){l.version=w.Resource.getString("version"),l.build=l.version+w.Resource.getString("build"),w.Log.trace("     i / luxe / version "+l.build,{fileName:"Core.hx",lineNumber:139,className:"luxe.Core",methodName:"ready"}),this.init(),this.game.ready(),this.emitter.emit("init",null,{fileName:"Core.hx",lineNumber:153,className:"luxe.Core",methodName:"ready"}),this.has_inited=!0,this.physics.reset(),this.app.snow_config.has_loop||this.shutdown()},init:function(){this.debug=new _.Debug(this),l.debug=this.debug,this.draw=new _.Draw(this),this.timer=new _.Timer(this),this.events=new _.Events,this.audio=new _.Audio(this),this.input=new _.Input(this),this.physics=new _.Physics(this),null==this.app.window&&(this.headless=!0),this.headless||(this.renderer=new x.Renderer(this),l.renderer=this.renderer);var e=0,t=0;null!=this.app.window&&(e=this.app.window.width,t=this.app.window.height),this.screen=new _.Screen(this,0,0,e,t),this.debug.init(),this.timer.init(),this.audio.init(),this.input.init(),this.headless||this.renderer.init(),this.physics.init(),l.audio=this.audio,l.draw=this.draw,l.events=this.events,l.timer=this.timer,l.input=this.input,this.headless||(l.camera=new _.Camera({name:"default camera",view:this.renderer.camera}),l.resources=this.renderer.resource_manager),l.physics=this.physics,this.scene=new _.Scene("default scene"),l.scene=this.scene,this.headless||(this.scene.add(l.camera),this.debug.create_debug_console()),null==this.app.window||this.headless||(this.app.window.onrender=n(this,this.render),this.debug.start(_.Core.core_tag_update),this.debug.start(_.Core.core_tag_renderdt))},shutdown:function(){this.shutting_down=!0,this.game.ondestroy(),this.emitter.emit("destroy",null,{fileName:"Core.hx",lineNumber:269,className:"luxe.Core",methodName:"shutdown"}),null!=this.renderer&&this.renderer.destroy(),this.physics.destroy(),this.input.destroy(),this.audio.destroy(),this.timer.destroy(),this.events.destroy(),this.debug.destroy(),this.emitter=null,this.input=null,this.audio=null,this.events=null,this.timer=null,this.debug=null,l.utils=null,this.has_shutdown=!0,this.app.shutdown()},on:function(e,t){this.emitter.on(e,t,{fileName:"Core.hx",lineNumber:303,className:"luxe.Core",methodName:"on"})},off:function(e,t){return this.emitter.off(e,t,{fileName:"Core.hx",lineNumber:307,className:"luxe.Core",methodName:"off"})},emit:function(e,t){return this.emitter.emit(e,t,{fileName:"Core.hx",lineNumber:311,className:"luxe.Core",methodName:"emit"})},update:function(e){this.has_shutdown||(this.debug.end(_.Core.core_tag_update),this.debug.start(_.Core.core_tag_update),this.timer.process(),this.input.process(),this.audio.process(),this.events.process(),this.physics.process(),this.process_loading_thread(),this.emitter.emit("update",e,{fileName:"Core.hx",lineNumber:353,className:"luxe.Core",methodName:"update"}),this.debug.start(_.Core.game_tag_update),this.game.update(e),this.debug.end(_.Core.game_tag_update),this.debug.process())},render:function(){this.shutting_down||(this.debug.end(_.Core.core_tag_renderdt),this.debug.start(_.Core.core_tag_renderdt),this.headless||(this.debug.start(_.Core.core_tag_render),this.emitter.emit("prerender",null,{fileName:"Core.hx",lineNumber:381,className:"luxe.Core",methodName:"render"}),this.game.onprerender(),this.emitter.emit("render",null,{fileName:"Core.hx",lineNumber:384,className:"luxe.Core",methodName:"render"}),this.game.onrender(),this.renderer.process(),this.emitter.emit("postrender",null,{fileName:"Core.hx",lineNumber:388,className:"luxe.Core",methodName:"render"}),this.game.onpostrender(),this.debug.end(_.Core.core_tag_render)))},show_console:function(e){null==e&&(e=!0),this.console_visible=e,this.debug.show_console(this.console_visible)},onkeydown:function(e,t,n,i,s,r){var o={scancode:t,keycode:e,state:_.InteractState.down,mod:i,repeat:n,timestamp:s,window_id:r};this.shutting_down||(this.input.check_named_keys(o,!0),this.emitter.emit("keydown",o,{fileName:"Core.hx",lineNumber:437,className:"luxe.Core",methodName:"onkeydown"}),this.game.onkeydown(o),t==b.input.Scancodes.grave&&this.show_console(!this.console_visible))},onkeyup:function(e,t,n,i,s,r){var o={scancode:t,keycode:e,state:_.InteractState.up,mod:i,repeat:n,timestamp:s,window_id:r};this.shutting_down||(this.input.check_named_keys(o),this.emitter.emit("keyup",o,{fileName:"Core.hx",lineNumber:465,className:"luxe.Core",methodName:"onkeyup"}),this.game.onkeyup(o))
},ontextinput:function(e,t,n,i,s,r){var o=_.TextEventType.unknown;switch(i[1]){case 0:o=_.TextEventType.edit;break;case 1:o=_.TextEventType.input}var a={text:e,start:t,length:n,type:o,timestamp:s,window_id:r};this.shutting_down||(this.emitter.emit("textinput",a,{fileName:"Core.hx",lineNumber:493,className:"luxe.Core",methodName:"ontextinput"}),this.game.ontextinput(a))},oninputdown:function(e,t){this.shutting_down||(this.emitter.emit("inputdown",{name:e,event:t},{fileName:"Core.hx",lineNumber:507,className:"luxe.Core",methodName:"oninputdown"}),this.game.oninputdown(e,t))},oninputup:function(e,t){this.shutting_down||(this.emitter.emit("inputup",{name:e,event:t},{fileName:"Core.hx",lineNumber:519,className:"luxe.Core",methodName:"oninputup"}),this.game.oninputup(e,t))},mouse_button_from_number:function(e){switch(e){case 1:return _.MouseButton.left;case 2:return _.MouseButton.middle;case 3:return _.MouseButton.right;case 4:return _.MouseButton.extra1;case 5:return _.MouseButton.extra2;default:return _.MouseButton.none}return _.MouseButton.none},onmousedown:function(e,t,n,i,s){this._mouse_pos=new x.Vector(e,t),l.mouse=this._mouse_pos;var r={timestamp:i,window_id:s,state:_.InteractState.down,button:this.mouse_button_from_number(n),x:e,y:t,xrel:e,yrel:t,pos:this._mouse_pos};this.shutting_down||(this.input.check_named_mouse(r,!0),this.emitter.emit("mousedown",r,{fileName:"Core.hx",lineNumber:566,className:"luxe.Core",methodName:"onmousedown"}),this.game.onmousedown(r))},onmouseup:function(e,t,n,i,s){this._mouse_pos=new x.Vector(e,t),l.mouse=this._mouse_pos;var r={timestamp:i,window_id:s,state:_.InteractState.up,button:this.mouse_button_from_number(n),x:e,y:t,xrel:e,yrel:t,pos:this._mouse_pos};this.shutting_down||(this.input.check_named_mouse(r),this.emitter.emit("mouseup",r,{fileName:"Core.hx",lineNumber:593,className:"luxe.Core",methodName:"onmouseup"}),this.game.onmouseup(r))},onmousemove:function(e,t,n,i,s,r){this._mouse_pos=new x.Vector(e,t),l.mouse=this._mouse_pos;var o={timestamp:s,window_id:r,state:_.InteractState.move,button:_.MouseButton.none,x:e,y:t,xrel:n,yrel:i,pos:this._mouse_pos};this.shutting_down||(this.emitter.emit("mousemove",o,{fileName:"Core.hx",lineNumber:619,className:"luxe.Core",methodName:"onmousemove"}),this.game.onmousemove(o))},onmousewheel:function(e,t,n,i){var s={timestamp:n,window_id:i,state:_.InteractState.wheel,button:_.MouseButton.none,x:e,y:t,xrel:e,yrel:t,pos:this._mouse_pos};this.shutting_down||(this.input.check_named_mouse(s,!1),this.emitter.emit("mousewheel",s,{fileName:"Core.hx",lineNumber:643,className:"luxe.Core",methodName:"onmousewheel"}),this.game.onmousewheel(s))},ontouchdown:function(e,t,n,i){this._touch_pos=new x.Vector(e,t);var s={state:_.InteractState.down,timestamp:i,touch_id:n,x:e,y:t,dx:e,dy:t,pos:this._touch_pos};this.shutting_down||(this.emitter.emit("touchdown",s,{fileName:"Core.hx",lineNumber:669,className:"luxe.Core",methodName:"ontouchdown"}),this.game.ontouchdown(s),2==n&&this.console_visible&&this.debug.switch_view(),3==n&&this.show_console(!this.console_visible))},ontouchup:function(e,t,n,i){this._touch_pos=new x.Vector(e,t);var s={state:_.InteractState.up,timestamp:i,touch_id:n,x:e,y:t,dx:e,dy:t,pos:this._touch_pos};this.shutting_down||(this.emitter.emit("touchup",s,{fileName:"Core.hx",lineNumber:706,className:"luxe.Core",methodName:"ontouchup"}),this.game.ontouchup(s))},ontouchmove:function(e,t,n,i,s,r){this._touch_pos=new x.Vector(e,t);var o={state:_.InteractState.move,timestamp:r,touch_id:s,x:e,y:t,dx:n,dy:i,pos:this._touch_pos};this.shutting_down||(this.emitter.emit("touchmove",o,{fileName:"Core.hx",lineNumber:730,className:"luxe.Core",methodName:"ontouchmove"}),this.game.ontouchmove(o))},ongamepadaxis:function(e,t,n,i){var s={timestamp:i,type:_.GamepadEventType.axis,state:_.InteractState.axis,gamepad:e,button:-1,axis:t,value:n};this.shutting_down||(this.emitter.emit("gamepadaxis",s,{fileName:"Core.hx",lineNumber:753,className:"luxe.Core",methodName:"ongamepadaxis"}),this.game.ongamepadaxis(s))},ongamepaddown:function(e,t,n,i){var s={timestamp:i,type:_.GamepadEventType.button,state:_.InteractState.down,gamepad:e,button:t,axis:-1,value:n};this.shutting_down||(this.emitter.emit("gamepaddown",s,{fileName:"Core.hx",lineNumber:774,className:"luxe.Core",methodName:"ongamepaddown"}),this.game.ongamepaddown(s))},ongamepadup:function(e,t,n,i){var s={timestamp:i,type:_.GamepadEventType.button,state:_.InteractState.up,gamepad:e,button:t,axis:-1,value:n};this.shutting_down||(this.emitter.emit("gamepadup",s,{fileName:"Core.hx",lineNumber:795,className:"luxe.Core",methodName:"ongamepadup"}),this.game.ongamepadup(s))},ongamepaddevice:function(e,t,n){var i=_.GamepadEventType.unknown;switch(t[1]){case 0:i=_.GamepadEventType.device_added;break;case 1:i=_.GamepadEventType.device_removed;break;case 2:i=_.GamepadEventType.device_remapped}var s={timestamp:n,type:i,state:_.InteractState.none,gamepad:e,button:-1,axis:-1,value:0};this.shutting_down||this.game.ongamepaddevice(s)},config:function(e){return e.window.title="luxe app",this.game.config(e)},process_loading_thread:function(){},__class__:_.Core}),_.Debug=function(e){this.last_cursor_grab=!1,this.last_cursor_shown=!0,this.profiling=!1,this.profile_path="profile.txt",this.started=!1,this.last_view_index=0,this.current_view_index=0,this.dt_average_count=0,this.dt_average_span=60,this.dt_average_accum=0,this.dt_average=0,this.visible=!1,this.core=e},_.Debug.__name__=!0,_.Debug.internal_trace=function(e,t){var n=g.rpad(null==t.lineNumber?"null":""+t.lineNumber," ",4);if(console.log(""+t.fileName+"::"+n+" "+m.string(e)),!_.Debug.shut_down)for(var i=_.Debug.trace_callbacks.iterator();i.hasNext();){var s=i.next();s(e,t)}},_.Debug.prototype={core:null,visible:null,debug_inspector:null,overlay:null,batcher:null,view:null,debug_font:null,dt_average:null,dt_average_accum:null,dt_average_span:null,dt_average_count:null,current_view_index:null,last_view_index:null,current_view:null,padding:null,started:null,profile_path:null,profiling:null,init:function(){_.Debug.trace_callbacks=new w.ds.StringMap,_.Debug.views=[],this.current_view=_.Debug.views[0],w.Log.trace=_.Debug.internal_trace},start:function(){},end:function(){},remove_trace_listener:function(e){_.Debug.trace_callbacks.remove(e)},add_trace_listener:function(e,t){_.Debug.trace_callbacks.set(e,t)},create_debug_console:function(){},mouseup:function(e){if(this.visible)for(var t=0,n=_.Debug.views;t<n.length;){var i=n[t];++t,i.onmouseup(e)}},mousedown:function(e){if(this.visible)for(var t=0,n=_.Debug.views;t<n.length;){var i=n[t];++t,i.onmousedown(e)}},mousewheel:function(e){if(this.visible)for(var t=0,n=_.Debug.views;t<n.length;){var i=n[t];++t,i.onmousewheel(e)}},mousemove:function(e){if(this.visible)for(var t=0,n=_.Debug.views;t<n.length;){var i=n[t];++t,i.onmousemove(e)}},keyup:function(e){if(this.visible)for(var t=0,n=_.Debug.views;t<n.length;){var i=n[t];++t,i.onkeyup(e)}},keydown:function(e){if(this.visible){e.keycode==b.input.Keycodes.key_1&&this.core.console_visible&&this.switch_view();for(var t=0,n=_.Debug.views;t<n.length;){var i=n[t];++t,i.onkeydown(e)}}},onresize:function(){this.view.set_viewport(new x.Rectangle(0,0,l.get_screen().w,l.get_screen().h))},refresh:function(){this.current_view.refresh()},switch_view:function(){this.last_view_index=this.current_view_index,this.current_view_index++,this.current_view_index>_.Debug.views.length-1&&(this.current_view_index=0),_.Debug.views[this.last_view_index].hide(),this.current_view=_.Debug.views[this.current_view_index],this.current_view.show()},last_cursor_shown:null,last_cursor_grab:null,show_console:function(e){null==e&&(e=!0)},destroy:function(){this.core.off("keyup",n(this,this.keyup)),this.core.off("keydown",n(this,this.keydown)),this.core.off("mouseup",n(this,this.mouseup)),this.core.off("mousedown",n(this,this.mousedown)),this.core.off("mousemove",n(this,this.mousemove)),_.Debug.shut_down=!0},process:function(){if(this.dt_average_accum+=l.get_dt(),this.dt_average_count++,this.dt_average_count==this.dt_average_span-1&&(this.dt_average=this.dt_average_accum/this.dt_average_span,this.dt_average_accum=this.dt_average,this.dt_average_count=0),this.visible){this.debug_inspector._title_text.set_text("[ "+this.current_view.name+" ] "+_.utils.Maths.fixed(l.get_dt(),5)+" / "+_.utils.Maths.fixed(this.dt_average,5));for(var e=0,t=_.Debug.views;e<t.length;){var n=t[e];++e,n.process()}}},__class__:_.Debug},_.Draw=function(e){this.core=e},_.Draw.__name__=!0,_.Draw.prototype={line:function(e){if(null==e.p0)throw"draw.line requires p0:Vector, and p1:Vector";if(null==e.p1)throw"draw.line requires p0:Vector, and p1:Vector";return null==e.id&&(e.id="line.geometry"),null==e.batcher&&(e.batcher=l.renderer.batcher),new x.geometry.LineGeometry(e)},rectangle:function(e){return null==e.id&&(e.id="rectangle.geometry"),null==e.batcher&&(e.batcher=l.renderer.batcher),new x.geometry.RectangleGeometry(e)},box:function(e){return null==e.id&&(e.id="quad.geometry"),null==e.batcher&&(e.batcher=l.renderer.batcher),new x.geometry.QuadGeometry(e)},ring:function(e){return null==e.id&&(e.id="ring.geometry"),null==e.batcher&&(e.batcher=l.renderer.batcher),new x.geometry.RingGeometry(e)},circle:function(e){return null==e.id&&(e.id="circle.geometry"),null==e.batcher&&(e.batcher=l.renderer.batcher),new x.geometry.CircleGeometry(e)},arc:function(e){return null==e.id&&(e.id="arc.geometry"),null==e.batcher&&(e.batcher=l.renderer.batcher),new x.geometry.ArcGeometry(e)},ngon:function(e){null==e.id&&(e.id="ngon.geometry"),null==e.batcher&&(e.batcher=l.renderer.batcher);var t=3,n=64,i=!1,s=0,r=0,o=0;null!=e.sides&&(t=e.sides),null!=e.r&&(n=e.r),null!=e.x&&(s=e.x),null!=e.y&&(r=e.y),null!=e.angle&&(o=e.angle),null!=e.solid&&(i=e.solid);var a=new x.geometry.Geometry(e);a.set_primitive_type(i?x.PrimitiveType.triangle_fan:x.PrimitiveType.lines);var u=2*Math.PI,_=Math.PI/t,h=u/t,c=.017453292519943278*o;i&&a.add(new x.geometry.Vertex(new x.Vector(s,r),e.color));var p;p=0==i?t:t+1;for(var d=[],m=0;p>m;){var f=m++,g=n*Math.sin(c+_+f*h),y=n*Math.cos(c+_+f*h),w=new x.Vector(s+g,r+y,0);if(a.add(new x.geometry.Vertex(w,e.color)),!i&&f>0){{d[f-1]}a.add(new x.geometry.Vertex(w,e.color))}d.push(w)}return i||a.add(new x.geometry.Vertex(d[0],e.color)),a},texture:function(e){null==e.id&&(e.id="texture.geometry"),null==e.batcher&&(e.batcher=l.renderer.batcher);var t=0,n=0,i=0,s=0,r=64,o=64;null!=e.texture&&(r=e.texture.width,o=e.texture.height,null==e.size&&(i=r,s=o)),null!=e.pos&&(t=e.pos.x,n=e.pos.y),null!=e.size&&(i=e.size.x,s=e.size.y),null==e.x&&(e.x=t),null==e.y&&(e.y=n),null==e.w&&(e.w=i),null==e.h&&(e.h=s);var a=new x.geometry.QuadGeometry(e),u=0,_=0,h=r,c=o;return null!=e.uv&&(u=e.uv.x,_=e.uv.y,h=e.uv.w,c=e.uv.h),a.uv(new x.Rectangle(u,_,h,c)),a},text:function(e){null==e.id&&(e.id="text.geometry"),null==e.font&&(e.font=l.renderer.font),null==e.batcher&&(e.batcher=l.renderer.batcher);var t=e.font.draw_text(e);return t},plane:function(e){return null==e.id&&(e.id="plane.geometry"),null==e.batcher&&(e.batcher=l.renderer.batcher),new x.geometry.PlaneGeometry(e)},core:null,__class__:_.Draw},_.Events=function(){this.event_connections=new w.ds.StringMap,this.event_slots=new w.ds.StringMap,this.event_filters=new w.ds.StringMap,this.event_queue=new w.ds.StringMap,this.event_schedules=new w.ds.StringMap},_.Events.__name__=!0,_.Events.prototype={event_queue:null,event_connections:null,event_slots:null,event_filters:null,event_schedules:null,destroy:function(){this.clear()},clear:function(){for(var e=this.event_schedules.iterator();e.hasNext();){var t=e.next();t.stop(),t=null}for(var n=this.event_connections.keys();n.hasNext();){var i=n.next();this.event_connections.remove(i)}for(var s=this.event_filters.keys();s.hasNext();){var r=s.next();this.event_filters.remove(r)}for(var o=this.event_slots.keys();o.hasNext();){var a=o.next();this.event_slots.remove(a)}for(var l=this.event_queue.keys();l.hasNext();){var u=l.next();this.event_queue.remove(u)}},does_filter_event:function(e,t){var n=new s("\\*","gi"),i=n.replace(e,".*?"),r=new s(i,"gi");return r.match(t)},listen:function(e,t){var n=l.utils.uniqueid(),i=new _._Events.EventConnection(n,e,t);this.event_connections.set(n,i);var r=new s("\\*","gi");if(r.match(e)){if(!this.event_filters.exists(e)){var o=new Array;this.event_filters.set(e,o)}this.event_filters.get(e).push(i)}else{if(!this.event_slots.exists(e)){var a=new Array;this.event_slots.set(e,a)}this.event_slots.get(e).push(i)}return n},disconnect:function(e){if(this.event_connections.exists(e)){var t=this.event_connections.get(e),n=this.event_slots.get(t.event_name);if(null!=n)return r.remove(n,t),!0;var i=this.event_filters.get(t.event_name);return null!=i?(r.remove(i,t),!0):!1}return!1},queue:function(e,t){var n=l.utils.uniqueid(),i=new _._Events.EventObject(n,e,t);return this.event_queue.set(n,i),n},dequeue:function(e){if(this.event_queue.exists(e)){var t=this.event_queue.get(e);return t=null,this.event_queue.remove(e),!0}return!1},process:function(){for(var e=this.event_queue.iterator();e.hasNext();){var t=e.next();this.fire(t.name,t.properties)}this.event_queue.keys().hasNext()&&(this.event_queue=null,this.event_queue=new w.ds.StringMap)},fire:function(e,t){for(var n=this.event_filters.iterator();n.hasNext();){var i=n.next();if(i.length>0){var s=i[0].event_name;if(this.does_filter_event(s,e)){t=this.tag_properties(t,e,i.length);for(var r=0;r<i.length;){var o=i[r];++r,o.listener(t)}}}}if(!this.event_slots.exists(e))return!1;for(var a=this.event_slots.get(e),l=0;l<a.length;){var u=a[l];++l,u.listener(t)}return!1},schedule:function(e,t,n){var i=this,s=l.utils.uniqueid(),r=l.timer.schedule(e,function(){i.fire(t,n)});return this.event_schedules.set(s,r),s},unschedule:function(e){if(this.event_schedules.exists(e)){var t=this.event_schedules.get(e);return t.stop(),this.event_schedules.remove(e),!0}return!1},tag_properties:function(e,t,n){return null==e&&(e={}),e._event_name_=t,e._event_connection_count_=n,e},__class__:_.Events},_._Events={},_._Events.EventConnection=function(e,t,n){this.id=e,this.listener=n,this.event_name=t},_._Events.EventConnection.__name__=!0,_._Events.EventConnection.prototype={listener:null,id:null,event_name:null,__class__:_._Events.EventConnection},_._Events.EventObject=function(e,t,n){this.id=e,this.name=t,this.properties=n},_._Events.EventObject.__name__=!0,_._Events.EventObject.prototype={id:null,name:null,properties:null,__class__:_._Events.EventObject},_.MouseButton={__ename__:!0,__constructs__:["none","left","middle","right","extra1","extra2"]},_.MouseButton.none=["none",0],_.MouseButton.none.toString=i,_.MouseButton.none.__enum__=_.MouseButton,_.MouseButton.left=["left",1],_.MouseButton.left.toString=i,_.MouseButton.left.__enum__=_.MouseButton,_.MouseButton.middle=["middle",2],_.MouseButton.middle.toString=i,_.MouseButton.middle.__enum__=_.MouseButton,_.MouseButton.right=["right",3],_.MouseButton.right.toString=i,_.MouseButton.right.__enum__=_.MouseButton,_.MouseButton.extra1=["extra1",4],_.MouseButton.extra1.toString=i,_.MouseButton.extra1.__enum__=_.MouseButton,_.MouseButton.extra2=["extra2",5],_.MouseButton.extra2.toString=i,_.MouseButton.extra2.__enum__=_.MouseButton,_.InteractState={__ename__:!0,__constructs__:["unknown","none","down","up","move","wheel","axis"]},_.InteractState.unknown=["unknown",0],_.InteractState.unknown.toString=i,_.InteractState.unknown.__enum__=_.InteractState,_.InteractState.none=["none",1],_.InteractState.none.toString=i,_.InteractState.none.__enum__=_.InteractState,_.InteractState.down=["down",2],_.InteractState.down.toString=i,_.InteractState.down.__enum__=_.InteractState,_.InteractState.up=["up",3],_.InteractState.up.toString=i,_.InteractState.up.__enum__=_.InteractState,_.InteractState.move=["move",4],_.InteractState.move.toString=i,_.InteractState.move.__enum__=_.InteractState,_.InteractState.wheel=["wheel",5],_.InteractState.wheel.toString=i,_.InteractState.wheel.__enum__=_.InteractState,_.InteractState.axis=["axis",6],_.InteractState.axis.toString=i,_.InteractState.axis.__enum__=_.InteractState,_.TextEventType={__ename__:!0,__constructs__:["unknown","edit","input"]},_.TextEventType.unknown=["unknown",0],_.TextEventType.unknown.toString=i,_.TextEventType.unknown.__enum__=_.TextEventType,_.TextEventType.edit=["edit",1],_.TextEventType.edit.toString=i,_.TextEventType.edit.__enum__=_.TextEventType,_.TextEventType.input=["input",2],_.TextEventType.input.toString=i,_.TextEventType.input.__enum__=_.TextEventType,_.GamepadEventType={__ename__:!0,__constructs__:["unknown","axis","button","device_added","device_removed","device_remapped"]},_.GamepadEventType.unknown=["unknown",0],_.GamepadEventType.unknown.toString=i,_.GamepadEventType.unknown.__enum__=_.GamepadEventType,_.GamepadEventType.axis=["axis",1],_.GamepadEventType.axis.toString=i,_.GamepadEventType.axis.__enum__=_.GamepadEventType,_.GamepadEventType.button=["button",2],_.GamepadEventType.button.toString=i,_.GamepadEventType.button.__enum__=_.GamepadEventType,_.GamepadEventType.device_added=["device_added",3],_.GamepadEventType.device_added.toString=i,_.GamepadEventType.device_added.__enum__=_.GamepadEventType,_.GamepadEventType.device_removed=["device_removed",4],_.GamepadEventType.device_removed.toString=i,_.GamepadEventType.device_removed.__enum__=_.GamepadEventType,_.GamepadEventType.device_remapped=["device_remapped",5],_.GamepadEventType.device_remapped.toString=i,_.GamepadEventType.device_remapped.__enum__=_.GamepadEventType,_.InputType={__ename__:!0,__constructs__:["mouse","touch","keys","gamepad"]},_.InputType.mouse=["mouse",0],_.InputType.mouse.toString=i,_.InputType.mouse.__enum__=_.InputType,_.InputType.touch=["touch",1],_.InputType.touch.toString=i,_.InputType.touch.__enum__=_.InputType,_.InputType.keys=["keys",2],_.InputType.keys.toString=i,_.InputType.keys.__enum__=_.InputType,_.InputType.gamepad=["gamepad",3],_.InputType.gamepad.toString=i,_.InputType.gamepad.__enum__=_.InputType,_.Input=function(e){this.core=e},_.Input.__name__=!0,_.Input.prototype={core:null,key_bindings:null,mouse_bindings:null,init:function(){this.key_bindings=new w.ds.StringMap,this.mouse_bindings=new w.ds.StringMap},destroy:function(){},process:function(){},keypressed:function(e){return this.core.app.input.keypressed(e)},keyreleased:function(e){return this.core.app.input.keyreleased(e)},keydown:function(e){return this.core.app.input.keydown(e)},scanpressed:function(e){return this.core.app.input.scanpressed(e)},scanreleased:function(e){return this.core.app.input.scanreleased(e)},scandown:function(e){return this.core.app.input.scandown(e)},mousepressed:function(e){return this.core.app.input.mousepressed(e)},mousereleased:function(e){return this.core.app.input.mousereleased(e)},mousedown:function(e){return this.core.app.input.mousedown(e)},gamepadpressed:function(e,t){return this.core.app.input.gamepadpressed(e,t)},gamepadreleased:function(e,t){return this.core.app.input.gamepadreleased(e,t)},gamepaddown:function(e,t){return this.core.app.input.gamepaddown(e,t)},gamepadaxis:function(e,t){return this.core.app.input.gamepadaxis(e,t)},add_key_binding:function(e,t){if(!this.key_bindings.exists(e)){var n=new w.ds.IntMap;this.key_bindings.set(e,n)}var i=this.key_bindings.get(e);i.set(t,!0)},add_mouse_binding:function(e,t){if(!this.mouse_bindings.exists(e)){var n=new w.ds.EnumValueMap;this.mouse_bindings.set(e,n)}var i=this.mouse_bindings.get(e);i.set(t,!0)},add:function(e,t){(0|t)===t?this.add_key_binding(e,t):v.Boot.__instanceof(t,_.MouseButton)&&this.add_mouse_binding(e,t)},check_named_keys:function(e,t){null==t&&(t=!1);for(var n=[],i=this.key_bindings.keys();i.hasNext();){var s=i.next(),r=this.key_bindings.get(s);r.exists(e.keycode)&&!e.repeat&&(o.has(n,s)||n.push(s))}for(var a=0;a<n.length;){var l=n[a];++a,t?this.core.oninputdown(l,{name:l,type:_.InputType.keys,state:_.InteractState.down,key_event:e}):this.core.oninputup(l,{name:l,type:_.InputType.keys,state:_.InteractState.up,key_event:e})}},check_named_mouse:function(e,t){null==t&&(t=!1);for(var n=[],i=this.mouse_bindings.keys();i.hasNext();){var s=i.next(),r=this.mouse_bindings.get(s);r.exists(e.button)&&(o.has(n,s)||n.push(s))}for(var a=0;a<n.length;){var l=n[a];++a,t?this.core.oninputdown(l,{name:l,type:_.InputType.mouse,state:_.InteractState.down,mouse_event:e}):this.core.oninputup(l,{name:l,type:_.InputType.mouse,state:_.InteractState.up,mouse_event:e})}},__class__:_.Input},_.Log=function(){},_.Log.__name__=!0,_.Log._get_spacing=function(e){var t="",n=e.length+4,i=_.Log._log_width-n;if(i>0)for(var s=0;i>s;){{s++}t+=" "}return t},_.Visual=function(e){this.ignore_texture_on_geometry_change=!1,this._creating_geometry=!1,this._has_custom_origin=!1,this.radians=0,this.group=0,this.depth=0,this.visible=!0,this.locked=!1;var t=this;if(null==e)throw"Visual needs not-null options at the moment";this._rotation_euler=new x.Vector,this._rotation_quat=new x.Quaternion,_.Entity.call(this,e),this.set_color(new x.Color),this.set_size(new x.Vector),null!=this.options.texture&&this.set_texture(this.options.texture),null!=this.options.shader&&this.set_shader(this.options.shader),null!=this.options.color&&this.set_color(this.options.color),null!=this.options.depth&&this.set_depth(this.options.depth),null!=this.options.group&&this.set_group(this.options.group),null!=this.options.visible&&this.set_visible(this.options.visible),null!=this.options.size?(this.set_size(this.options.size),this._create_geometry()):null!=this.texture?this.texture.loaded?(this.set_size(new x.Vector(this.texture.width,this.texture.height)),this._create_geometry()):this.texture.set_onload(function(e){t.set_size(new x.Vector(e.width,e.height)),t._create_geometry()}):(this.set_size(new x.Vector(64,64)),this._create_geometry())},_.Visual.__name__=!0,_.Visual.__super__=_.Entity,_.Visual.prototype=e(_.Entity.prototype,{size:null,geometry:null,locked:null,texture:null,shader:null,color:null,visible:null,depth:null,group:null,clip_rect:null,radians:null,_rotation_euler:null,_rotation_quat:null,_has_custom_origin:null,_creating_geometry:null,_create_geometry:function(){if(null==this.options.geometry){if(null==this.options.no_geometry||0==this.options.no_geometry){this._creating_geometry=!0;var e=null;(null==this.options.no_batcher_add||0==this.options.no_batcher_add)&&(e=null!=this.options.batcher?this.options.batcher:l.renderer.batcher),this.set_geometry(new x.geometry.QuadGeometry({id:this.name+".visual",x:0,y:0,w:this.size.x,h:this.size.y,scale:new x.Vector(1,1,1),texture:this.texture,color:this.color,shader:this.shader,batcher:e,depth:null==this.options.depth?0:this.options.depth,group:null==this.options.group?0:this.options.group,visible:null==this.options.visible?!0:this.options.visible})),this._creating_geometry=!1,this.on_geometry_created()}}else this.set_geometry(this.options.geometry);null!=this.geometry&&(this.geometry.id=this.name+".visual",this.geometry.transform.id=this.name+".visual.transform"),null!=this.options.origin&&(this._has_custom_origin=!0,this.set_origin(this.options.origin)),null!=this.options.rotation_z&&this.set_rotation_z(this.options.rotation_z)},ondestroy:function(){null!=this.geometry&&this.geometry.added&&this.geometry.drop(!0),this.set_geometry(null),this.set_texture(null)},on_geometry_created:function(){},set_visible:function(e){return this.visible=e,null!=this.geometry&&this.geometry.set_visible(this.visible),this.visible},set_depth:function(e){return null!=this.geometry&&this.geometry.set_depth(e),this.depth=e},set_group:function(e){return null!=this.geometry&&this.geometry.set_group(e),this.group=e},set_color:function(e){return null!=this.color&&null!=this.geometry&&this.geometry.set_color(e),this.color=e},set_texture:function(e){return null!=this.geometry&&this.geometry.set_texture(e),this.texture=e},set_shader:function(e){return null!=this.geometry&&this.geometry.set_shader(e),this.shader=e},ignore_texture_on_geometry_change:null,set_geometry:function(e){return null!=this.geometry&&this.geometry.drop(),this.geometry=e,null!=this.geometry&&(this.geometry.transform.set_parent(this.transform),0==this._creating_geometry&&(this.geometry.set_color(this.color),this.geometry.set_group(this.group),this.geometry.set_depth(this.depth),this.geometry.set_visible(this.visible),this.geometry.set_shader(this.shader),this.ignore_texture_on_geometry_change||this.geometry.set_texture(this.texture))),this.geometry},set_parent_from_transform:function(e){_.Entity.prototype.set_parent_from_transform.call(this,e),null!=this.geometry&&this.geometry.transform.set_parent(this.transform)},set_rotation_from_transform:function(e){_.Entity.prototype.set_rotation_from_transform.call(this,e),this._rotation_euler.setEulerFromQuaternion(e),this._rotation_quat.copy(e)},set_size:function(e){return this.size=e,x.Vector.listen(this.size,n(this,this._size_change)),this.size},get_rotation_z:function(){return _.utils.Maths.radToDeg(this.get_radians())},set_rotation_z:function(e){return this.set_radians(.017453292519943278*e),e},set_radians:function(e){return this._rotation_euler.set_z(e),this._rotation_quat.setFromEuler(this._rotation_euler),this.set_rotation(this._rotation_quat.clone()),this.radians=e},get_radians:function(){return this.radians},set_locked:function(e){return null!=this.geometry&&this.geometry.set_locked(e),this.locked=e},set_clip_rect:function(e){return this.geometry.set_clip_rect(e)},_size_change:function(){this.set_size(this.size)},init:function(){},__class__:_.Visual,__properties__:e(_.Entity.prototype.__properties__,{set_rotation_z:"set_rotation_z",get_rotation_z:"get_rotation_z",set_radians:"set_radians",get_radians:"get_radians",set_clip_rect:"set_clip_rect",set_group:"set_group",set_depth:"set_depth",set_visible:"set_visible",set_color:"set_color",set_shader:"set_shader",set_texture:"set_texture",set_locked:"set_locked",set_geometry:"set_geometry",set_size:"set_size"})}),_.Sprite=function(e){if(this.flipy=!1,this.flipx=!1,this.centered=!0,this.set_uv(new x.Rectangle),null==e)throw"Sprite needs not-null options at the moment";null!=e.centered&&this.set_centered(e.centered),null!=e.flipx&&this.set_flipx(e.flipx),null!=e.flipy&&this.set_flipy(e.flipy),_.Visual.call(this,e)},_.Sprite.__name__=!0,_.Sprite.__super__=_.Visual,_.Sprite.prototype=e(_.Visual.prototype,{centered:null,flipx:null,flipy:null,uv:null,geometry_quad:null,on_geometry_created:function(){var e=this;_.Visual.prototype.on_geometry_created.call(this),null!=this.texture&&this.texture.set_onload(function(){e.set_uv(null==e.options.uv?new x.Rectangle(0,0,e.texture.width,e.texture.height):e.options.uv),e.texture.type==_.ResourceType.render_texture&&e.set_flipy(!0)}),this.set_centered(!!this.centered),this.set_flipx(!!this.flipx),this.set_flipy(!!this.flipy)},set_geometry:function(e){return this.geometry_quad=e,_.Visual.prototype.set_geometry.call(this,e)},point_inside:function(e){return null==this.geometry?!1:l.utils.geometry.point_in_geometry(e,this.geometry)},point_inside_AABB:function(e){if(null==this.get_pos())return!1;if(null==this.size)return!1;if(this.centered){var t=this.size.x/2,n=this.size.y/2;if(e.x<this.get_pos().x-t)return!1;if(e.y<this.get_pos().y-n)return!1;if(e.x>this.get_pos().x+this.size.x-t)return!1;if(e.y>this.get_pos().y+this.size.y-n)return!1}else{if(e.x<this.get_pos().x)return!1;if(e.y<this.get_pos().y)return!1;if(e.x>this.get_pos().x+this.size.x)return!1;if(e.y>this.get_pos().y+this.size.y)return!1}return!0},set_uv:function(e){return null!=this.geometry_quad&&this.geometry_quad.uv(e),this.uv=e,x.Rectangle.listen(this.uv,n(this,this._uv_change)),this.uv},set_flipy:function(e){return null!=this.geometry_quad&&this.geometry_quad.set_flipy(e),this.flipy=e},set_flipx:function(e){return null!=this.geometry_quad&&this.geometry_quad.set_flipx(e),this.flipx=e},set_size:function(e){return null!=this.geometry_quad&&(this.geometry_quad.resize(new x.Vector(e.x,e.y)),this._has_custom_origin||this.centered&&this.set_origin(e.clone().divideScalar(2))),_.Visual.prototype.set_size.call(this,e)},set_centered:function(e){return null!=this.size&&this.set_origin(e?new x.Vector(this.size.x/2,this.size.y/2):new x.Vector),this.centered=e},_uv_change:function(){this.set_uv(this.uv)},__class__:_.Sprite,__properties__:e(_.Visual.prototype.__properties__,{set_uv:"set_uv",set_flipy:"set_flipy",set_flipx:"set_flipx",set_centered:"set_centered"})}),_.NineSlice=function(e){this.added=!1,this.midheight=0,this.midwidth=0,this.is_set=!1,this.source_h=0,this.source_w=0,this.source_y=0,this.source_x=0,this.height=0,this.bottom=32,this.width=0,this.right=32,this.left=32,this.top=32,this.slices=new Array,null==e?e={no_geometry:!0,no_scene:!0}:(e.no_geometry=!0,e.no_scene=!0),this.nineslice_options=e,this._batcher=null!=e.batcher?e.batcher:l.renderer.batcher,_.Sprite.call(this,e),null!=e.top&&(this.top=e.top),null!=e.left&&(this.left=e.left),null!=e.right&&(this.right=e.right),null!=e.bottom&&(this.bottom=e.bottom),null!=e.source_x&&(this.source_x=e.source_x),null!=e.source_y&&(this.source_y=e.source_y),this.source_w=null!=e.source_w?e.source_w:this.texture.width,this.source_h=null!=e.source_h?e.source_h:this.texture.height,this.set_geometry(null)},_.NineSlice.__name__=!0,_.NineSlice.__super__=_.Sprite,_.NineSlice.prototype=e(_.Sprite.prototype,{top:null,left:null,right:null,width:null,bottom:null,height:null,source_x:null,source_y:null,source_w:null,source_h:null,is_set:null,midwidth:null,midheight:null,slices:null,added:null,nineslice_options:null,_geometry:null,_batcher:null,lock:function(){this.is_set&&null!=this._geometry&&this._geometry.set_locked(!0)},dirty:function(){this.is_set&&null!=this._geometry&&this._geometry.set_dirty(!0)},update_size:function(e,t){this.width=e,this.height=t,this.midwidth=Math.abs(this.width-this.left-this.right),this.midheight=Math.abs(this.height-this.top-this.bottom),this.slices[0].source_width=this.left,this.slices[0].source_height=this.top,this.slices[0].source_x=this.source_x,this.slices[0].source_y=this.source_y,this.slices[0].pos.set(0,0),this.slices[0].width=this.left,this.slices[0].height=this.top,this.slices[1].source_width=this.source_w-this.left-this.right,this.slices[1].source_height=this.top,this.slices[1].source_x=this.source_x+this.left,this.slices[1].source_y=this.source_y,this.slices[1].pos.set(this.left,0),this.slices[1].width=this.width-this.left-this.right,this.slices[1].height=this.top,this.slices[2].source_width=this.right,this.slices[2].source_height=this.top,this.slices[2].source_x=this.source_x+(this.source_w-this.right),this.slices[2].source_y=this.source_y,this.slices[2].pos.set(this.left+this.midwidth,0),this.slices[2].width=this.right,this.slices[2].height=this.top,this.slices[3].source_width=this.left,this.slices[3].source_height=this.source_h-this.top-this.bottom,this.slices[3].source_x=this.source_x,this.slices[3].source_y=this.source_y+this.top,this.slices[3].pos.set(0,this.top),this.slices[3].width=this.left,this.slices[3].height=this.height-this.top-this.bottom,this.slices[4].source_width=this.source_w-this.left-this.right,this.slices[4].source_height=this.source_h-this.top-this.bottom,this.slices[4].source_x=this.source_x+this.left,this.slices[4].source_y=this.source_y+this.top,this.slices[4].pos.set(this.left,this.top),this.slices[4].width=this.width-this.left-this.right,this.slices[4].height=this.height-this.top-this.bottom,this.slices[5].source_width=this.right,this.slices[5].source_height=this.source_h-this.top-this.bottom,this.slices[5].source_x=this.source_x+(this.source_w-this.right),this.slices[5].source_y=this.source_y+this.top,this.slices[5].pos.set(this.left+this.midwidth,this.top),this.slices[5].width=this.right,this.slices[5].height=this.height-this.top-this.bottom,this.slices[6].source_width=this.left,this.slices[6].source_height=this.bottom,this.slices[6].source_x=this.source_x,this.slices[6].source_y=this.source_y+(this.source_h-this.bottom),this.slices[6].pos.set(0,this.top+this.midheight),this.slices[6].width=this.left,this.slices[6].height=this.bottom,this.slices[7].source_width=this.source_w-this.left-this.right,this.slices[7].source_height=this.bottom,this.slices[7].source_x=this.source_x+this.left,this.slices[7].source_y=this.source_y+(this.source_h-this.bottom),this.slices[7].pos.set(this.left,this.top+this.midheight),this.slices[7].width=this.width-this.left-this.right,this.slices[7].height=this.bottom,this.slices[8].source_width=this.right,this.slices[8].source_height=this.bottom,this.slices[8].source_x=this.source_x+(this.source_w-this.right),this.slices[8].source_y=this.source_y+(this.source_h-this.bottom),this.slices[8].pos.set(this.left+this.midwidth,this.top+this.midheight),this.slices[8].width=this.right,this.slices[8].height=this.bottom
},set:function(e,t){this.added&&(this._geometry.drop(),this.added=!1),this.slices.splice(0,this.slices.length),this.width=e,this.height=t,this.midwidth=Math.abs(this.width-this.left-this.right),this.midheight=Math.abs(this.height-this.top-this.bottom),this.slices.push({source_width:this.left,source_height:this.top,source_x:this.source_x,source_y:this.source_y,pos:new x.Vector(0,0),width:this.left,height:this.top,geometry_id:""}),this.slices.push({source_width:this.source_w-this.left-this.right,source_height:this.top,source_x:this.source_x+this.left,source_y:this.source_y,pos:new x.Vector(this.left,0),width:this.width-this.left-this.right,height:this.top,geometry_id:""}),this.slices.push({source_width:this.right,source_height:this.top,source_x:this.source_x+(this.source_w-this.right),source_y:this.source_y,pos:new x.Vector(this.left+this.midwidth,0),width:this.right,height:this.top,geometry_id:""}),this.slices.push({source_width:this.left,source_height:this.source_h-this.top-this.bottom,source_x:this.source_x,source_y:this.source_y+this.top,pos:new x.Vector(0,this.top),width:this.left,height:this.height-this.top-this.bottom,geometry_id:""}),this.slices.push({source_width:this.source_w-this.left-this.right,source_height:this.source_h-this.top-this.bottom,source_x:this.source_x+this.left,source_y:this.source_y+this.top,pos:new x.Vector(this.left,this.top),width:this.width-this.left-this.right,height:this.height-this.top-this.bottom,geometry_id:""}),this.slices.push({source_width:this.right,source_height:this.source_h-this.top-this.bottom,source_x:this.source_x+(this.source_w-this.right),source_y:this.source_y+this.top,pos:new x.Vector(this.left+this.midwidth,this.top),width:this.right,height:this.height-this.top-this.bottom,geometry_id:""}),this.slices.push({source_width:this.left,source_height:this.bottom,source_x:this.source_x,source_y:this.source_y+(this.source_h-this.bottom),pos:new x.Vector(0,this.top+this.midheight),width:this.left,height:this.bottom,geometry_id:""}),this.slices.push({source_width:this.source_w-this.left-this.right,source_height:this.bottom,source_x:this.source_x+this.left,source_y:this.source_y+(this.source_h-this.bottom),pos:new x.Vector(this.left,this.top+this.midheight),width:this.width-this.left-this.right,height:this.bottom,geometry_id:""}),this.slices.push({source_width:this.right,source_height:this.bottom,source_x:this.source_x+(this.source_w-this.right),source_y:this.source_y+(this.source_h-this.bottom),pos:new x.Vector(this.left+this.midwidth,this.top+this.midheight),width:this.right,height:this.bottom,geometry_id:""}),this.is_set=!0},set_size:function(e){if(!this.is_set)return e;this.update_size(e.x,e.y);for(var t=0,n=this.slices;t<n.length;){var i=n[t];++t,null!=this._geometry&&this._geometry.quad_resize(i.geometry_id,new x.Rectangle(i.pos.x,i.pos.y,i.width,i.height))}return e},set_pos:function(e){_.Sprite.prototype.set_pos.call(this,e);var t=e.clone();return this.is_set&&this._geometry.transform.set_pos(t),_.Sprite.prototype.set_pos.call(this,t)},ondestroy:function(){this.is_set&&this._geometry.drop()},set_visible:function(e){return _.Sprite.prototype.set_visible.call(this,e),this.is_set&&this._geometry.set_visible(e),this.visible=e},set_depth:function(e){return _.Sprite.prototype.set_depth.call(this,e),this.is_set&&this._geometry.set_depth(e),this.depth=e},set_clip_rect:function(e){return this.is_set&&this._geometry.set_clip_rect(e),this.clip_rect=e},set_color:function(e){return this.is_set&&this._geometry.set_color(e),this.color=e},_create:function(e,t,n,i){null==i&&(i=!1),(!this.is_set||i)&&this.set(t,n);var s=new x.Color;this._geometry=new x.geometry.ComplexGeometry({texture:this.texture,color:s,depth:this.nineslice_options.depth,group:this.nineslice_options.group,visible:this.nineslice_options.visible,batcher:this._batcher});for(var r=0,o=this.slices;r<o.length;){var a=o[r];++r,a.geometry_id=this._geometry.quad_add({x:a.pos.x,y:a.pos.y,w:a.width,h:a.height}),this._geometry.quad_uv(a.geometry_id,new x.Rectangle(a.source_x,a.source_y,a.source_width,a.source_height)),this._geometry.quad_pos(a.geometry_id,new x.Vector(a.pos.x,a.pos.y))}this._geometry.transform.set_pos(e),this._geometry.id="NineSlice",this.added=!0,this.is_set=!0},create:function(e,t,n,i){null==i&&(i=!1);var s=this;this.texture.loaded?this._create(e,t,n,i):this.texture.set_onload(function(){s._create(e,t,n,i)})},__class__:_.NineSlice}),_.Physics=function(e){this.step_delta=.016666666666666666,this.step_rate=.016666666666666666,this.core=e},_.Physics.__name__=!0,_.Physics.prototype={core:null,engines:null,step_rate:null,step_delta:null,timer:null,init:function(){this.engines=[]},reset:function(){null!=this.timer&&(this.timer.stop(),this.timer=null),0!=this.step_rate&&(this.timer=l.timer.schedule(this.step_rate,n(this,this.fixed_update),!0))},fixed_update:function(){l.debug.start(_.Physics.tag_physics),this.update(),l.debug.end(_.Physics.tag_physics)},add_engine:function(e,t){var n=y.createInstance(e,[t]),i=n;return i.init(),this.engines.push(i),n},update:function(){for(var e=0,t=this.engines;e<t.length;){var n=t[e];++e,n.update()}},process:function(){for(var e=0,t=this.engines;e<t.length;){var n=t[e];++e,n.process()}},render:function(){for(var e=0,t=this.engines;e<t.length;){var n=t[e];++e,n.render()}},destroy:function(){this.timer.stop(),this.timer=null;for(var e=0,t=this.engines;e<t.length;){var n=t[e];++e,n.destroy()}},set_step_rate:function(e){return this.step_rate=e,this.step_delta=this.step_rate,this.reset(),this.step_rate},__class__:_.Physics,__properties__:{set_step_rate:"set_step_rate"}},_.PhysicsEngine=function(){this.draw=!0,this.paused=!1,this.name="engine",this.set_gravity(new x.Vector(0,-9.8,0)),l.on("render",n(this,this._render))},_.PhysicsEngine.__name__=!0,_.PhysicsEngine.prototype={name:null,paused:null,gravity:null,draw:null,init:function(){},_render:function(){this.render()},process:function(){},update:function(){},render:function(){},get_paused:function(){return this.paused},set_paused:function(e){return this.paused=e},get_draw:function(){return this.draw},set_draw:function(e){return this.draw=e},get_gravity:function(){return this.gravity},set_gravity:function(e){return this.gravity=e},destroy:function(){},__class__:_.PhysicsEngine,__properties__:{set_draw:"set_draw",get_draw:"get_draw",set_gravity:"set_gravity",get_gravity:"get_gravity",set_paused:"set_paused",get_paused:"get_paused"}},_.ResourceType={__ename__:!0,__constructs__:["unknown","text","json","data","texture","sound","render_texture","font","shader"]},_.ResourceType.unknown=["unknown",0],_.ResourceType.unknown.toString=i,_.ResourceType.unknown.__enum__=_.ResourceType,_.ResourceType.text=["text",1],_.ResourceType.text.toString=i,_.ResourceType.text.__enum__=_.ResourceType,_.ResourceType.json=["json",2],_.ResourceType.json.toString=i,_.ResourceType.json.__enum__=_.ResourceType,_.ResourceType.data=["data",3],_.ResourceType.data.toString=i,_.ResourceType.data.__enum__=_.ResourceType,_.ResourceType.texture=["texture",4],_.ResourceType.texture.toString=i,_.ResourceType.texture.__enum__=_.ResourceType,_.ResourceType.sound=["sound",5],_.ResourceType.sound.toString=i,_.ResourceType.sound.__enum__=_.ResourceType,_.ResourceType.render_texture=["render_texture",6],_.ResourceType.render_texture.toString=i,_.ResourceType.render_texture.__enum__=_.ResourceType,_.ResourceType.font=["font",7],_.ResourceType.font.toString=i,_.ResourceType.font.__enum__=_.ResourceType,_.ResourceType.shader=["shader",8],_.ResourceType.shader.toString=i,_.ResourceType.shader.__enum__=_.ResourceType,_.Resource=function(e,t,n){this.dropped=!1,this.time_created=0,this.time_to_load=0,this.persistent=!1,this.manager=null==e?l.resources:e,this.type=t,this.time_to_load=n,this.time_created=l.get_time(),this.manager.add(this)},_.Resource.__name__=!0,_.Resource.prototype={manager:null,type:null,id:null,persistent:null,time_to_load:null,time_created:null,dropped:null,drop:function(){this.dropped||(this.dropped=!0,this.manager.remove(this))},__class__:_.Resource},_.TextResource=function(e,t,n){this.id=e,_.Resource.call(this,n,_.ResourceType.text),this.text=t},_.TextResource.__name__=!0,_.TextResource.__super__=_.Resource,_.TextResource.prototype=e(_.Resource.prototype,{text:null,__class__:_.TextResource}),_.JSONResource=function(e,t,n){this.id=e,_.Resource.call(this,n,_.ResourceType.json),this.json=t},_.JSONResource.__name__=!0,_.JSONResource.__super__=_.Resource,_.JSONResource.prototype=e(_.Resource.prototype,{json:null,__class__:_.JSONResource}),_.DataResource=function(e,t,n){this.id=e,_.Resource.call(this,n,_.ResourceType.data),this.data=t},_.DataResource.__name__=!0,_.DataResource.__super__=_.Resource,_.DataResource.prototype=e(_.Resource.prototype,{data:null,__class__:_.DataResource}),_.SoundResource=function(e,t,n){this.id=e,_.Resource.call(this,n,_.ResourceType.sound),this.name=t},_.SoundResource.__name__=!0,_.SoundResource.__super__=_.Resource,_.SoundResource.prototype=e(_.Resource.prototype,{name:null,__class__:_.SoundResource}),_.ResourceStats=function(){this.unknown=0,this.sounds=0,this.datas=0,this.jsons=0,this.texts=0,this.shaders=0,this.render_textures=0,this.textures=0,this.fonts=0,this.resources=0},_.ResourceStats.__name__=!0,_.ResourceStats.prototype={resources:null,fonts:null,textures:null,render_textures:null,shaders:null,texts:null,jsons:null,datas:null,sounds:null,unknown:null,toString:function(){return"Resource Statistics\n	total resources : "+this.resources+"\n	textures : "+this.textures+" \n	render textures : "+this.render_textures+" \n	fonts : "+this.fonts+"\n	shaders : "+this.shaders+"\n	sounds : "+this.sounds+"\n	text : "+this.texts+"\n	json : "+this.jsons+"\n	data : "+this.datas+"\n	unknown : "+this.unknown},reset:function(){this.resources=0,this.fonts=0,this.textures=0,this.render_textures=0,this.shaders=0,this.texts=0,this.jsons=0,this.datas=0,this.sounds=0,this.unknown=0},__class__:_.ResourceStats},_.ResourceManager=function(){this.resourcelist=new Array,this.textures=new w.ds.StringMap,this.render_textures=new w.ds.StringMap,this.fonts=new w.ds.StringMap,this.shaders=new w.ds.StringMap,this.sounds=new w.ds.StringMap,this.data=new w.ds.StringMap,this.text=new w.ds.StringMap,this.json=new w.ds.StringMap,this.stats=new _.ResourceStats},_.ResourceManager.__name__=!0,_.ResourceManager.prototype={resourcelist:null,render_textures:null,textures:null,shaders:null,fonts:null,data:null,text:null,json:null,sounds:null,stats:null,add:function(e){this.resourcelist.push(e);var t=e.type;switch(t[1]){case 4:this.stats.textures++;break;case 6:this.stats.render_textures++;break;case 7:this.stats.fonts++;break;case 8:this.stats.shaders++;break;case 5:this.stats.sounds++;break;case 1:this.stats.texts++;break;case 2:this.stats.jsons++;break;case 3:this.stats.datas++;break;case 0:this.stats.unknown++}this.stats.resources++},remove:function(e){r.remove(this.resourcelist,e),this.uncache(e);var t=e.type;switch(t[1]){case 4:this.stats.textures--;break;case 6:this.stats.render_textures--;break;case 7:this.stats.fonts--;break;case 8:this.stats.shaders--;break;case 5:this.stats.sounds--;break;case 1:this.stats.texts--;break;case 2:this.stats.jsons--;break;case 3:this.stats.datas--;break;case 0:this.stats.unknown--}this.stats.resources--},uncache:function(e){var t=e.type;switch(t[1]){case 4:this.textures.remove(e.id);break;case 6:this.render_textures.remove(e.id);break;case 7:this.fonts.remove(e.id);break;case 8:this.shaders.remove(e.id);break;case 5:this.sounds.remove(e.id);break;case 3:this.data.remove(e.id);break;case 1:this.text.remove(e.id);break;case 2:this.json.remove(e.id);break;case 0:}},cache:function(e){var t=e.type;switch(t[1]){case 4:this.textures.set(e.id,e);break;case 6:this.render_textures.set(e.id,e);break;case 7:this.fonts.set(e.id,e);break;case 8:this.shaders.set(e.id,e);break;case 5:this.sounds.set(e.id,e);break;case 1:this.text.set(e.id,e);break;case 2:this.json.set(e.id,e);break;case 3:this.data.set(e.id,e);break;case 0:}},find_render_texture:function(e){return this.render_textures.get(e)},find_texture:function(e){return this.textures.get(e)},find_shader:function(e){return this.shaders.get(e)},find_font:function(e){return this.fonts.get(e)},find_sound:function(e){return this.sounds.get(e)},find_text:function(e){return this.text.get(e)},find_json:function(e){return this.json.get(e)},find_data:function(e){return this.data.get(e)},clear:function(e){null==e&&(e=!1);for(var t=[],n=0,i=this.resourcelist;n<i.length;){var s=i[n];++n,!s.persistent||e?s.drop():t.push(s)}this.resourcelist.splice(0,this.resourcelist.length),this.resourcelist=new Array,this.stats.reset();for(var r=0;r<t.length;){var o=t[r];++r,this.add(o)}t=null},find:function(e){for(var t=0,n=this.resourcelist;t<n.length;){var i=n[t];if(++t,i.id==e)return i}return null},__class__:_.ResourceManager},_.Scene=function(e){null==e&&(e="untitled scene"),this.length=0,this.started=!1,this.inited=!1,_.Objects.call(this,e),this.entities=new w.ds.StringMap,this._delayed_init_entities=[],this._delayed_reset_entities=[],l.core.on("init",n(this,this.init)),l.core.on("destroy",n(this,this._destroy)),l.core.on("update",n(this,this.update)),l.core.on("prerender",n(this,this.prerender)),l.core.on("postrender",n(this,this.postrender)),l.core.on("render",n(this,this.render)),l.core.on("keydown",n(this,this.keydown)),l.core.on("keyup",n(this,this.keyup)),l.core.on("textinput",n(this,this.textinput)),l.core.on("inputup",n(this,this.inputup)),l.core.on("inputdown",n(this,this.inputdown)),l.core.on("mouseup",n(this,this.mouseup)),l.core.on("mousedown",n(this,this.mousedown)),l.core.on("mousemove",n(this,this.mousemove)),l.core.on("mousewheel",n(this,this.mousewheel)),l.core.on("touchup",n(this,this.touchup)),l.core.on("touchdown",n(this,this.touchdown)),l.core.on("touchmove",n(this,this.touchmove)),l.core.on("gamepadup",n(this,this.gamepadup)),l.core.on("gamepaddown",n(this,this.gamepaddown)),l.core.on("gamepadaxis",n(this,this.gamepadaxis)),l.core.on("gamepaddevice",n(this,this.gamepaddevice)),l.core.has_inited&&this.init(null)},_.Scene.__name__=!0,_.Scene.__super__=_.Objects,_.Scene.prototype=e(_.Objects.prototype,{entities:null,inited:null,started:null,_delayed_init_entities:null,_delayed_reset_entities:null,length:null,add:function(e){if(null==e)throw"can't put entity in a scene if the entity is null.";e.set_scene(this),this.entities.set(e.name,e),this.inited&&this._delayed_init_entities.push(e),this.started&&this._delayed_reset_entities.push(e)},remove:function(e){if(null==e)throw"can't remove entity from a scene if the entity is null.";return e.get_scene()==this?(e.set_scene(null),this.entities.remove(e.name)):(w.Log.trace("    i / scene / can't remove the entity from this scene, it is not mine (entity.scene != this)",{fileName:"Scene.hx",lineNumber:107,className:"luxe.Scene",methodName:"remove"}),!1)},empty:function(){for(var e=this.entities.iterator();e.hasNext();){var t=e.next();null!=t&&(this.remove(t),t.destroy(),t=null)}},render:function(){this.emit("render",null,{fileName:"Scene.hx",lineNumber:134,className:"luxe.Scene",methodName:"render"})},prerender:function(){this.emit("prerender",null,{fileName:"Scene.hx",lineNumber:140,className:"luxe.Scene",methodName:"prerender"})},postrender:function(){this.emit("postrender",null,{fileName:"Scene.hx",lineNumber:146,className:"luxe.Scene",methodName:"postrender"})},keydown:function(e){this.emit("keydown",e,{fileName:"Scene.hx",lineNumber:156,className:"luxe.Scene",methodName:"keydown"})},keyup:function(e){this.emit("keyup",e,{fileName:"Scene.hx",lineNumber:164,className:"luxe.Scene",methodName:"keyup"})},textinput:function(e){this.emit("textinput",e,{fileName:"Scene.hx",lineNumber:172,className:"luxe.Scene",methodName:"textinput"})},mousedown:function(e){this.emit("mousedown",e,{fileName:"Scene.hx",lineNumber:182,className:"luxe.Scene",methodName:"mousedown"})},mousewheel:function(e){this.emit("mousewheel",e,{fileName:"Scene.hx",lineNumber:190,className:"luxe.Scene",methodName:"mousewheel"})},mouseup:function(e){this.emit("mouseup",e,{fileName:"Scene.hx",lineNumber:198,className:"luxe.Scene",methodName:"mouseup"})},mousemove:function(e){this.emit("mousemove",e,{fileName:"Scene.hx",lineNumber:206,className:"luxe.Scene",methodName:"mousemove"})},touchdown:function(e){this.emit("touchdown",e,{fileName:"Scene.hx",lineNumber:214,className:"luxe.Scene",methodName:"touchdown"})},touchup:function(e){this.emit("touchup",e,{fileName:"Scene.hx",lineNumber:220,className:"luxe.Scene",methodName:"touchup"})},touchmove:function(e){this.emit("touchmove",e,{fileName:"Scene.hx",lineNumber:226,className:"luxe.Scene",methodName:"touchmove"})},gamepadaxis:function(e){this.emit("gamepadaxis",e,{fileName:"Scene.hx",lineNumber:234,className:"luxe.Scene",methodName:"gamepadaxis"})},gamepadup:function(e){this.emit("gamepadup",e,{fileName:"Scene.hx",lineNumber:240,className:"luxe.Scene",methodName:"gamepadup"})},gamepaddown:function(e){this.emit("gamepaddown",e,{fileName:"Scene.hx",lineNumber:246,className:"luxe.Scene",methodName:"gamepaddown"})},gamepaddevice:function(e){this.emit("gamepaddevice",e,{fileName:"Scene.hx",lineNumber:252,className:"luxe.Scene",methodName:"gamepaddevice"})},inputdown:function(e){this.emit("inputdown",e,{fileName:"Scene.hx",lineNumber:260,className:"luxe.Scene",methodName:"inputdown"})},inputup:function(e){this.emit("inputup",e,{fileName:"Scene.hx",lineNumber:266,className:"luxe.Scene",methodName:"inputup"})},_destroy:function(){this.destroy()},destroy:function(){l.core.off("init",n(this,this.init)),l.core.off("destroy",n(this,this._destroy)),l.core.off("update",n(this,this.update)),l.core.off("prerender",n(this,this.prerender)),l.core.off("postrender",n(this,this.postrender)),l.core.off("render",n(this,this.render)),l.core.off("keydown",n(this,this.keydown)),l.core.off("keyup",n(this,this.keyup)),l.core.off("textinput",n(this,this.textinput)),l.core.off("inputup",n(this,this.inputup)),l.core.off("inputdown",n(this,this.inputdown)),l.core.off("mouseup",n(this,this.mouseup)),l.core.off("mousedown",n(this,this.mousedown)),l.core.off("mousemove",n(this,this.mousemove)),l.core.off("mousewheel",n(this,this.mousewheel)),l.core.off("touchup",n(this,this.touchup)),l.core.off("touchdown",n(this,this.touchdown)),l.core.off("touchmove",n(this,this.touchmove)),l.core.off("gamepadup",n(this,this.gamepadup)),l.core.off("gamepaddown",n(this,this.gamepaddown)),l.core.off("gamepadaxis",n(this,this.gamepadaxis)),l.core.off("gamepaddevice",n(this,this.gamepaddevice)),this.emit("destroy",null,{fileName:"Scene.hx",lineNumber:309,className:"luxe.Scene",methodName:"destroy"})},_do_init:function(){for(var e=this.get_length(),t=this.entities.iterator();t.hasNext();){var n=t.next();null!=n&&(n.inited||n._init())}var i=this.get_length();return e!=i},init:function(){for(var e=!0;e;)e=this._do_init();this.inited=!0,this.reset()},reset:function(){this.started=!1,this.emit("reset",null,{fileName:"Scene.hx",lineNumber:353,className:"luxe.Scene",methodName:"reset"}),this.started=!0},update:function(e){this.handle_delayed_additions(),this.emit("update",e,{fileName:"Scene.hx",lineNumber:364,className:"luxe.Scene",methodName:"update"});for(var t=this.entities.iterator();t.hasNext();){var n=t.next();null!=n&&n._update(e)}},handle_delayed_additions:function(){if(0!=this._delayed_init_entities.length||0!=this._delayed_reset_entities.length,this._delayed_init_entities.length>0){for(var e=0,t=this._delayed_init_entities;e<t.length;){var n=t[e];++e,n._init()}this._delayed_init_entities.splice(0,this._delayed_init_entities.length)}if(this._delayed_reset_entities.length>0){for(var i=0,s=this._delayed_reset_entities;i<s.length;){var r=s[i];++i,r._reset(null)}this._delayed_reset_entities.splice(0,this._delayed_reset_entities.length)}},get_length:function(){return o.count(this.entities)},toString:function(){return"luxe Scene: "+this.name+" / "+this.get_length()+" entities / id: "+this.id},__class__:_.Scene,__properties__:{get_length:"get_length"}}),_.Cursor=function(e){this.lock=!1,this.grab=!1,this.visible=!0,this.screen=e,this.set_pos(new x.Vector)},_.Cursor.__name__=!0,_.Cursor.prototype={screen:null,visible:null,grab:null,lock:null,pos:null,get_visible:function(){return this.visible},set_visible:function(e){return this.screen.core.app.windowing.enable_cursor(e),this.visible=e},get_grab:function(){return this.grab},get_lock:function(){return this.lock},set_grab:function(e){return this.screen.core.app.window.set_grab(e),this.grab=e},set_lock:function(e){return this.screen.core.app.windowing.enable_cursor_lock(e),this.lock=e},get_pos:function(){return null!=this.pos&&this.pos.set(l.mouse.x,l.mouse.y),this.pos},set_pos:function(e){return null!=this.get_pos()&&this.screen.core.app.window.set_cursor_position(0|e.x,0|e.y),this.pos=e},__class__:_.Cursor,__properties__:{set_pos:"set_pos",get_pos:"get_pos",set_lock:"set_lock",get_lock:"get_lock",set_grab:"set_grab",get_grab:"get_grab",set_visible:"set_visible",get_visible:"get_visible"}},_.Screen=function(e,t,n,i,s){this.core=e,this.cursor=new _.Cursor(this),this.x=t,this.y=n,this.w=i,this.h=s,this.mid=new x.Vector(Math.round(this.w/2),Math.round(this.h/2))},_.Screen.__name__=!0,_.Screen.prototype={x:null,y:null,w:null,h:null,cursor:null,core:null,mid:null,toString:function(){return"{ x:"+this.x+", y:"+this.y+", w:"+this.w+", h:"+this.h+" }"},get_mid:function(){return this.mid.clone()},point_inside:function(e){return e.x<this.x?!1:e.y<this.y?!1:e.x>this.x+this.w?!1:e.y>this.y+this.h?!1:!0},__class__:_.Screen,__properties__:{get_mid:"get_mid"}},_.Text=function(e){this.ready=!1,this.textsize=32,this.text="",this._batcher=null==e.batcher?l.renderer.batcher:e.batcher,null==e.pos&&(e.pos=new x.Vector),null==e.color&&(e.color=new x.Color),null==e.depth&&(e.depth=0),null==e.group&&(e.group=0),null==e.visible&&(e.visible=!0),this.text_options=e,_.Visual.call(this,{name:e.name,no_scene:e.no_scene,batcher:this._batcher,color:e.color,parent:e.parent,visible:e.visible,depth:e.depth,group:e.group,no_geometry:!0});var t;if(t=null==e.font?null:e.font,null==t&&(t=l.renderer.font),this.set_textsize(null==e.size?24:e.size),"string"==typeof t){var i=w.io.Path.directory(t)+"/";this.font=l.loadFont(t,i,n(this,this.onloaded))}else this.font=t,this.ready=!0;this.text_options.size=this.textsize,this.set_text(e.text)},_.Text.__name__=!0,_.Text.__super__=_.Visual,_.Text.prototype=e(_.Visual.prototype,{font:null,_batcher:null,composite_geometry:null,text:null,textsize:null,ready:null,text_options:null,size_rect_cache:null,scale_cache:null,point_inside:function(e){if(null==this.font)return!1;if(!this.ready)return!1;null==this.size_rect_cache&&(this.scale_cache=new x.Vector,this.size_rect_cache=new x.Rectangle),this.scale_cache.set_x(this.scale_cache.set_y(this.text_options.size/this.font.font_size));var t=this.font.get_text_dimensions(this.text,this.scale_cache);return this.size_rect_cache.set_x(this.get_pos().x-t.x/2),this.size_rect_cache.set_y(this.get_pos().y),this.size_rect_cache.set_w(t.x),this.size_rect_cache.set_h(t.y),this.size_rect_cache.point_inside(e)},onloaded:function(){this.ready=!0,this.set_text(this.text+"")},set_pos_from_transform:function(e){_.Visual.prototype.set_pos_from_transform.call(this,e),this.text_options.pos=this.get_pos()},set_textsize:function(e){return null!=this.text_options&&(this.textsize=e,this.text_options.size=this.textsize,this.set_text(this.text+"")),this.textsize},set_color:function(e){return _.Visual.prototype.set_color.call(this,e),this.text_options.color=this.color,this.color},set_visible:function(e){return _.Visual.prototype.set_visible.call(this,e),this.text_options.visible=this.visible,this.visible},set_locked:function(e){return _.Visual.prototype.set_locked.call(this,e),this.text_options.locked=this.locked,this.locked},set_text:function(e){return this.text=e,this.ready&&null!=this.text_options&&(this.text_options.text=e,null!=this.geometry&&this.geometry.drop(),this.set_geometry(null),this.composite_geometry=null,this.composite_geometry=this.font.draw_text(this.text_options),this.set_origin(this.composite_geometry.transform.get_origin().clone()),this.set_pos(this.composite_geometry.transform.get_pos().clone()),this.set_locked(this.composite_geometry.get_locked()),this.set_visible(this.composite_geometry.visible),this.composite_geometry.transform.set_origin(new x.Vector),this.composite_geometry.transform.set_pos(new x.Vector),this.ignore_texture_on_geometry_change=!0,this.set_geometry(this.composite_geometry),this.ignore_texture_on_geometry_change=!1),this.text},__class__:_.Text,__properties__:e(_.Visual.prototype.__properties__,{set_textsize:"set_textsize",set_text:"set_text"})}),_.Timer=function(e){this.core=e},_.Timer.__name__=!0,_.Timer.prototype={core:null,init:function(){},destroy:function(){},process:function(){},schedule:function(e,t,n){null==n&&(n=!1);var i=new b.utils.Timer(e);return i.run=function(){n||i.stop(),t()},i},__class__:_.Timer},_.components={},_.components.Components=function(e){this.components=new w.ds.StringMap,this.entity=e},_.components.Components.__name__=!0,_.components.Components.prototype={components:null,entity:null,add:function(e){return null==e?void w.Log.trace("attempt to add null component to "+this.entity.name,{fileName:"Components.hx",lineNumber:26,className:"luxe.components.Components",methodName:"add"}):(e.set_entity(this.entity),this.components.set(e.name,e),e.onadded(),this.entity.inited&&e.init(),void(this.entity.started&&e.onreset()))},remove:function(e){if(!this.components.exists(e))return w.Log.trace("attempt to remove "+e+" from "+this.entity.name+" failed because that component was not attached to this entity",{fileName:"Components.hx",lineNumber:57,className:"luxe.components.Components",methodName:"remove"}),!1;var t=this.components.get(e);return t.onremoved(),t.set_entity(null),this.components.remove(e)},get:function(e,t){if(null==t&&(t=!1),t){var n=this.components.get(e);if(null!=n)return n;for(var i=0,s=this.entity.children;i<s.length;){var r=s[i];++i;var o=r.get(e,!0);if(null!=o)return o}return null}return this.components.get(e)},get_any:function(e,t,n){null==n&&(n=!0),null==t&&(t=!1);var i=[];if(!t)return[this.components.get(e)];var s=this.components.get(e);if(null!=s){if(n)return[s];i.push(s)}for(var r=0,o=this.entity.children;r<o.length;){var a=o[r];++r;var l=a.get_any(e,!0,n);if(null!=l){if(n&&l.length>0)return[l[0]];i.concat(l)}}return i},has:function(e){return this.components.exists(e)},__class__:_.components.Components},_.debug={},_.debug.DebugView=function(){this.visible=!1,_.Objects.call(this)},_.debug.DebugView.__name__=!0,_.debug.DebugView.__super__=_.Objects,_.debug.DebugView.prototype=e(_.Objects.prototype,{visible:null,refresh:function(){},process:function(){},onmousedown:function(){},onmousewheel:function(){},onmouseup:function(){},onmousemove:function(){},onkeydown:function(){},onkeyup:function(){},create:function(){},show:function(){this.visible=!0},hide:function(){this.visible=!1},__class__:_.debug.DebugView}),_.debug.BatcherDebugView=function(){this.as_immediate=!1,this.dragging=!1,_.debug.DebugView.call(this),this.name="Batcher Debug"},_.debug.BatcherDebugView.__name__=!0,_.debug.BatcherDebugView.__super__=_.debug.DebugView,_.debug.BatcherDebugView.prototype=e(_.debug.DebugView.prototype,{batcher:null,create:function(){this.batcher=l.renderer.create_batcher({name:"debug_batcher_view",camera:new x.Camera({name:"batcher_debug_view"}),layer:1e3})},refresh:function(){this.clear_batcher_tree(),this.draw_batcher_tree()},dragging:null,dragstart:null,dragmstart:null,onmousedown:function(e){this.dragmstart=e.pos.clone(),this.dragstart=this.batcher.view.get_pos().clone(),this.dragging=!0},onmouseup:function(){this.dragging=!1},onmousemove:function(e){if(this.dragging){var t=x.Vector.Subtract(e.pos,this.dragmstart);this.batcher.view.set_pos(x.Vector.Subtract(this.dragstart,t))}},onmousewheel:function(e){if(e.y<0){var t=this.batcher.view;t.set_zoom(t.zoom-.1)}else{var n=this.batcher.view;n.set_zoom(n.zoom+.1)}},_tree_geom:null,as_immediate:null,clear_batcher_tree:function(){null!=this._tree_geom&&(this._tree_geom.drop(),this._tree_geom=null)},keystr:function(e){return"ts: "+e.timestamp+"\nseq: "+e.sequence+"\nprimitive_type: "+m.string(e.primitive_type)+" "+e.primitive_type[1]+"\ntexture: "+(null==e.texture?"null":m.string(e.texture.texture))+"\ntexture id: "+(null==e.texture?"null":e.texture.id)+"\nshader: "+(null==e.shader?"null":e.shader.id)+"\ngroup: "+e.group+"\ndepth: "+e.depth+"\nclip: "+(null==e.clip?"null":""+e.clip)},draw_geom_node:function(e,t,n,i){null==i&&(i=20);var s=128,r=s/2,o=128,a=t.value,u=new x.Color(1,1,1,.4).rgb(16777215);a.dropped&&(u=new x.Color(1,1,1,1).rgb(13369344)),this._tree_geom.add_geometry(l.draw.rectangle({immediate:this.as_immediate,x:n.x-r,y:n.y,w:s,h:o,color:u,batcher:this.batcher,depth:999.4})),this._tree_geom.add_geometry(l.draw.text({immediate:this.as_immediate,bounds:new x.Rectangle(n.x-r,n.y,s,o),size:13,color:u,batcher:this.batcher,depth:999.4,text:this.keystr(t.key,a.key),align:x.TextAlign.center,align_vertical:x.TextAlign.center}));var _=n.clone().set(n.x,n.y-16),h=n.clone().set(n.x,n.y+s+2),c=x.TextAlign.center;this._tree_geom.add_geometry(l.draw.text({immediate:this.as_immediate,pos:_,size:13,color:u,batcher:this.batcher,depth:999.4,text:a.short_id(),align:c}));var p=new x.Color(1,1,1,.4).rgb(16750916),d="none",m="none";if(null!=t.left){d="node";var f=l.renderer.batcher.compare_rule(t.key,t.left.key);d=l.renderer.batcher.compare_rule_to_string(f)}if(null!=t.right){m="node";var g=l.renderer.batcher.compare_rule(t.key,t.right.key);m=l.renderer.batcher.compare_rule_to_string(g)}this._tree_geom.add_geometry(l.draw.text({immediate:this.as_immediate,pos:h,size:13,color:p,batcher:this.batcher,depth:999.4,text:d+" / "+m,align:c}))},draw_geom_leaf:function(e,t,n){if(null!=t){var i=t.nodecount/20,s=25*t.nodecount,r=128,o=148,a=i/2,u=new x.Color(1,1,1,.4).rgb(16777215);null!=t&&(this.draw_geom_node(e,t,n,i),null!=t.left&&(u=new x.Color(1,1,1,1).rgb(l.renderer.batcher.geometry_compare(t.left.key,t.key)<0?52224:13369344),this._tree_geom.add_geometry(l.draw.line({immediate:this.as_immediate,p0:new x.Vector(n.x-a,n.y+r),p1:new x.Vector(n.x-s,n.y+o),color:u,batcher:this.batcher,depth:999.4})),this.draw_geom_leaf(!0,t.left,new x.Vector(n.x-s,n.y+o))),null!=t.right&&(u=new x.Color(1,1,1,1).rgb(l.renderer.batcher.geometry_compare(t.right.key,t.key)>0?52224:13369344),this._tree_geom.add_geometry(l.draw.line({immediate:this.as_immediate,p0:new x.Vector(n.x+a,n.y+r),p1:new x.Vector(n.x+s,n.y+o),color:u,batcher:this.batcher,depth:999.4})),this.draw_geom_leaf(!1,t.right,new x.Vector(n.x+s,n.y+o))))}},draw_batcher_tree:function(){this._tree_geom=null,this._tree_geom=new x.geometry.CompositeGeometry({batcher:this.batcher,immediate:this.as_immediate,depth:999.4});var e=new x.Vector(l.get_screen().w/2,2*l.debug.padding.y+10),t=l.renderer.batcher.geometry.root;this.draw_geom_leaf(!0,t,e)},process:function(){this.visible&&l.renderer.batcher.tree_changed&&this.refresh()},show:function(){_.debug.DebugView.prototype.show.call(this),this.refresh()},hide:function(){_.debug.DebugView.prototype.hide.call(this),this.clear_batcher_tree()},__class__:_.debug.BatcherDebugView}),_.debug.Inspector=function(e){this.title="Inspector",this.font=l.renderer.font,this.size=new x.Vector(.2*l.get_screen().w|0,.6*l.get_screen().h|0),this.pos=new x.Vector(l.get_screen().w/2-this.size.x/2,l.get_screen().h/2-this.size.y/2),this.uitexture=x.Texture.load_from_resource("tiny.ui.png",128,128),this.uibutton=x.Texture.load_from_resource("tiny.button.png",32,16),this._batcher=l.renderer.batcher,null!=e&&(null!=e.title&&(this.title=e.title),null!=e.font&&(this.font=e.font),null!=e.pos&&(this.pos=e.pos),null!=e.size&&(this.size=e.size),null!=e.batcher&&(this._batcher=e.batcher))},_.debug.Inspector.__name__=!0,_.debug.Inspector.prototype={title:null,font:null,pos:null,size:null,_title_text:null,_version_text:null,uitexture:null,uibutton:null,_window:null,onrefresh:null,_batcher:null,refresh:function(){null==this._window&&this._create_window(),null!=this.onrefresh&&this.onrefresh()
},show:function(){this.refresh(),this._window.set_visible(!0),this._title_text.set_visible(!0),this._version_text.set_visible(!0)},hide:function(){this._window.set_visible(!1),this._title_text.set_visible(!1),this._version_text.set_visible(!1)},_create_window:function(){null!=this._window&&this._window.destroy(),this._window=new _.NineSlice({depth:999.1,texture:this.uitexture,batcher:this._batcher}),this._window.create(this.pos,this.size.x,this.size.y),this._window._geometry.id="debug.Inspector",this._window.lock(),this._title_text=new _.Text({name:"debug.title",batcher:this._batcher,no_scene:!0,depth:999.2,color:(new x.Color).rgb(16121979),pos:new x.Vector(this.pos.x+this.size.x/2,this.pos.y+5),align:x.TextAlign.center,font:this.font,text:this.title,size:16,visible:!1}),this._version_text=new _.Text({name:"debug.version",batcher:this._batcher,no_scene:!0,depth:999.2,color:(new x.Color).rgb(3355443),pos:new x.Vector(this.pos.x+(this.size.x-14),this.pos.y+5),align:x.TextAlign.right,font:this.font,text:""+l.build,size:16,visible:!1}),null!=this._title_text.geometry&&(this._title_text.geometry.id="debug.title.text"),null!=this._version_text.geometry&&(this._version_text.geometry.id="debug.version.text")},__class__:_.debug.Inspector},_.debug.ProfilerDebugView=function(){this._setup=!1,_.debug.DebugView.call(this),this.name="Profiler",_.debug.ProfilerDebugView.lists=new w.ds.StringMap},_.debug.ProfilerDebugView.__name__=!0,_.debug.ProfilerDebugView.add_offset=function(e,t){var n=_.debug.ProfilerDebugView.lists.get(e),i=_.debug.ProfilerDebugView.lists.get(t);null!=n&&null!=i?n.offsets.push(i):(w.Log.trace("not found for "+e+" or "+t,{fileName:"ProfilerDebugView.hx",lineNumber:32,className:"luxe.debug.ProfilerDebugView",methodName:"add_offset"}),w.Log.trace(m.string(n)+" / "+m.string(i),{fileName:"ProfilerDebugView.hx",lineNumber:33,className:"luxe.debug.ProfilerDebugView",methodName:"add_offset"}))},_.debug.ProfilerDebugView.hide_item=function(e){var t=_.debug.ProfilerDebugView.lists.get(e);null!=t&&(t.hidden=!0,t.bar.hide())},_.debug.ProfilerDebugView.show_item=function(e){var t=_.debug.ProfilerDebugView.lists.get(e);null!=t&&(t.hidden=!1,t.bar.show())},_.debug.ProfilerDebugView.start=function(e){var t=_.debug.ProfilerDebugView.lists.get(e);null==t&&(t=new _.debug._ProfilerDebugView.ProfilerValue(e,new _.debug._ProfilerDebugView.ProfilerBar(e,(new x.Color).rgb(16121979))),t.bar.set_pos(new x.Vector(2*l.debug.padding.x,3*l.debug.padding.y+20*o.count(_.debug.ProfilerDebugView.lists))),_.debug.ProfilerDebugView.lists.set(e,t)),t.start=l.get_time()},_.debug.ProfilerDebugView.end=function(e){var t=_.debug.ProfilerDebugView.lists.get(e);if(null==t)throw"Profile end called for "+e+" but no start called";t.set()},_.debug.ProfilerDebugView.__super__=_.debug.DebugView,_.debug.ProfilerDebugView.prototype=e(_.debug.DebugView.prototype,{_setup:null,show:function(){for(var e=_.debug.ProfilerDebugView.lists.iterator();e.hasNext();){var t=e.next();t.hidden||t.bar.show()}this._setup||(_.debug.ProfilerDebugView.add_offset("core.render","batch.debug_batcher"),this._setup=!0)},hide:function(){for(var e=_.debug.ProfilerDebugView.lists.iterator();e.hasNext();){var t=e.next();t.bar.hide()}},__class__:_.debug.ProfilerDebugView}),_.debug._ProfilerDebugView={},_.debug._ProfilerDebugView.ProfilerValue=function(e,t){this.accum=0,this.count=0,this.hidden=!1,this.avg=10,this.start=0,this.name=e,this.bar=t,this.history=[],this.offsets=[]},_.debug._ProfilerDebugView.ProfilerValue.__name__=!0,_.debug._ProfilerDebugView.ProfilerValue.prototype={offsets:null,bar:null,name:null,start:null,history:null,avg:null,hidden:null,count:null,accum:null,set:function(){for(var e=l.get_time()-this.start,t=0,n=this.offsets;t<n.length;){var i=n[t];++t,e-=i.history[i.history.length-1]}if(this.history.push(e),this.history.length>this.avg&&this.history.shift(),this.count++,this.count==this.avg){var s=this.accum/this.avg;this.bar.set_value(s),this.bar.set_ping(s),this.accum=0,this.count=0}this.accum+=e,this.bar.visible&&this.bar.set_text(m.string(_.utils.Maths.fixed(1e3*e,4)))},__class__:_.debug._ProfilerDebugView.ProfilerValue},_.debug._ProfilerDebugView.ProfilerBar=function(e,t){this.visible=!1,this.history=33,this.max=16.6,this.height2=8,this.height=8,this.width=128,this.color_red=(new x.Color).rgb(13369344),this.color_green=(new x.Color).rgb(2263108),this.color_normal=(new x.Color).rgb(15790320),this.max=16.666666666666668,this.name=e,this.segment=this.width/this.history,this.height2=2*this.height,this.text_item=new _.Text({no_scene:!0,name:"profiler.text."+e,pos:new x.Vector(0,0),color:t,size:1.8*this.height,depth:999.3,text:"32ms",batcher:l.debug.batcher}),this.bg_geometry=l.draw.box({color:(new x.Color).rgb(592137),depth:999.3,batcher:l.debug.batcher,x:0,y:0,w:this.width,h:this.height}),this.graphbg_geometry=l.draw.box({color:(new x.Color).rgb(2236962),depth:999.3,batcher:l.debug.batcher,x:0,y:0,w:this.width-this.segment,h:2*this.height}),this.bar_geometry=l.draw.box({color:t,depth:999.33,batcher:l.debug.batcher,x:1,y:1,w:this.width-2,h:this.height-2}),this.graph_geometry=new x.geometry.Geometry({color:t,depth:999.33,batcher:l.debug.batcher});for(var n=0,i=this.history;i>n;){var s=n++,r=new x.geometry.Vertex(new x.Vector(this.segment*s,0),t);this.graph_geometry.add(r)}this.graph_geometry.set_primitive_type(x.PrimitiveType.line_strip),this.hide()},_.debug._ProfilerDebugView.ProfilerBar.__name__=!0,_.debug._ProfilerDebugView.ProfilerBar.prototype={bar_geometry:null,bg_geometry:null,graphbg_geometry:null,graph_geometry:null,text_item:null,name:null,width:null,height:null,height2:null,max:null,history:null,visible:null,segment:null,color_red:null,color_green:null,color_normal:null,text:null,pos:null,value:null,ping:null,hide:function(){this.visible=!1,this.bar_geometry.set_visible(!1),this.bg_geometry.set_visible(!1),this.graph_geometry.set_visible(!1),this.graphbg_geometry.set_visible(!1),this.text_item.set_visible(!1)},show:function(){this.visible=!0,this.bar_geometry.set_visible(!0),this.bg_geometry.set_visible(!0),this.graph_geometry.set_visible(!0),this.graphbg_geometry.set_visible(!0),this.text_item.set_visible(!0)},set_ping:function(e){for(var t=_.utils.Maths.fixed(1e3*e,4),n=t/this.max,i=0,s=this.history;s>i;){var r=i++,o=this.graph_geometry.vertices[r];if(r<this.history-1){var a=this.graph_geometry.vertices[r+1];null!=a&&(o.pos.set_y(a.pos.y),o.color=a.color)}}return n>1?(n=1,this.graph_geometry.vertices[this.history-1].color=this.color_red):this.graph_geometry.vertices[this.history-1].color=.2>n?this.color_green:this.color_normal,.001>n&&(n=.001),this.graph_geometry.vertices[this.history-1].pos.set_y(this.height2*(1-n)),this.ping=e},set_value:function(e){var t=_.utils.Maths.fixed(1e3*e,4),n=t/this.max;n>1?(n=1,this.bar_geometry.set_color(this.color_red)):this.bar_geometry.set_color(.15>n?this.color_green:this.color_normal),.005>n&&(n=.005);var i=(this.width-2)*n;return this.bar_geometry.resize(new x.Vector(i,this.height-2)),this.value=e},set_pos:function(e){return this.bg_geometry.transform.set_pos(e),this.bar_geometry.transform.set_pos(new x.Vector(e.x+1,e.y+1)),this.text_item.set_pos(new x.Vector(e.x+2*this.width+10,e.y-6)),this.graphbg_geometry.transform.set_pos(new x.Vector(e.x+this.width+2,e.y-4)),this.graph_geometry.transform.set_pos(this.graphbg_geometry.transform.get_pos()),this.pos=e},set_text:function(e){return this.text_item.set_text(this.name+" | "+e+"ms"),this.text=e},__class__:_.debug._ProfilerDebugView.ProfilerBar,__properties__:{set_ping:"set_ping",set_value:"set_value",set_pos:"set_pos",set_text:"set_text"}},_.debug.StatsDebugView=function(){this.hide_debug=!0,this.font_size=15,this.debug_geometry_count=13,this.debug_draw_call_count=3,_.debug.DebugView.call(this),this.name="Statistics",this._last_render_stats={batchers:0,geometry_count:0,dynamic_batched_count:0,static_batched_count:0,visible_count:0,draw_calls:0,vert_count:0,group_count:0},this._render_stats={batchers:0,geometry_count:0,dynamic_batched_count:0,static_batched_count:0,visible_count:0,draw_calls:0,vert_count:0,group_count:0}},_.debug.StatsDebugView.__name__=!0,_.debug.StatsDebugView.__super__=_.debug.DebugView,_.debug.StatsDebugView.prototype=e(_.debug.DebugView.prototype,{_last_render_stats:null,_render_stats:null,debug_draw_call_count:null,debug_geometry_count:null,font_size:null,render_stats_text:null,resource_stats_text:null,resource_list_text:null,get_resource_stats_string:function(){return m.string(l.resources.stats)},get_render_stats_string:function(){return"Renderer Statistics\n	batcher count : "+this._render_stats.batchers+"\n	total geometry : "+this._render_stats.geometry_count+"\n	visible geometry : "+this._render_stats.visible_count+"\n	dynamic batch count : "+this._render_stats.dynamic_batched_count+"\n	static batch count : "+this._render_stats.static_batched_count+"\n	total draw calls : "+this._render_stats.draw_calls+"\n	total vert count : "+this._render_stats.vert_count},create:function(){var e=l.debug;this.render_stats_text=new _.Text({depth:999.3,no_scene:!0,color:new x.Color(0,0,0,1).rgb(16121979),pos:new x.Vector(2*e.padding.x,3*e.padding.y),font:l.renderer.font,text:this.get_render_stats_string(),size:this.font_size,batcher:e.batcher,visible:!1}),this.resource_stats_text=new _.Text({depth:999.3,no_scene:!0,color:new x.Color(0,0,0,1).rgb(16121979),pos:new x.Vector(2*e.padding.x,7.5*e.padding.y),font:l.renderer.font,text:this.get_resource_stats_string(),size:this.font_size,batcher:e.batcher,visible:!1}),this.resource_list_text=new _.Text({depth:999.3,no_scene:!0,color:new x.Color(0,0,0,1).rgb(16121979),pos:new x.Vector(7*e.padding.x,3*e.padding.y),font:l.renderer.font,text:"",size:.8*this.font_size,batcher:e.batcher,visible:!1}),this.resource_list_text.set_locked(!0),this.resource_stats_text.set_locked(!0)},refresh:function(){for(var e="",t="",n="",i=0,s=l.resources.resourcelist;i<s.length;){var r=s[i];++i;var o=r.type;switch(o[1]){case 4:var a=r;e+="	"+a.id+"    ("+a.width_actual+"x"+a.height_actual+"  "+a.estimated_memory()+" )\n";break;case 7:n+="	"+r.id+"\n";break;case 8:t+="	"+r.id+"\n"}}var u="Fonts\n";u+=n,u+="Shader\n",u+=t,u+="Textures\n",u+=e,this.resource_list_text.set_text(u),null!=this.resource_list_text.geometry&&this.resource_list_text.geometry.set_dirty(!0)},process:function(){if(this.visible){var e=!1;this.update_render_stats(),this._last_render_stats.batchers!=this._render_stats.batchers&&(e=!0,this._last_render_stats.batchers=this._render_stats.batchers),this._last_render_stats.geometry_count!=this._render_stats.geometry_count&&(e=!0,this._last_render_stats.geometry_count=this._render_stats.geometry_count),this._last_render_stats.dynamic_batched_count!=this._render_stats.dynamic_batched_count&&(e=!0,this._last_render_stats.dynamic_batched_count=this._render_stats.dynamic_batched_count),this._last_render_stats.static_batched_count!=this._render_stats.static_batched_count&&(e=!0,this._last_render_stats.static_batched_count=this._render_stats.static_batched_count),this._last_render_stats.visible_count!=this._render_stats.visible_count&&(e=!0,this._last_render_stats.visible_count=this._render_stats.visible_count),this._last_render_stats.draw_calls!=this._render_stats.draw_calls&&(e=!0,this._last_render_stats.draw_calls=this._render_stats.draw_calls),this._last_render_stats.group_count!=this._render_stats.group_count&&(e=!0,this._last_render_stats.group_count=this._render_stats.group_count),this._last_render_stats.vert_count!=this._render_stats.vert_count&&(e=!0,this._last_render_stats.vert_count=this._render_stats.vert_count),e&&this.refresh_render_stats()}},onkeydown:function(e){e.keycode==b.input.Keycodes.key_2&&this.visible&&this.toggle_debug_stats()},show:function(){_.debug.DebugView.prototype.show.call(this),this.refresh(),this.render_stats_text.set_visible(!0),this.resource_stats_text.set_visible(!0),this.resource_list_text.set_visible(!0)},hide:function(){_.debug.DebugView.prototype.hide.call(this),this.render_stats_text.set_visible(!1),this.resource_stats_text.set_visible(!1),this.resource_list_text.set_visible(!1)},refresh_render_stats:function(){this.visible&&(this.render_stats_text.set_text(this.get_render_stats_string()),this.resource_stats_text.set_text(this.get_resource_stats_string()),this.resource_stats_text.set_locked(!0),this.render_stats_text.set_locked(!0),null!=this.render_stats_text.geometry&&(this.resource_stats_text.geometry.set_dirty(!0),this.render_stats_text.geometry.set_dirty(!0)))},hide_debug:null,toggle_debug_stats:function(){this.hide_debug=!this.hide_debug},update_render_stats:function(){this.debug_geometry_count=l.debug.batcher.geometry.size(),this.debug_draw_call_count=l.debug.batcher.draw_calls,this._render_stats.batchers=l.renderer.stats.batchers,this._render_stats.geometry_count=l.renderer.stats.geometry_count,this._render_stats.visible_count=l.renderer.stats.visible_count,this._render_stats.dynamic_batched_count=l.renderer.stats.dynamic_batched_count,this._render_stats.static_batched_count=l.renderer.stats.static_batched_count,this._render_stats.draw_calls=l.renderer.stats.draw_calls,this._render_stats.vert_count=l.renderer.stats.vert_count,this.hide_debug&&(this._render_stats.batchers=this._render_stats.batchers-1,this._render_stats.geometry_count=this._render_stats.geometry_count-this.debug_geometry_count,this._render_stats.visible_count=this._render_stats.visible_count-l.debug.batcher.visible_count,this._render_stats.dynamic_batched_count=this._render_stats.dynamic_batched_count-l.debug.batcher.dynamic_batched_count,this._render_stats.static_batched_count=this._render_stats.static_batched_count-l.debug.batcher.static_batched_count,this._render_stats.draw_calls-=this.debug_draw_call_count,this._render_stats.vert_count-=l.debug.batcher.vert_count)},__class__:_.debug.StatsDebugView}),_.debug.TraceDebugView=function(){this._last_logged_length=0,this.max_lines=35,_.debug.DebugView.call(this),this.name="Log",l.debug.add_trace_listener("TraceDebugView",n(this,this.on_trace)),this.logged=new Array,this.add_line("luxe version "+l.build+" Debug Log")},_.debug.TraceDebugView.__name__=!0,_.debug.TraceDebugView.__super__=_.debug.DebugView,_.debug.TraceDebugView.prototype=e(_.debug.DebugView.prototype,{logged:null,lines:null,max_lines:null,on_trace:function(e,t){this.add_line(t.fileName+":"+t.lineNumber+" "+m.string(e))},create:function(){var e=l.debug;this.lines=new _.Text({name:"debug.log.text",no_scene:!0,depth:999.3,color:(new x.Color).rgb(8947848),bounds:new x.Rectangle(e.padding.x+20,e.padding.y+40,l.get_screen().w-2*e.padding.x-20,l.get_screen().h-2*e.padding.y-40),font:l.renderer.font,text:"",align_vertical:x.TextAlign.bottom,size:12,batcher:e.batcher,visible:!1}),null!=this.lines.geometry&&this.lines.geometry.set_locked(!0)},add_line:function(e){null!=this.logged&&(this.logged.push(e),this.visible&&this.refresh_lines())},_last_logged_length:null,refresh_lines:function(){if(this._last_logged_length!=this.logged.length){var e="";if(this.logged.length<=this.max_lines)for(var t=0,n=this.logged;t<n.length;){var i=n[t];++t,e+=i+"\n"}else for(var s=this.logged.length-this.max_lines,r=(this.logged.length,s),o=this.logged.length;o>r;){var a=r++,l=this.logged[a];e+=l+"\n"}this.lines.set_text(e),null!=this.lines.geometry&&(this.lines.geometry.set_locked(!0),this.lines.geometry.set_dirty(!0)),this._last_logged_length=this.logged.length}},refresh:function(){},process:function(){},show:function(){_.debug.DebugView.prototype.show.call(this),this.refresh_lines(),this.lines.set_visible(!0)},hide:function(){_.debug.DebugView.prototype.hide.call(this),this.lines.set_visible(!1)},__class__:_.debug.TraceDebugView}),_.macros={},_.macros.BuildVersion=function(){},_.macros.BuildVersion.__name__=!0,_.macros.BuildVersion.try_git=function(){return""},_.options={},_.options.DrawOptions=function(){},_.options.DrawOptions.__name__=!0,_.structural={},_.structural.BalancedBinarySearchTree=function(e){this.compare=e},_.structural.BalancedBinarySearchTree.__name__=!0,_.structural.BalancedBinarySearchTree.prototype={root:null,compare:null,toString:function(){return""},empty:function(){return null==this.root},size:function(){return this._size(this.root)},height:function(){return this._height(this.root)},_height:function(e){return null==e?0:1+m["int"](Math.max(this._height(e.left),this._height(e.right)))},_size:function(e){return null==e?0:e.nodecount},insert:function(e,t){this.root=this._insert(this.root,e,t),this.root.color=!1},_insert:function(e,t,n){if(null==e)return new _.structural.BalancedBinarySearchTreeNode(t,n,1,!0);var i=this.compare(t,e.key);return 0>i?e.left=this._insert(e.left,t,n):i>0?e.right=this._insert(e.right,t,n):e.value=n,this.is_red(e.right)&&!this.is_red(e.left)&&(e=this.rotate_left(e)),this.is_red(e.left)&&this.is_red(e.left.left)&&(e=this.rotate_right(e)),this.is_red(e.left)&&this.is_red(e.right)&&this.flip_colors(e),e.nodecount=this._size(e.left)+this._size(e.right)+1,e},contains:function(e){var t=null!=this.find(e);return t},find:function(e){return this._find(this.root,e)},_find:function(e,t){if(null==e)return null;var n=this.compare(t,e.key);return 0>n?this._find(e.left,t):n>0?this._find(e.right,t):e.value},rank:function(e){return this._rank(e,this.root)},_rank:function(e,t){if(null==t)return 0;var n=this.compare(e,t.key);return 0>n?this._rank(e,t.left):n>0?1+this._size(t.left)+this._rank(e,t.right):this._size(t.left)},select:function(e){return this._select(this.root,e).key},_select:function(e,t){if(null==e)return null;var n=this._size(e.left);return n>t?this._select(e.left,t):t>n?this._select(e.right,t-n-1):e},min:function(){return this._min(this.root).key},_min:function(e){return null==e.left?e:this._min(e.left)},max:function(){return this._max(this.root).key},_max:function(e){return null==e.right?e:this._max(e.right)},floor:function(e){var t=this._floor(this.root,e);return null==t?null:t.key},_floor:function(e,t){if(null==e)return null;var n=this.compare(t,e.key);if(0==n)return e;if(0>n)return this._floor(e.left,t);var i=this._floor(e.right,t);return null!=i?i:e},ceil:function(e){var t=this._ceil(this.root,e);return null==t?null:t.key},_ceil:function(e,t){if(null==e)return null;var n=this.compare(t,e.key);if(0==n)return e;if(0>n){var i=this._ceil(e.left,t);return null!=i?i:e}return this._ceil(e.right,t)},deleteMin:function(){this.is_red(this.root.left)||this.is_red(this.root.right)||(this.root.color=!0),this.root=this._deleteMin(this.root),this.empty()||(this.root.color=!1)},_deleteMin:function(e){return null==e.left?null:(this.is_red(e.left)||this.is_red(e.left.left)||(e=this.move_red_left(e)),e.left=this._deleteMin(e.left),this.balance(e))},deleteMax:function(){this.is_red(this.root.left)||this.is_red(this.root.right)||(this.root.color=!0),this.root=this._deleteMax(this.root),this.empty()||(this.root.color=!1)},_deleteMax:function(e){return this.is_red(e.left)&&(e=this.rotate_right(e)),null==e.right?null:(this.is_red(e.right)||this.is_red(e.right.left)||(e=this.move_red_right(e)),e.right=this._deleteMax(e.right),this.balance(e))},remove:function(e){return this.is_red(this.root.left)||this.is_red(this.root.right)||(this.root.color=!0),this.contains(e)?(this.root=this._remove(this.root,e),this.empty()||(this.root.color=!1),!0):!1},_remove:function(e,t){var n=this.compare(t,e.key);if(0>n)this.is_red(e.left)||this.is_red(e.left.left)||(e=this.move_red_left(e)),e.left=this._remove(e.left,t);else{this.is_red(e.left)&&(e=this.rotate_right(e));var i=this.compare(t,e.key);if(0==i&&null==e.right)return null;this.is_red(e.right)||this.is_red(e.right.left)||(e=this.move_red_right(e));var s=this.compare(t,e.key);if(0==s){var r=this._min(e.right);e.key=r.key,e.value=r.value,e.right=this._deleteMin(e.right)}else e.right=this._remove(e.right,t)}return this.balance(e)},is_red:function(e){return null==e?!1:1==e.color},rotate_left:function(e){var t=e.right;return e.right=t.left,t.left=e,t.color=e.color,e.color=!0,t.nodecount=e.nodecount,e.nodecount=1+this._size(e.left)+this._size(e.right),t},rotate_right:function(e){var t=e.left;return e.left=t.right,t.right=e,t.color=e.color,e.color=!0,t.nodecount=e.nodecount,e.nodecount=1+this._size(e.left)+this._size(e.right),t},flip_colors:function(e){e.color=!e.color,e.left.color=!e.left.color,e.right.color=!e.right.color},move_red_left:function(e){return this.flip_colors(e),this.is_red(e.right.left)&&(e.right=this.rotate_right(e.right),e=this.rotate_left(e)),e},move_red_right:function(e){return this.flip_colors(e),this.is_red(e.left.left)&&(e=this.rotate_right(e)),e},balance:function(e){return this.is_red(e.right)&&(e=this.rotate_left(e)),this.is_red(e.left)&&this.is_red(e.left.left)&&(e=this.rotate_right(e)),this.is_red(e.left)&&this.is_red(e.right)&&this.flip_colors(e),e.nodecount=this._size(e.left)+this._size(e.right)+1,e},toArray:function(){var e=new Array;return this.traverse(this.root,_.structural.BalancedBinarySearchTraverseMethod.InOrder,function(t){e.push(t.value)}),e},keys:function(){var e=new Array;return this.traverse(this.root,_.structural.BalancedBinarySearchTraverseMethod.InOrder,function(t){e.push(t.key)}),e},iterator:function(){var e=this.toArray();return r.iter(e)},traverse:function(e,t,n){if(null!=e)switch(t[1]){case 0:n(e),this.traverse(e.left,t,n),this.traverse(e.right,t,n);break;case 1:this.traverse(e.left,t,n),n(e),this.traverse(e.right,t,n);break;case 2:this.traverse(e.left,t,n),this.traverse(e.right,t,n),n(e)}},__class__:_.structural.BalancedBinarySearchTree},_.structural.BalancedBinarySearchTreeNode=function(e,t,n,i){this.key=e,this.value=t,this.nodecount=n,this.color=i,this.left=null,this.right=null},_.structural.BalancedBinarySearchTreeNode.__name__=!0,_.structural.BalancedBinarySearchTreeNode.prototype={left:null,right:null,nodecount:null,color:null,key:null,value:null,__class__:_.structural.BalancedBinarySearchTreeNode},_.structural.BalancedBinarySearchTraverseMethod={__ename__:!0,__constructs__:["PreOrder","InOrder","PostOrder"]},_.structural.BalancedBinarySearchTraverseMethod.PreOrder=["PreOrder",0],_.structural.BalancedBinarySearchTraverseMethod.PreOrder.toString=i,_.structural.BalancedBinarySearchTraverseMethod.PreOrder.__enum__=_.structural.BalancedBinarySearchTraverseMethod,_.structural.BalancedBinarySearchTraverseMethod.InOrder=["InOrder",1],_.structural.BalancedBinarySearchTraverseMethod.InOrder.toString=i,_.structural.BalancedBinarySearchTraverseMethod.InOrder.__enum__=_.structural.BalancedBinarySearchTraverseMethod,_.structural.BalancedBinarySearchTraverseMethod.PostOrder=["PostOrder",2],_.structural.BalancedBinarySearchTraverseMethod.PostOrder.toString=i,_.structural.BalancedBinarySearchTraverseMethod.PostOrder.__enum__=_.structural.BalancedBinarySearchTraverseMethod,_.structural.BinarySearchTree=function(e){this.compare=e},_.structural.BinarySearchTree.__name__=!0,_.structural.BinarySearchTree.prototype={root:null,compare:null,toString:function(){return""},size:function(){return this._size(this.root)},_size:function(e){return null==e?0:e.nodecount},insert:function(e,t){this.root=this._insert(this.root,e,t)},_insert:function(e,t,n){if(null==e)return new _.structural.BinarySearchTreeNode(t,n,1);var i=this.compare(t,e.key);return 0>i?e.left=this._insert(e.left,t,n):i>0?e.right=this._insert(e.right,t,n):e.value=n,e.nodecount=this._size(e.left)+this._size(e.right)+1,e},contains:function(e){return null!=this.find(e)},find:function(e){return this._find(this.root,e)},_find:function(e,t){if(null==e)return null;var n=this.compare(t,e.key);return 0>n?this._find(e.left,t):n>0?this._find(e.right,t):e.value},rank:function(e){return this._rank(e,this.root)},_rank:function(e,t){if(null==t)return 0;var n=this.compare(e,t.key);return 0>n?this._rank(e,t.left):n>0?1+this._size(t.left)+this._rank(e,t.right):this._size(t.left)},select:function(e){return this._select(this.root,e).key},_select:function(e,t){if(null==e)return null;var n=this._size(e.left);return n>t?this._select(e.left,t):t>n?this._select(e.right,t-n-1):e},min:function(){return this._min(this.root).key},_min:function(e){return null==e.left?e:this._min(e.left)},max:function(){return this._max(this.root).key},_max:function(e){return null==e.right?e:this._max(e.right)},floor:function(e){var t=this._floor(this.root,e);return null==t?null:t.key},_floor:function(e,t){if(null==e)return null;var n=this.compare(t,e.key);if(0==n)return e;if(0>n)return this._floor(e.left,t);var i=this._floor(e.right,t);return null!=i?i:e},ceil:function(e){var t=this._ceil(this.root,e);return null==t?null:t.key},_ceil:function(e,t){if(null==e)return null;var n=this.compare(t,e.key);if(0==n)return e;if(0>n){var i=this._ceil(e.left,t);return null!=i?i:e}return this._ceil(e.right,t)},deleteMin:function(){this.root=this._deleteMin(this.root)},_deleteMin:function(e){return null==e.left?e.right:(e.left=this._deleteMin(e.left),e.nodecount=this._size(e.left)+this._size(e.right)+1,e)},deleteMax:function(){this.root=this._deleteMax(this.root)},_deleteMax:function(e){return null==e.right?e.left:(e.right=this._deleteMax(e.right),e.nodecount=this._size(e.left)+this._size(e.right)+1,e)},remove:function(e){this.root=this._remove(this.root,e)},_remove:function(e,t){if(null==e)return null;var n=this.compare(t,e.key);if(0>n)e.left=this._remove(e.left,t);else if(n>0)e.right=this._remove(e.right,t);else{if(null==e.right)return e.left;if(null==e.left)return e.right;var i=e;e=this._min(i.right),e.right=this._deleteMin(i.right),e.left=i.left}return e.nodecount=this._size(e.left)+this._size(e.right)+1,e},toArray:function(){var e=new Array;return this.traverse(this.root,_.structural.BinarySearchTraverseMethod.InOrder,function(t){e.push(t.value)}),e},keys:function(){var e=new Array;return this.traverse(this.root,_.structural.BinarySearchTraverseMethod.InOrder,function(t){e.push(t.key)}),e},iterator:function(){var e=this.toArray();return r.iter(e)},traverse:function(e,t,n){if(null!=e)switch(t[1]){case 0:n(e),this.traverse(e.left,t,n),this.traverse(e.right,t,n);break;case 1:this.traverse(e.left,t,n),n(e),this.traverse(e.right,t,n);break;case 2:this.traverse(e.left,t,n),this.traverse(e.right,t,n),n(e)}},__class__:_.structural.BinarySearchTree},_.structural.BinarySearchTreeNode=function(e,t,n){this.key=e,this.value=t,this.nodecount=n},_.structural.BinarySearchTreeNode.__name__=!0,_.structural.BinarySearchTreeNode.prototype={left:null,right:null,nodecount:null,key:null,value:null,__class__:_.structural.BinarySearchTreeNode},_.structural.BinarySearchTraverseMethod={__ename__:!0,__constructs__:["PreOrder","InOrder","PostOrder"]},_.structural.BinarySearchTraverseMethod.PreOrder=["PreOrder",0],_.structural.BinarySearchTraverseMethod.PreOrder.toString=i,_.structural.BinarySearchTraverseMethod.PreOrder.__enum__=_.structural.BinarySearchTraverseMethod,_.structural.BinarySearchTraverseMethod.InOrder=["InOrder",1],_.structural.BinarySearchTraverseMethod.InOrder.toString=i,_.structural.BinarySearchTraverseMethod.InOrder.__enum__=_.structural.BinarySearchTraverseMethod,_.structural.BinarySearchTraverseMethod.PostOrder=["PostOrder",2],_.structural.BinarySearchTraverseMethod.PostOrder.toString=i,_.structural.BinarySearchTraverseMethod.PostOrder.__enum__=_.structural.BinarySearchTraverseMethod,_.tween={},_.tween.actuators={},_.tween.actuators.IGenericActuator=function(){},_.tween.actuators.IGenericActuator.__name__=!0,_.tween.actuators.IGenericActuator.prototype={autoVisible:null,delay:null,ease:null,onComplete:null,onRepeat:null,onUpdate:null,reflect:null,repeat:null,reverse:null,timescale:null,smartRotation:null,snapping:null,__class__:_.tween.actuators.IGenericActuator},_.tween.actuators.GenericActuator=function(e,t,n){this.timescaled=!1,this._autoVisible=!0,this._delay=0,this._reflect=!1,this._repeat=0,this._reverse=!1,this._smartRotation=!1,this._snapping=!1,this.special=!1,this.target=e,this.properties=n,this.duration=t,this._ease=_.tween.Actuate.defaultEase},_.tween.actuators.GenericActuator.__name__=!0,_.tween.actuators.GenericActuator.__interfaces__=[_.tween.actuators.IGenericActuator],_.tween.actuators.GenericActuator.prototype={duration:null,id:null,properties:null,target:null,_autoVisible:null,_delay:null,_ease:null,_onComplete:null,_onCompleteParams:null,_onRepeat:null,_onRepeatParams:null,_onUpdate:null,_onUpdateParams:null,_reflect:null,_repeat:null,_reverse:null,_smartRotation:null,_snapping:null,special:null,apply:function(){for(var e=0,t=d.fields(this.properties);e<t.length;){var n=t[e];++e,Object.prototype.hasOwnProperty.call(this.target,n)?d.setField(this.target,n,d.field(this.properties,n)):d.setProperty(this.target,n,d.field(this.properties,n))}},autoVisible:function(e){return null==e&&(e=!0),this._autoVisible=e,this},callMethod:function(e,t){return null==t&&(t=[]),e.apply(e,t)},change:function(){null!=this._onUpdate&&this.callMethod(this._onUpdate,this._onUpdateParams)},complete:function(e){null==e&&(e=!0),e&&(this.change(),null!=this._onComplete&&this.callMethod(this._onComplete,this._onCompleteParams)),_.tween.Actuate.unload(this)},delay:function(e){return this._delay=e,this},ease:function(e){return this._ease=e,this},move:function(){},timescaled:null,timescale:function(e){return null==e&&(e=!0),this.timescaled=e,this},onComplete:function(e,t){return this._onComplete=e,this._onCompleteParams=null==t?[]:t,0==this.duration&&this.complete(),this},onRepeat:function(e,t){return this._onRepeat=e,this._onRepeatParams=null==t?[]:t,this},onUpdate:function(e,t){return this._onUpdate=e,this._onUpdateParams=null==t?[]:t,this},pause:function(){},reflect:function(e){return null==e&&(e=!0),this._reflect=e,this.special=!0,this},repeat:function(e){return null==e&&(e=-1),this._repeat=e,this},resume:function(){},reverse:function(e){return null==e&&(e=!0),this._reverse=e,this.special=!0,this},smartRotation:function(e){return null==e&&(e=!0),this._smartRotation=e,this.special=!0,this},snapping:function(e){return null==e&&(e=!0),this._snapping=e,this.special=!0,this},stop:function(){},__class__:_.tween.actuators.GenericActuator},_.tween.actuators.SimpleActuator=function(e,t,n){this.has_timescaled_starttime=!1,this.active=!0,this.propertyDetails=new Array,this.sendChange=!1,this.paused=!1,this.cacheVisible=!1,this.initialized=!1,this.setVisible=!1,this.toggleVisible=!1,this.startTime=l.get_time(),_.tween.actuators.GenericActuator.call(this,e,t,n),_.tween.actuators.SimpleActuator.addedEvent||(_.tween.actuators.SimpleActuator.addedEvent=!0,l.on("update",_.tween.actuators.SimpleActuator.on_internal_update))},_.tween.actuators.SimpleActuator.__name__=!0,_.tween.actuators.SimpleActuator.on_internal_update=function(e){_.tween.actuators.SimpleActuator.update_timer+=e,_.tween.actuators.SimpleActuator.current_time=l.get_time();for(var t,n=_.tween.actuators.SimpleActuator.current_time,i=0,s=0,r=_.tween.actuators.SimpleActuator.actuatorsLength;r>s;){{s++}t=_.tween.actuators.SimpleActuator.actuators[i],null!=t&&t.active?(n=t.timescaled?_.tween.actuators.SimpleActuator.update_timer:_.tween.actuators.SimpleActuator.current_time,t.timescaled&&!t.has_timescaled_starttime&&(t.has_timescaled_starttime=!0,t.startTime=_.tween.actuators.SimpleActuator.update_timer,t.timeOffset=t.startTime),n>t.timeOffset&&t.update(n),i++):(_.tween.actuators.SimpleActuator.actuators.splice(i,1),--_.tween.actuators.SimpleActuator.actuatorsLength)}},_.tween.actuators.SimpleActuator.__super__=_.tween.actuators.GenericActuator,_.tween.actuators.SimpleActuator.prototype=e(_.tween.actuators.GenericActuator.prototype,{timeOffset:null,active:null,cacheVisible:null,detailsLength:null,initialized:null,paused:null,pauseTime:null,propertyDetails:null,sendChange:null,setVisible:null,startTime:null,toggleVisible:null,has_timescaled_starttime:null,autoVisible:function(e){return null==e&&(e=!0),this._autoVisible=e,e||(this.toggleVisible=!1,this.setVisible&&this.setField(this.target,"visible",this.cacheVisible)),this},delay:function(e){return this._delay=e,this.timeOffset=this.startTime+e,this},getField:function(e,t){var n=null;
return n=Object.prototype.hasOwnProperty.call(e,t)?d.field(e,t):d.getProperty(e,t)},initialize:function(){for(var e,t,n=0,i=d.fields(this.properties);n<i.length;){var s=i[n];++n;var r=!0;Object.prototype.hasOwnProperty.call(this.target,s)?t=d.field(this.target,s):(r=!1,t=d.getProperty(this.target,s)),"number"==typeof t&&(e=new _.tween.actuators.PropertyDetails(this.target,s,t,this.getField(this.properties,s)-t,r),this.propertyDetails.push(e))}this.detailsLength=this.propertyDetails.length,this.initialized=!0},move:function(){this.toggleVisible=Object.prototype.hasOwnProperty.call(this.properties,"alpha")&&Object.prototype.hasOwnProperty.call(this.properties,"visible"),this.toggleVisible&&0!=this.properties.alpha&&!this.getField(this.target,"visible")&&(this.setVisible=!0,this.cacheVisible=this.getField(this.target,"visible"),this.setField(this.target,"visible",!0)),this.timeOffset=this.startTime,_.tween.actuators.SimpleActuator.actuators.push(this),++_.tween.actuators.SimpleActuator.actuatorsLength},onUpdate:function(e,t){return this._onUpdate=e,this._onUpdateParams=null==t?[]:t,this.sendChange=!0,this},pause:function(){this.paused=!0,this.pauseTime=this.timescaled?_.tween.actuators.SimpleActuator.update_timer:_.tween.actuators.SimpleActuator.current_time},resume:function(){this.paused&&(this.paused=!1,this.timeOffset+=((this.timescaled?_.tween.actuators.SimpleActuator.update_timer:_.tween.actuators.SimpleActuator.current_time)-this.pauseTime)/1e3)},setField:function(e,t,n){Object.prototype.hasOwnProperty.call(e,t)?e[t]=n:d.setProperty(e,t,n)},setProperty:function(e,t){e.isField?d.setProperty(e.target,e.propertyName,t):d.setProperty(e.target,e.propertyName,t)},stop:function(e,t,n){if(this.active){if(null==e)return this.active=!1,t&&this.apply(),void this.complete(n);for(var i=0,s=d.fields(e);i<s.length;){var r=s[i];if(++i,Object.prototype.hasOwnProperty.call(this.properties,r))return this.active=!1,t&&this.apply(),void this.complete(n)}}},update:function(e){if(!this.paused){var t,n,i=(e-this.timeOffset)/this.duration;if(i>1&&(i=1),this.initialized||this.initialize(),this.special){n=this._ease.calculate(this._reverse?1-i:i);for(var s,r=0,o=this.detailsLength;o>r;){var a=r++;if(t=this.propertyDetails[a],!this._smartRotation||"rotation"!=t.propertyName&&"rotationX"!=t.propertyName&&"rotationY"!=t.propertyName&&"rotationZ"!=t.propertyName)s=t.start+t.change*n;else{var l=t.change%360;l>180?l-=360:-180>l&&(l+=360),s=t.start+l*n}this._snapping?this.setProperty(t,Math.round(s)):t.isField?d.setProperty(t.target,t.propertyName,s):d.setProperty(t.target,t.propertyName,s)}}else{n=this._ease.calculate(i);for(var u=0,_=this.detailsLength;_>u;){var h=u++;t=this.propertyDetails[h],this.setProperty(t,t.start+t.change*n)}}if(1==i){if(0==this._repeat)return this.active=!1,this.toggleVisible&&0==this.getField(this.target,"alpha")&&this.setField(this.target,"visible",!1),void this.complete(!0);null!=this._onRepeat&&this.callMethod(this._onRepeat,this._onRepeatParams),this._reflect&&(this._reverse=!this._reverse),this.startTime=e,this.timeOffset=this.startTime+this._delay,this._repeat>0&&this._repeat--}this.sendChange&&this.change()}},__class__:_.tween.actuators.SimpleActuator}),_.tween.easing={},_.tween.easing.Quad=function(){},_.tween.easing.Quad.__name__=!0,_.tween.easing.Quad.__properties__={get_easeOut:"get_easeOut",get_easeInOut:"get_easeInOut",get_easeIn:"get_easeIn"},_.tween.easing.Quad.get_easeIn=function(){return new _.tween.easing.QuadEaseIn},_.tween.easing.Quad.get_easeInOut=function(){return new _.tween.easing.QuadEaseInOut},_.tween.easing.Quad.get_easeOut=function(){return new _.tween.easing.QuadEaseOut},_.tween.easing.IEasing=function(){},_.tween.easing.IEasing.__name__=!0,_.tween.easing.IEasing.prototype={calculate:null,ease:null,__class__:_.tween.easing.IEasing},_.tween.easing.QuadEaseOut=function(){},_.tween.easing.QuadEaseOut.__name__=!0,_.tween.easing.QuadEaseOut.__interfaces__=[_.tween.easing.IEasing],_.tween.easing.QuadEaseOut.prototype={calculate:function(e){return-e*(e-2)},ease:function(e,t,n,i){return-n*(e/=i)*(e-2)+t},__class__:_.tween.easing.QuadEaseOut},_.tween.Actuate=function(){},_.tween.Actuate.__name__=!0,_.tween.Actuate.apply=function(e,t,n){_.tween.Actuate.stop(e,t),null==n&&(n=_.tween.Actuate.defaultActuator);var i=y.createInstance(n,[e,0,t]);return i.apply(),i},_.tween.Actuate.getLibrary=function(e,t){return null==t&&(t=!0),!_.tween.Actuate.targetLibraries.exists(e)&&t&&_.tween.Actuate.targetLibraries.set(e,new Array),_.tween.Actuate.targetLibraries.get(e)},_.tween.Actuate.motionPath=function(e,t,n,i){return null==i&&(i=!0),_.tween.Actuate.tween(e,t,n,i,_.tween.actuators.MotionPathActuator)},_.tween.Actuate.pause=function(e){if(v.Boot.__instanceof(e,_.tween.actuators.GenericActuator))v.Boot.__cast(e,_.tween.actuators.GenericActuator).pause();else{var t=_.tween.Actuate.getLibrary(e,!1);if(null!=t)for(var n=0;n<t.length;){var i=t[n];++n,i.pause()}}},_.tween.Actuate.pauseAll=function(){for(var e=_.tween.Actuate.targetLibraries.iterator();e.hasNext();)for(var t=e.next(),n=0;n<t.length;){var i=t[n];++n,i.pause()}},_.tween.Actuate.reset=function(){for(var e=_.tween.Actuate.targetLibraries.iterator();e.hasNext();)for(var t=e.next(),n=t.length-1;n>=0;)t[n].stop(null,!1,!1),n--;_.tween.Actuate.targetLibraries=new w.ds.ObjectMap},_.tween.Actuate.resume=function(e){if(v.Boot.__instanceof(e,_.tween.actuators.GenericActuator))v.Boot.__cast(e,_.tween.actuators.GenericActuator).resume();else{var t=_.tween.Actuate.getLibrary(e,!1);if(null!=t)for(var n=0;n<t.length;){var i=t[n];++n,i.resume()}}},_.tween.Actuate.resumeAll=function(){for(var e=_.tween.Actuate.targetLibraries.iterator();e.hasNext();)for(var t=e.next(),n=0;n<t.length;){var i=t[n];++n,i.resume()}},_.tween.Actuate.stop=function(e,t,n,i){if(null==i&&(i=!0),null==n&&(n=!1),null!=e)if(v.Boot.__instanceof(e,_.tween.actuators.GenericActuator))v.Boot.__cast(e,_.tween.actuators.GenericActuator).stop(null,n,i);else{var s=_.tween.Actuate.getLibrary(e,!1);if(null!=s){if("string"==typeof t){var r={};d.setField(r,t,null),t=r}else if(t instanceof Array&&null==t.__enum__){var o,a={},l=0;for(o=v.Boot.__cast(t,Array);l<o.length;){var u=o[l];++l,d.setField(a,u,null)}t=a}for(var h=s.length-1;h>=0;)s[h].stop(t,n,i),h--}}},_.tween.Actuate.timer=function(e,t){return _.tween.Actuate.tween(new _.tween._Actuate.TweenTimer(0),e,new _.tween._Actuate.TweenTimer(1),!1,t)},_.tween.Actuate.tween=function(e,t,n,i,s){if(null==i&&(i=!0),null!=e){if(t>0){null==s&&(s=_.tween.Actuate.defaultActuator);var r=y.createInstance(s,[e,t,n]),o=_.tween.Actuate.getLibrary(r.target);if(i){for(var a=o.length-1;a>=0;)o[a].stop(r.properties,!1,!1),a--;o=_.tween.Actuate.getLibrary(r.target)}return o.push(r),r.move(),r}return _.tween.Actuate.apply(e,n,s)}return null},_.tween.Actuate.unload=function(e){var t=e.target;null!=_.tween.Actuate.targetLibraries.h.__keys__[t.__id__]&&(r.remove(_.tween.Actuate.targetLibraries.h[t.__id__],e),0==_.tween.Actuate.targetLibraries.h[t.__id__].length&&_.tween.Actuate.targetLibraries.remove(t))},_.tween.Actuate.update=function(e,t,n,i,s){null==s&&(s=!0);var r={start:n,end:i};return _.tween.Actuate.tween(e,t,r,s,_.tween.actuators.MethodActuator)},_.tween._Actuate={},_.tween._Actuate.TweenTimer=function(e){this.progress=e},_.tween._Actuate.TweenTimer.__name__=!0,_.tween._Actuate.TweenTimer.prototype={progress:null,__class__:_.tween._Actuate.TweenTimer},_.tween.MotionPath=function(){this._x=new _.tween.ComponentPath,this._y=new _.tween.ComponentPath,this._rotation=null},_.tween.MotionPath.__name__=!0,_.tween.MotionPath.prototype={rotation:null,x:null,y:null,_rotation:null,_x:null,_y:null,bezier:function(e,t,n,i,s){return null==s&&(s=1),this._x.addPath(new _.tween.BezierPath(e,n,s)),this._y.addPath(new _.tween.BezierPath(t,i,s)),this},line:function(e,t,n){return null==n&&(n=1),this._x.addPath(new _.tween.LinearPath(e,n)),this._y.addPath(new _.tween.LinearPath(t,n)),this},get_rotation:function(){return null==this._rotation&&(this._rotation=new _.tween.RotationPath(this._x,this._y)),this._rotation},get_x:function(){return this._x},get_y:function(){return this._y},__class__:_.tween.MotionPath,__properties__:{get_y:"get_y",get_x:"get_x",get_rotation:"get_rotation"}},_.tween.IComponentPath=function(){},_.tween.IComponentPath.__name__=!0,_.tween.IComponentPath.prototype={end:null,start:null,calculate:null,__class__:_.tween.IComponentPath},_.tween.ComponentPath=function(){this.paths=new Array,this.start=0,this.totalStrength=0},_.tween.ComponentPath.__name__=!0,_.tween.ComponentPath.__interfaces__=[_.tween.IComponentPath],_.tween.ComponentPath.prototype={start:null,end:null,paths:null,totalStrength:null,addPath:function(e){this.paths.push(e),this.totalStrength+=e.strength},calculate:function(e){if(1==this.paths.length)return this.paths[0].calculate(this.start,e);for(var t=e*this.totalStrength,n=this.start,i=0,s=this.paths;i<s.length;){var r=s[i];if(++i,!(t>r.strength))return r.calculate(n,t/r.strength);t-=r.strength,n=r.end}return 0},get_end:function(){if(this.paths.length>0){var e=this.paths[this.paths.length-1];return e.end}return this.start},__class__:_.tween.ComponentPath,__properties__:{get_end:"get_end"}},_.tween.BezierPath=function(e,t,n){this.end=e,this.control=t,this.strength=n},_.tween.BezierPath.__name__=!0,_.tween.BezierPath.prototype={control:null,end:null,strength:null,calculate:function(e,t){return(1-t)*(1-t)*e+2*(1-t)*t*this.control+t*t*this.end},__class__:_.tween.BezierPath},_.tween.LinearPath=function(e,t){_.tween.BezierPath.call(this,e,0,t)},_.tween.LinearPath.__name__=!0,_.tween.LinearPath.__super__=_.tween.BezierPath,_.tween.LinearPath.prototype=e(_.tween.BezierPath.prototype,{calculate:function(e,t){return e+t*(this.end-e)},__class__:_.tween.LinearPath}),_.tween.RotationPath=function(e,t){this.step=.01,this._x=e,this._y=t,this.offset=0,this.start=this.calculate(0)},_.tween.RotationPath.__name__=!0,_.tween.RotationPath.__interfaces__=[_.tween.IComponentPath],_.tween.RotationPath.prototype={end:null,offset:null,start:null,step:null,_x:null,_y:null,calculate:function(e){var t=this._x.calculate(e)-this._x.calculate(e+this.step),n=this._y.calculate(e)-this._y.calculate(e+this.step),i=Math.atan2(n,t)*(180/Math.PI);return i=(i+this.offset)%360},get_end:function(){return this.calculate(1)},__class__:_.tween.RotationPath,__properties__:{get_end:"get_end"}},_.tween.actuators.MethodActuator=function(e,t,n){this.currentParameters=new Array,this.tweenProperties={},_.tween.actuators.SimpleActuator.call(this,e,t,n),Object.prototype.hasOwnProperty.call(n,"start")||(this.properties.start=new Array),Object.prototype.hasOwnProperty.call(n,"end")||(this.properties.end=this.properties.start);for(var i=0,s=this.properties.start.length;s>i;){{i++}this.currentParameters.push(null)}},_.tween.actuators.MethodActuator.__name__=!0,_.tween.actuators.MethodActuator.__super__=_.tween.actuators.SimpleActuator,_.tween.actuators.MethodActuator.prototype=e(_.tween.actuators.SimpleActuator.prototype,{currentParameters:null,tweenProperties:null,apply:function(){this.callMethod(this.target,this.properties.end)},complete:function(e){null==e&&(e=!0);for(var t=0,n=this.properties.start.length;n>t;){var i=t++;this.currentParameters[i]=d.field(this.tweenProperties,"param"+i)}this.callMethod(this.target,this.currentParameters),_.tween.actuators.SimpleActuator.prototype.complete.call(this,e)},initialize:function(){for(var e,t,n,i=0,s=this.properties.start.length;s>i;){var r=i++;t="param"+r,n=this.properties.start[r],this.tweenProperties[t]=n,("number"==typeof n||(0|n)===n)&&(e=new _.tween.actuators.PropertyDetails(this.tweenProperties,t,n,this.properties.end[r]-n),this.propertyDetails.push(e))}this.detailsLength=this.propertyDetails.length,this.initialized=!0},update:function(e){if(_.tween.actuators.SimpleActuator.prototype.update.call(this,e),this.active){for(var t=0,n=this.properties.start.length;n>t;){var i=t++;this.currentParameters[i]=d.field(this.tweenProperties,"param"+i)}this.callMethod(this.target,this.currentParameters)}},__class__:_.tween.actuators.MethodActuator}),_.tween.actuators.MotionPathActuator=function(e,t,n){_.tween.actuators.SimpleActuator.call(this,e,t,n)},_.tween.actuators.MotionPathActuator.__name__=!0,_.tween.actuators.MotionPathActuator.__super__=_.tween.actuators.SimpleActuator,_.tween.actuators.MotionPathActuator.prototype=e(_.tween.actuators.SimpleActuator.prototype,{apply:function(){for(var e=0,t=d.fields(this.properties);e<t.length;){var n=t[e];++e,Object.prototype.hasOwnProperty.call(this.target,n)?d.setField(this.target,n,v.Boot.__cast(d.field(this.properties,n),_.tween.IComponentPath).get_end()):d.setProperty(this.target,n,v.Boot.__cast(d.field(this.properties,n),_.tween.IComponentPath).get_end())}},initialize:function(){for(var e,t,n=0,i=d.fields(this.properties);n<i.length;){var s=i[n];if(++n,t=v.Boot.__cast(d.field(this.properties,s),_.tween.IComponentPath),null!=t){var r=!0;Object.prototype.hasOwnProperty.call(this.target,s)?t.start=d.field(this.target,s):(r=!1,t.start=d.getProperty(this.target,s)),e=new _.tween.actuators.PropertyPathDetails(this.target,s,t,r),this.propertyDetails.push(e)}}this.detailsLength=this.propertyDetails.length,this.initialized=!0},update:function(e){if(!this.paused){var t,n=(e-this.timeOffset)/this.duration;if(n>1&&(n=1),this.initialized||this.initialize(),this.special){t=this._ease.calculate(this._reverse?1-n:n);for(var i=0,s=this.propertyDetails;i<s.length;){var r=s[i];++i,this._snapping?r.isField?d.setField(r.target,r.propertyName,Math.round(v.Boot.__cast(r,_.tween.actuators.PropertyPathDetails).path.calculate(t))):d.setProperty(r.target,r.propertyName,Math.round(v.Boot.__cast(r,_.tween.actuators.PropertyPathDetails).path.calculate(t))):r.isField?d.setField(r.target,r.propertyName,v.Boot.__cast(r,_.tween.actuators.PropertyPathDetails).path.calculate(t)):d.setProperty(r.target,r.propertyName,v.Boot.__cast(r,_.tween.actuators.PropertyPathDetails).path.calculate(t))}}else{t=this._ease.calculate(n);for(var o=0,a=this.propertyDetails;o<a.length;){var l=a[o];++o,l.isField?d.setField(l.target,l.propertyName,v.Boot.__cast(l,_.tween.actuators.PropertyPathDetails).path.calculate(t)):d.setProperty(l.target,l.propertyName,v.Boot.__cast(l,_.tween.actuators.PropertyPathDetails).path.calculate(t))}}if(1==n){if(0==this._repeat)return this.active=!1,this.toggleVisible&&0==this.getField(this.target,"alpha")&&this.setField(this.target,"visible",!1),void this.complete(!0);this._reflect&&(this._reverse=!this._reverse),this.startTime=e,this.timeOffset=this.startTime+this._delay,this._repeat>0&&this._repeat--}this.sendChange&&this.change()}},__class__:_.tween.actuators.MotionPathActuator}),_.tween.actuators.PropertyDetails=function(e,t,n,i,s){null==s&&(s=!0),this.target=e,this.propertyName=t,this.start=n,this.change=i,this.isField=s},_.tween.actuators.PropertyDetails.__name__=!0,_.tween.actuators.PropertyDetails.prototype={change:null,isField:null,propertyName:null,start:null,target:null,__class__:_.tween.actuators.PropertyDetails},_.tween.actuators.PropertyPathDetails=function(e,t,n,i){null==i&&(i=!0),_.tween.actuators.PropertyDetails.call(this,e,t,0,0,i),this.path=n},_.tween.actuators.PropertyPathDetails.__name__=!0,_.tween.actuators.PropertyPathDetails.__super__=_.tween.actuators.PropertyDetails,_.tween.actuators.PropertyPathDetails.prototype=e(_.tween.actuators.PropertyDetails.prototype,{path:null,__class__:_.tween.actuators.PropertyPathDetails}),_.tween.easing.QuadEaseIn=function(){},_.tween.easing.QuadEaseIn.__name__=!0,_.tween.easing.QuadEaseIn.__interfaces__=[_.tween.easing.IEasing],_.tween.easing.QuadEaseIn.prototype={calculate:function(e){return e*e},ease:function(e,t,n,i){return n*(e/=i)*e+t},__class__:_.tween.easing.QuadEaseIn},_.tween.easing.QuadEaseInOut=function(){},_.tween.easing.QuadEaseInOut.__name__=!0,_.tween.easing.QuadEaseInOut.__interfaces__=[_.tween.easing.IEasing],_.tween.easing.QuadEaseInOut.prototype={calculate:function(e){return(e*=2)<1?.5*e*e:-.5*((e-1)*(e-3)-1)},ease:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*((e-1)*(e-3)-1)+t},__class__:_.tween.easing.QuadEaseInOut},_.utils={},_.utils.GeometryUtils=function(e){this.luxe=e},_.utils.GeometryUtils.__name__=!0,_.utils.GeometryUtils.prototype={luxe:null,segments_for_smooth_circle:function(e,t){return null==t&&(t=6),m["int"](t*Math.sqrt(e))},random_point_in_unit_circle:function(){var e=Math.sqrt(Math.random()),t=6.283185307179586*(-1+2*Math.random());return new x.Vector(e*Math.cos(t),e*Math.sin(t))},point_in_polygon:function(e,t,n){null==t&&(t=new x.Vector);for(var i=!1,s=n.length,r=s-1,o=0;s>o;){var a=o++;n[a].y+t.y>e.y!=n[r].y+t.y>e.y&&e.x<(n[r].x+t.x-(n[a].x+t.x))*(e.y-(n[a].y+t.y))/(n[r].y+t.y-(n[a].y+t.y))+(n[a].x+t.x)&&(i=!i),r=a}return i},point_in_geometry:function(e,t){for(var n=!1,i=t.vertices.length,s=i-1,r=0;i>r;){var o=r++,a=t.vertices[o].pos.clone().transform(t.transform.get_world().get_matrix()),l=t.vertices[s].pos.clone().transform(t.transform.get_world().get_matrix());a.y>e.y!=l.y>e.y&&e.x<(l.x-a.x)*(e.y-a.y)/(l.y-a.y)+a.x&&(n=!n),s=o}return n},intersect_ray_plane:function(e,t,n,i){var s=n.dot(x.Vector.Subtract(i,e)),r=n.dot(t),o=s/r;return x.Vector.Add(e,x.Vector.Multiply(t,o))},__class__:_.utils.GeometryUtils},_.utils.JSON=function(){},_.utils.JSON.__name__=!0,_.utils.JSON.encode=function(e){return new _.utils.json.JSONEncoder(e).getString()},_.utils.JSON.decode=function(e,t){return null==t&&(t=!0),new _.utils.json.JSONDecoder(e,t).getValue()},_.utils.JSON.stringify=function(e){return new _.utils.json.JSONEncoder(e).getString()},_.utils.JSON.parse=function(e,t){return null==t&&(t=!1),new _.utils.json.JSONDecoder(e,t).getValue()},_.utils.Maths=function(e){this.luxe=e},_.utils.Maths.__name__=!0,_.utils.Maths.fixed=function(e,t){var n=Math.pow(10,t);return(e*n|0)/n},_.utils.Maths.clamp=function(e,t,n){return t>e?t:e>n?n:e},_.utils.Maths.clamp_bottom=function(e,t){return t>e?t:e},_.utils.Maths.within_range=function(e,t,n){return e>=t&&n>=e},_.utils.Maths.wrap_angle=function(e,t,n){var i=n-t,s=Math.floor((e-t)/i);return e-s*i},_.utils.Maths.nearest_power_of_two=function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e},_.utils.Maths.map_linear=function(e,t,n,i,s){return i+(e-t)*(s-i)/(n-t)},_.utils.Maths.smoothstep=function(e,t,n){return t>=e?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},_.utils.Maths.smootherstep=function(e,t,n){return t>=e?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},_.utils.Maths.random16=function(){return(65280*Math.random()+255*Math.random())/65535},_.utils.Maths.random_int=function(e,t){return e+Math.floor(Math.random()*(t-e+1))},_.utils.Maths.random_float=function(e,t){return e+Math.random()*(t-e)},_.utils.Maths.random_float_spread=function(e){return e*(.5-Math.random())},_.utils.Maths.sign=function(e){return 0>e?-1:e>0?1:0},_.utils.Maths.degToRad=function(e){return.017453292519943278*e},_.utils.Maths.radToDeg=function(e){return 57.29577951308238*e},_.utils.Maths.prototype={luxe:null,__class__:_.utils.Maths},_.utils._UUID={},_.utils._UUID.Rule30=function(e){this.cellsLength=e.length,this.cells=e;for(var t=new f,n=16*this.cellsLength,i=0;n>i;){{i++}this.getBit()}for(var s=0,r=this.cellsLength;r>s;){{s++}t.addChar(this.getBits(8))}this.cells=t.b},_.utils._UUID.Rule30.__name__=!0,_.utils._UUID.Rule30.createWithLength=function(e){for(var t=new f,n=Math.floor,i=Math.random,s=0;e>s;){{s++}t.addChar(n(256*i()))}return new _.utils._UUID.Rule30(t.b)},_.utils._UUID.Rule30.prototype={cells:null,cellsLength:null,getBits:function(e){e>30&&(e=30);for(var t=0,n=0;e>n;){{n++}t=t<<1|this.getBit()}return t},getBit:function(){for(var e=this.cells,t=new f,i=(n(t,t.addChar),0),s=r.cca(e,this.cellsLength-1)<<8|r.cca(e,0),o=0,a=this.cellsLength;a>o;){var l=o++;s=s<<8|r.cca(e,l%this.cellsLength),i=0;for(var u=16;u-->8;)i=i<<1|30>>(s>>u&7)&1;t.b+=String.fromCharCode(i)}return this.cells=t.b,1&i},__class__:_.utils._UUID.Rule30},_.utils.UUID=function(){},_.utils.UUID.__name__=!0,_.utils.UUID.generate_undashed=function(){var e=new f,t=(S=_.utils.UUID.rule30,n(S,S.getBits)),i=function(e,t){return function(n){return e(t,n)}}(_.utils.UUID.hex,e);return i(t(16)),i(t(16)),i(t(16)),i(16384|t(12)),i(32768|t(14)),i(t(16)),i(t(16)),i(t(16)),e.b},_.utils.UUID.get=function(){var e=new f,t=(S=_.utils.UUID.rule30,n(S,S.getBits)),i=function(e,t){return function(n){return e(t,n)}}(_.utils.UUID.hex,e);return i(t(16)),i(t(16)),e.b+="-",i(t(16)),e.b+="-",i(16384|t(12)),e.b+="-",i(32768|t(14)),e.b+="-",i(t(16)),i(t(16)),i(t(16)),e.b.toLowerCase()},_.utils.UUID.hex=function(e,t){var n=new f;do n.addChar(r.cca(_.utils.UUID.hexChars,t%16)),t=t/16|0;while(t>0);for(var i=n.b,s=0,o=4-i.length;o>s;){{s++}e.b+="0"}e.b+=null==i?"null":""+i},_.utils.Utils=function(e){this.luxe=e,this.geometry=new _.utils.GeometryUtils(this.luxe),this._byte_levels=["bytes","Kb","MB","GB","TB"]},_.utils.Utils.__name__=!0,_.utils.Utils.prototype={geometry:null,luxe:null,_byte_levels:null,uniqueid:function(){return w.crypto.Md5.encode(m.string(l.get_time()*Math.random()))},uuid:function(){return _.utils.UUID.get()},stacktrace:function(e){null==e&&(e=100);var t="\n",n=w.CallStack.callStack();n.shift(),n.reverse();for(var i=m["int"](Math.min(n.length,e)),s=0;i>s;){var r=s++,o=n[r],a=o.slice(2);t+=" >  "+a[1]+":"+a[2],r!=i-1&&(t+="\n")}return t},path_is_relative:function(e){return"#"!=e.charAt(0)&&"/"!=e.charAt(0)&&-1==e.indexOf(":\\")&&-1==e.indexOf(":/")&&(-1==e.indexOf("//")||e.indexOf("//")>e.indexOf("#")||e.indexOf("//")>e.indexOf("?"))},find_assets_image_sequence:function(e,t,n){null==n&&(n="1"),null==t&&(t=".png");var i=[],r="",o=null,a=e+n+t,l=new s("("+e+")(\\d\\b)","gi"),u=e+"_"+n+t,_=new s("("+e+")(_\\d\\b)","gi"),h=e+"-"+n+t,c=new s("("+e+")(-\\d\\b)","gi");if(this.luxe.app.assets.listed(a)?(r=a,o=l):this.luxe.app.assets.listed(u)?(r=u,o=_):this.luxe.app.assets.listed(h)?(r=h,o=c):w.Log.trace("Sequence requested from "+e+" but no assets found like `"+a+"` or `"+u+"` or `"+h+"`",{fileName:"Utils.hx",lineNumber:102,className:"luxe.utils.Utils",methodName:"find_assets_image_sequence"}),""!=r){for(var p=this.luxe.app.assets.list.iterator();p.hasNext();){var d=p.next();o.match(d.id)&&i.push(d.id)}i.sort(function(e,t){return e==t?0:t>e?-1:1})}return i},bytes_to_string:function(e){var t=Math.floor(Math.log(e)/Math.log(1024)),n=e/Math.pow(1024,t);return n+this._byte_levels[t]},array_to_bytes:function(e){if(null==e)return null;for(var t=w.io.Bytes.alloc(e.length),n=0,i=t.length;i>n;){var s=n++;t.b[s]=255&e[s]}return t},__class__:_.utils.Utils},_.utils.json={},_.utils.json.JSONTokenType={__ename__:!0,__constructs__:["tUNKNOWN","tCOMMA","tLEFT_BRACE","tRIGHT_BRACE","tLEFT_BRACKET","tRIGHT_BRACKET","tCOLON","tTRUE","tFALSE","tNULL","tSTRING","tNUMBER","tNAN"]},_.utils.json.JSONTokenType.tUNKNOWN=["tUNKNOWN",0],_.utils.json.JSONTokenType.tUNKNOWN.toString=i,_.utils.json.JSONTokenType.tUNKNOWN.__enum__=_.utils.json.JSONTokenType,_.utils.json.JSONTokenType.tCOMMA=["tCOMMA",1],_.utils.json.JSONTokenType.tCOMMA.toString=i,_.utils.json.JSONTokenType.tCOMMA.__enum__=_.utils.json.JSONTokenType,_.utils.json.JSONTokenType.tLEFT_BRACE=["tLEFT_BRACE",2],_.utils.json.JSONTokenType.tLEFT_BRACE.toString=i,_.utils.json.JSONTokenType.tLEFT_BRACE.__enum__=_.utils.json.JSONTokenType,_.utils.json.JSONTokenType.tRIGHT_BRACE=["tRIGHT_BRACE",3],_.utils.json.JSONTokenType.tRIGHT_BRACE.toString=i,_.utils.json.JSONTokenType.tRIGHT_BRACE.__enum__=_.utils.json.JSONTokenType,_.utils.json.JSONTokenType.tLEFT_BRACKET=["tLEFT_BRACKET",4],_.utils.json.JSONTokenType.tLEFT_BRACKET.toString=i,_.utils.json.JSONTokenType.tLEFT_BRACKET.__enum__=_.utils.json.JSONTokenType,_.utils.json.JSONTokenType.tRIGHT_BRACKET=["tRIGHT_BRACKET",5],_.utils.json.JSONTokenType.tRIGHT_BRACKET.toString=i,_.utils.json.JSONTokenType.tRIGHT_BRACKET.__enum__=_.utils.json.JSONTokenType,_.utils.json.JSONTokenType.tCOLON=["tCOLON",6],_.utils.json.JSONTokenType.tCOLON.toString=i,_.utils.json.JSONTokenType.tCOLON.__enum__=_.utils.json.JSONTokenType,_.utils.json.JSONTokenType.tTRUE=["tTRUE",7],_.utils.json.JSONTokenType.tTRUE.toString=i,_.utils.json.JSONTokenType.tTRUE.__enum__=_.utils.json.JSONTokenType,_.utils.json.JSONTokenType.tFALSE=["tFALSE",8],_.utils.json.JSONTokenType.tFALSE.toString=i,_.utils.json.JSONTokenType.tFALSE.__enum__=_.utils.json.JSONTokenType,_.utils.json.JSONTokenType.tNULL=["tNULL",9],_.utils.json.JSONTokenType.tNULL.toString=i,_.utils.json.JSONTokenType.tNULL.__enum__=_.utils.json.JSONTokenType,_.utils.json.JSONTokenType.tSTRING=["tSTRING",10],_.utils.json.JSONTokenType.tSTRING.toString=i,_.utils.json.JSONTokenType.tSTRING.__enum__=_.utils.json.JSONTokenType,_.utils.json.JSONTokenType.tNUMBER=["tNUMBER",11],_.utils.json.JSONTokenType.tNUMBER.toString=i,_.utils.json.JSONTokenType.tNUMBER.__enum__=_.utils.json.JSONTokenType,_.utils.json.JSONTokenType.tNAN=["tNAN",12],_.utils.json.JSONTokenType.tNAN.toString=i,_.utils.json.JSONTokenType.tNAN.__enum__=_.utils.json.JSONTokenType,_.utils.json.JSONDecoder=function(e,t){this.strict=t,this.tokenizer=new _.utils.json.JSONTokenizer(e,t),this.nextToken(),this.value=this.parseValue(),t&&null!=this.nextToken()&&this.tokenizer.parseError("Unexpected characters left in input stream!")},_.utils.json.JSONDecoder.__name__=!0,_.utils.json.JSONDecoder.prototype={strict:null,value:null,tokenizer:null,token:null,getValue:function(){return this.value},nextToken:function(){return this.token=this.tokenizer.getNextToken()},parseArray:function(){var e=new Array;if(this.nextToken(),this.token.type==_.utils.json.JSONTokenType.tRIGHT_BRACKET)return e;if(!this.strict&&this.token.type==_.utils.json.JSONTokenType.tCOMMA){if(this.nextToken(),this.token.type==_.utils.json.JSONTokenType.tRIGHT_BRACKET)return e;this.tokenizer.parseError("Leading commas are not supported.  Expecting ']' but found "+m.string(this.token.value))}for(;;){if(e.push(this.parseValue()),this.nextToken(),this.token.type==_.utils.json.JSONTokenType.tRIGHT_BRACKET)return e;if(this.token.type==_.utils.json.JSONTokenType.tCOMMA){if(this.nextToken(),!this.strict&&this.token.type==_.utils.json.JSONTokenType.tRIGHT_BRACKET)return e}else this.tokenizer.parseError("Expecting ] or , but found "+m.string(this.token.value))}return null},parseObject:function(){var e,t={};if(this.nextToken(),this.token.type==_.utils.json.JSONTokenType.tRIGHT_BRACE)return t;if(!this.strict&&this.token.type==_.utils.json.JSONTokenType.tCOMMA){if(this.nextToken(),this.token.type==_.utils.json.JSONTokenType.tRIGHT_BRACE)return t;this.tokenizer.parseError("Leading commas are not supported.  Expecting '}' but found "+m.string(this.token.value))}for(;;)if(this.token.type==_.utils.json.JSONTokenType.tSTRING)if(e=m.string(this.token.value),this.nextToken(),this.token.type==_.utils.json.JSONTokenType.tCOLON){if(this.nextToken(),d.setField(t,e,this.parseValue()),this.nextToken(),this.token.type==_.utils.json.JSONTokenType.tRIGHT_BRACE)return t;if(this.token.type==_.utils.json.JSONTokenType.tCOMMA){if(this.nextToken(),!this.strict&&this.token.type==_.utils.json.JSONTokenType.tRIGHT_BRACE)return t}else this.tokenizer.parseError("Expecting } or , but found "+m.string(this.token.value))}else this.tokenizer.parseError("Expecting : but found "+m.string(this.token.value));else this.tokenizer.parseError("Expecting string but found "+m.string(this.token.value));return null},parseValue:function(){null==this.token&&this.tokenizer.parseError("Unexpected end of input");var e=this.token.type;switch(e[1]){case 2:return this.parseObject();case 4:return this.parseArray();case 10:return this.token.value;case 11:return this.token.value;case 7:return!0;case 8:return!1;case 9:return null;case 12:if(!this.strict)return this.token.value;this.tokenizer.parseError("Unexpected "+m.string(this.token.value));break;default:this.tokenizer.parseError("Unexpected "+m.string(this.token.value))}return null},__class__:_.utils.json.JSONDecoder},_.utils.json.JSONEncoder=function(e){this.debug=!1,this.jsonString=this.convertToString(e)},_.utils.json.JSONEncoder.__name__=!0,_.utils.json.JSONEncoder.prototype={jsonString:null,getString:function(){return this.jsonString},debug:null,_trace:function(e){this.debug&&w.Log.trace(e,{fileName:"JSONEncoder.hx",lineNumber:70,className:"luxe.utils.json.JSONEncoder",methodName:"_trace"})},convertToString:function(e){if((v.Boot.__instanceof(e,a)||v.Boot.__instanceof(e,c.Map_Impl_))&&(e=o.array(e),this._trace("convertToString: was List or Map")),v.Boot.__instanceof(e,c.Map_Impl_)&&(e=this.mapHash(e),this._trace("convertToString: was Hash")),"string"==typeof e)return this._trace("convertToString: value was String"),this.escapeString(v.Boot.__cast(e,String));if("number"==typeof e)return this._trace("convertToString: value was Float"),Math.isFinite(v.Boot.__cast(e,N))?m.string(e)+"":"null";if("boolean"==typeof e)return this._trace("convertToString: value was Bool"),e?"true":"false";if(e instanceof Array&&null==e.__enum__)return this._trace("convertToString: value was Array"),this.arrayToString(v.Boot.__cast(e,Array));if(v.Boot.__instanceof(e,k)&&null!=e){this._trace("convertToString: value was Dynamic");var t=y.getClass(e);return null==t?this.objectToString(e):this.instanceToString(e,t)}return null!=y.getEnum(e)?(this._trace("convertToString: value was (Type.getEnum(value) != null)"),m.string(y.enumIndex(e))):(this._trace("convertToString: returning null"),"null")},mapHash:function(e){for(var t={},n=e.keys();n.hasNext();){var i=n.next();d.setField(t,i,e.get(i))}return t},escapeString:function(e){for(var t,n="",i=e.length,s=0;i>s;){var o=s++;switch(t=e.charAt(o)){case'"':n+='\\"';break;case"\\":n+="\\\\";break;case"\n":n+="\\n";break;case"\r":n+="\\r";break;case"	":n+="\\t";break;default:var a=r.cca(t,0);if(" ">t||a>127){for(var l=g.hex(r.cca(t,0)),u="",_=0,h=4-l.length;h>_;){{_++}u+="0"}n+="\\u"+u+l}else n+=t}}return'"'+n+'"'},arrayToString:function(e){for(var t="",n=0,i=e.length;i>n;){var s=n++;t.length>0&&(t+=","),t+=this.convertToString(e[s])}return"["+t+"]"},objectToString:function(e){for(var t,n="",i=0,s=d.fields(e);i<s.length;){var r=s[i];++i,t=d.field(e,r),d.isFunction(t)||(n.length>0&&(n+=","),n+=this.escapeString(r)+":"+this.convertToString(t))}return"{"+n+"}"},instanceToString:function(e,t){for(var n,i="",s=0,r=y.getInstanceFields(t);s<r.length;){var o=r[s];++s,n=d.field(e,o),d.isFunction(n)||(i.length>0&&(i+=","),i+=this.escapeString(o)+":"+this.convertToString(n))}return"{"+i+"}"},__class__:_.utils.json.JSONEncoder},_.utils.json.JSONParseError=function(e,t,n){null==n&&(n=""),null==t&&(t=0),null==e&&(e=""),this.name="JSONParseError",this._location=t,this._text=n,this.message=e},_.utils.json.JSONParseError.__name__=!0,_.utils.json.JSONParseError.prototype={_location:null,_text:null,name:null,text:null,location:null,message:null,get_location:function(){return this._location},get_text:function(){return this._text},toString:function(){return this.name+": "+this.message+" at position: "+this._location+' near "'+this._text+'"'},__class__:_.utils.json.JSONParseError,__properties__:{get_location:"get_location",get_text:"get_text"}},_.utils.json.JSONToken=function(e,t){this.type=null==e?_.utils.json.JSONTokenType.tUNKNOWN:e,this.value=t},_.utils.json.JSONToken.__name__=!0,_.utils.json.JSONToken.prototype={type:null,value:null,__class__:_.utils.json.JSONToken},_.utils.json.JSONTokenizer=function(e,t){this.jsonString=e,this.strict=t,this.loc=0,this.nextChar()},_.utils.json.JSONTokenizer.__name__=!0,_.utils.json.JSONTokenizer.prototype={obj:null,jsonString:null,loc:null,ch:null,strict:null,getNextToken:function(){var e=new _.utils.json.JSONToken;this.skipIgnored();var t=this.ch;switch(t){case"{":e.type=_.utils.json.JSONTokenType.tLEFT_BRACE,e.value="{",this.nextChar();break;case"}":e.type=_.utils.json.JSONTokenType.tRIGHT_BRACE,e.value="}",this.nextChar();break;case"[":e.type=_.utils.json.JSONTokenType.tLEFT_BRACKET,e.value="[",this.nextChar();break;case"]":e.type=_.utils.json.JSONTokenType.tRIGHT_BRACKET,e.value="]",this.nextChar();
break;case",":e.type=_.utils.json.JSONTokenType.tCOMMA,e.value=",",this.nextChar();break;case":":e.type=_.utils.json.JSONTokenType.tCOLON,e.value=":",this.nextChar();break;case"t":var n="t"+(this.nextChar()+this.nextChar()+this.nextChar());"true"==n?(e.type=_.utils.json.JSONTokenType.tTRUE,e.value=!0,this.nextChar()):this.parseError("Expecting 'true' but found "+n);break;case"f":var i="f"+this.nextChar()+this.nextChar()+this.nextChar()+this.nextChar();"false"==i?(e.type=_.utils.json.JSONTokenType.tFALSE,e.value=!1,this.nextChar()):this.parseError("Expecting 'false' but found "+i);break;case"n":var s="n"+this.nextChar()+this.nextChar()+this.nextChar();"null"==s?(e.type=_.utils.json.JSONTokenType.tNULL,e.value=null,this.nextChar()):this.parseError("Expecting 'null' but found "+s);break;case"N":var r="N"+this.nextChar()+this.nextChar();"NAN"==r||"NaN"==r?(e.type=_.utils.json.JSONTokenType.tNAN,e.value=Math.NaN,this.nextChar()):this.parseError("Expecting 'nan' but found "+r);break;case'"':e=this.readString();break;default:if(this.isDigit(this.ch)||"-"==this.ch)e=this.readNumber();else{if(""==this.ch)return null;this.parseError("Unexpected "+this.ch+" encountered")}}return e},readString:function(){var e="";for(this.nextChar();'"'!=this.ch&&""!=this.ch;){if("\\"==this.ch){this.nextChar();var t=this.ch;switch(t){case'"':e+='"';break;case"/":e+="/";break;case"\\/":e+="/";break;case"\\":e+="\\";break;case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="	";break;case"u":for(var n="",i=0;4>i;){{i++}this.isHexDigit(this.nextChar())||this.parseError(" Excepted a hex digit, but found: "+this.ch),n+=this.ch}e+=String.fromCharCode(this.hexValToInt(n));break;default:e+="\\"+this.ch}}else e+=this.ch;this.nextChar()}""==this.ch&&this.parseError("Unterminated string literal"),this.nextChar();var s=new _.utils.json.JSONToken;return s.type=_.utils.json.JSONTokenType.tSTRING,s.value=e,s},hexValToInt:function(e){for(var t=0,n=0,i=e.length;i>n;){var s=n++;t<<=4;var r=e.charAt(s).toUpperCase();switch(r){case"1":t+=1;break;case"2":t+=2;break;case"3":t+=3;break;case"4":t+=4;break;case"5":t+=5;break;case"6":t+=6;break;case"7":t+=7;break;case"8":t+=8;break;case"9":t+=9;break;case"A":t+=10;break;case"B":t+=11;break;case"C":t+=12;break;case"D":t+=13;break;case"E":t+=14;break;case"F":t+=15}}return t},readNumber:function(){var e="";if("-"==this.ch&&(e+="-",this.nextChar()),this.isDigit(this.ch)||this.parseError("Expecting a digit"),"0"==this.ch){if(e+=this.ch,this.nextChar(),this.isDigit(this.ch))this.parseError("A digit cannot immediately follow 0");else if(!this.strict&&"x"==this.ch){for(e+=this.ch,this.nextChar(),this.isHexDigit(this.ch)?(e+=this.ch,this.nextChar()):this.parseError('Number in hex format require at least one hex digit after "0x"');this.isHexDigit(this.ch);)e+=this.ch,this.nextChar();e=m.string(this.hexValToInt(e))}}else for(;this.isDigit(this.ch);)e+=this.ch,this.nextChar();if("."==this.ch)for(e+=".",this.nextChar(),this.isDigit(this.ch)||this.parseError("Expecting a digit");this.isDigit(this.ch);)e+=this.ch,this.nextChar();if("e"==this.ch||"E"==this.ch)for(e+="e",this.nextChar(),("+"==this.ch||"-"==this.ch)&&(e+=this.ch,this.nextChar()),this.isDigit(this.ch)||this.parseError("Scientific notation number needs exponent value");this.isDigit(this.ch);)e+=this.ch,this.nextChar();var t=m.parseFloat(e);if(Math.isFinite(t)&&!Math.isNaN(t)){var n=new _.utils.json.JSONToken;return n.type=_.utils.json.JSONTokenType.tNUMBER,n.value=t,n}return this.parseError("Number "+t+" is not valid!"),null},nextChar:function(){return this.ch=this.jsonString.charAt(this.loc++)},skipIgnored:function(){var e;do e=this.loc,this.skipWhite(),this.skipComments();while(e!=this.loc)},skipComments:function(){if("/"==this.ch){this.nextChar();var e=this.ch;switch(e){case"/":do this.nextChar();while("\n"!=this.ch&&""!=this.ch);this.nextChar();break;case"*":for(this.nextChar();;){if("*"==this.ch){if(this.nextChar(),"/"==this.ch){this.nextChar();break}}else this.nextChar();""==this.ch&&this.parseError("Multi-line comment not closed")}break;default:this.parseError("Unexpected "+this.ch+" encountered (expecting '/' or '*' )")}}},skipWhite:function(){for(;this.isWhiteSpace(this.ch);)this.nextChar()},isWhiteSpace:function(e){return" "==e||"	"==e||"\n"==e||"\r"==e},isDigit:function(e){return e>="0"&&"9">=e},isHexDigit:function(e){var t=e.toUpperCase();return this.isDigit(e)||t>="A"&&"F">=t},parseError:function(e){throw new _.utils.json.JSONParseError(e,this.loc,this.jsonString)},__class__:_.utils.json.JSONTokenizer};var x={};x.BatchState=function(e){this.log=!1,this.last_group=-1,this.batcher=e,this.geom_state=new x.geometry.GeometryState,this.last_geom_state=new x.geometry.GeometryState},x.BatchState.__name__=!0,x.BatchState.prototype={batcher:null,geom_state:null,last_geom_state:null,last_texture_id:null,last_shader_id:null,last_group:null,is_clipping:null,clip_rect:null,last_clip_rect:null,log:null,activate:function(e){if(this.geom_state.dirty&&(null!=this.geom_state.texture?(null==this.last_texture_id,this.last_texture_id!=this.geom_state.texture.id&&(this.last_texture_id=this.geom_state.texture.id,this.geom_state.texture.loaded&&(this.geom_state.texture.bind(),this.geom_state.texture.activate(e.tex0_attribute)))):(l.renderer.state.bindTexture2D(null),this.last_texture_id=null),null!=this.geom_state.shader?this.last_shader_id!=this.geom_state.shader.program&&(e.shader_activate(this.geom_state.shader),this.last_shader_id=this.geom_state.shader.program):null!=this.geom_state.texture?(e.shader_activate(e.renderer.default_shader_textured),this.last_shader_id=e.renderer.default_shader_textured.program):(e.shader_activate(e.renderer.default_shader),this.last_shader_id=e.renderer.default_shader.program),this.geom_state.group!=this.last_group)){var t=e.groups.get(this.last_group);if(null!=t)for(var n=0;n<t.length;){var i=t[n];++n,null!=i.post_render&&i.post_render(e)}var s=e.groups.get(this.geom_state.group);if(null!=s)for(var r=0;r<s.length;){var o=s[r];++r,null!=o.pre_render&&o.pre_render(e)}this.last_group=this.geom_state.group}if(this.geom_state.clip){if(this.is_clipping||(b.platform.web.render.opengl.GL.enable(3089),this.is_clipping=!0),null!=this.clip_rect&&!this.clip_rect.equal(this.last_clip_rect)){var a=e.view.get_viewport().h-(this.clip_rect.y+this.clip_rect.h);b.platform.web.render.opengl.GL.scissor(0|this.clip_rect.x,0|a,0|this.clip_rect.w,0|this.clip_rect.h)}}else this.is_clipping&&(b.platform.web.render.opengl.GL.disable(3089),this.is_clipping=!1);this.geom_state.clean()},deactivate:function(e){null!=this.last_texture_id&&l.renderer.state.bindTexture2D(null),l.renderer.state.useProgram(null);var t=e.groups.get(this.last_group);if(null!=t)for(var n=0;n<t.length;){var i=t[n];++n,null!=i.post_render&&i.post_render(e)}this.is_clipping&&b.platform.web.render.opengl.GL.disable(3089)},update:function(e){return this.geom_state.clone_onto(this.last_geom_state),this.geom_state.update(e.state),this.geom_state.clip&&(this.last_clip_rect=this.clip_rect,this.clip_rect=e.get_clip_rect()),this.geom_state.dirty||this.last_clip_rect!=this.clip_rect},str:function(){this.log&&(w.Log.trace("	+ BATCHSTATE LAST ",{fileName:"BatchState.hx",lineNumber:188,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("		depth - "+this.last_geom_state.depth,{fileName:"BatchState.hx",lineNumber:189,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("		group - "+this.last_geom_state.group,{fileName:"BatchState.hx",lineNumber:190,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("		texture - "+(null==this.last_geom_state.texture?"null":this.last_geom_state.texture.id),{fileName:"BatchState.hx",lineNumber:191,className:"phoenix.BatchState",methodName:"str"}),null!=this.last_geom_state.texture&&w.Log.trace("			 "+m.string(this.last_geom_state.texture.texture),{fileName:"BatchState.hx",lineNumber:193,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("		shader - "+(null==this.last_geom_state.shader?"null":this.last_geom_state.shader.id),{fileName:"BatchState.hx",lineNumber:195,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("		primitive_type - "+m.string(this.last_geom_state.primitive_type),{fileName:"BatchState.hx",lineNumber:196,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("		clip - "+m.string(this.last_geom_state.clip),{fileName:"BatchState.hx",lineNumber:197,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("	- BATCHSTATE LAST",{fileName:"BatchState.hx",lineNumber:198,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("	+ BATCHSTATE STATE",{fileName:"BatchState.hx",lineNumber:200,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("		depth - "+this.geom_state.depth,{fileName:"BatchState.hx",lineNumber:201,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("		group - "+this.geom_state.group,{fileName:"BatchState.hx",lineNumber:202,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("		texture - "+(null==this.geom_state.texture?"null":this.geom_state.texture.id),{fileName:"BatchState.hx",lineNumber:203,className:"phoenix.BatchState",methodName:"str"}),null!=this.geom_state.texture&&w.Log.trace("			 "+m.string(this.geom_state.texture.texture),{fileName:"BatchState.hx",lineNumber:205,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("		shader - "+(null==this.geom_state.shader?"null":this.geom_state.shader.id),{fileName:"BatchState.hx",lineNumber:207,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("		primitive_type - "+m.string(this.geom_state.primitive_type),{fileName:"BatchState.hx",lineNumber:208,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("		clip - "+m.string(this.geom_state.clip),{fileName:"BatchState.hx",lineNumber:209,className:"phoenix.BatchState",methodName:"str"}),w.Log.trace("	- BATCHSTATE STATE",{fileName:"BatchState.hx",lineNumber:210,className:"phoenix.BatchState",methodName:"str"}))},__class__:x.BatchState},x.PrimitiveType={__ename__:!0,__constructs__:["none","line_strip","line_loop","lines","triangle_strip","triangles","triangle_fan","points"]},x.PrimitiveType.none=["none",0],x.PrimitiveType.none.toString=i,x.PrimitiveType.none.__enum__=x.PrimitiveType,x.PrimitiveType.line_strip=["line_strip",1],x.PrimitiveType.line_strip.toString=i,x.PrimitiveType.line_strip.__enum__=x.PrimitiveType,x.PrimitiveType.line_loop=["line_loop",2],x.PrimitiveType.line_loop.toString=i,x.PrimitiveType.line_loop.__enum__=x.PrimitiveType,x.PrimitiveType.lines=["lines",3],x.PrimitiveType.lines.toString=i,x.PrimitiveType.lines.__enum__=x.PrimitiveType,x.PrimitiveType.triangle_strip=["triangle_strip",4],x.PrimitiveType.triangle_strip.toString=i,x.PrimitiveType.triangle_strip.__enum__=x.PrimitiveType,x.PrimitiveType.triangles=["triangles",5],x.PrimitiveType.triangles.toString=i,x.PrimitiveType.triangles.__enum__=x.PrimitiveType,x.PrimitiveType.triangle_fan=["triangle_fan",6],x.PrimitiveType.triangle_fan.toString=i,x.PrimitiveType.triangle_fan.__enum__=x.PrimitiveType,x.PrimitiveType.points=["points",7],x.PrimitiveType.points.toString=i,x.PrimitiveType.points.__enum__=x.PrimitiveType,x.BlendMode={__ename__:!0,__constructs__:["zero","one","src_color","one_minus_src_color","src_alpha","one_minus_src_alpha","dst_alpha","one_minus_dst_alpha","dst_color","one_minus_dst_color","src_alpha_saturate"]},x.BlendMode.zero=["zero",0],x.BlendMode.zero.toString=i,x.BlendMode.zero.__enum__=x.BlendMode,x.BlendMode.one=["one",1],x.BlendMode.one.toString=i,x.BlendMode.one.__enum__=x.BlendMode,x.BlendMode.src_color=["src_color",2],x.BlendMode.src_color.toString=i,x.BlendMode.src_color.__enum__=x.BlendMode,x.BlendMode.one_minus_src_color=["one_minus_src_color",3],x.BlendMode.one_minus_src_color.toString=i,x.BlendMode.one_minus_src_color.__enum__=x.BlendMode,x.BlendMode.src_alpha=["src_alpha",4],x.BlendMode.src_alpha.toString=i,x.BlendMode.src_alpha.__enum__=x.BlendMode,x.BlendMode.one_minus_src_alpha=["one_minus_src_alpha",5],x.BlendMode.one_minus_src_alpha.toString=i,x.BlendMode.one_minus_src_alpha.__enum__=x.BlendMode,x.BlendMode.dst_alpha=["dst_alpha",6],x.BlendMode.dst_alpha.toString=i,x.BlendMode.dst_alpha.__enum__=x.BlendMode,x.BlendMode.one_minus_dst_alpha=["one_minus_dst_alpha",7],x.BlendMode.one_minus_dst_alpha.toString=i,x.BlendMode.one_minus_dst_alpha.__enum__=x.BlendMode,x.BlendMode.dst_color=["dst_color",8],x.BlendMode.dst_color.toString=i,x.BlendMode.dst_color.__enum__=x.BlendMode,x.BlendMode.one_minus_dst_color=["one_minus_dst_color",9],x.BlendMode.one_minus_dst_color.toString=i,x.BlendMode.one_minus_dst_color.__enum__=x.BlendMode,x.BlendMode.src_alpha_saturate=["src_alpha_saturate",10],x.BlendMode.src_alpha_saturate.toString=i,x.BlendMode.src_alpha_saturate.__enum__=x.BlendMode,x.BatchGroup=function(e,t){this.pre_render=e,this.post_render=t},x.BatchGroup.__name__=!0,x.BatchGroup.prototype={pre_render:null,post_render:null,__class__:x.BatchGroup},x.Batcher=function(e,t){null==t&&(t=""),this.name="",this.log=!1,this.visible_count=0,this.static_batched_count=0,this.dynamic_batched_count=0,this.draw_calls=0,this.normal_attribute=3,this.color_attribute=2,this.tcoord_attribute=1,this.vert_attribute=0,this.vert_count=0,this.max_floats=0,this.max_verts=0,this.buffer_index=0,this.buffer_count=16,this.static_normal_floats=0,this.static_color_floats=0,this.static_tcoord_floats=0,this.static_vert_floats=0,this.normal_floats=0,this.color_floats=0,this.tcoord_floats=0,this.vert_floats=0,this.tree_changed=!1,this.enabled=!0,this.layer=0,this.id=l.utils.uniqueid(),this.renderer=e,this.geometry=new _.structural.BalancedBinarySearchTree(n(this,this.geometry_compare)),this.groups=new w.ds.IntMap,this.max_verts=m["int"](Math.pow(2,16)),this.max_floats=this.max_verts<<2,this.vertlist=new Float32Array(this.max_floats),this.tcoordlist=new Float32Array(this.max_floats),this.colorlist=new Float32Array(this.max_floats),this.normallist=new Float32Array(this.max_floats),this.static_vertlist=new Float32Array(this.max_floats),this.static_tcoordlist=new Float32Array(this.max_floats),this.static_colorlist=new Float32Array(this.max_floats),this.static_normallist=new Float32Array(this.max_floats),this.view=this.renderer.camera,this.vertexBuffers=[],this.tcoordBuffers=[],this.vcolorBuffers=[],this.normalBuffers=[];for(var i=0,s=this.buffer_count;s>i;){var r=(i++,b.platform.web.render.opengl.GL.createBuffer()),o=b.platform.web.render.opengl.GL.createBuffer(),a=b.platform.web.render.opengl.GL.createBuffer(),u=b.platform.web.render.opengl.GL.createBuffer();b.platform.web.render.opengl.GL.bindBuffer(34962,r),b.platform.web.render.opengl.GL.bufferData(34962,this.vertlist,35048),b.platform.web.render.opengl.GL.bindBuffer(34962,o),b.platform.web.render.opengl.GL.bufferData(34962,this.tcoordlist,35048),b.platform.web.render.opengl.GL.bindBuffer(34962,a),b.platform.web.render.opengl.GL.bufferData(34962,this.colorlist,35048),b.platform.web.render.opengl.GL.bindBuffer(34962,u),b.platform.web.render.opengl.GL.bufferData(34962,this.normallist,35048),this.vertexBuffers.push(r),this.tcoordBuffers.push(o),this.vcolorBuffers.push(a),this.normalBuffers.push(u)}b.platform.web.render.opengl.GL.enableVertexAttribArray(this.vert_attribute),b.platform.web.render.opengl.GL.enableVertexAttribArray(this.tcoord_attribute),b.platform.web.render.opengl.GL.enableVertexAttribArray(this.color_attribute),b.platform.web.render.opengl.GL.enableVertexAttribArray(this.normal_attribute),this.name=0==t.length?l.utils.uniqueid():t},x.Batcher.__name__=!0,x.Batcher.prototype={id:null,layer:null,enabled:null,geometry:null,groups:null,tree_changed:null,vertlist:null,tcoordlist:null,colorlist:null,normallist:null,static_vertlist:null,static_tcoordlist:null,static_colorlist:null,static_normallist:null,vert_floats:null,tcoord_floats:null,color_floats:null,normal_floats:null,static_vert_floats:null,static_tcoord_floats:null,static_color_floats:null,static_normal_floats:null,buffer_count:null,buffer_index:null,max_verts:null,max_floats:null,vert_count:null,vertexBuffers:null,tcoordBuffers:null,vcolorBuffers:null,normalBuffers:null,projectionmatrix_attribute:null,modelviewmatrix_attribute:null,vert_attribute:null,tcoord_attribute:null,color_attribute:null,normal_attribute:null,tex0_attribute:null,tex1_attribute:null,tex2_attribute:null,tex3_attribute:null,tex4_attribute:null,tex5_attribute:null,tex6_attribute:null,tex7_attribute:null,renderer:null,view:null,draw_calls:null,dynamic_batched_count:null,static_batched_count:null,visible_count:null,log:null,name:null,set_layer:function(e){return this.layer=e,this.renderer.batchers.sort((S=this.renderer,n(S,S.sort_batchers))),this.layer},toString:function(){return"Batcher("+this.name+")"},compare:function(e){return this.layer==e.layer?0:this.layer<e.layer?-1:1},add_group:function(e,t,n){if(!this.groups.exists(e)){var i=new Array;this.groups.set(e,i)}this.groups.get(e).push(new x.BatchGroup(t,n))},compare_rule_to_string:function(e){switch(e){case 0:return"same";case 1:return"depth <";case 2:return"depth >";case 3:return"shader <";case 4:return"shader >";case 5:return"shader s._ >";case 6:return"shader _.s <";case 7:return"texture <";case 8:return"texture >";case 9:return"texture t._ >";case 10:return"texture _.t <";case 11:return"primitive <";case 12:return"primitive >";case 13:return"unclipped";case 14:return"clipped";case 15:return"timestamp <";case 16:return"timestamp >";case 17:return"timestamp ==";case 18:return"sequence <";case 19:return"sequence >";case 20:return"fallback"}return"unknown"},compare_rule:function(e,t){if(e.uuid==t.uuid)return 0;if(e.depth<t.depth)return 1;if(e.depth>t.depth)return 2;if(null!=e.shader&&null!=t.shader){if(e.shader.id<t.shader.id)return 3;if(e.shader.id>t.shader.id)return 4}else{if(null!=e.shader&&null==t.shader)return 5;if(null==e.shader&&null!=t.shader)return 6}if(null!=e.texture&&null!=t.texture){if(e.texture.id<t.texture.id)return 7;if(e.texture.id>t.texture.id)return 8}else{if(null!=e.texture&&null==t.texture)return 9;if(null==e.texture&&null!=t.texture)return 10}var n=e.primitive_type[1],i=t.primitive_type[1];if(i>n)return 11;if(n>i)return 12;if(e.clip!=t.clip){if(0==e.clip&&1==t.clip)return 13;if(1==e.clip&&0==t.clip)return 14}return e.timestamp<t.timestamp?15:e.timestamp>t.timestamp?16:e.timestamp==t.timestamp?17:e.sequence<t.sequence?18:e.sequence>t.sequence?19:20},geometry_compare:function(e,t){if(e.uuid==t.uuid)return 0;if(e.depth<t.depth)return-1;if(e.depth>t.depth)return 1;if(null!=e.shader&&null!=t.shader){if(e.shader.id<t.shader.id)return-1;if(e.shader.id>t.shader.id)return 1}else{if(null!=e.shader&&null==t.shader)return 1;if(null==e.shader&&null!=t.shader)return-1}if(null!=e.texture&&null!=t.texture){if(e.texture.id<t.texture.id)return-1;if(e.texture.id>t.texture.id)return 1}else{if(null!=e.texture&&null==t.texture)return 1;if(null==e.texture&&null!=t.texture)return-1}var n=e.primitive_type[1],i=t.primitive_type[1];if(i>n)return-1;if(n>i)return 1;if(e.clip!=t.clip){if(0==e.clip&&1==t.clip)return 1;if(1==e.clip&&0==t.clip)return-1}return e.timestamp<t.timestamp?-1:e.timestamp>=t.timestamp?1:e.sequence<t.sequence?-1:e.sequence>t.sequence?1:1},list_geometry:function(){for(var e=this.geometry.iterator();e.hasNext();){e.next()}},add:function(e,t){null==t&&(t=!1),(null==this.geometry.find(e.key)||t)&&(o.has(e.batchers,this)||e.batchers.push(this),this.geometry.insert(e.key,e),e.added=!0,this.tree_changed=!0)},remove:function(e,t){null==t&&(t=!0),t&&(r.remove(e.batchers,this),0==e.batchers.length&&(e.added=!1));this.geometry.size();this.geometry.remove(e.key);this.geometry.size();this.tree_changed=!0},shader_activate:function(e){e.activate(),this.projectionmatrix_attribute=e.projectionmatrix_attribute,this.modelviewmatrix_attribute=e.modelviewmatrix_attribute,this.tex0_attribute=e.tex0_attribute,this.tex1_attribute=e.tex1_attribute,this.tex2_attribute=e.tex2_attribute,this.tex3_attribute=e.tex3_attribute,this.tex4_attribute=e.tex4_attribute,this.tex5_attribute=e.tex5_attribute,this.tex6_attribute=e.tex6_attribute,this.tex7_attribute=e.tex7_attribute,e.apply_uniforms(),l.renderer.state.activeTexture(33984)},batch:function(e){null==e&&(e=!1),this.dynamic_batched_count=0,this.static_batched_count=0,this.visible_count=0,this.vert_floats=0,this.tcoord_floats=0,this.color_floats=0,this.normal_floats=0;for(var t=new x.BatchState(this),n=null,i=this.geometry.iterator();i.hasNext();){var s=i.next();n=s,null==n||n.dropped||(t.update(n)&&this.vert_floats>0&&this.submit_current_vertex_list(t.last_geom_state.primitive_type),t.activate(this),n.visible&&(this.visible_count++,n.get_locked()?this.submit_static_geometry(n):n.get_primitive_type()==x.PrimitiveType.line_strip||n.get_primitive_type()==x.PrimitiveType.line_loop||n.get_primitive_type()==x.PrimitiveType.triangle_strip||n.get_primitive_type()==x.PrimitiveType.triangle_fan?(this.geometry_batch(n),this.submit_current_vertex_list(n.get_primitive_type()),this.vert_count+=n.vertices.length):(this.geometry_batch(n),this.dynamic_batched_count++,this.vert_count+=n.vertices.length),!e&&n.immediate&&n.drop()))}this.vert_floats>0&&null!=n&&(t.update(n),t.activate(this),this.submit_current_vertex_list(t.last_geom_state.primitive_type)),t.deactivate(this),t=null},draw:function(e){null==e&&(e=!1),this.draw_calls=0,this.vert_count=0,this.view.process(),this.renderer.state.viewport(this.view.get_viewport().x,this.view.get_viewport().y,this.view.get_viewport().w,this.view.get_viewport().h),this.batch(e)},submit_static_geometry:function(e){0!=e.vertices.length&&(this.static_vert_floats=0,this.static_tcoord_floats=0,this.static_color_floats=0,this.static_normal_floats=0,!e.submitted||e.get_dirty()?this.geometry_batch_static(e):(this.static_vert_floats=4*e.vertices.length,this.static_tcoord_floats=4*e.vertices.length,this.static_color_floats=4*e.vertices.length,this.static_normal_floats=4*e.vertices.length),null==e.static_vertex_buffer&&(e.static_vertex_buffer=b.platform.web.render.opengl.GL.createBuffer(),e.static_tcoord_buffer=b.platform.web.render.opengl.GL.createBuffer(),e.static_vcolor_buffer=b.platform.web.render.opengl.GL.createBuffer(),e.static_normal_buffer=b.platform.web.render.opengl.GL.createBuffer()),this._enable_attributes(),b.platform.web.render.opengl.GL.bindBuffer(34962,e.static_vertex_buffer),b.platform.web.render.opengl.GL.vertexAttribPointer(this.vert_attribute,4,5126,!1,0,0),(!e.submitted||e.get_dirty())&&b.platform.web.render.opengl.GL.bufferData(34962,this.static_vertlist,35044),b.platform.web.render.opengl.GL.bindBuffer(34962,e.static_tcoord_buffer),b.platform.web.render.opengl.GL.vertexAttribPointer(this.tcoord_attribute,4,5126,!1,0,0),(!e.submitted||e.get_dirty())&&b.platform.web.render.opengl.GL.bufferData(34962,this.static_tcoordlist,35044),b.platform.web.render.opengl.GL.bindBuffer(34962,e.static_vcolor_buffer),b.platform.web.render.opengl.GL.vertexAttribPointer(this.color_attribute,4,5126,!1,0,0),(!e.submitted||e.get_dirty())&&b.platform.web.render.opengl.GL.bufferData(34962,this.static_colorlist,35044),b.platform.web.render.opengl.GL.bindBuffer(34962,e.static_normal_buffer),b.platform.web.render.opengl.GL.vertexAttribPointer(this.normal_attribute,4,5126,!1,0,0),(!e.submitted||e.get_dirty())&&b.platform.web.render.opengl.GL.bufferData(34962,this.static_normallist,35044),b.platform.web.render.opengl.GL.drawArrays(x.utils.Rendering.get_opengl_primitive_type(e.get_primitive_type()),0,x.utils.Rendering.get_elements_for_type(e.get_primitive_type(),this.static_vert_floats)),this._disable_attributes(),this.draw_calls++,this.static_batched_count++,this.static_vert_floats=0,this.static_tcoord_floats=0,this.static_color_floats=0,this.static_normal_floats=0,e.set_dirty(!1),e.submitted=!0)},submit_current_vertex_list:function(e){if(0!=this.vert_floats){if(this.vert_floats>this.max_floats)throw"uh oh, somehow too many floats are being submitted (max:$max_floats, attempt:$vert_floats).";this._enable_attributes(),b.platform.web.render.opengl.GL.bindBuffer(34962,this.vertexBuffers[this.buffer_index]),b.platform.web.render.opengl.GL.vertexAttribPointer(0,4,5126,!1,0,0),b.platform.web.render.opengl.GL.bufferSubData(34962,0,new Float32Array(this.vertlist.buffer,0,this.vert_floats)),b.platform.web.render.opengl.GL.bindBuffer(34962,this.tcoordBuffers[this.buffer_index]),b.platform.web.render.opengl.GL.vertexAttribPointer(1,4,5126,!1,0,0),b.platform.web.render.opengl.GL.bufferSubData(34962,0,new Float32Array(this.tcoordlist.buffer,0,this.tcoord_floats)),b.platform.web.render.opengl.GL.bindBuffer(34962,this.vcolorBuffers[this.buffer_index]),b.platform.web.render.opengl.GL.vertexAttribPointer(2,4,5126,!1,0,0),b.platform.web.render.opengl.GL.bufferSubData(34962,0,new Float32Array(this.colorlist.buffer,0,this.color_floats)),b.platform.web.render.opengl.GL.bindBuffer(34962,this.normalBuffers[this.buffer_index]),b.platform.web.render.opengl.GL.vertexAttribPointer(3,4,5126,!1,0,0),b.platform.web.render.opengl.GL.bufferSubData(34962,0,new Float32Array(this.normallist.buffer,0,this.normal_floats)),b.platform.web.render.opengl.GL.drawArrays(x.utils.Rendering.get_opengl_primitive_type(e),0,x.utils.Rendering.get_elements_for_type(e,this.vert_floats)),this._disable_attributes(),this.buffer_index++,this.buffer_index>=this.buffer_count&&(this.buffer_index=0),this.vert_floats=0,this.tcoord_floats=0,this.color_floats=0,this.normal_floats=0,this.draw_calls++}},geometry_batch:function(e){var t=e.vertices.length+this.vert_floats/4;t>this.max_verts&&this.submit_current_vertex_list(e.get_primitive_type()),e.batch(this.vert_floats,this.tcoord_floats,this.color_floats,this.normal_floats,this.vertlist,this.tcoordlist,this.colorlist,this.normallist),this.vert_floats+=4*e.vertices.length,this.tcoord_floats+=4*e.vertices.length,this.color_floats+=4*e.vertices.length,this.normal_floats+=4*e.vertices.length},geometry_batch_static:function(e){e.batch(this.static_vert_floats,this.static_tcoord_floats,this.static_color_floats,this.static_normal_floats,this.static_vertlist,this.static_tcoordlist,this.static_colorlist,this.static_normallist),this.static_vert_floats+=4*e.vertices.length,this.static_tcoord_floats+=4*e.vertices.length,this.static_color_floats+=4*e.vertices.length,this.static_normal_floats+=4*e.vertices.length},_enable_attributes:function(){b.platform.web.render.opengl.GL.uniformMatrix4fv(this.projectionmatrix_attribute,!1,this.view.projection_float32array),b.platform.web.render.opengl.GL.uniformMatrix4fv(this.modelviewmatrix_attribute,!1,this.view.view_inverse_float32array)},_disable_attributes:function(){},__class__:x.Batcher,__properties__:{set_layer:"set_layer"}},x.TextAlign={__ename__:!0,__constructs__:["left","right","center","top","bottom"]},x.TextAlign.left=["left",0],x.TextAlign.left.toString=i,x.TextAlign.left.__enum__=x.TextAlign,x.TextAlign.right=["right",1],x.TextAlign.right.toString=i,x.TextAlign.right.__enum__=x.TextAlign,x.TextAlign.center=["center",2],x.TextAlign.center.toString=i,x.TextAlign.center.__enum__=x.TextAlign,x.TextAlign.top=["top",3],x.TextAlign.top.toString=i,x.TextAlign.top.__enum__=x.TextAlign,x.TextAlign.bottom=["bottom",4],x.TextAlign.bottom.toString=i,x.TextAlign.bottom.__enum__=x.TextAlign,x.BitmapFont=function(e){this.pages_loaded=0,this.font_character_count=0,this.font_size=0,this.line_height=0,this.spacing=0,_.Resource.call(this,e,_.ResourceType.font),this.id="Unnamed font",this.line_widths=new Array,this.dimensions=new x.Vector,this.characters=new w.ds.IntMap,this.kernings=new w.ds.ObjectMap,this.scale=new x.Vector(1,1),this.pages=new w.ds.IntMap,this.on_pages_loaded=n(this,this.on_all_pages_loaded)},x.BitmapFont.__name__=!0,x.BitmapFont.load=function(e,t,n){null==t&&(t="assets/");var i=new x.BitmapFont(l.resources),s=l.loadText(w.io.Path.join([t,e]));return i.from_string(s.text,t,n),l.resources.cache(i),i},x.BitmapFont.__super__=_.Resource,x.BitmapFont.prototype=e(_.Resource.prototype,{dimensions:null,spacing:null,line_height:null,font_size:null,font_character_count:null,pages:null,characters:null,kernings:null,scale:null,on_pages_loaded:null,pages_loaded:null,onload:null,line_widths:null,toString:function(){return"BitmapFont("+this.id+")"},_tokenize_font_line:function(e){for(var t=new w.ds.StringMap,n=0;n<e.length;){var i=e[n];++n;var s=i.split("=");t.set(s[0],{key:s[0],value:s[1]})}return t},on_all_pages_loaded:function(){null!=this.onload&&this.onload(this)},one_page_loaded:function(){this.pages_loaded++,this.pages_loaded==o.count(this.pages)&&this.on_all_pages_loaded()},from_string:function(e,t,i,s){null==t&&(t="assets/"),null==e&&(e="");var o=this,a=e.split("\n"),u=[];this.onload=i;for(var _=0;_<a.length;){var h=a[_];++_;var c=h.split(" "),p=c[0];switch(p){case"info":r.remove(c,"info");var d=this._tokenize_font_line(c),f=d.get("face").value;-1!=f.indexOf('"')&&(f=g.replace(f,'"',"")),this.font_size=m.parseFloat(d.get("size").value),this.id=f;break;case"common":r.remove(c,"common");var y=this._tokenize_font_line(c);this.line_height=m.parseFloat(y.get("lineHeight").value);break;case"page":r.remove(c,"page");var w=this._tokenize_font_line(c),v=m.parseInt(w.get("id").value),b=w.get("file").value;-1!=b.indexOf('"')&&(b=g.replace(b,'"',"")),b=g.trim(b),u.push({id:v,file:b}),this.pages.set(v,null);break;case"chars":r.remove(c,"chars");var S=this._tokenize_font_line(c);this.font_character_count=m.parseInt(S.get("count").value);break;case"char":r.remove(c,"char");var T=this._tokenize_font_line(c),E={id:m.parseInt(T.get("id").value),x:m.parseFloat(T.get("x").value),y:m.parseFloat(T.get("y").value),width:m.parseFloat(T.get("width").value),height:m.parseFloat(T.get("height").value),xoffset:m.parseFloat(T.get("xoffset").value),yoffset:m.parseFloat(T.get("yoffset").value),xadvance:m.parseFloat(T.get("xadvance").value),page:m.parseInt(T.get("page").value)};this.set_character(E.id,E);break;case"kerning":r.remove(c,"char");var k=this._tokenize_font_line(c),N=m.parseInt(k.get("first").value),L=m.parseInt(k.get("second").value),G=m.parseFloat(k.get("amount").value);this.set_kerning(N,L,G)}}if(null==s)for(var A=0;A<u.length;){var I=[u[A]];++A;var B=[l.loadTexture(t+I[0].file,n(this,this.one_page_loaded))];B[0].set_onload(function(e,t){return function(){o.pages.set(t[0].id,e[0]),e[0].set_filter_min(x.FilterType.linear)}}(B,I))}else{for(var C=0,M=0;M<s.length;){var R=s[M];++M,this.pages.set(C,R),++C}this.on_all_pages_loaded()}},set_kerning:function(e,t,n){this.kernings.set({glyph:e,index:t},n)},get_kerning:function(e,t){var n={glyph:e,index:t};return null!=this.kernings.h.__keys__[n.__id__]?this.kernings.h[n.__id__]:0},get_text_dimensions:function(e,t){this.line_widths.splice(0,this.line_widths.length);var n,i=0,s=0,o=0,a=r.cca(" ",0);n=this.characters.get(a);for(var l=0,u=e.length;u>l;){var _=l++,h=e.charAt(_);if("\n"!=h){var c,p=r.cca(h,0);c=this.characters.get(p);var d=0;null!=c&&(d=c.xadvance);var m=d;_<e.length-1&&(m+=this.get_kerning(r.cca(h,0),function(){var t,n=e.charAt(_);return t=r.cca(n,0)}(this))),"	"==h&&(m+=4*n.xadvance),i+=m*t.x}else s+=this.line_height*t.y,o=Math.max(o,i),this.line_widths.push(i),i=0}return this.line_widths.push(i),o=Math.max(o,i),s+=this.line_height*t.y,new x.Vector(o,s)},draw_text:function(e){var t;t=null==e.text?"":m.string(e.text);var n;n=null==e.pos?new x.Vector:e.pos;var i;i=null==e.color?new x.Color:e.color;var s;s=null==e.bounds?null:e.bounds;var a;a=null==e.align?x.TextAlign.left:e.align;var u;u=null==e.align_vertical?x.TextAlign.top:e.align_vertical;var _;_=null==e.depth?0:e.depth;var h;h=null==e.size?22:e.size;var c;c=null==e.batcher?l.renderer.batcher:e.batcher;var p;p=null==e.visible?!0:e.visible;var d;d=null==e.immediate?!1:e.immediate;var f;f=null==e.geometry?new x.geometry.CompositeGeometry(null):e.geometry;var g=!1;if(null!=s&&(g=!0),null==this.pages.get(0))return w.Log.trace("i / bitmapfont / "+("Warning ; "+this.id+" font trying to draw without a texture."),{fileName:"BitmapFont.hx",lineNumber:369,className:"phoenix.BitmapFont",methodName:"draw_text"}),f;
for(var y=new Array,v=o.count(this.pages),b=0;v>b;){var S=b++,T=new x.geometry.Geometry({texture:this.pages.get(S),color:i,depth:_,visible:p,immediate:d});T.id="text.page"+S+"."+t,T.set_primitive_type(x.PrimitiveType.triangles),T.immediate=d,y.push(T)}var E,k=h/this.font_size,N=new x.Vector(k,k),L=0,G=0,A=r.cca(" ",0);E=this.characters.get(A);for(var I=0,B=this.get_text_dimensions(t,N),C=B.x,M=t.split("\n"),R=0;R<M.length;){var z=M[R];++R;var V=0;a==x.TextAlign.center?V=C/2-this.line_widths[I]/2:a==x.TextAlign.right&&(V=C-this.line_widths[I]),0!=I&&(G+=this.line_height*N.y,L=0);for(var P=0,K=z.length;K>P;){var O,F=P++,D=z.charAt(F),U=r.cca(D,0);O=this.characters.get(U),null==O&&(O=E);var j=y[O.page],W=this.pages.get(O.page).width_actual,H=this.pages.get(O.page).height_actual,q=O.x/W,X=O.y/H,J=(O.x+O.width)/W,Z=(O.y+O.height)/H,Y=V+L+O.xoffset*N.x,Q=G+O.yoffset*N.y,$=O.width*N.x,et=O.height*N.y,tt=O.xadvance;F<z.length-1&&(tt+=this.get_kerning(O.id,r.cca(D,0))),"	"==D&&(tt+=4*E.xadvance),L+=tt*N.x;var nt=new x.geometry.Vertex(new x.Vector(Y,Q),i);nt.uv.uv0.set(q,X);var it=new x.geometry.Vertex(new x.Vector(Y+$,Q),i);it.uv.uv0.set(J,X);var st=new x.geometry.Vertex(new x.Vector(Y+$,Q+et),i);st.uv.uv0.set(J,Z);var rt=new x.geometry.Vertex(new x.Vector(Y,Q+et),i);rt.uv.uv0.set(q,Z);var ot=new x.geometry.Vertex(new x.Vector(Y,Q),i);ot.uv.uv0.set(q,X);var at=new x.geometry.Vertex(new x.Vector(Y+$,Q+et),i);at.uv.uv0.set(J,Z),j.add(nt),j.add(it),j.add(st),j.add(rt),j.add(ot),j.add(at)}I++}if(f.replace(y),f.add_to_batcher(c),g){var lt=new x.Vector(s.x,s.y);a==x.TextAlign.center?lt.set_x(lt.x+(s.w/2-B.x/2)):a==x.TextAlign.right&&lt.set_x(lt.x+(s.w-B.x)),u==x.TextAlign.center?lt.set_y(lt.y+(s.h/2-B.y/2)):u==x.TextAlign.bottom&&lt.set_y(lt.y+(s.h-B.y)),f.transform.set_origin(new x.Vector(n.x-lt.x,n.y-lt.y)),f.transform.set_pos(n.clone())}else{var ut=n.clone();a==x.TextAlign.center?ut.set_x(n.x-C/2):a==x.TextAlign.right&&ut.set_x(n.x-C),f.transform.set_origin(new x.Vector(n.x-ut.x,n.y-ut.y)),f.transform.set_pos(n.clone())}return f.id="drawn_text- "+r.substr(t,0,10),f.immediate=d,f.set_visible(p),f},set_character:function(e,t){this.characters.set(e,t)},__class__:x.BitmapFont}),x.ProjectionType={__ename__:!0,__constructs__:["ortho","perspective","custom"]},x.ProjectionType.ortho=["ortho",0],x.ProjectionType.ortho.toString=i,x.ProjectionType.ortho.__enum__=x.ProjectionType,x.ProjectionType.perspective=["perspective",1],x.ProjectionType.perspective.toString=i,x.ProjectionType.perspective.__enum__=x.ProjectionType,x.ProjectionType.custom=["custom",2],x.ProjectionType.custom.toString=i,x.ProjectionType.custom.__enum__=x.ProjectionType,x.Camera=function(e){this._refresh_pos=!1,this._setup=!0,this.look_at_dirty=!0,this.projection_dirty=!0,this.transform_dirty=!0,this.minimum_zoom=.01,this.aspect=1.5,this.fov=60,this.far=-1e3,this.near=1e3,this.zoom=1,this.name="camera",this.transform=new x.Transform,this.options=e,null==this.options&&(this.options=this.default_camera_options()),null!=this.options.name&&(this.name=this.options.name),this.projection=null!=this.options.projection?this.options.projection:x.ProjectionType.ortho,this.set_center(new x.Vector(l.get_screen().w/2,l.get_screen().h/2)),this.set_pos(new x.Vector),this.set_viewport(null!=this.options.viewport?this.options.viewport:new x.Rectangle(0,0,l.get_screen().w,l.get_screen().h)),this.up=new x.Vector(0,1,0),this.projection_matrix=new x.Matrix,this.view_matrix=new x.Matrix,this.view_matrix_inverse=new x.Matrix,this.look_at_matrix=new x.Matrix,this.transform.listen(n(this,this.on_transform_cleaned)),this.apply_default_camera_options();var t=this.projection;switch(t[1]){case 0:this.set_ortho(this.options);break;case 1:this.set_perspective(this.options);break;case 2:}this._setup=!1},x.Camera.__name__=!0,x.Camera.prototype={name:null,viewport:null,center:null,zoom:null,near:null,far:null,fov:null,aspect:null,target:null,pos:null,transform:null,minimum_zoom:null,projection_matrix:null,view_matrix:null,view_matrix_inverse:null,look_at_matrix:null,options:null,projection:null,up:null,projection_float32array:null,view_inverse_float32array:null,transform_dirty:null,projection_dirty:null,look_at_dirty:null,_setup:null,set_ortho:function(e){this.projection=x.ProjectionType.ortho,this._merge_options(e)},set_perspective:function(e){this.projection=x.ProjectionType.perspective,this._merge_options(e),this.transform.get_origin().set_xyz(0,0,0)},project:function(e){this.update_view_matrix();var t=(new x.Matrix).multiplyMatrices(this.projection_matrix,this.view_matrix_inverse);return e.clone().applyProjection(t)},unproject:function(e){this.update_view_matrix();var t=(new x.Matrix).multiplyMatrices(this.projection_matrix,this.view_matrix_inverse);return e.clone().applyProjection(t.getInverse(t))},screen_point_to_ray:function(e){return new x.Ray(e,this)},screen_point_to_world:function(e){return this.projection==x.ProjectionType.ortho?this.ortho_screen_to_world(e):this.projection==x.ProjectionType.perspective?this.screen_point_to_ray(e).end:this.ortho_screen_to_world(e)},world_point_to_screen:function(e,t){return this.projection==x.ProjectionType.ortho?this.ortho_world_to_screen(e):this.projection==x.ProjectionType.perspective?this.persepective_world_to_screen(e,t):this.ortho_world_to_screen(e)},process:function(){null!=this.target&&this.update_look_at(),this.update_projection_matrix(),this.update_view_matrix(),this.apply_state(2884,this.options.cull_backfaces),this.apply_state(2929,this.options.depth_test)},on_transform_cleaned:function(){this.transform_dirty=!0},update_look_at:function(){this.look_at_dirty&&null!=this.target&&(this.look_at_matrix.lookAt(this.target,this.get_pos(),this.up),this.get_rotation().setFromRotationMatrix(this.look_at_matrix))},update_view_matrix:function(){this.view_matrix=this.transform.get_world().get_matrix(),this.transform_dirty&&(this.view_matrix_inverse=this.view_matrix.inverse(),this.view_inverse_float32array=this.view_matrix_inverse.float32array(),this.transform_dirty=!1)},update_projection_matrix:function(){if(this.projection_dirty){var e=this.projection;switch(e[1]){case 1:this.projection_matrix.makePerspective(this.fov,this.aspect,this.near,this.far);break;case 0:this.projection_matrix.makeOrthographic(0,this.get_viewport().w,0,this.get_viewport().h,this.near,this.far);break;case 2:}this.projection_float32array=this.projection_matrix.float32array(),this.projection_dirty=!1}},apply_state:function(e,t){t?l.renderer.state.enable(e):l.renderer.state.disable(e)},apply_default_camera_options:function(){var e=this.projection;switch(e[1]){case 0:null==this.options.cull_backfaces&&(this.options.cull_backfaces=!1),null==this.options.depth_test&&(this.options.depth_test=!1);break;case 1:null==this.options.cull_backfaces&&(this.options.cull_backfaces=!0),null==this.options.depth_test&&(this.options.depth_test=!0);break;case 2:}},default_camera_options:function(){return{projection:x.ProjectionType.ortho,depth_test:!1,cull_backfaces:!1,near:1e3,far:-1e3}},ortho_screen_to_world:function(e){return this.update_view_matrix(),e.clone().transform(this.view_matrix)},ortho_world_to_screen:function(e){return this.update_view_matrix(),e.clone().transform(this.view_matrix_inverse)},persepective_world_to_screen:function(e,t){null==t&&(t=this.get_viewport());var n=this.project(e),i=t.w/2,s=t.h/2;return new x.Vector(n.x*i+i,-(n.y*s)+s)},set_target:function(e){return null!=e&&(this.look_at_dirty=!0),this.target=e},set_fov:function(e){return this.projection_dirty=!0,this.options.fov=e,this.fov=e},set_aspect:function(e){return this.projection_dirty=!0,this.options.aspect=e,this.aspect=e},set_near:function(e){return this.projection_dirty=!0,this.options.near=e,this.near=e},set_far:function(e){return this.projection_dirty=!0,this.options.far=e,this.far=e},set_zoom:function(e){var t=e;t<this.minimum_zoom&&(t=this.minimum_zoom);var n=this.projection;switch(n[1]){case 0:this.transform.get_scale().set_x(1/t),this.transform.get_scale().set_y(1/t);break;case 1:break;case 2:}return this.zoom=t},_refresh_pos:null,set_center:function(e){this.center=e;var t=this.projection;switch(t[1]){case 0:this._refresh_pos||this._setup||(this.get_pos().ignore_listeners=!0,this.get_pos().set_x(e.x-this.get_viewport().w/2),this.get_pos().set_y(e.y-this.get_viewport().h/2),this.get_pos().ignore_listeners=!1);break;case 1:break;case 2:}return x.Vector.listen(this.get_center(),n(this,this._center_changed)),this.get_center()},get_center:function(){return this.center},get_pos:function(){return this.pos},get_rotation:function(){return this.transform.get_rotation()},get_scale:function(){return this.transform.get_scale()},get_viewport:function(){return this.viewport},set_viewport:function(e){this.viewport=e;var t=this.projection;switch(t[1]){case 0:this.transform.set_origin(new x.Vector(e.w/2,e.h/2)),this.set_pos(this.get_pos());break;case 1:break;case 2:}return this.get_viewport()},set_rotation:function(e){return this.transform.set_rotation(e)},set_scale:function(e){return this.transform.set_scale(e)},set_pos:function(e){this.pos=e;var t=this.projection;switch(t[1]){case 0:var i=this.get_center().x,s=this.get_center().y;null!=this.get_viewport()&&(i=e.x+this.get_viewport().w/2,s=e.y+this.get_viewport().h/2),this._refresh_pos=!0,this.get_center().ignore_listeners=!0,this.get_center().set_x(i),this.get_center().set_y(s),this.get_center().ignore_listeners=!1,this._refresh_pos=!1,this.transform.get_pos().set_x(i),this.transform.get_pos().set_y(s);break;case 1:this.transform.set_pos(this.get_pos());break;case 2:}return x.Vector.listen(this.get_pos(),n(this,this._pos_changed)),this.get_pos()},_merge_options:function(e){null!=this.options.aspect&&(this.options.aspect=e.aspect,this.set_aspect(this.options.aspect)),null!=this.options.far&&(this.options.far=e.far,this.set_far(this.options.far)),null!=this.options.fov&&(this.options.fov=e.fov,this.set_fov(this.options.fov)),null!=this.options.near&&(this.options.near=e.near,this.set_near(this.options.near)),null!=this.options.viewport&&(this.options.viewport=e.viewport,this.set_viewport(this.options.viewport)),this.apply_default_camera_options(),null!=e.cull_backfaces&&(this.options.cull_backfaces=e.cull_backfaces),null!=e.depth_test&&(this.options.depth_test=e.depth_test)},_pos_changed:function(){this.set_pos(this.get_pos())},_center_changed:function(){this.set_center(this.get_center())},__class__:x.Camera,__properties__:{set_rotation:"set_rotation",get_rotation:"get_rotation",set_scale:"set_scale",get_scale:"get_scale",set_pos:"set_pos",get_pos:"get_pos",set_target:"set_target",set_aspect:"set_aspect",set_fov:"set_fov",set_far:"set_far",set_near:"set_near",set_zoom:"set_zoom",set_center:"set_center",get_center:"get_center",set_viewport:"set_viewport",get_viewport:"get_viewport"}},x.Circle=function(e,t,n){null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.r=n},x.Circle.__name__=!0,x.Circle.prototype={x:null,y:null,r:null,toString:function(){return"{ x:"+this.x+", y:"+this.y+", r:"+this.r+" }"},point_inside:function(e){var t=new x.Vector(e.x-this.x,e.y-this.y);return t.get_length()<=this.r},clone:function(){return new x.Circle(this.x,this.y,this.r)},set:function(e,t,n){var i=this.x,s=this.y,r=this.r;return null!=e&&(i=e),null!=t&&(s=t),null!=n&&(r=n),this.x=i,this.y=s,this.r=r,this},__class__:x.Circle},x.Color=function(e,t,n,i){null==i&&(i=1),null==n&&(n=1),null==t&&(t=1),null==e&&(e=1),this.refreshing=!1,this.is_hsv=!1,this.is_hsl=!1,this.a=1,this.b=1,this.g=1,this.r=1,this.set_r(e),this.set_g(t),this.set_b(n),this.a=i},x.Color.__name__=!0,x.Color.random=function(e){return null==e&&(e=!1),new x.Color(Math.random(),Math.random(),Math.random(),e?Math.random():1)},x.Color.prototype={r:null,g:null,b:null,a:null,is_hsl:null,is_hsv:null,refreshing:null,set_r:function(e){if(this.r=e,!this.refreshing)if(this.is_hsl){var t=this;t.fromColor(this)}else if(this.is_hsv){var n=this;n.fromColor(this)}return this.r},set_g:function(e){if(this.g=e,!this.refreshing)if(this.is_hsl){var t=this;t.fromColor(this)}else if(this.is_hsv){var n=this;n.fromColor(this)}return this.g},set_b:function(e){if(this.b=e,!this.refreshing)if(this.is_hsl){var t=this;t.fromColor(this)}else if(this.is_hsv){var n=this;n.fromColor(this)}return this.b},set:function(e,t,n,i){var s=this.r,r=this.g,o=this.b,a=this.a;return null!=e&&(s=e),null!=t&&(r=t),null!=n&&(o=n),null!=i&&(a=i),this.set_r(s),this.set_g(r),this.set_b(o),this.a=a,this},maxRGB:function(){return Math.max(this.r,Math.max(this.g,this.b))},minRGB:function(){return Math.min(this.r,Math.min(this.g,this.b))},tween:function(e,t,n){if(null==n&&(n=!0),null==e&&(e=.5),null!=t){var i=this.r,s=this.g,r=this.b,o=this.a,a=!1,l=!1,u=!1,h=!1;v.Boot.__instanceof(t,x.Color)?(i=t.r,s=t.g,r=t.b,o=t.a,a=!0,l=!0,u=!0,h=!0):(null!=t.r&&(i=t.r,a=!0),null!=t.g&&(s=t.g,l=!0),null!=t.b&&(r=t.b,u=!0),null!=t.a&&(o=t.a,h=!0));var c={};return a&&(c.r=i),l&&(c.g=s),u&&(c.b=r),h&&(c.a=o),_.tween.Actuate.tween(this,e,c,n)}throw" Warning: Color.tween passed a null destination "},clone:function(){return new x.Color(this.r,this.g,this.b,this.a)},rgb:function(e){return null==e&&(e=16777215),this.from_int(e),this},toColorHSL:function(){return(new x.ColorHSL).fromColor(this)},toColorHSV:function(){return(new x.ColorHSV).fromColor(this)},fromColorHSV:function(e){var t=e.h%360/60;0>t&&(t+=6);var n=Math.floor(t),i=n%6,s=t-n,r=e.v,o=e.v*(1-e.s),a=e.v*(1-s*e.s),l=e.v*(1-(1-s)*e.s);switch(i){case 0:this.set_r(r),this.set_g(l),this.set_b(o);break;case 1:this.set_r(a),this.set_g(r),this.set_b(o);break;case 2:this.set_r(o),this.set_g(r),this.set_b(l);break;case 3:this.set_r(o),this.set_g(a),this.set_b(r);break;case 4:this.set_r(l),this.set_g(o),this.set_b(r);break;case 5:this.set_r(r),this.set_g(o),this.set_b(a)}this.a=e.a},fromColorHSL:function(e){var t=1;t=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s;for(var n=2*e.l-t,i=e.h%360/360,s=i+.3333333333333333,r=i,o=i-.3333333333333333,a=[s,r,o],l=0,u=a.length;u>l;){var _=l++,h=a[_];0>h&&(h+=1),h>1&&(h-=1),a[_]=.16666666666666666>h?n+6*(t-n)*h:.5>h?t:.6666666666666666>h?n+6*(t-n)*(.6666666666666666-h):n}return this.set_r(a[0]),this.set_g(a[1]),this.set_b(a[2]),this.a=e.a,this},toString:function(){return"{ r:"+this.r+" , g:"+this.g+" , b:"+this.b+" , a:"+this.a+" }"},from_int:function(e){var t=e>>16,n=e>>8&255,i=255&e;this.set_r(t/255),this.set_g(n/255),this.set_b(i/255)},__class__:x.Color,__properties__:{set_b:"set_b",set_g:"set_g",set_r:"set_r"}},x.ColorHSL=function(e,t,n,i){null==i&&(i=1),null==n&&(n=1),null==t&&(t=1),null==e&&(e=0),this.l=1,this.s=1,this.h=0,x.Color.call(this),this.is_hsl=!0,this.set_h(e),this.set_s(t),this.set_l(n),this.a=i,this._refresh()},x.ColorHSL.__name__=!0,x.ColorHSL.__super__=x.Color,x.ColorHSL.prototype=e(x.Color.prototype,{h:null,s:null,l:null,set_h:function(e){return this.h=e,this._refresh(),e},set_s:function(e){return this.s=e,this._refresh(),e},set_l:function(e){return this.l=e,this._refresh(),e},set:function(e,t,n,i){var s=this.h,r=this.s,o=this.l,a=this.a;return null!=e&&(s=e),null!=t&&(r=t),null!=n&&(o=n),null!=i&&(a=i),this.set_h(s),this.set_s(r),this.set_l(o),this.a=a,this._refresh(),this},tween:function(e,t,n){if(null==n&&(n=!0),null==e&&(e=.5),x.Color.prototype.tween.call(this,e,t,n),null!=t){var i=this.h,s=this.s,r=this.l,o=this.a,a=!1,l=!1,u=!1,h=!1;v.Boot.__instanceof(t,x.ColorHSL)?(i=t.h,s=t.s,r=t.l,o=t.a,a=!0,l=!0,u=!0,h=!0):(null!=t.h&&(i=t.h,a=!0),null!=t.s&&(s=t.s,l=!0),null!=t.l&&(r=t.l,u=!0),null!=t.a&&(o=t.a,h=!0));var c={};return a&&(c.h=i),l&&(c.s=s),u&&(c.l=r),h&&(c.a=o),_.tween.Actuate.tween(this,e,c,n)}throw" Warning: Color.tween passed a null destination "},_refresh:function(){return this.refreshing=!0,x.Color.prototype.fromColorHSL.call(this,this),this.refreshing=!1,this},clone:function(){return new x.ColorHSL(this.h,this.s,this.l,this.a)},toColor:function(){return this._refresh()},fromColor:function(e){var t=e.maxRGB(),n=e.minRGB(),i=t+n,s=t-n,r=0;t==n?r=0:t==e.r?r=(60*(e.g-e.b)/s+360)%360:t==e.g?r=60*(e.b-e.r)/s+120:t==e.b&&(r=60*(e.r-e.g)/s+240);var o;return o=t==n?0:this.l<=.5?s/i:s/(2-i),this.set_h(r),this.set_s(r),this.set_l(r),this.a=e.a,this},toString:function(){return"{ h:"+this.h+" , s:"+this.s+" , l:"+this.l+" , a:"+this.a+" }"},__class__:x.ColorHSL,__properties__:e(x.Color.prototype.__properties__,{set_l:"set_l",set_s:"set_s",set_h:"set_h"})}),x.ColorHSV=function(e,t,n,i){null==i&&(i=1),null==n&&(n=1),null==t&&(t=0),null==e&&(e=0),this.v=1,this.s=0,this.h=0,x.Color.call(this),this.is_hsv=!0,this.set_h(e),this.set_s(t),this.set_v(n),this.a=i,this._refresh()},x.ColorHSV.__name__=!0,x.ColorHSV.__super__=x.Color,x.ColorHSV.prototype=e(x.Color.prototype,{h:null,s:null,v:null,set_h:function(e){return this.h=e,this._refresh(),e},set_s:function(e){return this.s=e,this._refresh(),this.s},set_v:function(e){return this.v=e,this._refresh(),this.v},set:function(e,t,n,i){var s=this.h,r=this.s,o=this.v,a=this.a;return null!=e&&(s=e),null!=t&&(r=t),null!=n&&(o=n),null!=i&&(a=i),this.set_h(s),this.set_s(r),this.set_v(o),this.a=a,this._refresh(),this},tween:function(e,t,n){if(null==n&&(n=!0),null==e&&(e=.5),x.Color.prototype.tween.call(this,e,t,n),null!=t){var i=this.h,s=this.s,r=this.v,o=this.a,a=!1,l=!1,u=!1,h=!1;v.Boot.__instanceof(t,x.ColorHSV)?(i=t.h,s=t.s,r=t.v,o=t.a,a=!0,l=!0,u=!0,h=!0):(null!=t.h&&(i=t.h,a=!0),null!=t.s&&(s=t.s,l=!0),null!=t.v&&(r=t.v,u=!0),null!=t.a&&(o=t.a,h=!0));var c={};return a&&(c.h=i),l&&(c.s=s),u&&(c.v=r),h&&(c.a=o),_.tween.Actuate.tween(this,e,c,n)}throw" Warning: Color.tween passed a null destination "},_refresh:function(){return this.refreshing=!0,x.Color.prototype.fromColorHSV.call(this,this),this.refreshing=!1,this},clone:function(){return new x.ColorHSV(this.h,this.s,this.v,this.a)},toColor:function(){return this._refresh()},toColorHSL:function(){return this._refresh(),x.Color.prototype.toColorHSL.call(this)},fromColorHSL:function(e){return e._refresh(),this.fromColor(e)},fromColor:function(e){var t=e.maxRGB(),n=e.minRGB(),i=t-n,s=0;t==n?s=0:t==e.r?s=(60*(e.g-e.b)/i+360)%360:t==e.g?s=60*(e.b-e.r)/i+120:t==e.b&&(s=60*(e.r-e.g)/i+240);var r;return r=0==t?0:1-n/t,this.set_h(s),this.set_s(r),this.set_v(t),this.a=e.a,this},toString:function(){return"{ h:"+this.h+" , s:"+this.s+" , v:"+this.v+" , a:"+this.a+" }"},__class__:x.ColorHSV,__properties__:e(x.Color.prototype.__properties__,{set_v:"set_v",set_s:"set_s",set_h:"set_h"})}),x.Matrix=function(e,t,n,i,s,r,o,a,l,u,_,h,c,p,d,m){null==m&&(m=1),null==d&&(d=0),null==p&&(p=0),null==c&&(c=0),null==h&&(h=0),null==_&&(_=1),null==u&&(u=0),null==l&&(l=0),null==a&&(a=0),null==o&&(o=0),null==r&&(r=1),null==s&&(s=0),null==i&&(i=0),null==n&&(n=0),null==t&&(t=0),null==e&&(e=1),this.M44=1,this.M34=0,this.M24=0,this.M14=0,this.M43=0,this.M33=1,this.M23=0,this.M13=0,this.M42=0,this.M32=0,this.M22=1,this.M12=0,this.M41=0,this.M31=0,this.M21=0,this.M11=1,this.elements=new Array;for(var f=0;f++<16;)this.elements.push(0);this.set(e,t,n,i,s,r,o,a,l,u,_,h,c,p,d,m)},x.Matrix.__name__=!0,x.Matrix.prototype={elements:null,M11:null,M21:null,M31:null,M41:null,M12:null,M22:null,M32:null,M42:null,M13:null,M23:null,M33:null,M43:null,M14:null,M24:null,M34:null,M44:null,set:function(e,t,n,i,s,r,o,a,l,u,_,h,c,p,d,m){var f=this.elements;return f[0]=e,f[4]=t,f[8]=n,f[12]=i,f[1]=s,f[5]=r,f[9]=o,f[13]=a,f[2]=l,f[6]=u,f[10]=_,f[14]=h,f[3]=c,f[7]=p,f[11]=d,f[15]=m,this},toString:function(){var e=this.elements,t="{ 11:"+_.utils.Maths.fixed(e[0],3)+", 12:"+_.utils.Maths.fixed(e[4],3)+", 13:"+_.utils.Maths.fixed(e[8],3)+", 14:"+_.utils.Maths.fixed(e[12],3)+" }, { 21:"+_.utils.Maths.fixed(e[1],3)+", 22:"+_.utils.Maths.fixed(e[5],3)+", 23:"+_.utils.Maths.fixed(e[9],3)+", 24:"+_.utils.Maths.fixed(e[13],3)+" }, { 31:"+_.utils.Maths.fixed(e[2],3)+", 32:"+_.utils.Maths.fixed(e[6],3)+", 33:"+_.utils.Maths.fixed(e[10],3)+", 34:"+_.utils.Maths.fixed(e[14],3)+" }, { 41:"+_.utils.Maths.fixed(e[3],3)+", 42:"+_.utils.Maths.fixed(e[7],3)+", 43:"+_.utils.Maths.fixed(e[11],3)+", 44:"+_.utils.Maths.fixed(e[15],3)+" }";return t},get_M11:function(){return this.elements[0]},get_M12:function(){return this.elements[1]},get_M13:function(){return this.elements[2]},get_M14:function(){return this.elements[3]},get_M21:function(){return this.elements[4]},get_M22:function(){return this.elements[5]},get_M23:function(){return this.elements[6]},get_M24:function(){return this.elements[7]},get_M31:function(){return this.elements[8]},get_M32:function(){return this.elements[9]},get_M33:function(){return this.elements[10]},get_M34:function(){return this.elements[11]},get_M41:function(){return this.elements[12]},get_M42:function(){return this.elements[13]},get_M43:function(){return this.elements[14]},get_M44:function(){return this.elements[15]},set_M11:function(e){return this.elements[0]=e,e},set_M12:function(e){return this.elements[1]=e,e},set_M13:function(e){return this.elements[2]=e,e},set_M14:function(e){return this.elements[3]=e,e},set_M21:function(e){return this.elements[4]=e,e},set_M22:function(e){return this.elements[5]=e,e},set_M23:function(e){return this.elements[6]=e,e},set_M24:function(e){return this.elements[7]=e,e},set_M31:function(e){return this.elements[8]=e,e},set_M32:function(e){return this.elements[9]=e,e},set_M33:function(e){return this.elements[10]=e,e},set_M34:function(e){return this.elements[11]=e,e},set_M41:function(e){return this.elements[12]=e,e},set_M42:function(e){return this.elements[13]=e,e},set_M43:function(e){return this.elements[14]=e,e},set_M44:function(e){return this.elements[15]=e,e},float32array:function(){return new Float32Array(this.elements)},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]),this},make2D:function(e,t,n,i){null==i&&(i=0),null==n&&(n=1);var s=.017453292519943278*i,r=Math.cos(s),o=Math.sin(s);return this.set(r*n,o*n,0,e,-o*n,r*n,0,t,0,0,1,0,0,0,0,1),this},copyPosition:function(e){return this.elements[12]=e.elements[12],this.elements[13]=e.elements[13],this.elements[14]=e.elements[14],this},getPosition:function(){return new x.Vector(this.elements[12],this.elements[13],this.elements[14],1)},extractRotation:function(e){var t=new x.Vector,n=e.elements,i=1/t.set(n[0],n[1],n[2]).get_length(),s=1/t.set(n[4],n[5],n[6]).get_length(),r=1/t.set(n[8],n[9],n[10]).get_length();return this.elements[0]=n[0]*i,this.elements[1]=n[1]*i,this.elements[2]=n[2]*i,this.elements[4]=n[4]*s,this.elements[5]=n[5]*s,this.elements[6]=n[6]*s,this.elements[8]=n[8]*r,this.elements[9]=n[9]*r,this.elements[10]=n[10]*r,this},makeRotationFromEuler:function(e,t){null==t&&(t="XYZ");var n=this.elements,i=e.x,s=e.y,r=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(s),u=Math.sin(s),_=Math.cos(r),h=Math.sin(r);if("XYZ"==t){var c=o*_,p=o*h,d=a*_,m=a*h;n[0]=l*_,n[4]=-l*h,n[8]=u,n[1]=p+d*u,n[5]=c-m*u,n[9]=-a*l,n[2]=m-c*u,n[6]=d+p*u,n[10]=o*l}else if("YXZ"==t){var f=l*_,g=l*h,y=u*_,w=u*h;n[0]=f+w*a,n[4]=y*a-g,n[8]=o*u,n[1]=o*h,n[5]=o*_,n[9]=-a,n[2]=g*a-y,n[6]=w+f*a,n[10]=o*l}else if("ZXY"==t){var v=l*_,b=l*h,x=u*_,S=u*h;n[0]=v-S*a,n[4]=-o*h,n[8]=x+b*a,n[1]=b+x*a,n[5]=o*_,n[9]=S-v*a,n[2]=-o*u,n[6]=a,n[10]=o*l}else if("ZYX"==t){var T=o*_,E=o*h,k=a*_,N=a*h;n[0]=l*_,n[4]=k*u-E,n[8]=T*u+N,n[1]=l*h,n[5]=N*u+T,n[9]=E*u-k,n[2]=-u,n[6]=a*l,n[10]=o*l}else if("YZX"==t){var L=o*l,G=o*u,A=a*l,I=a*u;n[0]=l*_,n[4]=I-L*h,n[8]=A*h+G,n[1]=h,n[5]=o*_,n[9]=-a*_,n[2]=-u*_,n[6]=G*h+A,n[10]=L-I*h}else if("XZY"==t){var B=o*l,C=o*u,M=a*l,R=a*u;n[0]=l*_,n[4]=-h,n[8]=u*_,n[1]=B*h+R,n[5]=o*_,n[9]=C*h-M,n[2]=M*h-C,n[6]=a*_,n[10]=R*h+B}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x+e.x,i=e.y+e.y,s=e.z+e.z,r=e.x*n,o=e.x*i,a=e.x*s,l=e.y*i,u=e.y*s,_=e.z*s,h=e.w*n,c=e.w*i,p=e.w*s;return t[0]=1-(l+_),t[4]=o-p,t[8]=a+c,t[1]=o+p,t[5]=1-(r+_),t[9]=u-h,t[2]=a-c,t[6]=u+h,t[10]=1-(r+l),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(e,t,n){var i=new x.Vector,s=new x.Vector,r=new x.Vector,o=this.elements;if(r=x.Vector.Subtract(t,e).get_normalized(),0==r.get_length()&&r.set_z(1),i=x.Vector.Cross(n,r).get_normalized(),0==i.get_length()){var a=r;a.set_x(a.x+1e-4),i=x.Vector.Cross(n,r).get_normalized()}return s=x.Vector.Cross(r,i),o[0]=i.x,o[4]=s.x,o[8]=r.x,o[1]=i.y,o[5]=s.y,o[9]=r.y,o[2]=i.z,o[6]=s.z,o[10]=r.z,this},multiply:function(e){return this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,s=this.elements,r=n[0],o=n[4],a=n[8],l=n[12],u=n[1],_=n[5],h=n[9],c=n[13],p=n[2],d=n[6],m=n[10],f=n[14],g=n[3],y=n[7],w=n[11],v=n[15],b=i[0],x=i[4],S=i[8],T=i[12],E=i[1],k=i[5],N=i[9],L=i[13],G=i[2],A=i[6],I=i[10],B=i[14],C=i[3],M=i[7],R=i[11],z=i[15];return s[0]=r*b+o*E+a*G+l*C,s[4]=r*x+o*k+a*A+l*M,s[8]=r*S+o*N+a*I+l*R,s[12]=r*T+o*L+a*B+l*z,s[1]=u*b+_*E+h*G+c*C,s[5]=u*x+_*k+h*A+c*M,s[9]=u*S+_*N+h*I+c*R,s[13]=u*T+_*L+h*B+c*z,s[2]=p*b+d*E+m*G+f*C,s[6]=p*x+d*k+m*A+f*M,s[10]=p*S+d*N+m*I+f*R,s[14]=p*T+d*L+m*B+f*z,s[3]=g*b+y*E+w*G+v*C,s[7]=g*x+y*k+w*A+v*M,s[11]=g*S+y*N+w*I+v*R,s[15]=g*T+y*L+w*B+v*z,this},multiplyToArray:function(e,t,n){var i=this.elements;return this.multiplyMatrices(e,t),n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3Array:function(e){for(var t=new x.Vector,n=0,i=e.length;i>n;)t.set_x(e[n]),t.set_y(e[n+1]),t.set_z(e[n+2]),t.applyProjection(this),e[n]=t.x,e[n+1]=t.y,e[n+2]=t.z,n+=3;return e},determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],r=e[1],o=e[5],a=e[9],l=e[13],u=e[2],_=e[6],h=e[10],c=e[14],p=e[3],d=e[7],m=e[11],f=e[15];return p*(s*a*_-i*l*_-s*o*h+n*l*h+i*o*c-n*a*c)+d*(t*a*c-t*l*h+s*r*h-i*r*c+i*l*u-s*a*u)+m*(t*l*_-t*o*c-s*r*_+n*r*c+s*o*u-n*l*u)+f*(-i*o*u-t*a*_+t*o*h+i*r*_-n*r*h+n*a*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArray:function(e){if(null==e){e=new Array;for(var t=0;16>t;){{t++}e.push(0)}}var n=this.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},inverse:function(){return this.clone().getInverse(this)},getInverse:function(e){var t=this.elements,n=e.elements,i=n[0],s=n[4],r=n[8],o=n[12],a=n[1],l=n[5],u=n[9],_=n[13],h=n[2],c=n[6],p=n[10],d=n[14],m=n[3],f=n[7],g=n[11],y=n[15];t[0]=u*d*f-_*p*f+_*c*g-l*d*g-u*c*y+l*p*y,t[4]=o*p*f-r*d*f-o*c*g+s*d*g+r*c*y-s*p*y,t[8]=r*_*f-o*u*f+o*l*g-s*_*g-r*l*y+s*u*y,t[12]=o*u*c-r*_*c-o*l*p+s*_*p+r*l*d-s*u*d,t[1]=_*p*m-u*d*m-_*h*g+a*d*g+u*h*y-a*p*y,t[5]=r*d*m-o*p*m+o*h*g-i*d*g-r*h*y+i*p*y,t[9]=o*u*m-r*_*m-o*a*g+i*_*g+r*a*y-i*u*y,t[13]=r*_*h-o*u*h+o*a*p-i*_*p-r*a*d+i*u*d,t[2]=l*d*m-_*c*m+_*h*f-a*d*f-l*h*y+a*c*y,t[6]=o*c*m-s*d*m-o*h*f+i*d*f+s*h*y-i*c*y,t[10]=s*_*m-o*l*m+o*a*f-i*_*f-s*a*y+i*l*y,t[14]=o*l*h-s*_*h-o*a*c+i*_*c+s*a*d-i*l*d,t[3]=u*c*m-l*p*m-u*h*f+a*p*f+l*h*g-a*c*g,t[7]=s*p*m-r*c*m+r*h*f-i*p*f-s*h*g+i*c*g,t[11]=r*l*m-s*u*m-r*a*f+i*u*f+s*a*g-i*l*g,t[15]=s*u*h-r*l*h+r*a*c-i*u*c-s*a*p+i*l*p;var v=n[0]*t[0]+n[1]*t[4]+n[2]*t[8]+n[3]*t[12];return 0==v?(w.Log.trace("Matrix.getInverse: cant invert matrix, determinant is 0",{fileName:"Matrix.hx",lineNumber:668,className:"phoenix.Matrix",methodName:"getInverse"}),this.identity(),this):(this.multiplyScalar(1/v),this)},scale:function(e){var t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(n,i)))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),s=1-n,r=e.x,o=e.y,a=e.z,l=s*r,u=s*o;return this.set(l*r+n,l*o-i*a,l*a+i*o,0,l*o+i*a,u*o+n,u*a-i*r,0,l*a-i*o,u*a+i*r,s*a*a+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},compose_with_origin:function(e,t,n,i){return this.makeTranslation(t.x,t.y,t.z),this.scale(i),this.multiply((new x.Matrix).makeRotationFromQuaternion(n)),this.multiply((new x.Matrix).makeTranslation(-t.x,-t.y,-t.z)),this.multiply((new x.Matrix).makeTranslation(e.x,e.y,e.z)),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(e,t,n){var i=this.elements,s=new x.Vector(i[0],i[1],i[2]),r=new x.Vector(i[4],i[5],i[6]),o=new x.Vector(i[8],i[9],i[10]),a=new x.Matrix;null==e&&(e=new x.Vector),null==t&&(t=new x.Quaternion),null==n&&(n=new x.Vector(1,1,1)),n.set_x(s.get_length()),n.set_y(r.get_length()),n.set_z(o.get_length()),e.set_x(i[12]),e.set_y(i[13]),e.set_z(i[14]),a.elements=this.elements.concat([]);var l=a.elements;return l[0]/=n.x,l[1]/=n.x,l[2]/=n.x,l[4]/=n.y,l[5]/=n.y,l[6]/=n.y,l[8]/=n.z,l[9]/=n.z,l[10]/=n.z,t.setFromRotationMatrix(a),{pos:e,rotation:t,scale:n}},makeFrustum:function(e,t,n,i,s,r){var o=this.elements,a=2*s/(t-e),l=2*s/(i-n),u=(t+e)/(t-e),_=(i+n)/(i-n),h=-(r+s)/(r-s),c=-2*r*s/(r-s);return o[0]=a,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=_,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=c,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makePerspective:function(e,t,n,i){var s=n*Math.tan(.5*e*.017453292519943278),r=-s,o=r*t,a=s*t;return this.makeFrustum(o,a,r,s,n,i)},makeOrthographic:function(e,t,n,i,s,r){var o=this.elements,a=t-e,l=n-i,u=r-s,_=(t+e)/a,h=(n+i)/l,c=(r+s)/u;return o[0]=2/a,o[4]=0,o[8]=0,o[12]=-_,o[1]=0,o[5]=2/l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2/u,o[14]=-c,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},fromArray:function(e){this.elements=e.concat([])},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){var e=this.elements;return new x.Matrix(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},up:function(){return new x.Vector(this.elements[4],this.elements[5],this.elements[10])},down:function(){return this.up().get_inverted()},left:function(){return this.right().get_inverted()},right:function(){return new x.Vector(this.elements[0],this.elements[1],this.elements[2])},backward:function(){return new x.Vector(this.elements[8],this.elements[9],this.elements[10])},forward:function(){return this.backward().get_inverted()},__class__:x.Matrix,__properties__:{set_M44:"set_M44",get_M44:"get_M44",set_M34:"set_M34",get_M34:"get_M34",set_M24:"set_M24",get_M24:"get_M24",set_M14:"set_M14",get_M14:"get_M14",set_M43:"set_M43",get_M43:"get_M43",set_M33:"set_M33",get_M33:"get_M33",set_M23:"set_M23",get_M23:"get_M23",set_M13:"set_M13",get_M13:"get_M13",set_M42:"set_M42",get_M42:"get_M42",set_M32:"set_M32",get_M32:"get_M32",set_M22:"set_M22",get_M22:"get_M22",set_M12:"set_M12",get_M12:"get_M12",set_M41:"set_M41",get_M41:"get_M41",set_M31:"set_M31",get_M31:"get_M31",set_M21:"set_M21",get_M21:"get_M21",set_M11:"set_M11",get_M11:"get_M11"}},x.Quaternion=function(e,t,n,i){null==i&&(i=1),null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this.ignore_listeners=!1,this.w=0,this.z=0,this.y=0,this.x=0,this.euler=new x.Vector,this.set_x(e),this.set_y(t),this.set_z(n),this.set_w(i)
},x.Quaternion.__name__=!0,x.Quaternion.Slerp=function(e,t,n,i){return n.copy(e).slerp(t,i)},x.Quaternion.Dot=function(e,t){return new x.Quaternion(e.x,e.y,e.z,e.w).dot(t)},x.Quaternion.listen=function(e,t){e.listen_x=t,e.listen_y=t,e.listen_z=t,e.listen_w=t},x.Quaternion.prototype={x:null,y:null,z:null,w:null,euler:null,ignore_listeners:null,listen_x:null,listen_y:null,listen_z:null,listen_w:null,toString:function(){return"{ x:"+this.x+", y:"+this.y+", z:"+this.z+", w:"+this.w+" }"},set:function(e,t,n,i){return this.set_x(e),this.set_y(t),this.set_z(n),this.set_w(i),this},copy:function(e){return this.set_x(e.x),this.set_y(e.y),this.set_z(e.z),this.set_w(e.w),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},setFromEuler:function(e,t){null==t&&(t="XYZ");var n=Math.cos(e.x/2),i=Math.cos(e.y/2),s=Math.cos(e.z/2),r=Math.sin(e.x/2),o=Math.sin(e.y/2),a=Math.sin(e.z/2);return"XYZ"==t?(this.set_x(r*i*s+n*o*a),this.set_y(n*o*s-r*i*a),this.set_z(n*i*a+r*o*s),this.set_w(n*i*s-r*o*a)):"YXZ"==t?(this.set_x(r*i*s+n*o*a),this.set_y(n*o*s-r*i*a),this.set_z(n*i*a-r*o*s),this.set_w(n*i*s+r*o*a)):"ZXY"==t?(this.set_x(r*i*s-n*o*a),this.set_y(n*o*s+r*i*a),this.set_z(n*i*a+r*o*s),this.set_w(n*i*s-r*o*a)):"ZYX"==t?(this.set_x(r*i*s-n*o*a),this.set_y(n*o*s+r*i*a),this.set_z(n*i*a-r*o*s),this.set_w(n*i*s+r*o*a)):"YZX"==t?(this.set_x(r*i*s+n*o*a),this.set_y(n*o*s+r*i*a),this.set_z(n*i*a-r*o*s),this.set_w(n*i*s-r*o*a)):"XZY"==t&&(this.set_x(r*i*s-n*o*a),this.set_y(n*o*s-r*i*a),this.set_z(n*i*a+r*o*s),this.set_w(n*i*s+r*o*a)),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this.set_x(e.x*i),this.set_y(e.y*i),this.set_z(e.z*i),this.set_w(Math.cos(n)),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],s=n[4],r=n[8],o=n[1],a=n[5],l=n[9],u=n[2],_=n[6],h=n[10],c=i+a+h;return c>0?(t=.5/Math.sqrt(c+1),this.set_w(.25/t),this.set_x((_-l)*t),this.set_y((r-u)*t),this.set_z((o-s)*t)):i>a&&i>h?(t=2*Math.sqrt(1+i-a-h),this.set_w((_-l)/t),this.set_x(.25*t),this.set_y((s+o)/t),this.set_z((r+u)/t)):a>h?(t=2*Math.sqrt(1+a-i-h),this.set_w((r-u)/t),this.set_x((s+o)/t),this.set_y(.25*t),this.set_z((l+_)/t)):(t=2*Math.sqrt(1+h-i-a),this.set_w((o-s)/t),this.set_x((r+u)/t),this.set_y((l+_)/t),this.set_z(.25*t)),this},inverse:function(){return this.conjugate().normalize()},conjugate:function(){var e=this;e.set_x(-1*e.x);var t=this;t.set_y(-1*t.y);var n=this;return n.set_z(-1*n.z),this},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var e=this.length();if(0==e)this.set_x(0),this.set_y(0),this.set_z(0),this.set_w(1);else{e=1/e;var t=this;t.set_x(t.x*e);var n=this;n.set_y(n.y*e);var i=this;i.set_z(i.z*e);var s=this;s.set_w(s.w*e)}return this},multiply:function(e){return this.multiplyQuaternions(this,e)},add:function(e){return this.addQuaternions(this,e)},addQuaternions:function(e,t){return this.set_x(e.x+t.x),this.set_y(e.y+t.y),this.set_z(e.z+t.z),this.set_w(e.w+t.w),this},multiplyScalar:function(e){var t=this;t.set_x(t.x*e);var n=this;n.set_y(n.y*e);var i=this;i.set_z(i.z*e);var s=this;return s.set_w(s.w*e),this},multiplyQuaternions:function(e,t){var n=e.x,i=e.y,s=e.z,r=e.w,o=t.x,a=t.y,l=t.z,u=t.w;return this.set_x(n*u+r*o+i*l-s*a),this.set_y(i*u+r*a+s*o-n*l),this.set_z(s*u+r*l+n*a-i*o),this.set_w(r*u-n*o-i*a-s*l),this},slerp:function(e,t){var n=this.x,i=this.y,s=this.z,r=this.w,o=r*e.w+n*e.x+i*e.y+s*e.z;if(0>o?(this.set_w(-e.w),this.set_x(-e.x),this.set_y(-e.y),this.set_z(-e.z),o=-o):this.copy(e),o>=1)return this.set_w(r),this.set_x(n),this.set_y(i),this.set_z(s),this;var a=Math.acos(o),l=Math.sqrt(1-o*o);if(Math.abs(l)<.001)return this.set_w(.5*(r+this.w)),this.set_x(.5*(n+this.x)),this.set_y(.5*(i+this.y)),this.set_z(.5*(s+this.z)),this;var u=Math.sin((1-t)*a)/l,_=Math.sin(t*a)/l;return this.set_w(r*u+this.w*_),this.set_x(n*u+this.x*_),this.set_y(i*u+this.y*_),this.set_z(s*u+this.z*_),this},equals:function(e){return e.x==this.x&&e.y==this.y&&e.z==this.z&&e.w==this.w},fromArray:function(e){return this.set_x(e[0]),this.set_y(e[1]),this.set_z(e[2]),this.set_w(e[3]),this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new x.Quaternion(this.x,this.y,this.z,this.w)},toeuler:function(){return(new x.Vector).setEulerFromQuaternion(this).degrees()},update_euler:function(){this.euler.setEulerFromQuaternion(this)},set_x:function(e){return this.x=e,this.update_euler(),null==this.listen_x||this.ignore_listeners||this.listen_x(this.x),this.x},set_y:function(e){return this.y=e,this.update_euler(),null==this.listen_y||this.ignore_listeners||this.listen_y(this.y),this.y},set_z:function(e){return this.z=e,this.update_euler(),null==this.listen_z||this.ignore_listeners||this.listen_z(this.z),this.z},set_w:function(e){return this.w=e,this.update_euler(),null==this.listen_w||this.ignore_listeners||this.listen_w(this.w),this.w},__class__:x.Quaternion,__properties__:{set_w:"set_w",set_z:"set_z",set_y:"set_y",set_x:"set_x"}},x.Ray=function(e,t,n){if(null==n&&(n=new x.Rectangle(0,0,l.get_screen().w,l.get_screen().h)),null==t)throw"Camera required for a ray!";this.camera=t,this.viewport=n,this.refresh(e)},x.Ray.__name__=!0,x.Ray.prototype={origin:null,end:null,dir:null,camera:null,viewport:null,refresh:function(e){var t=2*(e.x/this.viewport.w-.5),n=2*((this.viewport.h-e.y)/this.viewport.h-.5),i=new x.Vector(t,n,0,1),s=new x.Vector(t,n,1,1);this.origin=this.camera.unproject(i),this.end=this.camera.unproject(s),this.dir=x.Vector.Subtract(this.end,this.origin)},__class__:x.Ray},x.Rectangle=function(e,t,n,i){null==i&&(i=0),null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this.ignore_listeners=!1,this.h=0,this.w=0,this.y=0,this.x=0,this.set_x(e),this.set_y(t),this.set_w(n),this.set_h(i)},x.Rectangle.__name__=!0,x.Rectangle.listen=function(e,t){e.listen_x=t,e.listen_y=t,e.listen_w=t,e.listen_h=t},x.Rectangle.prototype={x:null,y:null,w:null,h:null,ignore_listeners:null,listen_x:null,listen_y:null,listen_w:null,listen_h:null,toString:function(){return"{ x:"+this.x+", y:"+this.y+", w:"+this.w+", h:"+this.h+" }"},point_inside:function(e){return e.x<this.x?!1:e.y<this.y?!1:e.x>this.x+this.w?!1:e.y>this.y+this.h?!1:!0},overlaps:function(e){return null==e?!1:this.x<e.x+e.w&&this.y<e.y+e.h&&this.x+this.w>e.x&&this.y+this.h>e.y?!0:!1},clone:function(){return new x.Rectangle(this.x,this.y,this.w,this.h)},equal:function(e){return null==e?!1:this.x==e.x&&this.y==e.y&&this.w==e.w&&this.h==e.h},copy_from:function(e){this.set_x(e.x),this.set_y(e.y),this.set_w(e.w),this.set_h(e.h)},set:function(e,t,n,i){var s=this.x,r=this.y,o=this.w,a=this.h;return null!=e&&(s=e),null!=t&&(r=t),null!=n&&(o=n),null!=i&&(a=i),this.set_x(s),this.set_y(r),this.set_w(o),this.set_h(a),this},set_x:function(e){return this.x=e,null==this.listen_x||this.ignore_listeners||this.listen_x(e),this.x},set_y:function(e){return this.y=e,null==this.listen_y||this.ignore_listeners||this.listen_y(e),this.y},set_w:function(e){return this.w=e,null==this.listen_w||this.ignore_listeners||this.listen_w(e),this.w},set_h:function(e){return this.h=e,null==this.listen_h||this.ignore_listeners||this.listen_h(e),this.h},__class__:x.Rectangle,__properties__:{set_h:"set_h",set_w:"set_w",set_y:"set_y",set_x:"set_x"}},x.RenderPath=function(e){this.renderer=e},x.RenderPath.__name__=!0,x.RenderPath.prototype={renderer:null,render:function(e,t){for(var n=0;n<e.length;){var i=e[n];++n,i.enabled&&(l.debug.start("batch."+i.name),i.draw(),t.geometry_count+=i.geometry.size(),t.dynamic_batched_count+=i.dynamic_batched_count,t.static_batched_count+=i.static_batched_count,t.visible_count+=i.visible_count,t.draw_calls+=i.draw_calls,t.vert_count+=i.vert_count,l.debug.end("batch."+i.name))}},__class__:x.RenderPath},x.RenderState=function(e){this._last_depth_mask=!0,this._last_line_width=1,this._bound_texture_2D=null,this._active_texture=-1,this._used_program=null,this._current_rbo=null,this._current_fbo=null,this.depth_mask=!0,this.depth_test=!1,this.cull_face=!1,this.renderer=e,this._viewport=new x.Rectangle(0,0,0,0)},x.RenderState.__name__=!0,x.RenderState.prototype={cull_face:null,depth_test:null,depth_mask:null,renderer:null,_viewport:null,enable:function(e){switch(e){case 2884:this.cull_face||(this.cull_face=!0,b.platform.web.render.opengl.GL.enable(2884));break;case 2929:l.core.app.window.config.depth_bits>0&&(this.depth_test||(this.depth_test=!0,b.platform.web.render.opengl.GL.enable(2929)))}},disable:function(e){switch(e){case 2884:this.cull_face&&(this.cull_face=!1,b.platform.web.render.opengl.GL.disable(2884));break;case 2929:l.core.app.window.config.depth_bits>0&&this.depth_test&&(this.depth_test=!1,b.platform.web.render.opengl.GL.disable(2929))}},viewport:function(e,t,n,i){if(this._viewport.x!=e||this._viewport.y!=t||this._viewport.w!=n||this._viewport.h!=i){this._viewport.set_x(e),this._viewport.set_y(t),this._viewport.set_w(n),this._viewport.set_h(i);var s=this.renderer.target_size.y-(t+i);b.platform.web.render.opengl.GL.viewport(0|e,0|s,0|n,0|i)}},_current_fbo:null,bindFramebuffer:function(e){this._current_fbo!=e&&(null==e&&(e=this.renderer.default_fbo),b.platform.web.render.opengl.GL.bindFramebuffer(36160,e),this._current_fbo=e)},_current_rbo:null,bindRenderbuffer:function(e){this._current_rbo!=e&&(null==e&&(e=this.renderer.default_rbo),b.platform.web.render.opengl.GL.bindRenderbuffer(36161,e),this._current_rbo=e)},_used_program:null,useProgram:function(e){this._used_program!=e&&(this._used_program=e,b.platform.web.render.opengl.GL.useProgram(e))},_active_texture:null,activeTexture:function(e){this._active_texture!=e&&(b.platform.web.render.opengl.GL.activeTexture(e),this._active_texture=e)},_bound_texture_2D:null,bindTexture2D:function(e){this._bound_texture_2D!=e&&(this._bound_texture_2D=e,b.platform.web.render.opengl.GL.bindTexture(3553,e))},_last_line_width:null,lineWidth:function(e){this._last_line_width!=e&&(this._last_line_width=e,b.platform.web.render.opengl.GL.lineWidth(e))},_last_depth_mask:null,depthMask:function(e){this._last_depth_mask!=e&&(this._last_depth_mask=e,b.platform.web.render.opengl.GL.depthMask(e))},__class__:x.RenderState},x.Texture=function(e,t){this.slot=0,this.loaded=!1,this.height=-1,this.width=-1,this.height_actual=-1,this.width_actual=-1,null==t&&(t=_.ResourceType.texture),_.Resource.call(this,e,t),this._onload_handlers=new Array,this.id="Untitled",this.set_filter(x.FilterType.linear),this.set_clamp(x.ClampType.edge)},x.Texture.__name__=!0,x.Texture.load=function(e,t,n){null==n&&(n=!1);var i=l.resources,s=i.find_texture(e);if(null!=s)return null!=t&&t(s),s;var r=new x.Texture(i);null!=t&&r.set_onload(t);var o=l.core.app.assets.image(e,{onload:function(t){null!=t&&null!=t.image?(r.from_asset(t),r.reset(),r.do_onload(),n||w.Log.trace("  i / texture / "+("texture loaded "+r.id+" ("+r.width+"x"+r.height+") real size ("+r.width_actual+"x"+r.height_actual+")"),{fileName:"Texture.hx",lineNumber:180,className:"phoenix.Texture",methodName:"load"})):n||w.Log.trace("  i / texture / texture failed to load! "+e,{fileName:"Texture.hx",lineNumber:185,className:"phoenix.Texture",methodName:"load"})}});return null!=o?(r.id=e,i.cache(r),r):null},x.Texture.load_from_resource=function(e,t,n,i){null==i&&(i=!0);var s=w.Resource.getBytes(e);if(null!=s){var r=l.renderer.resource_manager,o=new x.Texture(r),a=l.core.app.assets.image(e,{bytes:b.platform.web.utils.ByteArray.fromBytes(s)});if(null!=a)return o.from_asset(a),s=null,o.reset(),o.do_onload(),i&&r.cache(o),o}return null},x.Texture.__super__=_.Resource,x.Texture.prototype=e(_.Resource.prototype,{texture:null,asset:null,width_actual:null,height_actual:null,width:null,height:null,loaded:null,slot:null,_onload_handlers:null,filter:null,filter_min:null,filter_mag:null,clamp:null,set_onload:function(e){return this.loaded?(e(this),e):(this._onload_handlers.push(e),e)},do_onload:function(){this.loaded=!0;for(var e=0,t=this._onload_handlers;e<t.length;){var n=t[e];++e,null!=n&&n(this)}this._onload_handlers.splice(0,this._onload_handlers.length)},toString:function(){return"Texture ("+m.string(this.texture)+") ("+this.width+"x"+this.height+") real size("+this.width_actual+"x"+this.height_actual+") "+m.string(this.filter)+" filtering. "+m.string(this.clamp)+" clamp. id: "+this.id},estimated_memory:function(){var e=this.width_actual*this.height_actual*4;return l.utils.bytes_to_string(e)},create_from_bytes_html:function(e,t,n,i){var s=b.platform.web.render.opengl.GL.getParameter(3379);if(this.texture=b.platform.web.render.opengl.GL.createTexture(),this.id=e,this.width=0|n,this.height=0|i,this.width_actual=this.width,this.height_actual=this.height,n>s)throw"texture bigger than MAX_TEXTURE_SIZE ("+s+") "+e;if(i>s)throw"texture bigger than MAX_TEXTURE_SIZE ("+s+") "+e;this.bind(),b.platform.web.render.opengl.GL.texImage2D(3553,0,6408,this.width,this.height,0,6408,5121,t),this._set_filter(x.FilterType.linear),this._set_clamp(x.ClampType.edge)},check_size:function(){var e=b.platform.web.render.opengl.GL.getParameter(3379);if(this.asset.image.width_actual>e)throw"texture bigger than MAX_TEXTURE_SIZE ("+e+") "+this.asset.id;if(this.asset.image.height_actual>e)throw"texture bigger than MAX_TEXTURE_SIZE ("+e+") "+this.asset.id},reset:function(){this.texture=b.platform.web.render.opengl.GL.createTexture(),this.bind(),b.platform.web.render.opengl.GL.texImage2D(3553,0,6408,this.width_actual,this.height_actual,0,6408,5121,this.asset.image.data),this._set_filter(this.filter),this._set_clamp(this.clamp)},from_asset:function(e){if(null==e)throw"null asset passed to Texture.from_asset";this.asset=e,this.check_size(),this.id=this.asset.id,this.width=this.asset.image.width,this.height=this.asset.image.height,this.width_actual=this.asset.image.width_actual,this.height_actual=this.asset.image.height_actual},generate_mipmaps:function(){var e=this;this.set_onload(function(){e.bind(),b.platform.web.render.opengl.GL.generateMipmap(3553)})},bind:function(){l.renderer.state.activeTexture(33984+this.slot),l.renderer.state.bindTexture2D(this.texture)},get_pixel:function(e){if(null==this.asset.image.data)return null;var t=0|e.x,n=0|e.y;return{r:this.asset.image.data[4*(n*this.width+t)]/255,g:this.asset.image.data[4*(n*this.width+t)+1]/255,b:this.asset.image.data[4*(n*this.width+t)+2]/255,a:this.asset.image.data[4*(n*this.width+t)+3]/255}},set_pixel:function(e,t){if(null!=this.asset.image.data){var n=0|e.x,i=0|e.y;this.asset.image.data[4*(i*this.width+n)]=255*t.r|0,this.asset.image.data[4*(i*this.width+n)+1]=255*t.g|0,this.asset.image.data[4*(i*this.width+n)+2]=255*t.b|0,this.asset.image.data[4*(i*this.width+n)+3]=255*t.a|0}},lock:function(){return!0},unlock:function(){null!=this.asset.image.data&&(l.renderer.state.bindTexture2D(this.texture),b.platform.web.render.opengl.GL.texImage2D(3553,0,6408,this.width,this.height,0,6408,5121,this.asset.image.data),this.asset.image.data=null)},drop:function(){_.Resource.prototype.drop.call(this),this.destroy()},activate:function(){},destroy:function(){b.platform.web.render.opengl.GL.deleteTexture(this.texture)},_set_clamp:function(e){switch(e[1]){case 0:b.platform.web.render.opengl.GL.texParameteri(3553,10242,33071),b.platform.web.render.opengl.GL.texParameteri(3553,10243,33071);break;case 1:b.platform.web.render.opengl.GL.texParameteri(3553,10242,10497),b.platform.web.render.opengl.GL.texParameteri(3553,10243,10497);break;case 2:b.platform.web.render.opengl.GL.texParameteri(3553,10242,33648),b.platform.web.render.opengl.GL.texParameteri(3553,10243,33648)}},set_clamp:function(e){var t=this;return null==this.clamp?this.clamp=e:(0==this.loaded?this.set_onload(function(){t.bind(),t._set_clamp(e)}):(this.bind(),this._set_clamp(e)),e)},_set_filter:function(e){switch(e[1]){case 1:b.platform.web.render.opengl.GL.texParameteri(3553,10241,9729),b.platform.web.render.opengl.GL.texParameteri(3553,10240,9729);break;case 0:b.platform.web.render.opengl.GL.texParameteri(3553,10241,9728),b.platform.web.render.opengl.GL.texParameteri(3553,10240,9728);break;case 2:b.platform.web.render.opengl.GL.texParameteri(3553,10241,9984),b.platform.web.render.opengl.GL.texParameteri(3553,10240,9984);break;case 3:b.platform.web.render.opengl.GL.texParameteri(3553,10241,9985),b.platform.web.render.opengl.GL.texParameteri(3553,10240,9985);break;case 4:b.platform.web.render.opengl.GL.texParameteri(3553,10241,9986),b.platform.web.render.opengl.GL.texParameteri(3553,10240,9986);break;case 5:b.platform.web.render.opengl.GL.texParameteri(3553,10241,9987),b.platform.web.render.opengl.GL.texParameteri(3553,10240,9987)}},_set_filter_min:function(e){switch(e[1]){case 1:b.platform.web.render.opengl.GL.texParameteri(3553,10241,9729);break;case 0:b.platform.web.render.opengl.GL.texParameteri(3553,10241,9728);break;case 2:b.platform.web.render.opengl.GL.texParameteri(3553,10241,9984);break;case 3:b.platform.web.render.opengl.GL.texParameteri(3553,10241,9985);break;case 4:b.platform.web.render.opengl.GL.texParameteri(3553,10241,9986);break;case 5:b.platform.web.render.opengl.GL.texParameteri(3553,10241,9987)}},_set_filter_mag:function(e){switch(e[1]){case 1:b.platform.web.render.opengl.GL.texParameteri(3553,10240,9729);break;case 0:b.platform.web.render.opengl.GL.texParameteri(3553,10240,9728);break;case 2:b.platform.web.render.opengl.GL.texParameteri(3553,10240,9984);break;case 3:b.platform.web.render.opengl.GL.texParameteri(3553,10240,9985);break;case 4:b.platform.web.render.opengl.GL.texParameteri(3553,10240,9986);break;case 5:b.platform.web.render.opengl.GL.texParameteri(3553,10240,9987)}},set_filter:function(e){var t=this;return null==this.filter?this.filter=e:(0==this.loaded?this.set_onload(function(){t.bind(),t._set_filter(e)}):(this.bind(),this._set_filter(e)),this.filter=e)},set_filter_min:function(e){var t=this;return 0==this.loaded?this.set_onload(function(){t.bind(),t._set_filter_min(e)}):(this.bind(),this._set_filter_min(e)),this.filter_min=e},set_filter_mag:function(e){var t=this;return 0==this.loaded?this.set_onload(function(){t.bind(),t._set_filter_mag(e)}):(this.bind(),this._set_filter_mag(e)),this.filter_mag=e},__class__:x.Texture,__properties__:{set_clamp:"set_clamp",set_filter_mag:"set_filter_mag",set_filter_min:"set_filter_min",set_filter:"set_filter",set_onload:"set_onload"}}),x.RenderTexture=function(e,t){x.Texture.call(this,e,_.ResourceType.render_texture),null==t&&new x.Vector(l.get_screen().w,l.get_screen().h),this.width=this.width_actual=0|t.x,this.height=this.height_actual=0|t.y,this.texture=b.platform.web.render.opengl.GL.createTexture(),this.bind(),b.platform.web.render.opengl.GL.texImage2D(3553,0,6408,this.width,this.height,0,6408,5121,null),this._set_filter(x.FilterType.linear),this._set_clamp(x.ClampType.edge),this.fbo=b.platform.web.render.opengl.GL.createFramebuffer(),this.bindBuffer(),this.renderbuffer=b.platform.web.render.opengl.GL.createRenderbuffer(),this.bindRenderBuffer(),b.platform.web.render.opengl.GL.renderbufferStorage(36161,33189,this.width,this.height),b.platform.web.render.opengl.GL.framebufferTexture2D(36160,36064,3553,this.texture,0),b.platform.web.render.opengl.GL.framebufferRenderbuffer(36160,36096,36161,this.renderbuffer);var n=b.platform.web.render.opengl.GL.checkFramebufferStatus(36160);switch(n){case 36053:break;case 36054:throw"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case 36055:throw"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case 36057:throw"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case 36061:throw"Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED";default:throw"Incomplete framebuffer: "+n}this.unbindBuffer(),this.unbindRenderBuffer(),this.loaded=!0},x.RenderTexture.__name__=!0,x.RenderTexture.__super__=x.Texture,x.RenderTexture.prototype=e(x.Texture.prototype,{fbo:null,renderbuffer:null,destroy:function(){b.platform.web.render.opengl.GL.deleteFramebuffer(this.fbo),b.platform.web.render.opengl.GL.deleteRenderbuffer(this.renderbuffer),x.Texture.prototype.destroy.call(this)},bindBuffer:function(){l.renderer.state.bindFramebuffer(this.fbo)},unbindBuffer:function(e){l.renderer.state.bindFramebuffer(e)},bindRenderBuffer:function(){l.renderer.state.bindRenderbuffer(this.renderbuffer)},unbindRenderBuffer:function(e){l.renderer.state.bindRenderbuffer(e)},__class__:x.RenderTexture}),x.Renderer=function(e){this.stop_count=0,this.stop=!1,this.should_clear=!0,this.core=e,this.default_fbo=b.platform.web.render.opengl.GL.getParameter(36006),this.default_rbo=b.platform.web.render.opengl.GL.getParameter(36007)},x.Renderer.__name__=!0,x.Renderer.prototype={resource_manager:null,batchers:null,core:null,state:null,default_fbo:null,default_rbo:null,default_shader:null,default_shader_textured:null,default_vert_source:null,default_frag_source:null,default_frag_textured_source:null,batcher:null,camera:null,font:null,render_path:null,default_render_path:null,vsync:null,target:null,target_size:null,should_clear:null,stop:null,stop_count:null,clear_color:null,stats:null,init:function(){this.state=new x.RenderState(this),this.clear_color=(new x.Color).rgb(1710618),this.stats=new x.RendererStats,this.resource_manager=new _.ResourceManager,this.batchers=[],this.target_size=new x.Vector(l.get_screen().w,l.get_screen().h),this.camera=new x.Camera,this.default_render_path=new x.RenderPath(this),this.render_path=this.default_render_path,this.create_default_shaders(),this.batcher=new x.Batcher(this,"default batcher"),this.batcher.set_layer(1),this.add_batch(this.batcher),this.core.app.window.config.depth_bits>0&&(b.platform.web.render.opengl.GL.enable(2929),b.platform.web.render.opengl.GL.depthFunc(515),b.platform.web.render.opengl.GL.clearDepth(1)),b.platform.web.render.opengl.GL.enable(3042),b.platform.web.render.opengl.GL.blendFunc(770,771),b.platform.web.render.opengl.GL.pixelStorei(37441,0)},destroy:function(){this.clear((new x.Color).rgb(16729099))},sort_batchers:function(e,t){return e.layer<t.layer?-1:e.layer>=t.layer?1:1},add_batch:function(e){this.batchers.push(e),this.batchers.sort(n(this,this.sort_batchers))},remove_batch:function(e){r.remove(this.batchers,e)},create_batcher:function(e){var t=2;null!=e?(null==e.name&&(e.name="batcher"),null==e.layer&&(e.layer=t),null==e.camera&&(e.camera=new x.Camera)):e={name:"batcher",camera:new x.Camera,layer:t};var n=new x.Batcher(this,e.name);return n.view=e.camera,n.set_layer(e.layer),(null==e.no_add||0==e.no_add)&&this.add_batch(n),n},clear:function(e){null==e&&(e=this.clear_color),b.platform.web.render.opengl.GL.clearColor(e.r,e.g,e.b,e.a),this.core.app.window.config.depth_bits>0?(b.platform.web.render.opengl.GL.clear(16640),b.platform.web.render.opengl.GL.clearDepth(1)):b.platform.web.render.opengl.GL.clear(16384)},blend_mode:function(e,t){null==e&&(e=x.BlendMode.src_alpha),null==t&&(t=x.BlendMode.one_minus_src_alpha);var n=x.utils.Rendering.gl_blend_mode_from_BlendMode(e),i=x.utils.Rendering.gl_blend_mode_from_BlendMode(t);b.platform.web.render.opengl.GL.blendFunc(n,i)},process:function(){this.stop||(this.should_clear&&this.clear(this.clear_color),this.stats.batchers=this.batchers.length,this.stats.reset(),this.render_path.render(this.batchers,this.stats))},onresize:function(){},set_vsync:function(e){return l.core.app.windowing.enable_vsync(e),this.vsync=e},get_vsync:function(){return this.vsync},get_target:function(){return this.target},set_target:function(e){return null!=e?(this.target_size.set_x(e.width),this.target_size.set_y(e.height),this.state.bindFramebuffer(e.fbo)):(this.target_size.set_x(l.get_screen().w),this.target_size.set_y(l.get_screen().h),this.state.bindFramebuffer()),this.target=e},create_default_shaders:function(){this.default_vert_source=w.Resource.getString("default.vert.glsl"),this.default_frag_source=w.Resource.getString("default.frag.glsl"),this.default_frag_textured_source=w.Resource.getString("default.frag.textured.glsl"),this.default_frag_source="precision mediump float;\n"+this.default_frag_source,this.default_frag_textured_source="precision mediump float;\n"+this.default_frag_textured_source,this.default_shader=new x.Shader(this.resource_manager),this.default_shader.id="default_shader",this.default_shader_textured=new x.Shader(this.resource_manager),this.default_shader_textured.id="default_shader_textured",this.default_shader.from_string(this.default_vert_source,this.default_frag_source,null,null,!1),this.default_shader_textured.from_string(this.default_vert_source,this.default_frag_textured_source,null,null,!1)},create_default_font:function(){this.font=new x.BitmapFont(this.resource_manager);var e=x.Texture.load_from_resource("cabin.png",512,256);e.set_filter_min(x.FilterType.linear),this.font.from_string(w.Resource.getString("cabin.fnt"),"luxe.font",null,[e])},__class__:x.Renderer,__properties__:{set_target:"set_target",get_target:"get_target",set_vsync:"set_vsync",get_vsync:"get_vsync"}},x.RendererStats=function(){this.vert_count=0,this.group_count=0,this.draw_calls=0,this.visible_count=0,this.static_batched_count=0,this.dynamic_batched_count=0,this.geometry_count=0,this.batchers=0},x.RendererStats.__name__=!0,x.RendererStats.prototype={batchers:null,geometry_count:null,dynamic_batched_count:null,static_batched_count:null,visible_count:null,draw_calls:null,group_count:null,vert_count:null,reset:function(){this.geometry_count=0,this.dynamic_batched_count=0,this.static_batched_count=0,this.visible_count=0,this.group_count=0,this.draw_calls=0,this.vert_count=0},toString:function(){return"Renderer Statistics\n	batcher count : "+this.batchers+"\n	total geometry : "+this.geometry_count+"\n	visible geometry : "+this.visible_count+"\n	dynamic batched geometry : "+this.dynamic_batched_count+"\n	static batched geometry : "+this.static_batched_count+"\n	total draw calls : "+this.draw_calls+"\n	total vertices : "+this.vert_count},__class__:x.RendererStats},x.UniformValueType={__ename__:!0,__constructs__:["int","float","vector2","vector3","vector4","color","texture","unknown"]},x.UniformValueType["int"]=["int",0],x.UniformValueType["int"].toString=i,x.UniformValueType["int"].__enum__=x.UniformValueType,x.UniformValueType["float"]=["float",1],x.UniformValueType["float"].toString=i,x.UniformValueType["float"].__enum__=x.UniformValueType,x.UniformValueType.vector2=["vector2",2],x.UniformValueType.vector2.toString=i,x.UniformValueType.vector2.__enum__=x.UniformValueType,x.UniformValueType.vector3=["vector3",3],x.UniformValueType.vector3.toString=i,x.UniformValueType.vector3.__enum__=x.UniformValueType,x.UniformValueType.vector4=["vector4",4],x.UniformValueType.vector4.toString=i,x.UniformValueType.vector4.__enum__=x.UniformValueType,x.UniformValueType.color=["color",5],x.UniformValueType.color.toString=i,x.UniformValueType.color.__enum__=x.UniformValueType,x.UniformValueType.texture=["texture",6],x.UniformValueType.texture.toString=i,x.UniformValueType.texture.__enum__=x.UniformValueType,x.UniformValueType.unknown=["unknown",7],x.UniformValueType.unknown.toString=i,x.UniformValueType.unknown.__enum__=x.UniformValueType,x.Shader=function(e){this.normal_attribute=3,this.color_attribute=2,this.tcoord_attribute=1,this.vert_attribute=0,this.fragment_source_name="",this.vertex_source_name="",this.log="",this.errors="",_.Resource.call(this,e,_.ResourceType.shader),this.uniforms=new w.ds.StringMap,this.uniform_textures=new w.ds.StringMap},x.Shader.__name__=!0,x.Shader.load=function(e,t,n){var i="",s="";"default"==t||""==t?(t="default shader",s=l.renderer.default_vert_source):s=l.loadText(t).text,"default"==e||""==e?(e="default shader",i=l.renderer.default_frag_source):"textured"==e?(e="default textured",i=l.renderer.default_frag_textured_source):i=l.loadText(e).text;var r=null;if(i.length>0&&s.length>0){var o="";o+="precision mediump float;",r=new x.Shader(l.resources),r.from_string(s,o+i,e,t,!1)}return null!=r?(r.id=e+"|"+t,null!=n&&n(r),w.Log.trace("   i / shader / shader loaded "+r.id,{fileName:"Shader.hx",lineNumber:382,className:"phoenix.Shader",methodName:"load"}),r):null},x.Shader.__super__=_.Resource,x.Shader.prototype=e(_.Resource.prototype,{errors:null,log:null,vertex_source_name:null,fragment_source_name:null,vert_shader:null,frag_shader:null,program:null,shader:null,vert_attribute:null,tcoord_attribute:null,color_attribute:null,normal_attribute:null,projectionmatrix_attribute:null,modelviewmatrix_attribute:null,tex0_attribute:null,tex1_attribute:null,tex2_attribute:null,tex3_attribute:null,tex4_attribute:null,tex5_attribute:null,tex6_attribute:null,tex7_attribute:null,uniforms:null,uniform_textures:null,activate:function(){null!=this.program&&l.renderer.state.useProgram(this.program)},deactivate:function(){l.renderer.state.useProgram(null)},set_uniform_int:function(e,t){if(this.uniforms.exists(e)){var n=this.uniforms.get(e);n.value=t}else{var i={name:e,value:t,type:x.UniformValueType["int"],location:b.platform.web.render.opengl.GL.getUniformLocation(this.program,e)};this.uniforms.set(e,i)}},set_uniform_float:function(e,t){if(this.uniforms.exists(e)){var n=this.uniforms.get(e);n.value=t}else{var i={name:e,value:t,type:x.UniformValueType["float"],location:b.platform.web.render.opengl.GL.getUniformLocation(this.program,e)};this.uniforms.set(e,i)}},set_uniform_vector2:function(e,t){if(this.uniforms.exists(e)){var n=this.uniforms.get(e);n.value=t}else{var i={name:e,value:t,type:x.UniformValueType.vector2,location:b.platform.web.render.opengl.GL.getUniformLocation(this.program,e)};this.uniforms.set(e,i)}},set_uniform_vector3:function(e,t){if(this.uniforms.exists(e)){var n=this.uniforms.get(e);n.value=t}else{var i={name:e,value:t,type:x.UniformValueType.vector3,location:b.platform.web.render.opengl.GL.getUniformLocation(this.program,e)};this.uniforms.set(e,i)}},set_uniform_vector4:function(e,t){if(this.uniforms.exists(e)){var n=this.uniforms.get(e);n.value=t}else{var i={name:e,value:t,type:x.UniformValueType.vector4,location:b.platform.web.render.opengl.GL.getUniformLocation(this.program,e)};this.uniforms.set(e,i)}},set_uniform_color:function(e,t){if(this.uniforms.exists(e)){var n=this.uniforms.get(e);n.value=t}else{var i={name:e,value:t,type:x.UniformValueType.color,location:b.platform.web.render.opengl.GL.getUniformLocation(this.program,e)};this.uniforms.set(e,i)}},set_uniform_texture:function(e,t){if(this.uniforms.exists(e)){var n=this.uniforms.get(e);n.value=t,this.uniform_textures.set(e,t)}else{var i={name:e,value:t,type:x.UniformValueType.texture,location:b.platform.web.render.opengl.GL.getUniformLocation(this.program,e)};this.uniforms.set(e,i),this.uniform_textures.set(e,t)}},compile:function(e,t,n){null==n&&(n=!1);var i=b.platform.web.render.opengl.GL.createShader(e);b.platform.web.render.opengl.GL.shaderSource(i,t),b.platform.web.render.opengl.GL.compileShader(i);var s="";if(n&&(s=b.platform.web.render.opengl.GL.getShaderInfoLog(i),s.length>0&&(this.addLog("\n	 :: start -- ("+(35632==e?"fragment":"vertex")+") Shader compile log -- "+this.id+"\n"),this.addLog("		"+s+"\n"),this.addLog("	 :: end -- ("+(35632==e?"fragment":"vertex")+") Shader compile log -- "+this.id))),0==b.platform.web.render.opengl.GL.getShaderParameter(i,35713)){var r;return r=35632==e?"fragment":"vertex",r+=35632==e?"("+this.fragment_source_name+")":"("+this.vertex_source_name+")",this.addError("	Failed to compile shader ("+r+") : \n"),n||(s=b.platform.web.render.opengl.GL.getShaderInfoLog(i)),this.addError("		"+s),b.platform.web.render.opengl.GL.deleteShader(i),i=null,null}return i},link:function(){var e=b.platform.web.render.opengl.GL.createProgram();return b.platform.web.render.opengl.GL.attachShader(e,this.vert_shader),b.platform.web.render.opengl.GL.attachShader(e,this.frag_shader),b.platform.web.render.opengl.GL.bindAttribLocation(e,this.vert_attribute,"vertexPosition"),b.platform.web.render.opengl.GL.bindAttribLocation(e,this.tcoord_attribute,"vertexTCoord"),b.platform.web.render.opengl.GL.bindAttribLocation(e,this.color_attribute,"vertexColor"),b.platform.web.render.opengl.GL.bindAttribLocation(e,this.normal_attribute,"vertexNormal"),b.platform.web.render.opengl.GL.linkProgram(e),0==b.platform.web.render.opengl.GL.getProgramParameter(e,35714)?(this.addError("	Failed to link shader program:"),this.addError("		"+b.platform.web.render.opengl.GL.getProgramInfoLog(e)),b.platform.web.render.opengl.GL.deleteProgram(e),e=null,null):(this.activate(),this.projectionmatrix_attribute=b.platform.web.render.opengl.GL.getUniformLocation(e,"projectionMatrix"),this.modelviewmatrix_attribute=b.platform.web.render.opengl.GL.getUniformLocation(e,"modelViewMatrix"),this.tex0_attribute=b.platform.web.render.opengl.GL.getUniformLocation(e,"tex0"),this.tex1_attribute=b.platform.web.render.opengl.GL.getUniformLocation(e,"tex1"),this.tex2_attribute=b.platform.web.render.opengl.GL.getUniformLocation(e,"tex2"),this.tex3_attribute=b.platform.web.render.opengl.GL.getUniformLocation(e,"tex3"),this.tex4_attribute=b.platform.web.render.opengl.GL.getUniformLocation(e,"tex4"),this.tex5_attribute=b.platform.web.render.opengl.GL.getUniformLocation(e,"tex5"),this.tex6_attribute=b.platform.web.render.opengl.GL.getUniformLocation(e,"tex6"),this.tex7_attribute=b.platform.web.render.opengl.GL.getUniformLocation(e,"tex7"),e)
},drop:function(){_.Resource.prototype.drop.call(this),this.destroy()},destroy:function(){null!=this.vert_shader&&b.platform.web.render.opengl.GL.deleteShader(this.vert_shader),null!=this.frag_shader&&b.platform.web.render.opengl.GL.deleteShader(this.frag_shader),null!=this.program&&b.platform.web.render.opengl.GL.deleteProgram(this.program)},from_string:function(e,t,n,i,s){if(null==s&&(s=!1),null==i&&(i=""),null==n&&(n=""),this.destroy(),this.fragment_source_name=n,this.vertex_source_name=i,this.vert_shader=this.compile(35633,e,s),this.frag_shader=this.compile(35632,t,s),null==this.vert_shader||null==this.frag_shader)throw s?"SHADER : "+this.id+" \n\n "+this.log+"\n"+this.errors:this.errors;if(this.program=this.link(),null==this.program)throw s?this.log+"\n"+this.errors:this.errors;return s&&this.log.length>0&&w.Log.trace(this.log,{fileName:"Shader.hx",lineNumber:428,className:"phoenix.Shader",methodName:"from_string"}),null==this.program?!1:!0},apply_uniforms:function(){b.platform.web.render.opengl.GL.uniform1i(this.tex0_attribute,0),b.platform.web.render.opengl.GL.uniform1i(this.tex1_attribute,1),b.platform.web.render.opengl.GL.uniform1i(this.tex2_attribute,2),b.platform.web.render.opengl.GL.uniform1i(this.tex3_attribute,3),b.platform.web.render.opengl.GL.uniform1i(this.tex4_attribute,4),b.platform.web.render.opengl.GL.uniform1i(this.tex5_attribute,5),b.platform.web.render.opengl.GL.uniform1i(this.tex6_attribute,6),b.platform.web.render.opengl.GL.uniform1i(this.tex7_attribute,7);for(var e=this.uniforms.iterator();e.hasNext();){var t=e.next(),n=t.type;switch(n[1]){case 0:this.setUniformInt(t.name,t.value,t.location);break;case 1:this.setUniformFloat(t.name,t.value,t.location);break;case 2:this.setUniformVector2(t.name,t.value,t.location);break;case 3:this.setUniformVector3(t.name,t.value,t.location);break;case 4:this.setUniformVector4(t.name,t.value,t.location);break;case 5:this.setUniformColor(t.name,t.value,t.location);break;case 6:this.setUniformTexture(t.name,t.value,t.location);break;case 7:}}},getUniform:function(e){return b.platform.web.render.opengl.GL.getUniformLocation(this.program,e)},setUniformInt:function(e,t,n){b.platform.web.render.opengl.GL.uniform1i(n,t)},setUniformFloat:function(e,t,n){b.platform.web.render.opengl.GL.uniform1f(n,t)},setUniformVector2:function(e,t,n){b.platform.web.render.opengl.GL.uniform2f(n,t.x,t.y)},setUniformVector3:function(e,t,n){b.platform.web.render.opengl.GL.uniform3f(n,t.x,t.y,t.z)},setUniformVector4:function(e,t,n){b.platform.web.render.opengl.GL.uniform4f(n,t.x,t.y,t.z,t.w)},setUniformColor:function(e,t,n){b.platform.web.render.opengl.GL.uniform4f(n,t.r,t.g,t.b,t.a)},setUniformTexture:function(e,t,n){b.platform.web.render.opengl.GL.uniform1i(n,t.slot),t.bind()},addLog:function(e){this.log+=e},addError:function(e){this.errors+=e},__class__:x.Shader}),x.FilterType={__ename__:!0,__constructs__:["nearest","linear","mip_nearest_nearest","mip_linear_nearest","mip_nearest_linear","mip_linear_linear"]},x.FilterType.nearest=["nearest",0],x.FilterType.nearest.toString=i,x.FilterType.nearest.__enum__=x.FilterType,x.FilterType.linear=["linear",1],x.FilterType.linear.toString=i,x.FilterType.linear.__enum__=x.FilterType,x.FilterType.mip_nearest_nearest=["mip_nearest_nearest",2],x.FilterType.mip_nearest_nearest.toString=i,x.FilterType.mip_nearest_nearest.__enum__=x.FilterType,x.FilterType.mip_linear_nearest=["mip_linear_nearest",3],x.FilterType.mip_linear_nearest.toString=i,x.FilterType.mip_linear_nearest.__enum__=x.FilterType,x.FilterType.mip_nearest_linear=["mip_nearest_linear",4],x.FilterType.mip_nearest_linear.toString=i,x.FilterType.mip_nearest_linear.__enum__=x.FilterType,x.FilterType.mip_linear_linear=["mip_linear_linear",5],x.FilterType.mip_linear_linear.toString=i,x.FilterType.mip_linear_linear.__enum__=x.FilterType,x.ClampType={__ename__:!0,__constructs__:["edge","repeat","mirror"]},x.ClampType.edge=["edge",0],x.ClampType.edge.toString=i,x.ClampType.edge.__enum__=x.ClampType,x.ClampType.repeat=["repeat",1],x.ClampType.repeat.toString=i,x.ClampType.repeat.__enum__=x.ClampType,x.ClampType.mirror=["mirror",2],x.ClampType.mirror.toString=i,x.ClampType.mirror.__enum__=x.ClampType,x.Transform=function(){this._cleaning=!1,this._setup=!0,this.dirty=!0,_.ID.call(this,"transform"),this.set_local(new x.Spatial),this.set_world(new x.Spatial),this._origin_undo_matrix=new x.Matrix,this._pos_matrix=new x.Matrix,this._rotation_matrix=new x.Matrix,this.set_origin(new x.Vector),this.get_local().pos_changed=n(this,this.on_local_pos_change),this.get_local().rotation_changed=n(this,this.on_local_rotation_change),this.get_local().scale_changed=n(this,this.on_local_scale_change),this._setup=!1},x.Transform.__name__=!0,x.Transform.__super__=_.ID,x.Transform.prototype=e(_.ID.prototype,{parent:null,local:null,world:null,origin:null,dirty:null,_origin_undo_matrix:null,_pos_matrix:null,_rotation_matrix:null,_setup:null,_cleaning:null,_clean_handlers:null,_dirty_handlers:null,_pos_handlers:null,_rotation_handlers:null,_scale_handlers:null,_origin_handlers:null,_parent_handlers:null,destroy:function(){null!=this.get_parent()&&this.get_parent().unlisten(n(this,this.on_parent_cleaned)),this._clean_handlers=null,this._dirty_handlers=null,this._pos_handlers=null,this._rotation_handlers=null,this._scale_handlers=null,this._origin_handlers=null,this._parent_handlers=null,this.set_local(null),this.set_world(null),this._origin_undo_matrix=null,this._pos_matrix=null,this._rotation_matrix=null},set_dirty:function(e){return this.dirty=e,this.dirty&&!this._setup&&null!=this._dirty_handlers&&this._dirty_handlers.length>0&&this.propagate_dirty(),this.dirty},on_local_pos_change:function(e){this.set_dirty(!0),null!=this._pos_handlers&&this._pos_handlers.length>0&&this.propagate_pos(e)},on_local_rotation_change:function(e){this.set_dirty(!0),null!=this._rotation_handlers&&this._rotation_handlers.length>0&&this.propagate_rotation(e)},on_local_scale_change:function(e){this.set_dirty(!0),null!=this._scale_handlers&&this._scale_handlers.length>0&&this.propagate_scale(e)},on_parent_cleaned:function(){this.set_dirty(!0)},get_local:function(){return this.local},set_local:function(e){return null==e?this.local=e:(this.set_dirty(!0),e.pos_changed=n(this,this.on_local_pos_change),e.rotation_changed=n(this,this.on_local_rotation_change),e.scale_changed=n(this,this.on_local_scale_change),this.local=e)},get_world:function(){return this.clean_check(),this.world},clean_check:function(){null!=this.get_parent()&&this.get_parent().dirty&&this.get_parent().clean(),this.dirty&&!this._cleaning&&this.clean()},clean:function(){this.dirty&&(this._cleaning=!0,this._pos_matrix.makeTranslation(this.get_local().pos.x,this.get_local().pos.y,this.get_local().pos.z),this._rotation_matrix.makeRotationFromQuaternion(this.get_local().rotation),this._origin_undo_matrix.makeTranslation(-this.get_origin().x,-this.get_origin().y,-this.get_origin().z),this.get_local().get_matrix().makeTranslation(this.get_origin().x,this.get_origin().y,this.get_origin().z),this.get_local().get_matrix().scale(this.get_local().scale),this.get_local().get_matrix().multiply(this._rotation_matrix),this.get_local().get_matrix().setPosition(this.get_local().pos),this.get_local().get_matrix().multiply(this._origin_undo_matrix),this.get_world().set_matrix(null!=this.get_parent()?this.get_world().get_matrix().multiplyMatrices(this.get_parent().get_world().get_matrix(),this.get_local().get_matrix()):this.get_local().get_matrix().clone()),this.get_world().decompose(),this.set_dirty(!1),this._cleaning=!1,null!=this._clean_handlers&&this._clean_handlers.length>0&&this.propagate_clean())},toString:function(){return"Transform ("+this.id+")"},get_origin:function(){return this.origin},set_origin:function(e){return this.set_dirty(!0),this.origin=e,null!=this._origin_handlers&&this._origin_handlers.length>0&&this.propagate_origin(this.get_origin()),this.get_origin()},set_world:function(e){return null==e?this.world=e:(this.set_dirty(!0),this.world=e)},get_parent:function(){return this.parent},set_parent:function(e){return this.set_dirty(!0),null!=this.get_parent()&&this.get_parent().unlisten(n(this,this.on_parent_cleaned)),this.parent=e,null!=this._parent_handlers&&this._parent_handlers.length>0&&this.propagate_parent(this.get_parent()),null!=this.get_parent()&&this.get_parent().listen(n(this,this.on_parent_cleaned)),this.get_parent()},get_pos:function(){return this.get_local().pos},get_rotation:function(){return this.get_local().rotation},get_scale:function(){return this.get_local().scale},set_pos:function(e){return this.get_local().set_pos(e)},set_rotation:function(e){return this.get_local().set_rotation(e)},set_scale:function(e){return this.get_local().set_scale(e)},propagate_clean:function(){for(var e=0,t=this._clean_handlers;e<t.length;){var n=t[e];++e,null!=n&&n(this)}},propagate_dirty:function(){for(var e=0,t=this._dirty_handlers;e<t.length;){var n=t[e];++e,null!=n&&n(this)}},propagate_pos:function(e){for(var t=0,n=this._pos_handlers;t<n.length;){var i=n[t];++t,null!=i&&i(e)}},propagate_rotation:function(e){for(var t=0,n=this._rotation_handlers;t<n.length;){var i=n[t];++t,null!=i&&i(e)}},propagate_scale:function(e){for(var t=0,n=this._scale_handlers;t<n.length;){var i=n[t];++t,null!=i&&i(e)}},propagate_origin:function(e){for(var t=0,n=this._origin_handlers;t<n.length;){var i=n[t];++t,null!=i&&i(e)}},propagate_parent:function(e){for(var t=0,n=this._parent_handlers;t<n.length;){var i=n[t];++t,null!=i&&i(e)}},listen:function(e){null==this._clean_handlers&&(this._clean_handlers=[]),this._clean_handlers.push(e)},unlisten:function(e){return null==this._clean_handlers?!1:r.remove(this._clean_handlers,e)},listen_dirty:function(e){null==this._dirty_handlers&&(this._dirty_handlers=[]),this._dirty_handlers.push(e)},unlisten_dirty:function(e){return null==this._dirty_handlers?!1:r.remove(this._dirty_handlers,e)},listen_pos:function(e){null==this._pos_handlers&&(this._pos_handlers=[]),this._pos_handlers.push(e)},unlisten_pos:function(e){return null==this._pos_handlers?!1:r.remove(this._pos_handlers,e)},listen_scale:function(e){null==this._scale_handlers&&(this._scale_handlers=[]),this._scale_handlers.push(e)},unlisten_scale:function(e){return null==this._scale_handlers?!1:r.remove(this._scale_handlers,e)},listen_rotation:function(e){null==this._rotation_handlers&&(this._rotation_handlers=[]),this._rotation_handlers.push(e)},unlisten_rotation:function(e){return null==this._rotation_handlers?!1:r.remove(this._rotation_handlers,e)},listen_origin:function(e){null==this._origin_handlers&&(this._origin_handlers=[]),this._origin_handlers.push(e)},unlisten_origin:function(e){return null==this._origin_handlers?!1:r.remove(this._origin_handlers,e)},listen_parent:function(e){null==this._parent_handlers&&(this._parent_handlers=[]),this._parent_handlers.push(e)},unlisten_parent:function(e){return null==this._parent_handlers?!1:r.remove(this._parent_handlers,e)},__class__:x.Transform,__properties__:{set_scale:"set_scale",get_scale:"get_scale",set_rotation:"set_rotation",get_rotation:"get_rotation",set_pos:"set_pos",get_pos:"get_pos",set_dirty:"set_dirty",set_origin:"set_origin",get_origin:"get_origin",set_world:"set_world",get_world:"get_world",set_local:"set_local",get_local:"get_local",set_parent:"set_parent",get_parent:"get_parent"}}),x.Spatial=function(){this._setup=!0,this.ignore_listeners=!1,this.set_matrix(new x.Matrix),this.set_pos(new x.Vector),this.set_rotation(new x.Quaternion),this.set_scale(new x.Vector(1,1,1)),this._setup=!1},x.Spatial.__name__=!0,x.Spatial.prototype={pos:null,rotation:null,scale:null,matrix:null,ignore_listeners:null,pos_changed:null,rotation_changed:null,scale_changed:null,_setup:null,decompose:function(){var e=this.get_matrix().decompose();this.set_pos(e.pos),this.set_rotation(e.rotation),this.set_scale(e.scale)},get_matrix:function(){return this.matrix},set_matrix:function(e){return this.matrix=e},propagate_pos:function(e){null==this.pos_changed||this.ignore_listeners||this.pos_changed(e)},propagate_rotation:function(e){null==this.rotation_changed||this.ignore_listeners||this.rotation_changed(e)},propagate_scale:function(e){null==this.scale_changed||this.ignore_listeners||this.scale_changed(e)},set_pos:function(e){return this.pos=e,x.Vector.listen(this.pos,n(this,this._pos_change)),this.propagate_pos(this.pos),this.pos},set_rotation:function(e){return this.rotation=e,x.Quaternion.listen(this.rotation,n(this,this._rotation_change)),this.propagate_rotation(this.rotation),this.rotation},set_scale:function(e){return this.scale=e,x.Vector.listen(this.scale,n(this,this._scale_change)),this.propagate_scale(this.scale),this.scale},_pos_change:function(){this.set_pos(this.pos)},_scale_change:function(){this.set_scale(this.scale)},_rotation_change:function(){this.set_rotation(this.rotation)},__class__:x.Spatial,__properties__:{set_matrix:"set_matrix",get_matrix:"get_matrix",set_scale:"set_scale",set_rotation:"set_rotation",set_pos:"set_pos"}},x.Vector=function(e,t,n,i){null==i&&(i=0),null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this.ignore_listeners=!1,this.w=0,this.z=0,this.y=0,this.x=0,this.set_x(e),this.set_y(t),this.set_z(n),this.w=i},x.Vector.__name__=!0,x.Vector.Add=function(e,t){return new x.Vector(e.x+t.x,e.y+t.y,e.z+t.z)},x.Vector.Subtract=function(e,t){return new x.Vector(e.x-t.x,e.y-t.y,e.z-t.z)},x.Vector.MultiplyVector=function(e,t){return new x.Vector(e.x*t.x,e.y*t.y,e.z*t.z)},x.Vector.DivideVector=function(e,t){return new x.Vector(e.x/t.x,e.y/t.y,e.z/t.z)},x.Vector.Multiply=function(e,t){return new x.Vector(e.x*t,e.y*t,e.z*t)},x.Vector.Divide=function(e,t){return new x.Vector(e.x/t,e.y/t,e.z/t)},x.Vector.AddScalar=function(e,t){return new x.Vector(e.x+t,e.y+t,e.z+t)},x.Vector.SubtractScalar=function(e,t){return new x.Vector(e.x-t,e.y-t,e.z-t)},x.Vector.Cross=function(e,t){return new x.Vector(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z,e.x*t.y-e.y*t.x)},x.Vector.RotationTo=function(e,t){return e.rotationTo(t)},x.Vector.listen=function(e,t){e.listen_x=t,e.listen_y=t,e.listen_z=t},x.Vector.Degrees=function(e){return e.clone().degrees()},x.Vector.Radians=function(e){return e.clone().radians()},x.Vector.prototype={x:null,y:null,z:null,w:null,length:null,lengthsq:null,angle2D:null,normalized:null,inverted:null,ignore_listeners:null,listen_x:null,listen_y:null,listen_z:null,copy_from:function(e){this.set_x(e.x),this.set_y(e.y),this.set_z(e.z),this.w=e.w},set_xyz:function(e,t,n){this.set_x(e),this.set_y(t),this.set_z(n)},set_xyzw:function(e,t,n,i){this.set_x(e),this.set_y(t),this.set_z(n),this.w=i},set_xy:function(e,t){this.set_x(e),this.set_y(t)},set:function(e,t,n,i){var s=this.x,r=this.y,o=this.z,a=this.w;return null!=e&&(s=e),null!=t&&(r=t),null!=n&&(o=n),null!=i&&(a=i),this.set_x(s),this.set_y(r),this.set_z(o),this.w=a,this},"int":function(){this.set_x(Math.round(this.x)),this.set_y(Math.round(this.y)),this.set_z(Math.round(this.z))},int_x:function(){this.set_x(Math.round(this.x))},int_y:function(){this.set_y(Math.round(this.y))},int_z:function(){this.set_z(Math.round(this.z))},toString:function(){return"{ x:"+this.x+", y:"+this.y+", z:"+this.z+" }"},equals:function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z&&this.w==e.w},clone:function(){return new x.Vector(this.x,this.y,this.z,this.w)},normalize:function(){return this.divideScalar(this.get_length())},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},cross:function(e,t){return this.set_x(e.y*t.z-e.z*t.y),this.set_y(e.z*t.x-e.x*t.z),this.set_z(e.x*t.y-e.y*t.x),this},invert:function(){return this.set_x(-this.x),this.set_y(-this.y),this.set_z(-this.z),this},add:function(e){if(null==e)throw"vector.add other was handed in as null";var t=this;t.set_x(t.x+e.x);var n=this;n.set_y(n.y+e.y);var i=this;return i.set_z(i.z+e.z),this},subtract:function(e){if(null==e)throw"vector.subtract other was handed in as null";var t=this;t.set_x(t.x-e.x);var n=this;n.set_y(n.y-e.y);var i=this;return i.set_z(i.z-e.z),this},multiply:function(e){if(null==e)throw"vector.multiply other was handed in as null";var t=this;t.set_x(t.x*e.x);var n=this;n.set_y(n.y*e.y);var i=this;return i.set_z(i.z*e.z),this},divide:function(e){if(null==e)throw"vector.divide other was handed in as null";var t=this;t.set_x(t.x/e.x);var n=this;n.set_y(n.y/e.y);var i=this;return i.set_z(i.z/e.z),this},addScalar:function(e){var t=this;t.set_x(t.x+e);var n=this;n.set_y(n.y+e);var i=this;return i.set_z(i.z+e),this},subtractScalar:function(e){var t=this;t.set_x(t.x-e);var n=this;n.set_y(n.y-e);var i=this;return i.set_z(i.z-e),this},multiplyScalar:function(e){var t=this;t.set_x(t.x*e);var n=this;n.set_y(n.y*e);var i=this;return i.set_z(i.z*e),this},divideScalar:function(e){if(0!=e){var t=this;t.set_x(t.x/e);var n=this;n.set_y(n.y/e);var i=this;i.set_z(i.z/e)}else this.set_x(0),this.set_y(0),this.set_z(0);return this},set_length:function(e){return this.normalize().multiplyScalar(e),e},get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},get_lengthsq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},get_normalized:function(){return x.Vector.Divide(this,this.get_length())},set_x:function(e){return this.x=e,null==this.listen_x||this.ignore_listeners||this.listen_x(e),this.x},set_y:function(e){return this.y=e,null==this.listen_y||this.ignore_listeners||this.listen_y(e),this.y},set_z:function(e){return this.z=e,null==this.listen_z||this.ignore_listeners||this.listen_z(e),this.z},get_inverted:function(){return new x.Vector(-this.x,-this.y,-this.z)},set_angle2D:function(e){var t=this.get_length();return this.set_x(Math.cos(e)*t),this.set_y(Math.sin(e)*t),e},get_angle2D:function(){return Math.atan2(this.y,this.x)},truncate:function(e){return this.set_length(Math.min(e,this.get_length())),this},rotationTo:function(e){var t=Math.atan2(e.x-this.x,e.y-this.y),n=-(180+180*t/Math.PI);return n},applyQuaternion:function(e){var t=e.x,n=e.y,i=e.z,s=e.w,r=s*this.x+n*this.z-i*this.y,o=s*this.y+i*this.x-t*this.z,a=s*this.z+t*this.y-n*this.x,l=-t*this.x-n*this.y-i*this.z;return this.set_x(r*s+l*-t+o*-i-a*-n),this.set_y(o*s+l*-n+a*-t-r*-i),this.set_z(a*s+l*-i+r*-n-o*-t),this},applyProjection:function(e){var t=e.elements,n=this.x,i=this.y,s=this.z,r=1/(t[3]*n+t[7]*i+t[11]*s+t[15]);return this.set_x((t[0]*n+t[4]*i+t[8]*s+t[12])*r),this.set_y((t[1]*n+t[5]*i+t[9]*s+t[13])*r),this.set_z((t[2]*n+t[6]*i+t[10]*s+t[14])*r),this},transform:function(e){var t=this.x,n=this.y,i=this.z,s=e.elements;return this.set_x(s[0]*t+s[4]*n+s[8]*i+s[12]),this.set_y(s[1]*t+s[5]*n+s[9]*i+s[13]),this.set_z(s[2]*t+s[6]*n+s[10]*i+s[14]),this},transformDirection:function(e){var t=e.elements,n=this.x,i=this.y,s=this.z;return this.set_x(t[0]*n+t[4]*i+t[8]*s),this.set_y(t[1]*n+t[5]*i+t[9]*s),this.set_z(t[2]*n+t[6]*i+t[10]*s),this.normalize(),this},setEulerFromRotationMatrix:function(e,t){null==t&&(t="XYZ");var n=e.elements,i=n[0],s=n[4],r=n[8],o=n[1],a=n[5],l=n[9],u=n[2],_=n[6],h=n[10];return"XYZ"==t?(this.set_y(Math.asin(-1>r?-1:r>1?1:r)),Math.abs(r)<.99999?(this.set_x(Math.atan2(-l,h)),this.set_z(Math.atan2(-s,i))):(this.set_x(Math.atan2(_,a)),this.set_z(0))):"YXZ"==t?(this.set_x(Math.asin(-(-1>l?-1:l>1?1:l))),Math.abs(l)<.99999?(this.set_y(Math.atan2(r,h)),this.set_z(Math.atan2(o,a))):(this.set_y(Math.atan2(-u,i)),this.set_z(0))):"ZXY"==t?(this.set_x(Math.asin(-1>_?-1:_>1?1:_)),Math.abs(_)<.99999?(this.set_y(Math.atan2(-u,h)),this.set_z(Math.atan2(-s,a))):(this.set_y(0),this.set_z(Math.atan2(o,i)))):"ZYX"==t?(this.set_y(Math.asin(-(-1>u?-1:u>1?1:u))),Math.abs(u)<.99999?(this.set_x(Math.atan2(_,h)),this.set_z(Math.atan2(o,i))):(this.set_x(0),this.set_z(Math.atan2(-s,a)))):"YZX"==t?(this.set_z(Math.asin(-1>o?-1:o>1?1:o)),Math.abs(o)<.99999?(this.set_x(Math.atan2(-l,a)),this.set_y(Math.atan2(-u,i))):(this.set_x(0),this.set_y(Math.atan2(r,h)))):"XZY"==t&&(this.set_z(Math.asin(-(-1>s?-1:s>1?1:s))),Math.abs(s)<.99999?(this.set_x(Math.atan2(_,a)),this.set_y(Math.atan2(r,i))):(this.set_x(Math.atan2(-l,h)),this.set_y(0))),this},setEulerFromQuaternion:function(e,t){null==t&&(t="XYZ");var n=e.x*e.x,i=e.y*e.y,s=e.z*e.z,r=e.w*e.w;return"XYZ"==t?(this.set_x(Math.atan2(2*(e.x*e.w-e.y*e.z),r-n-i+s)),this.set_y(Math.asin(_.utils.Maths.clamp(2*(e.x*e.z+e.y*e.w),-1,1))),this.set_z(Math.atan2(2*(e.z*e.w-e.x*e.y),r+n-i-s))):"YXZ"==t?(this.set_x(Math.asin(_.utils.Maths.clamp(2*(e.x*e.w-e.y*e.z),-1,1))),this.set_y(Math.atan2(2*(e.x*e.z+e.y*e.w),r-n-i+s)),this.set_z(Math.atan2(2*(e.x*e.y+e.z*e.w),r-n+i-s))):"ZXY"==t?(this.set_x(Math.asin(_.utils.Maths.clamp(2*(e.x*e.w+e.y*e.z),-1,1))),this.set_y(Math.atan2(2*(e.y*e.w-e.z*e.x),r-n-i+s)),this.set_z(Math.atan2(2*(e.z*e.w-e.x*e.y),r-n+i-s))):"ZYX"==t?(this.set_x(Math.atan2(2*(e.x*e.w+e.z*e.y),r-n-i+s)),this.set_y(Math.asin(_.utils.Maths.clamp(2*(e.y*e.w-e.x*e.z),-1,1))),this.set_z(Math.atan2(2*(e.x*e.y+e.z*e.w),r+n-i-s))):"YZX"==t?(this.set_x(Math.atan2(2*(e.x*e.w-e.z*e.y),r-n+i-s)),this.set_y(Math.atan2(2*(e.y*e.w-e.x*e.z),r+n-i-s)),this.set_z(Math.asin(_.utils.Maths.clamp(2*(e.x*e.y+e.z*e.w),-1,1)))):"XZY"==t&&(this.set_x(Math.atan2(2*(e.x*e.w+e.y*e.z),r-n+i-s)),this.set_y(Math.atan2(2*(e.x*e.z+e.y*e.w),r+n-i-s)),this.set_z(Math.asin(_.utils.Maths.clamp(2*(e.z*e.w-e.x*e.y),-1,1)))),this},degrees:function(){return this.set_x(57.29577951308238*this.x),this.set_y(57.29577951308238*this.y),this.set_z(57.29577951308238*this.z),this},radians:function(){return this.set_x(.017453292519943278*this.x),this.set_y(.017453292519943278*this.y),this.set_z(.017453292519943278*this.z),this},__class__:x.Vector,__properties__:{get_inverted:"get_inverted",get_normalized:"get_normalized",set_angle2D:"set_angle2D",get_angle2D:"get_angle2D",get_lengthsq:"get_lengthsq",set_length:"set_length",get_length:"get_length",set_z:"set_z",set_y:"set_y",set_x:"set_x"}},x._Vector={},x._Vector.Vec_Impl_=function(){},x._Vector.Vec_Impl_.__name__=!0,x._Vector.Vec_Impl_._new=function(e,t,n,i){return new x.Vector(e,t,n,i)},x._Vector.Vec_Impl_._multiply=function(e,t){return x.Vector.MultiplyVector(e,t)},x._Vector.Vec_Impl_._multiply_scalar=function(e,t){return x.Vector.Multiply(e,t)},x._Vector.Vec_Impl_._multiply_scalar_int=function(e,t){return x.Vector.Multiply(e,t)},x._Vector.Vec_Impl_._divide=function(e,t){return x.Vector.DivideVector(e,t)},x._Vector.Vec_Impl_._divide_scalar=function(e,t){return x.Vector.Divide(e,t)},x._Vector.Vec_Impl_._divide_scalar_int=function(e,t){return x.Vector.Divide(e,t)},x._Vector.Vec_Impl_._add=function(e,t){return x.Vector.Add(e,t)},x._Vector.Vec_Impl_._add_scalar=function(e,t){return x.Vector.AddScalar(e,t)},x._Vector.Vec_Impl_._add_scalar_int=function(e,t){return x.Vector.AddScalar(e,t)},x._Vector.Vec_Impl_._subtract=function(e,t){return x.Vector.Subtract(e,t)},x._Vector.Vec_Impl_._subtract_scalar=function(e,t){return x.Vector.SubtractScalar(e,t)},x._Vector.Vec_Impl_._subtract_scalar_int=function(e,t){return x.Vector.SubtractScalar(e,t)},x.geometry={},x.geometry.Geometry=function(e){this.dirty=!1,this.locked=!1,this.immediate=!1,this.visible=!0,this.dirty_clip=!1,this.dirty_depth=!1,this.dirty_group=!1,this.dirty_shader=!1,this.dirty_texture=!1,this.dirty_primitive_type=!1,this.shadow_clip=!1,this.shadow_depth=0,this.shadow_group=0,this.id="",this.uuid="",this.dropped=!1,this.added=!1,this.submitted=!1,this.uuid=l.utils.uniqueid(),this.id=this.uuid,this.vertices=new Array,this.state=new x.geometry.GeometryState,this.batchers=new Array,this.transform=new x.Transform,this._final_vert_position=new x.Vector,this.set_clip_rect(null),this.set_clip(!1);var t=!0;null!=e?(this.state.set_depth(null==e.depth?this.state.depth:e.depth),this.state.set_group(null==e.group?this.state.group:e.group),this.state.set_texture(null==e.texture?this.state.texture:e.texture),this.state.set_clip_rect(null==e.clip_rect?this.state.clip_rect:e.clip_rect),this.state.set_primitive_type(null==e.primitive_type?this.state.primitive_type:e.primitive_type),this.state.set_shader(null==e.shader?this.state.shader:e.shader),this.id=null==e.id?this.uuid:e.id,this.transform.set_pos(null==e.pos?this.transform.get_pos():e.pos),this.transform.set_rotation(null==e.rotation?this.transform.get_rotation():e.rotation),this.transform.set_scale(null==e.scale?this.transform.get_scale():e.scale),this.transform.set_origin(null==e.origin?this.transform.get_origin():e.origin),this.immediate=null==e.immediate?!1:e.immediate,this.set_visible(null==e.visible?!0:e.visible),this.set_color(null==e.color?new x.Color:e.color),t=null==e.no_batcher_add?!0:e.no_batcher_add):this.set_color(new x.Color),x.geometry.Geometry._sequence_key++,this.key={uuid:this.uuid,timestamp:l.get_time(),sequence:x.geometry.Geometry._sequence_key,primitive_type:this.state.primitive_type,texture:this.state.texture,shader:this.state.shader,group:this.state.group,depth:this.state.depth,clip:this.state.clip},this.transform.id=this.uuid,this.transform.name=this.id,null!=e&&null!=e.batcher&&t&&e.batcher.add(this)},x.geometry.Geometry.__name__=!0,x.geometry.Geometry.prototype={transform:null,vertices:null,submitted:null,static_vertex_buffer:null,static_tcoord_buffer:null,static_vcolor_buffer:null,static_normal_buffer:null,added:null,batchers:null,state:null,dropped:null,uuid:null,id:null,primitive_type:null,texture:null,shader:null,depth:null,group:null,clip_rect:null,shadow_primitive_type:null,shadow_texture:null,shadow_shader:null,shadow_group:null,shadow_depth:null,shadow_clip:null,dirty_primitive_type:null,dirty_texture:null,dirty_shader:null,dirty_group:null,dirty_depth:null,dirty_clip:null,visible:null,immediate:null,locked:null,dirty:null,color:null,clip:null,_final_vert_position:null,key:null,key_string:function(){return"ts: "+this.key.timestamp+"\nsequence: "+this.key.sequence+"\nprimitive_type: "+m.string(this.key.primitive_type)+"\ntexture: "+(null==this.key.texture?"null":this.key.texture.id)+"\nshader: "+(null==this.key.shader?"null":this.key.shader.id)+"\ngroup: "+this.key.group+"\ndepth: "+this.key.depth+"\nclip: "+m.string(this.key.clip)},refresh_key:function(){this.key.uuid=this.uuid,this.key.timestamp=l.get_time(),this.key.sequence=x.geometry.Geometry._sequence_key,this.key.primitive_type=this.state.primitive_type,this.key.texture=this.state.texture,this.key.shader=this.state.shader,this.key.group=this.state.group,this.key.depth=this.state.depth,this.key.clip=this.state.clip},short_id:function(){return r.substr(this.uuid,0,6)},str:function(){this.state.log&&(w.Log.trace("		geometry ; "+this.short_id(),{fileName:"Geometry.hx",lineNumber:216,className:"phoenix.geometry.Geometry",methodName:"str"}),this.state.log=!0,this.state.str(),this.state.log=!1)},drop:function(e){if(null==e&&(e=!0),e&&this.added)for(var t=0,n=this.batchers;t<n.length;){var i=n[t];++t,i.remove(this,!0)}null!=this.transform&&(this.transform.destroy(),this.transform=null),this.dropped=!0},add:function(e){if(this.vertices.push(e),this.vertices.length>l.renderer.batcher.max_verts)throw w.Log.trace("from "+this.id,{fileName:"Geometry.hx",lineNumber:246,className:"phoenix.geometry.Geometry",methodName:"add"}),"Currently a single geometry cannot exceed the maximum vert count of "+l.renderer.batcher.max_verts},remove:function(e){r.remove(this.vertices,e)},batch:function(e,t,n,i,s,r,o,a){for(var l=0,u=this.vertices;l<u.length;){var _=u[l];++l,this._final_vert_position.set_xyzw(_.pos.x,_.pos.y,_.pos.z,_.pos.w),this._final_vert_position.transform(this.transform.get_world().get_matrix()),s[e]=this._final_vert_position.x,s[e+1]=this._final_vert_position.y,s[e+2]=this._final_vert_position.z,s[e+3]=this._final_vert_position.w,e+=4,r[t]=_.uv.uv0.u,r[t+1]=_.uv.uv0.v,r[t+2]=_.uv.uv0.w,r[t+3]=_.uv.uv0.t,t+=4,o[n]=_.color.r,o[n+1]=_.color.g,o[n+2]=_.color.b,o[n+3]=_.color.a,n+=4,a[i]=_.normal.x,a[i+1]=_.normal.y,a[i+2]=_.normal.z,a[i+3]=_.normal.w,i+=4}},batch_into_arrays:function(e,t,n,i){for(var s=0,r=this.vertices;s<r.length;){var o=r[s];++s,this._final_vert_position.set(o.pos.x,o.pos.y,o.pos.z,o.pos.w),this._final_vert_position.transform(this.transform.get_world().get_matrix()),e.push(this._final_vert_position.x),e.push(this._final_vert_position.y),e.push(this._final_vert_position.z),e.push(this._final_vert_position.w),t.push(o.uv.uv0.u),t.push(o.uv.uv0.v),t.push(o.uv.uv0.w),t.push(o.uv.uv0.t),n.push(o.color.r),n.push(o.color.g),n.push(o.color.b),n.push(o.color.a),i.push(o.normal.x),i.push(o.normal.y),i.push(o.normal.z),i.push(o.normal.w)}},translate:function(e){this.transform.get_pos().set(this.transform.get_pos().x+e.x,this.transform.get_pos().y+e.y,this.transform.get_pos().x+e.z)},set_locked:function(e){return this.locked=e},get_locked:function(){return this.locked},set_dirty:function(e){return this.dirty=e},get_dirty:function(){return this.dirty},refresh:function(){for(var e=0,t=this.batchers;e<t.length;){var n=t[e];++e,n.remove(this,!1)}this.dirty_primitive_type&&(this.dirty_primitive_type=!1,this.state.set_primitive_type(this.shadow_primitive_type)),this.dirty_texture&&(this.dirty_texture=!1,this.state.set_texture(this.shadow_texture)),this.dirty_shader&&(this.dirty_shader=!1,this.state.set_shader(this.shadow_shader)),this.dirty_group&&(this.dirty_group=!1,this.state.set_group(this.shadow_group)),this.dirty_depth&&(this.dirty_depth=!1,this.state.set_depth(this.shadow_depth)),this.dirty_clip&&(this.dirty_clip=!1,this.state.set_clip(this.shadow_clip)),this.refresh_key();for(var i=0,s=this.batchers;i<s.length;){var r=s[i];++i,r.add(this,!1)}},get_primitive_type:function(){return this.state.primitive_type},set_primitive_type:function(e){return this.state.primitive_type!=e&&(this.shadow_primitive_type=e,this.dirty_primitive_type=!0,this.refresh()),this.primitive_type=e},get_texture:function(){return this.state.texture},set_texture:function(e){return this.state.texture!=e&&(this.shadow_texture=e,this.dirty_texture=!0,this.refresh()),this.texture=e},set_visible:function(e){return this.visible=e},set_color:function(e){for(var t=0,n=this.vertices;t<n.length;){var i=n[t];++t,i.color=e}return this.color=e},get_shader:function(){return this.state.shader},set_shader:function(e){return this.state.shader!=e&&(this.shadow_shader=e,this.dirty_shader=!0,this.refresh()),this.shader=e},get_depth:function(){return this.state.depth},set_depth:function(e){return this.state.depth!=e&&(this.shadow_depth=e,this.dirty_depth=!0,this.refresh()),this.depth=e},get_group:function(){return this.state.group},set_group:function(e){return this.state.group!=e&&(this.shadow_group=e,this.dirty_group=!0,this.refresh()),this.group=e},get_clip:function(){return this.state.clip},set_clip:function(e){return this.state.clip!=e&&(this.shadow_clip=e,this.dirty_clip=!0,this.refresh()),this.clip=e},get_clip_rect:function(){return this.state.clip_rect},set_clip_rect:function(e){return this.set_clip(null==e?!1:!0),this.state.set_clip_rect(e)},__class__:x.geometry.Geometry,__properties__:{set_clip:"set_clip",get_clip:"get_clip",set_color:"set_color",set_dirty:"set_dirty",get_dirty:"get_dirty",set_locked:"set_locked",get_locked:"get_locked",set_visible:"set_visible",set_clip_rect:"set_clip_rect",get_clip_rect:"get_clip_rect",set_group:"set_group",get_group:"get_group",set_depth:"set_depth",get_depth:"get_depth",set_shader:"set_shader",get_shader:"get_shader",set_texture:"set_texture",get_texture:"get_texture",set_primitive_type:"set_primitive_type",get_primitive_type:"get_primitive_type"}},x.geometry.CircleGeometry=function(e){if(x.geometry.Geometry.call(this,e),null!=e){var t=32,n=32;if(null==e.end_angle&&(e.end_angle=360),null==e.start_angle&&(e.start_angle=0),null!=e.r&&(t=e.r,n=e.r),null!=e.rx&&(t=e.rx),null!=e.ry&&(n=e.ry),null==e.steps)if(null==e.smooth){var i=Math.max(t,n);e.steps=l.utils.geometry.segments_for_smooth_circle(i)}else{var s=e.smooth,r=Math.max(t,n);e.steps=l.utils.geometry.segments_for_smooth_circle(r,s)}this.set(e.x,e.y,t,n,e.steps,e.start_angle,e.end_angle),null!=e.visible&&this.set_visible(e.visible)}},x.geometry.CircleGeometry.__name__=!0,x.geometry.CircleGeometry.__super__=x.geometry.Geometry,x.geometry.CircleGeometry.prototype=e(x.geometry.Geometry.prototype,{set:function(e,t,n,i,s,r,o){null==o&&(o=360),null==r&&(r=0),this.set_primitive_type(x.PrimitiveType.triangles);
var a=Math.PI/2,l=.017453292519943278*r-a,u=.017453292519943278*o-a,_=u-l;s=Math.ceil(Math.abs(_)/(2*Math.PI)*s);var h=_/s,c=Math.tan(h),p=Math.cos(h),d=n*Math.cos(l),m=n*Math.sin(l),f=n/i;0==f&&(f=1e-9);for(var g=0,y=[],w=0,v=s+1;v>w;){var b=(w++,d),S=m/f,T=new x.Vector(b,S);y.push(T),g>0&&this.add(new x.geometry.Vertex(T,this.color)),this.add(new x.geometry.Vertex(new x.Vector(0,0),this.color)),this.add(new x.geometry.Vertex(T,this.color));var E=-m,k=d;d+=E*c,m+=k*c,d*=p,m*=p,g++}this.add(new x.geometry.Vertex(y[s],this.color)),this.transform.set_pos(new x.Vector(e,t))},__class__:x.geometry.CircleGeometry}),x.geometry.RingGeometry=function(e){x.geometry.CircleGeometry.call(this,e),this.set_primitive_type(x.PrimitiveType.lines)},x.geometry.RingGeometry.__name__=!0,x.geometry.RingGeometry.__super__=x.geometry.CircleGeometry,x.geometry.RingGeometry.prototype=e(x.geometry.CircleGeometry.prototype,{set:function(e,t,n,i,s,r,o){null==o&&(o=360),null==r&&(r=0),this.set_primitive_type(x.PrimitiveType.triangles);var a=.017453292519943278*r,l=.017453292519943278*o,u=l-a,_=u/s,h=Math.tan(_),c=Math.cos(_),p=n*Math.cos(a),d=n*Math.sin(a),m=n/i;0==m&&(m=1e-9);for(var f=0,g=[],y=0;s>y;){var w=(y++,p),v=d/m,b=new x.Vector(w,v);if(g.push(b),this.add(new x.geometry.Vertex(b,this.color)),f>0){var S=g[f];this.add(new x.geometry.Vertex(S.clone(),this.color))}var T=-d,E=p;p+=T*h,d+=E*h,p*=c,d*=c,f++}this.add(new x.geometry.Vertex(g[0],this.color)),this.transform.set_pos(new x.Vector(e,t))},__class__:x.geometry.RingGeometry}),x.geometry.ArcGeometry=function(e){x.geometry.RingGeometry.call(this,e),this.vertices.pop(),this.vertices.pop(),this.set_primitive_type(x.PrimitiveType.lines)},x.geometry.ArcGeometry.__name__=!0,x.geometry.ArcGeometry.__super__=x.geometry.RingGeometry,x.geometry.ArcGeometry.prototype=e(x.geometry.RingGeometry.prototype,{__class__:x.geometry.ArcGeometry}),x.geometry.ComplexGeometry=function(e){x.geometry.Geometry.call(this,e),this.set_primitive_type(x.PrimitiveType.triangles),this.quads=new w.ds.StringMap},x.geometry.ComplexGeometry.__name__=!0,x.geometry.ComplexGeometry.__super__=x.geometry.Geometry,x.geometry.ComplexGeometry.prototype=e(x.geometry.Geometry.prototype,{quads:null,clear:function(){for(var e=this.quads.keys();e.hasNext();){var t=e.next();this.quad_remove(t)}},quad_add:function(e){var t=l.utils.uniqueid(),n=new x.geometry.Vertex(new x.Vector(e.x,e.y)),i=new x.geometry.Vertex(new x.Vector(e.x+e.w,e.y)),s=new x.geometry.Vertex(new x.Vector(e.x+e.w,e.y+e.h)),r=new x.geometry.Vertex(new x.Vector(e.x,e.y+e.h)),o=new x.geometry.Vertex(new x.Vector(e.x,e.y)),a=new x.geometry.Vertex(new x.Vector(e.x+e.w,e.y+e.h));this.add(n),this.add(i),this.add(s),this.add(r),this.add(o),this.add(a);var u={uuid:t,verts:new Array,flipx:!1,flipy:!1,_uv_cache:new x.Rectangle(0,0,1,1)};return u.verts.push(n),u.verts.push(i),u.verts.push(s),u.verts.push(r),u.verts.push(o),u.verts.push(a),this.quads.set(t,u),this.set_dirty(!0),t},quad_remove:function(e){var t=this.quads.get(e);null!=t&&(this.remove(t.verts[0]),this.remove(t.verts[1]),this.remove(t.verts[2]),this.remove(t.verts[3]),this.remove(t.verts[4]),this.remove(t.verts[5]),this.quads.remove(e),this.set_dirty(!0))},quad_hide:function(e){var t=this.quads.get(e);null!=t&&(this.remove(t.verts[0]),this.remove(t.verts[1]),this.remove(t.verts[2]),this.remove(t.verts[3]),this.remove(t.verts[4]),this.remove(t.verts[5]),this.set_dirty(!0))},quad_show:function(e){var t=this.quads.get(e);null!=t&&(this.add(t.verts[0]),this.add(t.verts[1]),this.add(t.verts[2]),this.add(t.verts[3]),this.add(t.verts[4]),this.add(t.verts[5]),this.set_dirty(!0))},quad_resize:function(e,t){var n=this.quads.get(e);null!=n&&(n.verts[0].pos=new x.Vector(t.x,t.y),n.verts[1].pos=new x.Vector(t.x+t.w,t.y),n.verts[2].pos=new x.Vector(t.x+t.w,t.y+t.h),n.verts[3].pos=new x.Vector(t.x,t.y+t.h),n.verts[4].pos=new x.Vector(t.x,t.y),n.verts[5].pos=new x.Vector(t.x+t.w,t.y+t.h),this.set_dirty(!0))},quad_pos:function(e,t){var n=this.quads.get(e);if(null!=n){var i=t.x-n.verts[0].pos.x,s=t.y-n.verts[0].pos.y,r=n.verts[0].pos;r.set_x(r.x+i);var o=n.verts[0].pos;o.set_y(o.y+s);var a=n.verts[1].pos;a.set_x(a.x+i);var l=n.verts[1].pos;l.set_y(l.y+s);var u=n.verts[2].pos;u.set_x(u.x+i);var _=n.verts[2].pos;_.set_y(_.y+s);var h=n.verts[3].pos;h.set_x(h.x+i);var c=n.verts[3].pos;c.set_y(c.y+s);var p=n.verts[4].pos;p.set_x(p.x+i);var d=n.verts[4].pos;d.set_y(d.y+s);var m=n.verts[5].pos;m.set_x(m.x+i);var f=n.verts[5].pos;f.set_y(f.y+s),this.set_dirty(!0)}},quad_color:function(e,t){var n=this.quads.get(e);null!=n&&(n.verts[0].color=t,n.verts[1].color=t,n.verts[2].color=t,n.verts[3].color=t,n.verts[4].color=t,n.verts[5].color=t)},quad_alpha:function(e,t){var n=this.quads.get(e);null!=n&&(n.verts[0].color.a=t,n.verts[1].color.a=t,n.verts[2].color.a=t,n.verts[3].color.a=t,n.verts[4].color.a=t,n.verts[5].color.a=t)},quad_uv_space:function(e,t){var n=this.quads.get(e);if(null!=n){var i=n.flipx,s=n.flipy,r=t.w,o=t.h,a=t.x,l=t.y;n._uv_cache.set(a,l,r,o);var u=a+r,_=l,h=a+r,c=l+o,p=a,d=l+o,m=0,f=0;s&&(f=d,d=l,l=f,f=c,c=_,_=f),i&&(m=u,u=a,a=m,m=h,h=p,p=m),n.verts[0].uv.uv0.set(a,l),n.verts[1].uv.uv0.set(u,_),n.verts[2].uv.uv0.set(h,c),n.verts[3].uv.uv0.set(p,d),n.verts[4].uv.uv0.set(a,l),n.verts[5].uv.uv0.set(h,c),this.set_dirty(!0)}},quad_uv:function(e,t){if(null==this.get_texture())return void w.Log.trace("Warning : calling UV on a Complex Geometry with null texture.",{fileName:"ComplexGeometry.hx",lineNumber:328,className:"phoenix.geometry.ComplexGeometry",methodName:"quad_uv"});var n=t.x/this.get_texture().width_actual,i=t.y/this.get_texture().height_actual,s=t.w/this.get_texture().width_actual,r=t.h/this.get_texture().height_actual;this.quad_uv_space(e,new x.Rectangle(n,i,s,r))},quad_flipx:function(e,t){var n=this.quads.get(e);null!=n&&(n.flipx=t,this.quad_uv_space(e,n._uv_cache))},quad_flipy:function(e,t){var n=this.quads.get(e);null!=n&&(n.flipy=t,this.quad_uv_space(e,n._uv_cache))},__class__:x.geometry.ComplexGeometry}),x.geometry.CompositeGeometry=function(e){x.geometry.Geometry.call(this,e),this.geometry=new Array},x.geometry.CompositeGeometry.__name__=!0,x.geometry.CompositeGeometry.__super__=x.geometry.Geometry,x.geometry.CompositeGeometry.prototype=e(x.geometry.Geometry.prototype,{geometry:null,toString:function(){return"CompositeGeometry "+m.string(this.geometry)+" : "+m.string(this.geometry)},clear:function(){this.geometry.splice(0,this.geometry.length)},replace:function(e){this.clear(),this.geometry=e;for(var t=0,n=this.geometry;t<n.length;){var i=n[t];++t,i.transform=this.transform}},has_geometry:function(e){return o.has(this.geometry,e)},add_geometry:function(e){null!=e&&(e.transform=this.transform,this.geometry.push(e))},remove_geometry:function(e){r.remove(this.geometry,e)},add_to_batcher:function(e){for(var t=0,n=this.geometry;t<n.length;){var i=n[t];++t,e.add(i)}},drop:function(e){null==e&&(e=!0);for(var t=0,n=this.geometry;t<n.length;){var i=n[t];++t,i.drop(e),i=null}this.geometry=null,this.geometry=[]},translate:function(e){if(null!=this.geometry)for(var t=0,n=this.geometry;t<n.length;){var i=n[t];++t,i.translate(e)}},set_color:function(e){if(null!=this.geometry)for(var t=0,n=this.geometry;t<n.length;){var i=n[t];++t,i.set_color(e)}return this.color=e},set_primitive_type:function(e){if(null!=this.geometry)for(var t=0,n=this.geometry;t<n.length;){var i=n[t];++t,i.set_primitive_type(e)}return this.primitive_type=e},set_shader:function(e){if(null!=this.geometry)for(var t=0,n=this.geometry;t<n.length;){var i=n[t];++t,i.set_shader(e)}return this.shader=e},set_texture:function(e){if(null!=this.geometry)for(var t=0,n=this.geometry;t<n.length;){var i=n[t];++t,i.set_texture(e)}return this.texture=e},set_depth:function(e){if(null!=this.geometry)for(var t=0,n=this.geometry;t<n.length;){var i=n[t];++t,i.set_depth(e)}return this.depth=e},set_group:function(e){if(null!=this.geometry)for(var t=0,n=this.geometry;t<n.length;){var i=n[t];++t,i.set_group(e)}return this.group=e},set_locked:function(e){if(null!=this.geometry)for(var t=0,n=this.geometry;t<n.length;){var i=n[t];++t,i.set_locked(e)}return this.locked=e},set_dirty:function(e){if(null!=this.geometry)for(var t=0,n=this.geometry;t<n.length;){var i=n[t];++t,i.set_dirty(e)}return this.dirty=e},set_clip_rect:function(e){if(null!=this.geometry)for(var t=0,n=this.geometry;t<n.length;){var i=n[t];++t,i.set_clip_rect(e)}return this.clip_rect=e},set_visible:function(e){if(null!=this.geometry)for(var t=0,n=this.geometry;t<n.length;){var i=n[t];++t,i.set_visible(e)}return this.visible=e},__class__:x.geometry.CompositeGeometry}),x.geometry.GeometryState=function(){this.log=!1,this.set_clip(!1),this.set_clip_rect(new x.Rectangle),this.set_texture(null),this.set_shader(null),this.set_group(0),this.set_depth(0),this.set_primitive_type(x.PrimitiveType.points),this.dirty=!1},x.geometry.GeometryState.__name__=!0,x.geometry.GeometryState.prototype={dirty:null,primitive_type:null,shader:null,texture:null,depth:null,group:null,clip:null,clip_rect:null,log:null,clone_onto:function(e){e.dirty=this.dirty,e.set_texture(this.texture),e.set_shader(this.shader),e.set_group(this.group),e.set_depth(this.depth),e.set_primitive_type(this.primitive_type),e.set_clip(this.clip),e.clip_rect.copy_from(this.clip_rect)},str:function(){this.log&&(w.Log.trace("	+ GEOMETRYSTATE "+m.string(this.dirty),{fileName:"GeometryState.hx",lineNumber:53,className:"phoenix.geometry.GeometryState",methodName:"str"}),w.Log.trace("		depth - "+this.depth,{fileName:"GeometryState.hx",lineNumber:54,className:"phoenix.geometry.GeometryState",methodName:"str"}),w.Log.trace("		group - "+this.group,{fileName:"GeometryState.hx",lineNumber:55,className:"phoenix.geometry.GeometryState",methodName:"str"}),w.Log.trace("		texture - "+(null==this.texture?"null":this.texture.id),{fileName:"GeometryState.hx",lineNumber:56,className:"phoenix.geometry.GeometryState",methodName:"str"}),null!=this.texture&&w.Log.trace("			 "+m.string(this.texture.texture),{fileName:"GeometryState.hx",lineNumber:58,className:"phoenix.geometry.GeometryState",methodName:"str"}),w.Log.trace("		shader - "+(null==this.shader?"null":this.shader.id),{fileName:"GeometryState.hx",lineNumber:60,className:"phoenix.geometry.GeometryState",methodName:"str"}),w.Log.trace("		primitive_type - "+m.string(this.primitive_type),{fileName:"GeometryState.hx",lineNumber:61,className:"phoenix.geometry.GeometryState",methodName:"str"}),w.Log.trace("		clip - "+m.string(this.clip),{fileName:"GeometryState.hx",lineNumber:62,className:"phoenix.geometry.GeometryState",methodName:"str"}),w.Log.trace("		clip rect - "+m.string(this.clip_rect),{fileName:"GeometryState.hx",lineNumber:63,className:"phoenix.geometry.GeometryState",methodName:"str"}),w.Log.trace("	- GEOMETRYSTATE",{fileName:"GeometryState.hx",lineNumber:64,className:"phoenix.geometry.GeometryState",methodName:"str"}))},clean:function(){this.dirty=!1},update:function(e){this.depth!=e.depth&&this.set_depth(e.depth),this.group!=e.group&&this.set_group(e.group),this.texture!=e.texture&&this.set_texture(e.texture),this.shader!=e.shader&&this.set_shader(e.shader),this.primitive_type!=e.primitive_type&&this.set_primitive_type(e.primitive_type),this.clip!=e.clip&&this.set_clip(e.clip),null!=this.clip_rect&&(null==e.clip_rect||this.clip_rect.equal(e.clip_rect)||this.clip_rect.set(e.clip_rect.x,e.clip_rect.y,e.clip_rect.w,e.clip_rect.h))},set_primitive_type:function(e){return this.dirty=!0,this.primitive_type=e},set_texture:function(e){return this.dirty=!0,this.texture=e},set_shader:function(e){return this.dirty=!0,this.shader=e},set_depth:function(e){return this.depth=e},set_group:function(e){return this.dirty=!0,this.group=e},set_clip:function(e){return this.dirty=!0,this.clip=e},set_clip_rect:function(e){return this.dirty=!0,this.clip_rect=e},__class__:x.geometry.GeometryState,__properties__:{set_clip_rect:"set_clip_rect",set_clip:"set_clip",set_group:"set_group",set_depth:"set_depth",set_texture:"set_texture",set_shader:"set_shader",set_primitive_type:"set_primitive_type"}},x.geometry.LineGeometry=function(e){x.geometry.Geometry.call(this,e),null!=e&&(null==e.color&&(e.color=new x.Color),null==e.color0&&(e.color0=e.color),null==e.color1&&(e.color1=e.color),this.set_p0(new x.Vector),this.set_p1(new x.Vector),this.set(e))},x.geometry.LineGeometry.__name__=!0,x.geometry.LineGeometry.__super__=x.geometry.Geometry,x.geometry.LineGeometry.prototype=e(x.geometry.Geometry.prototype,{p0:null,p1:null,set_p0:function(e){return 0==this.vertices.length?this.p0=e:(this.vertices[0].pos.set_x(e.x),this.vertices[0].pos.set_y(e.y),this.vertices[0].pos.set_z(e.z),this.p0=e)},set_p1:function(e){return 0==this.vertices.length?this.set_p0(e):(this.vertices[1].pos.set_x(e.x),this.vertices[1].pos.set_y(e.y),this.vertices[1].pos.set_z(e.z),this.p1=e)},set:function(e){this.vertices.splice(0,this.vertices.length);var t=new x.geometry.Vertex(new x.Vector(e.p0.x,e.p0.y,e.p0.z),e.color0);t.uv.uv0.set(0,0);var n=new x.geometry.Vertex(new x.Vector(e.p1.x,e.p1.y,e.p1.z),e.color1);n.uv.uv0.set(1,0),this.add(t),this.add(n),this.set_primitive_type(x.PrimitiveType.lines),this.immediate=e.immediate},__class__:x.geometry.LineGeometry,__properties__:e(x.geometry.Geometry.prototype.__properties__,{set_p1:"set_p1",set_p0:"set_p0"})}),x.geometry.PlaneGeometry=function(e){this.is_set=!1,this.flipy=!1,this.flipx=!1,x.geometry.Geometry.call(this,e),null!=e&&(null!=e.flipx&&this.set_flipx(e.flipx),null!=e.flipy&&this.set_flipy(e.flipy),this._uv_cache=new x.Rectangle(0,0,1,1),this.set(new x.Rectangle(e.x,e.z,e.w,e.h),e.y),null!=e.visible&&this.set_visible(e.visible),null!=e.immediate&&(this.immediate=e.immediate))},x.geometry.PlaneGeometry.__name__=!0,x.geometry.PlaneGeometry.__super__=x.geometry.Geometry,x.geometry.PlaneGeometry.prototype=e(x.geometry.Geometry.prototype,{flipx:null,flipy:null,_uv_cache:null,is_set:null,uv:function(e){if(null==this.get_texture())return void w.Log.trace("Warning : calling UV on a geometry with null texture.",{fileName:"PlaneGeometry.hx",lineNumber:45,className:"phoenix.geometry.PlaneGeometry",methodName:"uv"});var t=e.x/this.get_texture().width_actual,n=e.y/this.get_texture().height_actual,i=e.w/this.get_texture().width_actual,s=e.h/this.get_texture().height_actual;this.uv_space(new x.Rectangle(t,n,i,s))},uv_space:function(e){var t=e.w,n=e.h,i=e.x,s=e.y;this._uv_cache.set(i,s,t,n);var r=i+t,o=s,a=i+t,l=s+n,u=i,_=s+n,h=0,c=0;this.flipy&&(c=_,_=s,s=c,c=l,l=o,o=c),this.flipx&&(h=r,r=i,i=h,h=a,a=u,u=h),this.vertices[0].uv.uv0.set(i,s),this.vertices[1].uv.uv0.set(r,o),this.vertices[2].uv.uv0.set(a,l),this.vertices[3].uv.uv0.set(u,_),this.vertices[4].uv.uv0.set(i,s),this.vertices[5].uv.uv0.set(a,l),this.set_dirty(!0)},set:function(e,t){this.vertices.splice(0,this.vertices.length);var n=new x.geometry.Vertex(new x.Vector(0,0,0),this.color),i=new x.geometry.Vertex(new x.Vector(e.w,0,0),this.color),s=new x.geometry.Vertex(new x.Vector(e.w,0,e.h),this.color),r=new x.geometry.Vertex(new x.Vector(0,0,e.h),this.color),o=new x.geometry.Vertex(new x.Vector(0,0,0),this.color),a=new x.geometry.Vertex(new x.Vector(e.w,0,e.h),this.color);this.add(a),this.add(o),this.add(r),this.add(s),this.add(i),this.add(n),this.set_primitive_type(x.PrimitiveType.triangles),this.immediate=!1,this.transform.set_pos(new x.Vector(e.x,t,e.y)),this.is_set=!0,this.uv_space(new x.Rectangle(0,0,1,1))},set_flipx:function(e){return this.flipx=e,this.is_set&&this.uv_space(this._uv_cache),this.flipx},set_flipy:function(e){return this.flipy=e,this.is_set&&this.uv_space(this._uv_cache),this.flipy},__class__:x.geometry.PlaneGeometry,__properties__:e(x.geometry.Geometry.prototype.__properties__,{set_flipy:"set_flipy",set_flipx:"set_flipx"})}),x.geometry.QuadGeometry=function(e){this.is_set=!1,this.flipy=!1,this.flipx=!1,x.geometry.Geometry.call(this,e),null!=e&&(null!=e.flipx&&this.set_flipx(e.flipx),null!=e.flipy&&this.set_flipy(e.flipy),this._uv_cache=new x.Rectangle(0,0,1,1),this.set(new x.Rectangle(e.x,e.y,e.w,e.h)),null!=e.visible&&this.set_visible(e.visible),null!=e.immediate&&(this.immediate=e.immediate))},x.geometry.QuadGeometry.__name__=!0,x.geometry.QuadGeometry.__super__=x.geometry.Geometry,x.geometry.QuadGeometry.prototype=e(x.geometry.Geometry.prototype,{flipx:null,flipy:null,_uv_cache:null,is_set:null,uv:function(e){if(null==this.get_texture())return void w.Log.trace("Warning : calling UV on a geometry with null texture.",{fileName:"QuadGeometry.hx",lineNumber:44,className:"phoenix.geometry.QuadGeometry",methodName:"uv"});var t=e.x/this.get_texture().width_actual,n=e.y/this.get_texture().height_actual,i=e.w/this.get_texture().width_actual,s=e.h/this.get_texture().height_actual;this.uv_space(new x.Rectangle(t,n,i,s))},uv_space:function(e){var t=e.w,n=e.h,i=e.x,s=e.y;this._uv_cache.set(i,s,t,n);var r=i+t,o=s,a=i+t,l=s+n,u=i,_=s+n,h=0,c=0;this.flipy&&(c=_,_=s,s=c,c=l,l=o,o=c),this.flipx&&(h=r,r=i,i=h,h=a,a=u,u=h),this.vertices[0].uv.uv0.set(i,s),this.vertices[1].uv.uv0.set(r,o),this.vertices[2].uv.uv0.set(a,l),this.vertices[3].uv.uv0.set(u,_),this.vertices[4].uv.uv0.set(i,s),this.vertices[5].uv.uv0.set(a,l),this.set_dirty(!0)},resize:function(e){this.vertices[0].pos.set_xy(0,0),this.vertices[1].pos.set_xy(e.x,0),this.vertices[2].pos.set_xy(e.x,e.y),this.vertices[3].pos.set_xy(0,e.y),this.vertices[4].pos.set_xy(0,0),this.vertices[5].pos.set_xy(e.x,e.y)},set:function(e){this.vertices.splice(0,this.vertices.length);var t=new x.geometry.Vertex(new x.Vector(0,0),this.color),n=new x.geometry.Vertex(new x.Vector(e.w,0),this.color),i=new x.geometry.Vertex(new x.Vector(e.w,e.h),this.color),s=new x.geometry.Vertex(new x.Vector(0,e.h),this.color),r=new x.geometry.Vertex(new x.Vector(0,0),this.color),o=new x.geometry.Vertex(new x.Vector(e.w,e.h),this.color);this.add(t),this.add(n),this.add(i),this.add(s),this.add(r),this.add(o),this.set_primitive_type(x.PrimitiveType.triangles),this.immediate=!1,this.transform.set_pos(new x.Vector(e.x,e.y)),this.is_set=!0,this.uv_space(new x.Rectangle(0,0,1,1))},set_flipx:function(e){return this.flipx=e,this.is_set&&this.uv_space(this._uv_cache),this.flipx},set_flipy:function(e){return this.flipy=e,this.is_set&&this.uv_space(this._uv_cache),this.flipy},__class__:x.geometry.QuadGeometry,__properties__:e(x.geometry.Geometry.prototype.__properties__,{set_flipy:"set_flipy",set_flipx:"set_flipx"})}),x.geometry.RectangleGeometry=function(e){x.geometry.Geometry.call(this,e),null!=e&&this.set(e)},x.geometry.RectangleGeometry.__name__=!0,x.geometry.RectangleGeometry.__super__=x.geometry.Geometry,x.geometry.RectangleGeometry.prototype=e(x.geometry.Geometry.prototype,{set:function(e){this.vertices.splice(0,this.vertices.length);var t=new x.geometry.Vertex(new x.Vector(0,0));t.uv.uv0.set(0,0);var n=new x.geometry.Vertex(new x.Vector(e.w,0));n.uv.uv0.set(1,0);var i=new x.geometry.Vertex(new x.Vector(e.w,0));i.uv.uv0.set(1,0);var s=new x.geometry.Vertex(new x.Vector(e.w,e.h));s.uv.uv0.set(1,1);var r=new x.geometry.Vertex(new x.Vector(e.w,e.h));r.uv.uv0.set(1,1);var o=new x.geometry.Vertex(new x.Vector(0,e.h));o.uv.uv0.set(0,1);var a=new x.geometry.Vertex(new x.Vector(0,e.h));a.uv.uv0.set(0,1);var l=new x.geometry.Vertex(new x.Vector(0,0));l.uv.uv0.set(0,0),this.add(t),this.add(n),this.add(i),this.add(s),this.add(r),this.add(o),this.add(a),this.add(l),this.set_primitive_type(x.PrimitiveType.lines),this.immediate=null==e.immediate?!1:e.immediate,this.set_visible(null==e.visible?!0:e.visible),this.set_color(null==e.color?new x.Color:e.color),this.transform.set_pos(new x.Vector(e.x,e.y))},__class__:x.geometry.RectangleGeometry}),x.geometry.TextureCoordSet=function(){this.uv0=new x.geometry.TextureCoord,this.uv1=new x.geometry.TextureCoord,this.uv2=new x.geometry.TextureCoord,this.uv3=new x.geometry.TextureCoord,this.uv4=new x.geometry.TextureCoord,this.uv5=new x.geometry.TextureCoord,this.uv6=new x.geometry.TextureCoord,this.uv7=new x.geometry.TextureCoord},x.geometry.TextureCoordSet.__name__=!0,x.geometry.TextureCoordSet.prototype={uv0:null,uv1:null,uv2:null,uv3:null,uv4:null,uv5:null,uv6:null,uv7:null,clone:function(){var e=new x.geometry.TextureCoordSet;return e.uv0=this.uv0.clone(),e.uv1=this.uv1.clone(),e.uv2=this.uv2.clone(),e.uv3=this.uv3.clone(),e.uv4=this.uv4.clone(),e.uv5=this.uv5.clone(),e.uv6=this.uv6.clone(),e.uv7=this.uv7.clone(),e},__class__:x.geometry.TextureCoordSet},x.geometry.TextureCoord=function(e,t,n,i){null==i&&(i=0),null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this.t=0,this.w=0,this.v=0,this.u=0,this.u=e,this.v=t,this.w=n,this.t=i},x.geometry.TextureCoord.__name__=!0,x.geometry.TextureCoord.prototype={u:null,v:null,w:null,t:null,clone:function(){return new x.geometry.TextureCoord(this.u,this.v,this.w,this.t)},set:function(e,t,n,i){var s=this.u,r=this.v,o=this.w,a=this.t;return null!=e&&(s=e),null!=t&&(r=t),null!=n&&(o=n),null!=i&&(a=i),this.u=s,this.v=r,this.w=o,this.t=a,this},toString:function(){return"{ u:"+this.u+", v:"+this.v+" }"},__class__:x.geometry.TextureCoord},x.geometry.Vertex=function(e,t,n){this.uv=new x.geometry.TextureCoordSet,this.pos=e,this.color=null==t?new x.Color:t,this.normal=null==n?new x.Vector:n},x.geometry.Vertex.__name__=!0,x.geometry.Vertex.prototype={pos:null,color:null,uv:null,normal:null,clone:function(){var e=new x.geometry.Vertex(this.pos.clone(),this.color.clone(),this.normal.clone());return e.uv=this.uv.clone(),e},__class__:x.geometry.Vertex},x.utils={},x.utils.Rendering=function(){},x.utils.Rendering.__name__=!0,x.utils.Rendering.gl_blend_mode_from_BlendMode=function(e){switch(e[1]){case 0:return 0;case 1:return 1;case 2:return 768;case 3:return 769;case 4:return 770;case 5:return 771;case 6:return 772;case 7:return 773;case 8:return 774;case 9:return 775;case 10:return 776}},x.utils.Rendering.get_elements_for_type=function(e,t){switch(e[1]){case 7:return t/4|0;case 3:return t/4|0;case 1:return t/4|0;case 2:return t/4|0;case 4:return t/4|0;case 6:return t/4|0;default:return t/4|0}},x.utils.Rendering.get_opengl_primitive_type=function(e){switch(e[1]){case 7:return 0;case 3:return 1;case 1:return 3;case 2:return 2;case 4:return 5;case 5:return 4;case 6:return 6;case 0:return 5}},b.AppFixedTimestep=function(){this.overflow=0,this.frame_time=.0167,b.App.call(this)},b.AppFixedTimestep.__name__=!0,b.AppFixedTimestep.__super__=b.App,b.AppFixedTimestep.prototype=e(b.App.prototype,{frame_time:null,overflow:null,on_internal_init:function(){b.App.prototype.on_internal_init.call(this),this.frame_time=.016666666666666666,this.last_frame_start=b.Snow.core.timestamp()},on_internal_update:function(){for(this.cur_frame_start=b.Snow.core.timestamp(),this.delta_time=this.cur_frame_start-this.last_frame_start,this.delta_sim=this.delta_time*this.timescale,this.delta_sim>this.max_frame_time&&(this.delta_sim=this.max_frame_time),this.last_frame_start=this.cur_frame_start,this.overflow+=this.delta_sim;this.overflow>=this.frame_time;)this.app.do_internal_update(this.frame_time*this.timescale),this.current_time+=this.frame_time*this.timescale,this.overflow-=this.frame_time*this.timescale;this.alpha=this.overflow/this.frame_time,0!=this.render_rate&&this.next_render<b.Snow.core.timestamp()&&(this.app.render(),this.next_render+=this.render_rate)},__class__:b.AppFixedTimestep}),b.utils={},b.utils.AbstractClass=function(){},b.utils.AbstractClass.__name__=!0,b.CoreBinding=function(){},b.CoreBinding.__name__=!0,b.CoreBinding.__interfaces__=[b.utils.AbstractClass],b.CoreBinding.prototype={app:null,init:function(){throw"abstract method, must override"},shutdown:function(){throw"abstract method, must override"},timestamp:function(){throw"abstract method, must override"},app_path:function(){throw"abstract method, must override"},pref_path:function(){throw"abstract method, must override"},__class__:b.CoreBinding},b.Log=function(){},b.Log.__name__=!0,b.Log._get_spacing=function(e){var t="",n=e.length+4,i=b.Log._log_width-n;if(i>0)for(var s=0;i>s;){{s++}t+=" "}return t},b.Snow=function(){this.is_ready=!1,this.was_ready=!1,this.has_shutdown=!1,this.shutting_down=!1,b.Snow.core=new b.platform.web.Core(this),b.Snow.next_list=[]},b.Snow.__name__=!0,b.Snow.load=function(e,t,n){return null==n&&(n=0),b.utils.Libs.load(e,t,n)},b.Snow.next=function(e){null!=e&&b.Snow.next_list.push(e)},b.Snow.prototype={host:null,config:null,snow_config:null,io:null,input:null,assets:null,audio:null,windowing:null,shutting_down:null,has_shutdown:null,window:null,was_ready:null,is_ready:null,init:function(e,t){this.snow_config=e,this.config={has_window:!0,runtime:{},window:null,assets:[],web:{no_context_menu:!0},"native":{audio_buffer_length:176400,audio_buffer_count:4}},this.host=t,this.host.app=this,b.Snow.core.init(n(this,this.on_event))},shutdown:function(){this.shutting_down=!0,this.host.destroyed(),this.io.destroy(),this.audio.destroy(),this.input.destroy(),this.windowing.destroy(),b.Snow.core.shutdown(),this.has_shutdown=!0},get_time:function(){return b.Snow.core.timestamp()},on_snow_init:function(){this.host.on_internal_init()},on_snow_ready:function(){if(this.was_ready)return void w.Log.trace("     i / snow / firing ready event repeatedly is not ideal...",{fileName:"Snow.hx",lineNumber:162,className:"snow.Snow",methodName:"on_snow_ready"});if(this.io=new b.io.IO(this),this.input=new b.input.Input(this),this.audio=new b.audio.Audio(this),this.assets=new b.assets.Assets(this),this.windowing=new b.window.Windowing(this),this.snow_config.config_custom_assets||(this.assets.manifest_path=this.snow_config.config_assets_path,this.config.assets=this.default_asset_list(),this.assets.add(this.config.assets)),this.snow_config.config_custom_runtime||(this.config.runtime=this.default_runtime_config()),this.config.window=this.default_window_config(),this.config=this.host.config(this.config),this.was_ready=!0,1==this.config.has_window&&(this.window=this.windowing.create(this.config.window),null==this.window.handle))throw"requested default window cannot be created. Cannot continue.";this.is_ready=!0,this.host.ready()},do_internal_update:function(e){this.io.update(),this.input.update(),this.audio.update(),this.host.update(e)},render:function(){this.windowing.update()},on_snow_update:function(){if(this.is_ready){if(b.utils.Timer.update(),b.Snow.next_list.length>0){for(var e=b.Snow.next_list.length,t=0,n=b.Snow.next_list.length;n>t;){var i=t++;b.Snow.next_list[i]()}b.Snow.next_list.splice(0,e)}this.host.on_internal_update()}},dispatch_system_event:function(e){this.on_event(e)},on_event:function(e){v.Boot.__instanceof(e.type,E)&&(e.type=b.types.SystemEvents.typed(e.type)),e.type!=b.types.SystemEventType.update&&e.type!=b.types.SystemEventType.unknown&&e.type!=b.types.SystemEventType.window&&e.type!=b.types.SystemEventType.input,e.type!=b.types.SystemEventType.update,this.is_ready&&(this.io.on_event(e),this.audio.on_event(e),this.windowing.on_event(e),this.input.on_event(e),this.host.on_event(e));var t=e.type;switch(t[1]){case 1:this.on_snow_init();break;case 2:this.on_snow_ready();break;case 3:this.on_snow_update();break;case 7:case 8:this.shutdown();break;case 4:w.Log.trace("     i / snow / Goodbye.",{fileName:"Snow.hx",lineNumber:329,className:"snow.Snow",methodName:"on_event"})}},default_runtime_config:function(){var e=this.assets.text(this.snow_config.config_runtime_path);if(null!=e&&null!=e.text)try{var t=JSON.parse(e.text);return t}catch(n){throw w.Log.trace("     i / snow / config / failed / default runtime config failed to parse as JSON. cannot recover.",{fileName:"Snow.hx",lineNumber:362,className:"snow.Snow",methodName:"default_runtime_config"}),n}return{}},default_asset_list:function(){var e=[],t=b.platform.web.utils.ByteArray.readFile(this.assets.assets_root+this.assets.manifest_path,!1);if(null!=t&&0!=t.length)for(var n=JSON.parse(t.toString()),i=0;i<n.length;){var s=n[i];++i,e.push({id:s,path:w.io.Path.join([this.assets.assets_root,s]),type:w.io.Path.extension(s),ext:w.io.Path.extension(s)})}else w.Log.trace("     i / snow / config / failed / default asset manifest not found, or length was zero",{fileName:"Snow.hx",lineNumber:397,className:"snow.Snow",methodName:"default_asset_list"});return e},default_window_config:function(){return{fullscreen:!1,resizable:!0,borderless:!1,antialiasing:0,red_bits:2,green_bits:2,blue_bits:2,alpha_bits:8,depth_bits:0,stencil_bits:0,x:536805376,y:536805376,width:960,height:640,title:"snow app"}},get_uniqueid:function(){return w.crypto.Md5.encode(m.string(b.Snow.core.timestamp()*Math.random()))},__class__:b.Snow,__properties__:{get_uniqueid:"get_uniqueid",get_time:"get_time"}},b.assets={},b.assets.Asset=function(e,t){this.loaded=!1,this.assets=e,this.info=t,this.id=this.info.id},b.assets.Asset.__name__=!0,b.assets.Asset.prototype={assets:null,id:null,info:null,type:null,loaded:null,__class__:b.assets.Asset},b.assets.AssetAudio=function(e,t,n,i){null==i&&(i=!0),this.load_full=!0,b.assets.Asset.call(this,e,t),this.type=b.types.AssetType.audio,this.format=n,this.load_full=i},b.assets.AssetAudio.__name__=!0,b.assets.AssetAudio.__super__=b.assets.Asset,b.assets.AssetAudio.prototype=e(b.assets.Asset.prototype,{audio:null,format:null,load_full:null,load:function(e){var t=this;this.loaded=!1,this.audio=null,this.assets.platform.audio_load_info(this.info.path,this.format,this.load_full,function(n){t.audio=n,t.loaded=!0,null!=e&&b.Snow.next(function(){e(t)})})},__class__:b.assets.AssetAudio}),b.assets.AssetBytes=function(e,t,n){null==n&&(n=!1),this.async=!1,b.assets.Asset.call(this,e,t),this.type=b.types.AssetType.bytes,this.async=n},b.assets.AssetBytes.__name__=!0,b.assets.AssetBytes.__super__=b.assets.Asset,b.assets.AssetBytes.prototype=e(b.assets.Asset.prototype,{bytes:null,async:null,load:function(e){var t=this;this.loaded=!1,this.bytes=null,b.platform.web.utils.ByteArray.readFile(this.info.path,this.async,function(n){t.bytes=n,t.loaded=!0,null!=e&&b.Snow.next(function(){e(t)})})},__class__:b.assets.AssetBytes}),b.assets.AssetImage=function(e,t,n){null==n&&(n=4),this.components=4,b.assets.Asset.call(this,e,t),this.type=b.types.AssetType.image,this.components=n},b.assets.AssetImage.__name__=!0,b.assets.AssetImage.__super__=b.assets.Asset,b.assets.AssetImage.prototype=e(b.assets.Asset.prototype,{image:null,components:null,load:function(e){var t=this;this.loaded=!1,this.image=null,this.assets.platform.image_load_info(this.info.path,this.components,function(n){null!=n&&(t.image=n,t.loaded=!0),null!=e&&e(t)})},load_from_bytes:function(e,t){var n=this;this.loaded=!1,this.image=null,this.image=this.assets.platform.image_info_from_bytes(this.info.path,e,this.components),this.loaded=!0,null!=t&&b.Snow.next(function(){t(n)})},__class__:b.assets.AssetImage}),b.assets.AssetSystemBinding=function(){},b.assets.AssetSystemBinding.__name__=!0,b.assets.AssetSystemBinding.__interfaces__=[b.utils.AbstractClass],b.assets.AssetSystemBinding.prototype={manager:null,exists:function(e,t){throw null==t&&(t=!0),"abstract method, must override"},image_load_info:function(e,t){throw null==t&&(t=4),"abstract method, must override"},image_info_from_bytes:function(e,t,n){throw null==n&&(n=4),"abstract method, must override"},audio_load_info:function(e,t,n){throw null==n&&(n=!0),"abstract method, must override"},__class__:b.assets.AssetSystemBinding},b.assets.AssetText=function(e,t,n){null==n&&(n=!1),this.async=!1,b.assets.Asset.call(this,e,t),this.type=b.types.AssetType.text,this.async=n},b.assets.AssetText.__name__=!0,b.assets.AssetText.__super__=b.assets.Asset,b.assets.AssetText.prototype=e(b.assets.Asset.prototype,{text:null,async:null,load:function(e){var t=this;this.loaded=!1,this.text=null,b.platform.web.utils.ByteArray.readFile(this.info.path,this.async,function(n){null!=n&&(t.text=n.toString()),t.loaded=!0,null!=e&&b.Snow.next(function(){e(t)})})},__class__:b.assets.AssetText}),b.assets.Assets=function(e){this.strict=!0,this.manifest_path="manifest",this.assets_root="",this.lib=e,this.list=new w.ds.StringMap,this.platform=new b.platform.web.assets.AssetSystem(this)},b.assets.Assets.__name__=!0,b.assets.Assets.prototype={list:null,assets_root:null,manifest_path:null,strict:null,platform:null,lib:null,add:function(e){for(var t=0;t<e.length;){var n=e[t];
++t;var i=["psd","bmp","tga","gif","jpg","png"],s=["pcm","ogg","wav"];o.has(i,n.ext)?n.type="image":o.has(s,n.ext)&&(n.type="sound"),this.list.set(n.id,n)}},get:function(e){return this.list.get(e)},listed:function(e){return this.list.exists(e)},exists:function(e,t){return null==t&&(t=!0),this.platform.exists(e,t)},path:function(e){return this.listed(e)?this.get(e).path:this.assets_root+e},bytes:function(e,t){var n=this.strict;if(null!=t&&null!=t.strict&&(n=t.strict),this.exists(e,n)){var i=this.get(e);null==i&&(i=this.info_from_id(e,"bytes"));var s=new b.assets.AssetBytes(this,i,null!=t?t.async:null);return s.load(null!=t?t.onload:null),s}return this.exists_error(e),null},text:function(e,t){var n=this.strict;if(null!=t&&null!=t.strict&&(n=t.strict),this.exists(e,n)){var i=this.get(e);null==i&&(i=this.info_from_id(e,"text"));var s=new b.assets.AssetText(this,i,null!=t?t.async:null);return s.load(null!=t?t.onload:null),s}return this.exists_error(e),null},image:function(e,t){var n=this.strict,i=null!=t&&null!=t.bytes;if(null!=t&&null!=t.strict&&(n=t.strict),this.exists(e,n)||i){null==t&&(t={components:4});var s=this.get(e);null==s&&(s=this.info_from_id(e,"image"));var r;r=null==t.components?4:t.components;var o=new b.assets.AssetImage(this,s,r);return i?o.load_from_bytes(t.bytes,t.onload):o.load(t.onload),o}return this.exists_error(e),null},audio:function(e,t){var n=this.strict;if(null!=t&&null!=t.strict&&(n=t.strict),this.exists(e,n)){var i=this.get(e);null==i&&(i=this.info_from_id(e,"audio")),null==t?t={type:i.ext,load:!0}:(null==t.type||""==t.type)&&(t.type=i.ext);var s=b.types.AudioFormatType.unknown,r=t.type;switch(r){case"wav":s=b.types.AudioFormatType.wav;break;case"ogg":s=b.types.AudioFormatType.ogg;break;case"pcm":s=b.types.AudioFormatType.pcm;break;default:return this.load_error(e,"unrecognized audio format"),null}var o=new b.assets.AssetAudio(this,i,s,t.load);return o.load(null!=t?t.onload:null),o}return this.exists_error(e),null},info_from_id:function(e,t){return{id:e,path:e,ext:w.io.Path.extension(e),type:t}},exists_error:function(e){w.Log.trace("   i / assets / "+('not found "'+e+'"'),{fileName:"Assets.hx",lineNumber:293,className:"snow.assets.Assets",methodName:"exists_error"})},load_error:function(e,t){null==t&&(t="unknown"),w.Log.trace("   i / assets / "+('found "'+e+'" but it failed to load ('+t+")"),{fileName:"Assets.hx",lineNumber:297,className:"snow.assets.Assets",methodName:"load_error"})},__class__:b.assets.Assets},b.audio={},b.audio.Audio=function(e){this.active=!1,this.lib=e,this.platform=new b.platform.web.audio.howlerjs.AudioSystem(this,this.lib),this.platform.init(),this.sound_list=new w.ds.StringMap,this.stream_list=new w.ds.StringMap,this.handles=new w.ds.ObjectMap,this.active=!0},b.audio.Audio.__name__=!0,b.audio.Audio.prototype={platform:null,active:null,lib:null,handles:null,sound_list:null,stream_list:null,create:function(e,t,n){null==n&&(n=!1),null==t&&(t="");var i=this;""==t&&(t=this.lib.get_uniqueid());{var s=null;this.lib.assets.audio(e,{load:!n,onload:function(e){null!=e&&null!=s&&(i.handles.set(e.audio.handle,s),s.set_info(e.audio))}})}if(n){var r=new b.platform.web.audio.howlerjs.SoundStream(this,t);this.stream_list.set(t,r),s=r}else s=new b.platform.web.audio.howlerjs.Sound(this,t);return this.sound_list.set(t,s),s},uncreate:function(e){var t=this.sound_list.get(e);null==t&&w.Log.trace("    i / audio / can't find sound, unable to uncreate, use create first: "+e,{fileName:"Audio.hx",lineNumber:111,className:"snow.audio.Audio",methodName:"uncreate"}),t.destroy()},on:function(e,t,n){var i=this.get(e);null!=i&&i.on(t,n)},off:function(e,t,n){var i=this.get(e);null!=i&&i.off(t,n)},get:function(e){var t=this.sound_list.get(e);return null==t&&w.Log.trace("    i / audio / sound not found, use create first: "+e,{fileName:"Audio.hx",lineNumber:141,className:"snow.audio.Audio",methodName:"get"}),t},volume:function(e,t){var n=this.get(e);return null!=n?null!=t?n.set_volume(t):n.get_volume():0},pan:function(e,t){var n=this.get(e);return null!=n?null!=t?n.set_pan(t):n.get_pan():0},pitch:function(e,t){var n=this.get(e);return null!=n?null!=t?n.set_pitch(t):n.get_pitch():0},position:function(e,t){var n=this.get(e);return null!=n?null!=t?n.set_position(t):n.get_position():0},duration:function(e){var t=this.get(e);return null!=t?t.get_duration():0},play:function(e){if(this.active){var t=this.get(e);null!=t&&t.play()}},loop:function(e){if(this.active){var t=this.get(e);null!=t&&t.loop()}},pause:function(e){if(this.active){var t=this.get(e);null!=t&&t.pause()}},stop:function(e){if(this.active){var t=this.get(e);null!=t&&t.stop()}},toggle:function(e){if(this.active){var t=this.get(e);null!=t&&t.toggle()}},kill:function(e){this.handles.remove(e.get_info().handle),this.sound_list.remove(e.name),this.stream_list.remove(e.name)},on_event:function(e){if(e.type==b.types.SystemEventType.app_willenterbackground){this.active=!1;for(var t=this.stream_list.iterator();t.hasNext();){var n=t.next();n.internal_pause()}this.platform.suspend()}else if(e.type==b.types.SystemEventType.app_willenterforeground){this.active=!0,this.platform.resume();for(var i=this.stream_list.iterator();i.hasNext();){var s=i.next();s.internal_play()}}},destroy:function(){this.active=!1;for(var e=this.sound_list.iterator();e.hasNext();){var t=e.next();t.destroy()}this.platform.destroy()},update:function(){if(this.active){for(var e=this.sound_list.iterator();e.hasNext();){var t=e.next();t.playing&&t.internal_update()}this.platform.process()}},__class__:b.audio.Audio},b.audio.AudioSystemBinding=function(){},b.audio.AudioSystemBinding.__name__=!0,b.audio.AudioSystemBinding.__interfaces__=[b.utils.AbstractClass],b.audio.AudioSystemBinding.prototype={manager:null,lib:null,init:function(){throw"abstract method, must override"},process:function(){throw"abstract method, must override"},destroy:function(){throw"abstract method, must override"},suspend:function(){throw"abstract method, must override"},resume:function(){throw"abstract method, must override"},__class__:b.audio.AudioSystemBinding},b.audio.SoundBinding=function(e,t){this.duration=0,this.position=0,this.looping=!1,this.pan=0,this.volume=1,this.pitch=1,this.is_stream=!1,this.loaded=!1,this.paused=!1,this.playing=!1,this.name="",this.name=t,this.manager=e,this.onload_list=[],this.onend_list=[]},b.audio.SoundBinding.__name__=!0,b.audio.SoundBinding.prototype={manager:null,name:null,playing:null,paused:null,loaded:null,is_stream:null,info:null,pitch:null,volume:null,pan:null,looping:null,position:null,duration:null,emit:function(e){switch(e){case"end":this.do_onend();break;case"load":this.do_onload();break;default:w.Log.trace("    i / sound / "+("no event {"+e+"}"),{fileName:"Sound.hx",lineNumber:80,className:"snow.audio.SoundBinding",methodName:"emit"})}},on:function(e,t){switch(e){case"end":this.onend_list.push(t);break;case"load":this.add_onload(t);break;default:w.Log.trace("    i / sound / "+("no event {"+e+"}"),{fileName:"Sound.hx",lineNumber:91,className:"snow.audio.SoundBinding",methodName:"on"})}},off:function(e,t){switch(e){case"end":r.remove(this.onend_list,t);break;case"load":r.remove(this.onload_list,t);break;default:w.Log.trace("    i / sound / "+("no event {"+e+"}"),{fileName:"Sound.hx",lineNumber:102,className:"snow.audio.SoundBinding",methodName:"off"})}},onload_list:null,onend_list:null,play:function(){},loop:function(){},stop:function(){},pause:function(){},destroy:function(){},internal_update:function(){},internal_play:function(){},internal_loop:function(){},internal_stop:function(){},internal_pause:function(){},toggle:function(){this.playing=!this.playing,this.playing?this.get_looping()?this.loop():this.play():this.pause()},get_info:function(){return this.info},set_info:function(e){return this.info=e},get_pan:function(){return this.pan},get_pitch:function(){return this.pitch},get_volume:function(){return this.volume},get_looping:function(){return this.looping},get_position:function(){return this.position},get_duration:function(){return 0},set_pan:function(e){return this.pan=e},set_pitch:function(e){return this.pitch=e},set_volume:function(e){return this.volume=e},set_position:function(e){return this.position=e},set_looping:function(e){return this.looping=e},do_onload:function(){for(var e=0,t=this.onload_list;e<t.length;){var n=t[e];++e,n(this)}this.onload_list=null,this.onload_list=[]},do_onend:function(){for(var e=0,t=this.onend_list;e<t.length;){var n=t[e];++e,n(this)}},add_onload:function(e){return this.loaded?e(this):this.onload_list.push(e),e},__class__:b.audio.SoundBinding,__properties__:{get_duration:"get_duration",set_position:"set_position",get_position:"get_position",set_looping:"set_looping",get_looping:"get_looping",set_pan:"set_pan",get_pan:"get_pan",set_volume:"set_volume",get_volume:"get_volume",set_pitch:"set_pitch",get_pitch:"get_pitch",set_info:"set_info",get_info:"get_info"}},b.input={},b.input.Input=function(e){this.lib=e,this.platform=new b.platform.web.input.InputSystem(this,this.lib),this.platform.init(),this.key_code_pressed=new w.ds.IntMap,this.key_code_down=new w.ds.IntMap,this.key_code_released=new w.ds.IntMap,this.scan_code_pressed=new w.ds.IntMap,this.scan_code_down=new w.ds.IntMap,this.scan_code_released=new w.ds.IntMap,this.mouse_button_pressed=new w.ds.IntMap,this.mouse_button_down=new w.ds.IntMap,this.mouse_button_released=new w.ds.IntMap,this.gamepad_button_pressed=new w.ds.IntMap,this.gamepad_button_down=new w.ds.IntMap,this.gamepad_button_released=new w.ds.IntMap,this.gamepad_axis_values=new w.ds.IntMap},b.input.Input.__name__=!0,b.input.Input.prototype={lib:null,platform:null,key_code_down:null,key_code_pressed:null,key_code_released:null,scan_code_down:null,scan_code_pressed:null,scan_code_released:null,mouse_button_down:null,mouse_button_pressed:null,mouse_button_released:null,gamepad_button_down:null,gamepad_button_pressed:null,gamepad_button_released:null,gamepad_axis_values:null,keypressed:function(e){return this.key_code_pressed.exists(e)},keyreleased:function(e){return this.key_code_released.exists(e)},keydown:function(e){return this.key_code_down.exists(e)},scanpressed:function(e){return this.scan_code_pressed.exists(e)},scanreleased:function(e){return this.scan_code_released.exists(e)},scandown:function(e){return this.scan_code_down.exists(e)},mousepressed:function(e){return this.mouse_button_pressed.exists(e)},mousereleased:function(e){return this.mouse_button_released.exists(e)},mousedown:function(e){return this.mouse_button_down.exists(e)},gamepadpressed:function(e,t){var n=this.gamepad_button_pressed.get(e);return null!=n?n.exists(t):!1},gamepadreleased:function(e,t){var n=this.gamepad_button_released.get(e);return null!=n?n.exists(t):!1},gamepaddown:function(e,t){var n=this.gamepad_button_down.get(e);return null!=n?n.exists(t):!1},gamepadaxis:function(e,t){var n=this.gamepad_axis_values.get(e);return n.exists(t)?n.get(t):0},dispatch_key_down_event:function(e,t,n,i,s,r){n||(this.key_code_pressed.set(e,!1),this.key_code_down.set(e,!0),this.scan_code_pressed.set(t,!1),this.scan_code_down.set(t,!0)),this.lib.host.onkeydown(e,t,n,i,s,r)},dispatch_key_up_event:function(e,t,n,i,s,r){this.key_code_released.set(e,!1),this.key_code_down.remove(e),this.scan_code_released.set(t,!1),this.scan_code_down.remove(t),this.lib.host.onkeyup(e,t,n,i,s,r)},dispatch_text_event:function(e,t,n,i,s,r){this.lib.host.ontextinput(e,t,n,i,s,r)},dispatch_mouse_move_event:function(e,t,n,i,s,r){this.lib.host.onmousemove(e,t,n,i,s,r)},dispatch_mouse_down_event:function(e,t,n,i,s){this.mouse_button_pressed.set(n,!1),this.mouse_button_down.set(n,!0),this.lib.host.onmousedown(e,t,n,i,s)},dispatch_mouse_up_event:function(e,t,n,i,s){this.mouse_button_released.set(n,!1),this.mouse_button_down.remove(n),this.lib.host.onmouseup(e,t,n,i,s)},dispatch_mouse_wheel_event:function(e,t,n,i){this.lib.host.onmousewheel(e,t,n,i)},dispatch_touch_down_event:function(e,t,n,i){this.lib.host.ontouchdown(e,t,n,i)},dispatch_touch_up_event:function(e,t,n,i){this.lib.host.ontouchup(e,t,n,i)},dispatch_touch_move_event:function(e,t,n,i,s,r){this.lib.host.ontouchmove(e,t,n,i,s,r)},dispatch_gamepad_axis_event:function(e,t,n,i){if(!this.gamepad_axis_values.exists(e)){var s=new w.ds.IntMap;this.gamepad_axis_values.set(e,s)}var r=this.gamepad_axis_values.get(e);r.set(t,n),this.lib.host.ongamepadaxis(e,t,n,i)},dispatch_gamepad_button_down_event:function(e,t,n,i){if(!this.gamepad_button_pressed.exists(e)){var s=new w.ds.IntMap;this.gamepad_button_pressed.set(e,s)}if(!this.gamepad_button_down.exists(e)){var r=new w.ds.IntMap;this.gamepad_button_down.set(e,r)}var o=this.gamepad_button_pressed.get(e);o.set(t,!1);var a=this.gamepad_button_down.get(e);a.set(t,!0),this.lib.host.ongamepaddown(e,t,n,i)},dispatch_gamepad_button_up_event:function(e,t,n,i){if(!this.gamepad_button_released.exists(e)){var s=new w.ds.IntMap;this.gamepad_button_released.set(e,s)}if(!this.gamepad_button_down.exists(e)){var r=new w.ds.IntMap;this.gamepad_button_down.set(e,r)}var o=this.gamepad_button_released.get(e);o.set(t,!1);var a=this.gamepad_button_down.get(e);a.remove(t),this.lib.host.ongamepadup(e,t,n,i)},dispatch_gamepad_device_event:function(e,t,n){this.lib.host.ongamepaddevice(e,t,n)},listen:function(e){this.platform.listen(e)},unlisten:function(e){this.platform.unlisten(e)},on_event:function(e){e.type==b.types.SystemEventType.input&&this.platform.on_event(e.input)},on_gamepad_added:function(e){this.platform.gamepad_add(e.which)},on_gamepad_removed:function(e){this.platform.gamepad_remove(e.which)},update:function(){this.platform.process(),this._update_keystate(),this._update_gamepadstate(),this._update_mousestate()},destroy:function(){this.platform.destroy()},_update_mousestate:function(){for(var e=this.mouse_button_pressed.keys();e.hasNext();){var t=e.next();this.mouse_button_pressed.get(t)?this.mouse_button_pressed.remove(t):this.mouse_button_pressed.set(t,!0)}for(var n=this.mouse_button_released.keys();n.hasNext();){var i=n.next();this.mouse_button_released.get(i)?this.mouse_button_released.remove(i):this.mouse_button_released.set(i,!0)}},_update_gamepadstate:function(){for(var e=this.gamepad_button_pressed.iterator();e.hasNext();)for(var t=e.next(),n=t.keys();n.hasNext();){var i=n.next();t.get(i)?t.remove(i):t.set(i,!0)}for(var s=this.gamepad_button_released.iterator();s.hasNext();)for(var r=s.next(),o=r.keys();o.hasNext();){var a=o.next();r.get(a)?r.remove(a):r.set(a,!0)}},_update_keystate:function(){for(var e=this.key_code_pressed.keys();e.hasNext();){var t=e.next();this.key_code_pressed.get(t)?this.key_code_pressed.remove(t):this.key_code_pressed.set(t,!0)}for(var n=this.key_code_released.keys();n.hasNext();){var i=n.next();this.key_code_released.get(i)?this.key_code_released.remove(i):this.key_code_released.set(i,!0)}for(var s=this.scan_code_pressed.keys();s.hasNext();){var r=s.next();this.scan_code_pressed.get(r)?this.scan_code_pressed.remove(r):this.scan_code_pressed.set(r,!0)}for(var o=this.scan_code_released.keys();o.hasNext();){var a=o.next();this.scan_code_released.get(a)?this.scan_code_released.remove(a):this.scan_code_released.set(a,!0)}},__class__:b.input.Input},b.input.InputSystemBinding=function(){},b.input.InputSystemBinding.__name__=!0,b.input.InputSystemBinding.__interfaces__=[b.utils.AbstractClass],b.input.InputSystemBinding.prototype={manager:null,lib:null,init:function(){throw"abstract method, must override"},process:function(){throw"abstract method, must override"},destroy:function(){throw"abstract method, must override"},on_event:function(){throw"abstract method, must override"},gamepad_add:function(){throw"abstract method, must override"},gamepad_remove:function(){throw"abstract method, must override"},listen:function(){throw"abstract method, must override"},unlisten:function(){throw"abstract method, must override"},__class__:b.input.InputSystemBinding},b.input.Scancodes=function(){},b.input.Scancodes.__name__=!0,b.input.Scancodes.$name=function(e){var t=null;return e>=0&&e<b.input.Scancodes.scancode_names.length&&(t=b.input.Scancodes.scancode_names[e]),null!=t?t:""},b.input.Keycodes=function(){},b.input.Keycodes.__name__=!0,b.input.Keycodes.from_scan=function(e){return e|b.input.Scancodes.MASK},b.input.Keycodes.$name=function(e){if(0!=(e&b.input.Scancodes.MASK))return b.input.Scancodes.$name(e&~b.input.Scancodes.MASK);switch(e){case b.input.Keycodes.enter:return b.input.Scancodes.$name(b.input.Scancodes.enter);case b.input.Keycodes.escape:return b.input.Scancodes.$name(b.input.Scancodes.escape);case b.input.Keycodes.backspace:return b.input.Scancodes.$name(b.input.Scancodes.backspace);case b.input.Keycodes.tab:return b.input.Scancodes.$name(b.input.Scancodes.tab);case b.input.Keycodes.space:return b.input.Scancodes.$name(b.input.Scancodes.space);case b.input.Keycodes["delete"]:return b.input.Scancodes.$name(b.input.Scancodes["delete"]);default:var t=new w.Utf8;return t.__b+=String.fromCharCode(e),t.__b}},b.io={},b.io.IO=function(e){this.lib=e,this.platform=new b.platform.web.io.IOSystem(this,this.lib),this.platform.init()},b.io.IO.__name__=!0,b.io.IO.prototype={lib:null,platform:null,url_open:function(e){this.platform.url_open(e)},on_event:function(e){this.platform.on_event(e)},update:function(){this.platform.process()},destroy:function(){this.platform.destroy()},__class__:b.io.IO},b.io.IOSystemBinding=function(){},b.io.IOSystemBinding.__name__=!0,b.io.IOSystemBinding.__interfaces__=[b.utils.AbstractClass],b.io.IOSystemBinding.prototype={manager:null,lib:null,init:function(){throw"abstract method, must override"},process:function(){throw"abstract method, must override"},destroy:function(){throw"abstract method, must override"},on_event:function(){throw"abstract method, must override"},url_open:function(){throw"abstract method, must override"},__class__:b.io.IOSystemBinding},b.platform={},b.platform.web={},b.platform.web.Core=function(e){this._time_now=0,this._lf_timestamp=.016,this.start_timestamp=0,this.app=e},b.platform.web.Core.__name__=!0,b.platform.web.Core.__super__=b.CoreBinding,b.platform.web.Core.prototype=e(b.CoreBinding.prototype,{start_timestamp:null,init:function(){this.app.dispatch_system_event({type:b.types.SystemEventType.init}),this.app.dispatch_system_event({type:b.types.SystemEventType.ready}),this.app.snow_config.has_loop&&this.request_update(),this.start_timestamp=this.timestamp()},shutdown:function(){},timestamp:function(){var e;return e=null!=window.performance?window.performance.now()/1e3:w.Timer.stamp(),e-this.start_timestamp},app_path:function(){return w.io.Path.directory(window.location.href)+"/"},pref_path:function(){return"./"},_lf_timestamp:null,_time_now:null,request_update:function(){var e=this;null!=(S=window,n(S,S.requestAnimationFrame))?window.requestAnimationFrame(n(this,this.snow_core_loop)):(w.Log.trace("     i / core / warning : requestAnimationFrame not found, falling back to render_rate! render_rate:"+this.app.host.render_rate,{fileName:"Core.hx",lineNumber:88,className:"snow.platform.web.Core",methodName:"request_update"}),window.setTimeout(function(){var t=e.timestamp();e._time_now+=t-e._lf_timestamp,e.snow_core_loop(1e3*e._time_now),e._lf_timestamp=t},1e3*this.app.host.render_rate|0))},snow_core_loop:function(e){return null==e&&(e=.016),this.update(),this.app.dispatch_system_event({type:b.types.SystemEventType.update}),this.request_update(),!0},update:function(){},__class__:b.platform.web.Core}),b.platform.web.assets={},b.platform.web.assets.AssetSystem=function(e){this.manager=e},b.platform.web.assets.AssetSystem.__name__=!0,b.platform.web.assets.AssetSystem.__super__=b.assets.AssetSystemBinding,b.platform.web.assets.AssetSystem.prototype=e(b.assets.AssetSystemBinding.prototype,{exists:function(e,t){null==t&&(t=!0);var n=this.manager.listed(e);return n},nearest_power_of_two:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e},image_load_info:function(e,t,n){null==t&&(t=4);var i,s=this,r=window.document;i=r.createElement("img");var o=null;return i.onload=function(){var t,r=s.nearest_power_of_two(i.width),a=s.nearest_power_of_two(i.height),l=window.document;t=l.createElement("canvas"),t.width=r,t.height=a;var u=t.getContext("2d");u.clearRect(0,0,t.width,t.height),u.drawImage(i,0,0,i.width,i.height);var _=null;try{_=u.getImageData(0,0,t.width,t.height)}catch(h){var c="- textures served from file:/// throw security errors\n";throw c+="- textures served over http:// work for cross origin byte requests",w.Log.trace("i / assets / "+c,{fileName:"AssetSystem.hx",lineNumber:86,className:"snow.platform.web.assets.AssetSystem",methodName:"image_load_info"}),h}o={id:e,bpp:4,width:i.width,height:i.height,width_actual:r,height_actual:a,bpp_source:4,data:new Uint8Array(_.data)},t=null,u=null,_=null,null!=n&&n(o)},i.src=e,o},image_info_from_bytes:function(e,t,n){if(null==n&&(n=4),null==t)return w.Log.trace("i / assets / invalid bytes passed to image_info_from_bytes "+e,{fileName:"AssetSystem.hx",lineNumber:122,className:"snow.platform.web.assets.AssetSystem",methodName:"image_info_from_bytes"}),null;var i=b.platform.web.utils.ByteArray.toBytes(t),s=new w.io.BytesInput(i,0,i.length),r=new b.utils.format.png.Reader(s).read(),o=b.utils.format.png.Tools.extract32(r),a=b.utils.format.png.Tools.getHeader(r);return{id:e,bpp:n,width:a.width,height:a.height,width_actual:a.width,height_actual:a.height,bpp_source:a.colbits,data:new Uint8Array(o.b)}},audio_load_info:function(e,t,n,i){null==n&&(n=!0);var s=this,r={format:t,id:e,handle:null,data:null};return r.handle=new window.Howl({urls:[e],onend:function(){s.manager.lib.audio.platform._on_end(r.handle)},onload:function(){null!=i&&i(r)}}),r},__class__:b.platform.web.assets.AssetSystem}),b.platform.web.audio={},b.platform.web.audio.AudioSystem=function(e,t){this.manager=e,this.lib=t},b.platform.web.audio.AudioSystem.__name__=!0,b.platform.web.audio.AudioSystem.__super__=b.audio.AudioSystemBinding,b.platform.web.audio.AudioSystem.prototype=e(b.audio.AudioSystemBinding.prototype,{init:function(){},process:function(){},destroy:function(){},suspend:function(){},resume:function(){},__class__:b.platform.web.audio.AudioSystem}),b.platform.web.audio.Sound=function(e,t){b.audio.SoundBinding.call(this,e,t)},b.platform.web.audio.Sound.__name__=!0,b.platform.web.audio.Sound.__super__=b.audio.SoundBinding,b.platform.web.audio.Sound.prototype=e(b.audio.SoundBinding.prototype,{__class__:b.platform.web.audio.Sound}),b.platform.web.audio.howlerjs={},b.platform.web.audio.howlerjs.Sound=function(e,t){this.volume_dirty=!1,this.pan_dirty=!1,b.platform.web.audio.Sound.call(this,e,t)},b.platform.web.audio.howlerjs.Sound.__name__=!0,b.platform.web.audio.howlerjs.Sound.__super__=b.platform.web.audio.Sound,b.platform.web.audio.howlerjs.Sound.prototype=e(b.platform.web.audio.Sound.prototype,{set_info:function(e){return null!=this.get_info()&&this.destroy(),this.info=null,null==e?(w.Log.trace("    i / sound / not creating sound, info was null",{fileName:"Sound.hx",lineNumber:33,className:"snow.platform.web.audio.howlerjs.Sound",methodName:"set_info"}),this.get_info()):(this.info=e,this.loaded=!0,this.emit("load"),this.get_info())},pan_dirty:null,volume_dirty:null,set_pan:function(e){return this.pan_dirty=!0,this.pan=e},set_volume:function(e){return this.volume_dirty=!0,this.volume=e},set_pitch:function(e){return this.get_info().handle._rate=e,this.pitch=e},set_position:function(e){return null!=this.get_info()&&null!=this.get_info().handle&&this.get_info().handle.pos(e),this.position=e},get_position:function(){return null!=this.get_info()&&null!=this.get_info().handle?this.get_info().handle.pos():this.position},get_duration:function(){return null!=this.get_info()&&null!=this.get_info().handle?this.get_info().handle._duration:0},play:function(){null!=this.get_info()&&null!=this.get_info().handle&&(this.playing=!0,this.get_info().handle.loop(!1),this.get_info().handle.play(),this.pan_dirty&&this.get_info().handle.pos3d(this.get_pan()),this.volume_dirty&&this.get_info().handle.volume(this.get_volume()))},loop:function(){null!=this.get_info()&&null!=this.get_info().handle&&(this.playing=!0,this.get_info().handle.loop(!0),this.get_info().handle.play(),this.pan_dirty&&this.get_info().handle.pos3d(this.get_pan()),this.volume_dirty&&this.get_info().handle.volume(this.get_volume()))},stop:function(){this.playing=!1,null!=this.get_info()&&null!=this.get_info().handle&&this.get_info().handle.stop()},pause:function(){null!=this.get_info()&&null!=this.get_info().handle&&this.get_info().handle.pause()},destroy:function(){null!=this.get_info()&&null!=this.get_info().handle&&this.get_info().handle.unload(),this.manager.kill(this)},__class__:b.platform.web.audio.howlerjs.Sound}),b.platform.web.audio.SoundStream=function(e,t){b.platform.web.audio.howlerjs.Sound.call(this,e,t)},b.platform.web.audio.SoundStream.__name__=!0,b.platform.web.audio.SoundStream.__super__=b.platform.web.audio.howlerjs.Sound,b.platform.web.audio.SoundStream.prototype=e(b.platform.web.audio.howlerjs.Sound.prototype,{__class__:b.platform.web.audio.SoundStream}),b.platform.web.audio.howlerjs.AudioSystem=function(e,t){b.platform.web.audio.AudioSystem.call(this,e,t)},b.platform.web.audio.howlerjs.AudioSystem.__name__=!0,b.platform.web.audio.howlerjs.AudioSystem.__super__=b.platform.web.audio.AudioSystem,b.platform.web.audio.howlerjs.AudioSystem.prototype=e(b.platform.web.audio.AudioSystem.prototype,{init:function(){},process:function(){},destroy:function(){},suspend:function(){},resume:function(){},_on_end:function(e){var t=this.manager.handles.h[e.__id__];null!=t&&t.emit("end")},__class__:b.platform.web.audio.howlerjs.AudioSystem}),b.platform.web.audio.howlerjs.SoundStream=function(e,t){b.platform.web.audio.SoundStream.call(this,e,t)},b.platform.web.audio.howlerjs.SoundStream.__name__=!0,b.platform.web.audio.howlerjs.SoundStream.__super__=b.platform.web.audio.SoundStream,b.platform.web.audio.howlerjs.SoundStream.prototype=e(b.platform.web.audio.SoundStream.prototype,{__class__:b.platform.web.audio.howlerjs.SoundStream}),b.platform.web.input={},b.platform.web.input.InputSystem=function(e,t){this.gamepads_supported=!1,this.manager=e,this.lib=t},b.platform.web.input.InputSystem.__name__=!0,b.platform.web.input.InputSystem.__super__=b.input.InputSystemBinding,b.platform.web.input.InputSystem.prototype=e(b.input.InputSystemBinding.prototype,{active_gamepads:null,gamepads_supported:null,init:function(){window.document.addEventListener("keydown",n(this,this.on_keydown)),window.document.addEventListener("keyup",n(this,this.on_keyup)),this.active_gamepads=new w.ds.IntMap,this.gamepads_supported=null!=this.get_gamepad_list()},process:function(){this.gamepads_supported&&this.poll_gamepads()},destroy:function(){},listen:function(e){e.handle.addEventListener("contextmenu",n(this,this.on_contextmenu)),e.handle.addEventListener("mousedown",n(this,this.on_mousedown)),e.handle.addEventListener("mouseup",n(this,this.on_mouseup)),e.handle.addEventListener("mousemove",n(this,this.on_mousemove)),e.handle.addEventListener("mousewheel",n(this,this.on_mousewheel)),e.handle.addEventListener("wheel",n(this,this.on_mousewheel))},unlisten:function(){},on_event:function(){},on_mousedown:function(e){var t=this.lib.windowing.window_from_handle(e.target);this.manager.dispatch_mouse_down_event(e.pageX-t.x,e.pageY-t.y,e.button+1,e.timeStamp,t.id)},on_mouseup:function(e){var t=this.lib.windowing.window_from_handle(e.target);this.manager.dispatch_mouse_up_event(e.pageX-t.x,e.pageY-t.y,e.button+1,e.timeStamp,t.id)},on_mousemove:function(e){var t=this.lib.windowing.window_from_handle(e.target),n=e.movementX,i=e.movementY;null!=e.webkitMovementX?(n=e.webkitMovementX,i=e.webkitMovementY):null!=e.mozMovementX&&(n=e.mozMovementX,i=e.mozMovementY),this.manager.dispatch_mouse_move_event(e.pageX-t.x,e.pageY-t.y,n,i,e.timeStamp,t.id)},on_mousewheel:function(e){var t=this.lib.windowing.window_from_handle(e.target),n=0,i=0;null!=e.deltaY?i=e.deltaY:null!=e.wheelDeltaY&&(i=-e.wheelDeltaY/3|0),null!=e.deltaX?n=e.deltaX:null!=e.wheelDeltaX&&(n=-e.wheelDeltaX/3|0),this.manager.dispatch_mouse_wheel_event(Math.round(n/16),Math.round(i/16),e.timeStamp,t.id)},on_contextmenu:function(e){this.lib.config.web.no_context_menu&&e.preventDefault()},on_keydown:function(e){var t=this.convert_keycode(e.keyCode),n=this.convert_scancode(t),i=this.mod_state_from_event(e);this.manager.dispatch_key_down_event(t,n,e.repeat,i,e.timeStamp,1)},on_keyup:function(e){var t=this.convert_keycode(e.keyCode),n=this.convert_scancode(t),i=this.mod_state_from_event(e);this.manager.dispatch_key_up_event(t,n,e.repeat,i,e.timeStamp,1)},mod_state_from_event:function(e){var t=!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey);return{none:t,lshift:e.shiftKey,rshift:e.shiftKey,lctrl:e.ctrlKey,rctrl:e.ctrlKey,lalt:e.altKey,ralt:e.altKey,lmeta:e.metaKey,rmeta:e.metaKey,num:!1,caps:!1,mode:!1,ctrl:e.ctrlKey,shift:e.shiftKey,alt:e.altKey,meta:e.metaKey}},gamepad_add:function(){},gamepad_remove:function(){},poll_gamepads:function(){if(this.gamepads_supported){var e=this.get_gamepad_list();if(null!=e)for(var t=0,n=e.length;n>t;){var i=t++;if(null!=e[i])this.handle_gamepad(e[i]);else{var s=this.active_gamepads.get(i);null!=s&&this.manager.dispatch_gamepad_device_event(s.index,b.types.GamepadDeviceEventType.device_removed,s.timestamp),this.active_gamepads.remove(i)}}}},handle_gamepad:function(e){if(null!=e)if(function(t){var n,i=e.index;return n=t.active_gamepads.exists(i)}(this)){var t,n=e.index;if(t=this.active_gamepads.get(n),t.timestamp!=e.timestamp){t.id!=e.id&&(t.id=e.id),t.timestamp=e.timestamp;for(var i=[],s=[],r=t.axes,o=t.buttons,a=e.axes,l=e.buttons,u=0,_=0;_<a.length;){var h=a[_];++_,h!=r[u]&&(i.push(u),t.axes[u]=h),u++}for(var c=0,p=0;p<l.length;){var d=l[p];++p,d.value!=o[c].value&&(s.push(c),t.buttons[c].pressed=d.pressed,t.buttons[c].value=d.value),c++}for(var m=0;m<i.length;){var f=i[m];++m,this.manager.dispatch_gamepad_axis_event(t.index,f,a[f],t.timestamp)}for(var g=0;g<s.length;){var y=s[g];++g,1==l[y].pressed?this.manager.dispatch_gamepad_button_down_event(t.index,y,l[y].value,t.timestamp):this.manager.dispatch_gamepad_button_up_event(t.index,y,l[y].value,t.timestamp)}}}else{for(var w={id:e.id,index:e.index,axes:e.axes,buttons:[],timestamp:e.timestamp},v=e.buttons,x=0;x<v.length;){{v[x]}++x,w.buttons.push({pressed:!1,value:0})}var S=e.index;this.active_gamepads.set(S,w),this.manager.dispatch_gamepad_device_event(e.index,b.types.GamepadDeviceEventType.device_added,e.timestamp)}},fail_gamepads:function(){this.gamepads_supported=!1,w.Log.trace("i / input / Gamepads are not supported in this browser :(",{fileName:"InputSystem.hx",lineNumber:417,className:"snow.platform.web.input.InputSystem",methodName:"fail_gamepads"})},get_gamepad_list:function(){var e=window.Modernizr;if(null!=e)if(1==e.gamepads){if(null!=(S=window.navigator,n(S,S.getGamepads)))return window.navigator.getGamepads();if(null!=window.navigator.webkitGetGamepads)return window.navigator.webkitGetGamepads();this.fail_gamepads()}else this.fail_gamepads();return null},convert_scancode:function(e){var t=b.input.Scancodes.unknown;return t=e>=1024?e-1024:this.browser_keycode_to_sdl_scan(e)},convert_keycode:function(e){return e>=65&&90>=e?e+=32:e=this.browser_keycode_to_sdl_key(e),e},browser_keycode_to_sdl_scan:function(e){switch(e){case 8:return 42;case 9:return 43;case 13:return 40;case 27:return 41;case 32:return 44;case 35:return 204;case 39:return 53;case 44:return 54;case 46:return 55;case 47:return 56;case 48:return 39;case 49:return 30;case 50:return 31;case 51:return 32;case 52:return 33;case 53:return 34;case 54:return 35;case 55:return 36;case 56:return 37;case 57:return 38;case 58:return 203;case 59:return 51;case 61:return 46;case 91:return 47;case 92:return 49;case 93:return 48;case 96:return 53;case 97:return 4;case 98:return 5;case 99:return 6;case 100:return 7;case 101:return 8;case 102:return 9;case 103:return 10;case 104:return 11;case 105:return 12;
case 106:return 13;case 107:return 14;case 108:return 15;case 109:return 16;case 110:return 17;case 111:return 18;case 112:return 19;case 113:return 20;case 114:return 21;case 115:return 22;case 116:return 23;case 117:return 24;case 118:return 25;case 119:return 26;case 120:return 27;case 121:return 28;case 122:return 29;case 127:return 76;case 305:return 224;case 308:return 226;case 316:return 70}return e},browser_keycode_to_sdl_key:function(e){switch(e){case 16:return 1249;case 17:return 1248;case 18:return 1250;case 20:return 1081;case 33:return 1099;case 34:return 1102;case 35:return 1101;case 36:return 1098;case 37:return 1104;case 38:return 1106;case 39:return 1103;case 40:return 1105;case 44:return 316;case 45:return 1097;case 46:return 127;case 91:return 1251;case 93:return 1125;case 96:return 1122;case 97:return 1113;case 98:return 1114;case 99:return 1115;case 100:return 1116;case 101:return 1117;case 102:return 1118;case 103:return 1119;case 104:return 1120;case 105:return 1121;case 106:return 1109;case 107:return 1111;case 109:return 1110;case 110:return 1123;case 111:return 1108;case 112:return 1082;case 113:return 1083;case 114:return 1084;case 115:return 1085;case 116:return 1086;case 117:return 1087;case 118:return 1088;case 119:return 1089;case 120:return 1090;case 121:return 1091;case 122:return 1092;case 123:return 1093;case 124:return 1128;case 125:return 1129;case 126:return 1130;case 127:return 1131;case 128:return 1132;case 129:return 1133;case 130:return 1134;case 131:return 1135;case 132:return 1136;case 133:return 1137;case 134:return 1138;case 135:return 1139;case 144:return 1107;case 160:return 94;case 161:return 33;case 162:return 34;case 163:return 35;case 164:return 36;case 165:return 37;case 166:return 38;case 167:return 95;case 168:return 40;case 169:return 41;case 170:return 42;case 171:return 43;case 172:return 124;case 173:return 45;case 174:return 123;case 175:return 125;case 176:return 126;case 181:return 127;case 182:return 129;case 183:return 128;case 188:return 44;case 190:return 46;case 191:return 47;case 192:return 96;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39}return e},__class__:b.platform.web.input.InputSystem}),b.platform.web.io={},b.platform.web.io.IOSystem=function(e,t){this.manager=e,this.lib=t},b.platform.web.io.IOSystem.__name__=!0,b.platform.web.io.IOSystem.__super__=b.io.IOSystemBinding,b.platform.web.io.IOSystem.prototype=e(b.io.IOSystemBinding.prototype,{url_open:function(e){null!=e&&e.length>0&&window.open(e,"_blank")},init:function(){},process:function(){},destroy:function(){},on_event:function(){},__class__:b.platform.web.io.IOSystem}),b.platform.web.render={},b.platform.web.render.opengl={},b.platform.web.render.opengl.GL=function(){},b.platform.web.render.opengl.GL.__name__=!0,b.platform.web.render.opengl.GL.__properties__={get_version:"get_version"},b.platform.web.render.opengl.GL.versionString=function(){var e=b.platform.web.render.opengl.GL.current_context.getParameter(7938),t=b.platform.web.render.opengl.GL.current_context.getParameter(35724),n=b.platform.web.render.opengl.GL.current_context.getParameter(7937),i=b.platform.web.render.opengl.GL.current_context.getParameter(7936);return"/ "+e+" / "+t+" / "+n+" / "+i+" /"},b.platform.web.render.opengl.GL.activeTexture=function(e){b.platform.web.render.opengl.GL.current_context.activeTexture(e)},b.platform.web.render.opengl.GL.attachShader=function(e,t){b.platform.web.render.opengl.GL.current_context.attachShader(e,t)},b.platform.web.render.opengl.GL.bindAttribLocation=function(e,t,n){b.platform.web.render.opengl.GL.current_context.bindAttribLocation(e,t,n)},b.platform.web.render.opengl.GL.bindBuffer=function(e,t){b.platform.web.render.opengl.GL.current_context.bindBuffer(e,t)},b.platform.web.render.opengl.GL.bindFramebuffer=function(e,t){b.platform.web.render.opengl.GL.current_context.bindFramebuffer(e,t)},b.platform.web.render.opengl.GL.bindRenderbuffer=function(e,t){b.platform.web.render.opengl.GL.current_context.bindRenderbuffer(e,t)},b.platform.web.render.opengl.GL.bindTexture=function(e,t){b.platform.web.render.opengl.GL.current_context.bindTexture(e,t)},b.platform.web.render.opengl.GL.blendColor=function(e,t,n,i){b.platform.web.render.opengl.GL.current_context.blendColor(e,t,n,i)},b.platform.web.render.opengl.GL.blendEquation=function(e){b.platform.web.render.opengl.GL.current_context.blendEquation(e)},b.platform.web.render.opengl.GL.blendEquationSeparate=function(e,t){b.platform.web.render.opengl.GL.current_context.blendEquationSeparate(e,t)},b.platform.web.render.opengl.GL.blendFunc=function(e,t){b.platform.web.render.opengl.GL.current_context.blendFunc(e,t)},b.platform.web.render.opengl.GL.blendFuncSeparate=function(e,t,n,i){b.platform.web.render.opengl.GL.current_context.blendFuncSeparate(e,t,n,i)},b.platform.web.render.opengl.GL.bufferData=function(e,t,n){b.platform.web.render.opengl.GL.current_context.bufferData(e,t,n)},b.platform.web.render.opengl.GL.bufferSubData=function(e,t,n){b.platform.web.render.opengl.GL.current_context.bufferSubData(e,t,n)},b.platform.web.render.opengl.GL.checkFramebufferStatus=function(e){return b.platform.web.render.opengl.GL.current_context.checkFramebufferStatus(e)},b.platform.web.render.opengl.GL.clear=function(e){b.platform.web.render.opengl.GL.current_context.clear(e)},b.platform.web.render.opengl.GL.clearColor=function(e,t,n,i){b.platform.web.render.opengl.GL.current_context.clearColor(e,t,n,i)},b.platform.web.render.opengl.GL.clearDepth=function(e){b.platform.web.render.opengl.GL.current_context.clearDepth(e)},b.platform.web.render.opengl.GL.clearStencil=function(e){b.platform.web.render.opengl.GL.current_context.clearStencil(e)},b.platform.web.render.opengl.GL.colorMask=function(e,t,n,i){b.platform.web.render.opengl.GL.current_context.colorMask(e,t,n,i)},b.platform.web.render.opengl.GL.compileShader=function(e){b.platform.web.render.opengl.GL.current_context.compileShader(e)},b.platform.web.render.opengl.GL.compressedTexImage2D=function(e,t,n,i,s,r,o){b.platform.web.render.opengl.GL.current_context.compressedTexImage2D(e,t,n,i,s,r,o)},b.platform.web.render.opengl.GL.compressedTexSubImage2D=function(e,t,n,i,s,r,o,a){b.platform.web.render.opengl.GL.current_context.compressedTexSubImage2D(e,t,n,i,s,r,o,a)},b.platform.web.render.opengl.GL.copyTexImage2D=function(e,t,n,i,s,r,o,a){b.platform.web.render.opengl.GL.current_context.copyTexImage2D(e,t,n,i,s,r,o,a)},b.platform.web.render.opengl.GL.copyTexSubImage2D=function(e,t,n,i,s,r,o,a){b.platform.web.render.opengl.GL.current_context.copyTexSubImage2D(e,t,n,i,s,r,o,a)},b.platform.web.render.opengl.GL.createBuffer=function(){return b.platform.web.render.opengl.GL.current_context.createBuffer()},b.platform.web.render.opengl.GL.createFramebuffer=function(){return b.platform.web.render.opengl.GL.current_context.createFramebuffer()},b.platform.web.render.opengl.GL.createProgram=function(){return b.platform.web.render.opengl.GL.current_context.createProgram()},b.platform.web.render.opengl.GL.createRenderbuffer=function(){return b.platform.web.render.opengl.GL.current_context.createRenderbuffer()},b.platform.web.render.opengl.GL.createShader=function(e){return b.platform.web.render.opengl.GL.current_context.createShader(e)},b.platform.web.render.opengl.GL.createTexture=function(){return b.platform.web.render.opengl.GL.current_context.createTexture()},b.platform.web.render.opengl.GL.cullFace=function(e){b.platform.web.render.opengl.GL.current_context.cullFace(e)},b.platform.web.render.opengl.GL.deleteBuffer=function(e){b.platform.web.render.opengl.GL.current_context.deleteBuffer(e)},b.platform.web.render.opengl.GL.deleteFramebuffer=function(e){b.platform.web.render.opengl.GL.current_context.deleteFramebuffer(e)},b.platform.web.render.opengl.GL.deleteProgram=function(e){b.platform.web.render.opengl.GL.current_context.deleteProgram(e)},b.platform.web.render.opengl.GL.deleteRenderbuffer=function(e){b.platform.web.render.opengl.GL.current_context.deleteRenderbuffer(e)},b.platform.web.render.opengl.GL.deleteShader=function(e){b.platform.web.render.opengl.GL.current_context.deleteShader(e)},b.platform.web.render.opengl.GL.deleteTexture=function(e){b.platform.web.render.opengl.GL.current_context.deleteTexture(e)},b.platform.web.render.opengl.GL.depthFunc=function(e){b.platform.web.render.opengl.GL.current_context.depthFunc(e)},b.platform.web.render.opengl.GL.depthMask=function(e){b.platform.web.render.opengl.GL.current_context.depthMask(e)},b.platform.web.render.opengl.GL.depthRange=function(e,t){b.platform.web.render.opengl.GL.current_context.depthRange(e,t)},b.platform.web.render.opengl.GL.detachShader=function(e,t){b.platform.web.render.opengl.GL.current_context.detachShader(e,t)},b.platform.web.render.opengl.GL.disable=function(e){b.platform.web.render.opengl.GL.current_context.disable(e)},b.platform.web.render.opengl.GL.disableVertexAttribArray=function(e){b.platform.web.render.opengl.GL.current_context.disableVertexAttribArray(e)},b.platform.web.render.opengl.GL.drawArrays=function(e,t,n){b.platform.web.render.opengl.GL.current_context.drawArrays(e,t,n)},b.platform.web.render.opengl.GL.drawElements=function(e,t,n,i){b.platform.web.render.opengl.GL.current_context.drawElements(e,t,n,i)},b.platform.web.render.opengl.GL.enable=function(e){b.platform.web.render.opengl.GL.current_context.enable(e)},b.platform.web.render.opengl.GL.enableVertexAttribArray=function(e){b.platform.web.render.opengl.GL.current_context.enableVertexAttribArray(e)},b.platform.web.render.opengl.GL.finish=function(){b.platform.web.render.opengl.GL.current_context.finish()},b.platform.web.render.opengl.GL.flush=function(){b.platform.web.render.opengl.GL.current_context.flush()},b.platform.web.render.opengl.GL.framebufferRenderbuffer=function(e,t,n,i){b.platform.web.render.opengl.GL.current_context.framebufferRenderbuffer(e,t,n,i)},b.platform.web.render.opengl.GL.framebufferTexture2D=function(e,t,n,i,s){b.platform.web.render.opengl.GL.current_context.framebufferTexture2D(e,t,n,i,s)},b.platform.web.render.opengl.GL.frontFace=function(e){b.platform.web.render.opengl.GL.current_context.frontFace(e)},b.platform.web.render.opengl.GL.generateMipmap=function(e){b.platform.web.render.opengl.GL.current_context.generateMipmap(e)},b.platform.web.render.opengl.GL.getActiveAttrib=function(e,t){return b.platform.web.render.opengl.GL.current_context.getActiveAttrib(e,t)},b.platform.web.render.opengl.GL.getActiveUniform=function(e,t){return b.platform.web.render.opengl.GL.current_context.getActiveUniform(e,t)},b.platform.web.render.opengl.GL.getAttachedShaders=function(e){return b.platform.web.render.opengl.GL.current_context.getAttachedShaders(e)},b.platform.web.render.opengl.GL.getAttribLocation=function(e,t){return b.platform.web.render.opengl.GL.current_context.getAttribLocation(e,t)},b.platform.web.render.opengl.GL.getBufferParameter=function(e,t){return b.platform.web.render.opengl.GL.current_context.getBufferParameter(e,t)},b.platform.web.render.opengl.GL.getContextAttributes=function(){return b.platform.web.render.opengl.GL.current_context.getContextAttributes()},b.platform.web.render.opengl.GL.getError=function(){return b.platform.web.render.opengl.GL.current_context.getError()},b.platform.web.render.opengl.GL.getExtension=function(e){return b.platform.web.render.opengl.GL.current_context.getExtension(e)},b.platform.web.render.opengl.GL.getFramebufferAttachmentParameter=function(e,t,n){return b.platform.web.render.opengl.GL.current_context.getFramebufferAttachmentParameter(e,t,n)},b.platform.web.render.opengl.GL.getParameter=function(e){return b.platform.web.render.opengl.GL.current_context.getParameter(e)},b.platform.web.render.opengl.GL.getProgramInfoLog=function(e){return b.platform.web.render.opengl.GL.current_context.getProgramInfoLog(e)},b.platform.web.render.opengl.GL.getProgramParameter=function(e,t){return b.platform.web.render.opengl.GL.current_context.getProgramParameter(e,t)},b.platform.web.render.opengl.GL.getRenderbufferParameter=function(e,t){return b.platform.web.render.opengl.GL.current_context.getRenderbufferParameter(e,t)},b.platform.web.render.opengl.GL.getShaderInfoLog=function(e){return b.platform.web.render.opengl.GL.current_context.getShaderInfoLog(e)},b.platform.web.render.opengl.GL.getShaderParameter=function(e,t){return b.platform.web.render.opengl.GL.current_context.getShaderParameter(e,t)},b.platform.web.render.opengl.GL.getShaderPrecisionFormat=function(e,t){return b.platform.web.render.opengl.GL.current_context.getShaderPrecisionFormat(e,t)},b.platform.web.render.opengl.GL.getShaderSource=function(e){return b.platform.web.render.opengl.GL.current_context.getShaderSource(e)},b.platform.web.render.opengl.GL.getSupportedExtensions=function(){return b.platform.web.render.opengl.GL.current_context.getSupportedExtensions()},b.platform.web.render.opengl.GL.getTexParameter=function(e,t){return b.platform.web.render.opengl.GL.current_context.getTexParameter(e,t)},b.platform.web.render.opengl.GL.getUniform=function(e,t){return b.platform.web.render.opengl.GL.current_context.getUniform(e,t)},b.platform.web.render.opengl.GL.getUniformLocation=function(e,t){return b.platform.web.render.opengl.GL.current_context.getUniformLocation(e,t)},b.platform.web.render.opengl.GL.getVertexAttrib=function(e,t){return b.platform.web.render.opengl.GL.current_context.getVertexAttrib(e,t)},b.platform.web.render.opengl.GL.getVertexAttribOffset=function(e,t){return b.platform.web.render.opengl.GL.current_context.getVertexAttribOffset(e,t)},b.platform.web.render.opengl.GL.hint=function(e,t){b.platform.web.render.opengl.GL.current_context.hint(e,t)},b.platform.web.render.opengl.GL.isBuffer=function(e){return b.platform.web.render.opengl.GL.current_context.isBuffer(e)},b.platform.web.render.opengl.GL.isEnabled=function(e){return b.platform.web.render.opengl.GL.current_context.isEnabled(e)},b.platform.web.render.opengl.GL.isFramebuffer=function(e){return b.platform.web.render.opengl.GL.current_context.isFramebuffer(e)},b.platform.web.render.opengl.GL.isProgram=function(e){return b.platform.web.render.opengl.GL.current_context.isProgram(e)},b.platform.web.render.opengl.GL.isRenderbuffer=function(e){return b.platform.web.render.opengl.GL.current_context.isRenderbuffer(e)},b.platform.web.render.opengl.GL.isShader=function(e){return b.platform.web.render.opengl.GL.current_context.isShader(e)},b.platform.web.render.opengl.GL.isTexture=function(e){return b.platform.web.render.opengl.GL.current_context.isTexture(e)},b.platform.web.render.opengl.GL.lineWidth=function(e){b.platform.web.render.opengl.GL.current_context.lineWidth(e)},b.platform.web.render.opengl.GL.linkProgram=function(e){b.platform.web.render.opengl.GL.current_context.linkProgram(e)},b.platform.web.render.opengl.GL.pixelStorei=function(e,t){b.platform.web.render.opengl.GL.current_context.pixelStorei(e,t)},b.platform.web.render.opengl.GL.polygonOffset=function(e,t){b.platform.web.render.opengl.GL.current_context.polygonOffset(e,t)},b.platform.web.render.opengl.GL.readPixels=function(e,t,n,i,s,r,o){b.platform.web.render.opengl.GL.current_context.readPixels(e,t,n,i,s,r,o)},b.platform.web.render.opengl.GL.renderbufferStorage=function(e,t,n,i){b.platform.web.render.opengl.GL.current_context.renderbufferStorage(e,t,n,i)},b.platform.web.render.opengl.GL.sampleCoverage=function(e,t){b.platform.web.render.opengl.GL.current_context.sampleCoverage(e,t)},b.platform.web.render.opengl.GL.scissor=function(e,t,n,i){b.platform.web.render.opengl.GL.current_context.scissor(e,t,n,i)},b.platform.web.render.opengl.GL.shaderSource=function(e,t){b.platform.web.render.opengl.GL.current_context.shaderSource(e,t)},b.platform.web.render.opengl.GL.stencilFunc=function(e,t,n){b.platform.web.render.opengl.GL.current_context.stencilFunc(e,t,n)},b.platform.web.render.opengl.GL.stencilFuncSeparate=function(e,t,n,i){b.platform.web.render.opengl.GL.current_context.stencilFuncSeparate(e,t,n,i)},b.platform.web.render.opengl.GL.stencilMask=function(e){b.platform.web.render.opengl.GL.current_context.stencilMask(e)},b.platform.web.render.opengl.GL.stencilMaskSeparate=function(e,t){b.platform.web.render.opengl.GL.current_context.stencilMaskSeparate(e,t)},b.platform.web.render.opengl.GL.stencilOp=function(e,t,n){b.platform.web.render.opengl.GL.current_context.stencilOp(e,t,n)},b.platform.web.render.opengl.GL.stencilOpSeparate=function(e,t,n,i){b.platform.web.render.opengl.GL.current_context.stencilOpSeparate(e,t,n,i)},b.platform.web.render.opengl.GL.texImage2D=function(e,t,n,i,s,r,o,a,l){b.platform.web.render.opengl.GL.current_context.texImage2D(e,t,n,i,s,r,o,a,l)},b.platform.web.render.opengl.GL.texParameterf=function(e,t,n){b.platform.web.render.opengl.GL.current_context.texParameterf(e,t,n)},b.platform.web.render.opengl.GL.texParameteri=function(e,t,n){b.platform.web.render.opengl.GL.current_context.texParameteri(e,t,n)},b.platform.web.render.opengl.GL.texSubImage2D=function(e,t,n,i,s,r,o,a,l){b.platform.web.render.opengl.GL.current_context.texSubImage2D(e,t,n,i,s,r,o,a,l)},b.platform.web.render.opengl.GL.uniform1f=function(e,t){b.platform.web.render.opengl.GL.current_context.uniform1f(e,t)},b.platform.web.render.opengl.GL.uniform1fv=function(e,t){b.platform.web.render.opengl.GL.current_context.uniform1fv(e,t)},b.platform.web.render.opengl.GL.uniform1i=function(e,t){b.platform.web.render.opengl.GL.current_context.uniform1i(e,t)},b.platform.web.render.opengl.GL.uniform1iv=function(e,t){b.platform.web.render.opengl.GL.current_context.uniform1iv(e,t)},b.platform.web.render.opengl.GL.uniform2f=function(e,t,n){b.platform.web.render.opengl.GL.current_context.uniform2f(e,t,n)},b.platform.web.render.opengl.GL.uniform2fv=function(e,t){b.platform.web.render.opengl.GL.current_context.uniform2fv(e,t)},b.platform.web.render.opengl.GL.uniform2i=function(e,t,n){b.platform.web.render.opengl.GL.current_context.uniform2i(e,t,n)},b.platform.web.render.opengl.GL.uniform2iv=function(e,t){b.platform.web.render.opengl.GL.current_context.uniform2iv(e,t)},b.platform.web.render.opengl.GL.uniform3f=function(e,t,n,i){b.platform.web.render.opengl.GL.current_context.uniform3f(e,t,n,i)},b.platform.web.render.opengl.GL.uniform3fv=function(e,t){b.platform.web.render.opengl.GL.current_context.uniform3fv(e,t)},b.platform.web.render.opengl.GL.uniform3i=function(e,t,n,i){b.platform.web.render.opengl.GL.current_context.uniform3i(e,t,n,i)},b.platform.web.render.opengl.GL.uniform3iv=function(e,t){b.platform.web.render.opengl.GL.current_context.uniform3iv(e,t)},b.platform.web.render.opengl.GL.uniform4f=function(e,t,n,i,s){b.platform.web.render.opengl.GL.current_context.uniform4f(e,t,n,i,s)},b.platform.web.render.opengl.GL.uniform4fv=function(e,t){b.platform.web.render.opengl.GL.current_context.uniform4fv(e,t)},b.platform.web.render.opengl.GL.uniform4i=function(e,t,n,i,s){b.platform.web.render.opengl.GL.current_context.uniform4i(e,t,n,i,s)},b.platform.web.render.opengl.GL.uniform4iv=function(e,t){b.platform.web.render.opengl.GL.current_context.uniform4iv(e,t)},b.platform.web.render.opengl.GL.uniformMatrix2fv=function(e,t,n){b.platform.web.render.opengl.GL.current_context.uniformMatrix2fv(e,t,n)},b.platform.web.render.opengl.GL.uniformMatrix3fv=function(e,t,n){b.platform.web.render.opengl.GL.current_context.uniformMatrix3fv(e,t,n)},b.platform.web.render.opengl.GL.uniformMatrix4fv=function(e,t,n){b.platform.web.render.opengl.GL.current_context.uniformMatrix4fv(e,t,n)},b.platform.web.render.opengl.GL.useProgram=function(e){b.platform.web.render.opengl.GL.current_context.useProgram(e)},b.platform.web.render.opengl.GL.validateProgram=function(e){b.platform.web.render.opengl.GL.current_context.validateProgram(e)},b.platform.web.render.opengl.GL.vertexAttrib1f=function(e,t){b.platform.web.render.opengl.GL.current_context.vertexAttrib1f(e,t)},b.platform.web.render.opengl.GL.vertexAttrib1fv=function(e,t){b.platform.web.render.opengl.GL.current_context.vertexAttrib1fv(e,t)},b.platform.web.render.opengl.GL.vertexAttrib2f=function(e,t,n){b.platform.web.render.opengl.GL.current_context.vertexAttrib2f(e,t,n)},b.platform.web.render.opengl.GL.vertexAttrib2fv=function(e,t){b.platform.web.render.opengl.GL.current_context.vertexAttrib2fv(e,t)},b.platform.web.render.opengl.GL.vertexAttrib3f=function(e,t,n,i){b.platform.web.render.opengl.GL.current_context.vertexAttrib3f(e,t,n,i)},b.platform.web.render.opengl.GL.vertexAttrib3fv=function(e,t){b.platform.web.render.opengl.GL.current_context.vertexAttrib3fv(e,t)},b.platform.web.render.opengl.GL.vertexAttrib4f=function(e,t,n,i,s){b.platform.web.render.opengl.GL.current_context.vertexAttrib4f(e,t,n,i,s)},b.platform.web.render.opengl.GL.vertexAttrib4fv=function(e,t){b.platform.web.render.opengl.GL.current_context.vertexAttrib4fv(e,t)},b.platform.web.render.opengl.GL.vertexAttribPointer=function(e,t,n,i,s,r){b.platform.web.render.opengl.GL.current_context.vertexAttribPointer(e,t,n,i,s,r)},b.platform.web.render.opengl.GL.viewport=function(e,t,n,i){b.platform.web.render.opengl.GL.current_context.viewport(e,t,n,i)},b.platform.web.render.opengl.GL.get_version=function(){return 7938},b.platform.web.utils={},b.platform.web.utils.ByteArray=function(){this.littleEndian=!1,this.allocated=0,this.position=0,this.length=0,this._snowResizeBuffer(this.allocated)},b.platform.web.utils.ByteArray.__name__=!0,b.platform.web.utils.ByteArray.toBytes=function(e){if(null==e)return null;var t=w.io.Bytes.alloc(e.length);e.position=0;for(var n=0,i=t.length;i>n;){var s=n++;t.set(s,e.readUnsignedByte())}return e.position=0,t},b.platform.web.utils.ByteArray.fromBytes=function(e){var t=new b.platform.web.utils.ByteArray;return t.byteView=new Uint8Array(e.b),t.set_length(t.byteView.length),t.allocated=t.length,t},b.platform.web.utils.ByteArray.snowOfBuffer=function(e){var t=new b.platform.web.utils.ByteArray;return t.set_length(t.allocated),t.data=new DataView(e),t.byteView=new Uint8Array(e),t},b.platform.web.utils.ByteArray.readFile=function(e,t,n){null==t&&(t=!1);var i=new XMLHttpRequest;i.open("GET",e,t),i.overrideMimeType("text/plain; charset=x-user-defined");var s=function(){for(var e=new b.platform.web.utils.ByteArray,t=i.response,n=t.length,s=0;n>s;){var o=s++;e.writeByte(r.cca(t,o))}return e.position=0,e};return i.onload=function(){null!=n&&n(200==i.status?s():null)},i.send(),t?null:200==i.status?s():null},b.platform.web.utils.ByteArray.prototype={bytesAvailable:null,length:null,objectEncoding:null,position:null,allocated:null,byteView:null,data:null,littleEndian:null,__get:function(e){return this.data.getUint8(e)},__set:function(e,t){this.data.setUint8(e,t)},_getUTFBytesCount:function(e){for(var t=0,n=0,i=e.length;i>n;){var s=n++,r=e.charCodeAt(s);t+=127>=r?1:2047>=r?2:65535>=r?3:4}return t},_snowResizeBuffer:function(e){var t=this.byteView,n=new Uint8Array(e);null!=t&&n.set(t.length<=e?t:t.subarray(0,e)),this.byteView=n,this.data=new DataView(n.buffer)},clear:function(){this.allocated<0?this._snowResizeBuffer(this.allocated=m["int"](Math.max(0,2*this.allocated))):this.allocated>0&&this._snowResizeBuffer(this.allocated=0),this.length=0},getData:function(){return this.data.buffer},snowFromBytes:function(e){this.byteView=new Uint8Array(e.b),this.set_length(this.byteView.length),this.allocated=this.length},snowGet:function(e){var t=this.data;return t.getUint8(e)},snowGetBuffer:function(){return this.data.buffer},snowSet:function(e,t){var n=this.data;n.setUint8(e,t)},readBoolean:function(){return 0!=this.readByte()},readByte:function(){var e=this.data;return e.getUint8(this.position++)},readBytes:function(e,t,n){if(0>t||0>n)throw"Read error - Out of bounds";null==t&&(t=0),null==n&&(n=this.length);var i=t+n;e.length<i&&(e.allocated<i?e._snowResizeBuffer(e.allocated=m["int"](Math.max(i,2*e.allocated))):e.allocated>i&&e._snowResizeBuffer(e.allocated=i),e.length=i),e.byteView.set(this.byteView.subarray(this.position,this.position+n),t),e.position=t,this.position+=n,e.position+n>e.length&&e.set_length(e.position+n)},readDouble:function(){var e=this.data.getFloat64(this.position,this.littleEndian);return this.position+=8,e},readFloat:function(){var e=this.data.getFloat32(this.position,this.littleEndian);return this.position+=4,e},readFullBytes:function(e,t,n){this.length<n&&(this.allocated<n?this._snowResizeBuffer(this.allocated=m["int"](Math.max(n,2*this.allocated))):this.allocated>n&&this._snowResizeBuffer(this.allocated=n),this.length=n);for(var i=t,s=t+n;s>i;){var r=i++,o=this.data;o.setInt8(this.position++,e.b[r])}},readInt:function(){var e=this.data.getInt32(this.position,this.littleEndian);return this.position+=4,e},readShort:function(){var e=this.data.getInt16(this.position,this.littleEndian);return this.position+=2,e},readUnsignedByte:function(){var e=this.data;return e.getUint8(this.position++)},readUnsignedInt:function(){var e=this.data.getUint32(this.position,this.littleEndian);return this.position+=4,e},readUnsignedShort:function(){var e=this.data.getUint16(this.position,this.littleEndian);return this.position+=2,e},readUTF:function(){var e=this.readUnsignedShort();return this.readUTFBytes(e)},readUTFBytes:function(e){for(var t="",n=this.position+e;this.position<n;){var i=this.data,s=i.getUint8(this.position++);if(128>s){if(0==s)break;t+=String.fromCharCode(s)}else if(224>s)t+=String.fromCharCode((63&s)<<6|127&i.getUint8(this.position++));else if(240>s){var r=i.getUint8(this.position++);t+=String.fromCharCode((31&s)<<12|(127&r)<<6|127&i.getUint8(this.position++))}else{var o=i.getUint8(this.position++),a=i.getUint8(this.position++);t+=String.fromCharCode((15&s)<<18|(127&o)<<12|a<<6&127|127&i.getUint8(this.position++))}}return t},toString:function(){var e=this.position;this.position=0;var t=this.readUTFBytes(this.length);return this.position=e,t},writeBoolean:function(e){this.writeByte(e?1:0)},writeByte:function(e){var t=this.position+1;this.length<t&&(this.allocated<t?this._snowResizeBuffer(this.allocated=m["int"](Math.max(t,2*this.allocated))):this.allocated>t&&this._snowResizeBuffer(this.allocated=t),this.length=t);var n=this.data;n.setInt8(this.position,e),this.position+=1},writeBytes:function(e,t,n){if(0>t||0>n)throw"Write error - Out of bounds";var i=this.position+n;this.length<i&&(this.allocated<i?this._snowResizeBuffer(this.allocated=m["int"](Math.max(i,2*this.allocated))):this.allocated>i&&this._snowResizeBuffer(this.allocated=i),this.length=i),this.byteView.set(e.byteView.subarray(t,t+n),this.position),this.position+=n},writeDouble:function(e){var t=this.position+8;this.length<t&&(this.allocated<t?this._snowResizeBuffer(this.allocated=m["int"](Math.max(t,2*this.allocated))):this.allocated>t&&this._snowResizeBuffer(this.allocated=t),this.length=t),this.data.setFloat64(this.position,e,this.littleEndian),this.position+=8},writeFloat:function(e){var t=this.position+4;this.length<t&&(this.allocated<t?this._snowResizeBuffer(this.allocated=m["int"](Math.max(t,2*this.allocated))):this.allocated>t&&this._snowResizeBuffer(this.allocated=t),this.length=t),this.data.setFloat32(this.position,e,this.littleEndian),this.position+=4},writeInt:function(e){var t=this.position+4;this.length<t&&(this.allocated<t?this._snowResizeBuffer(this.allocated=m["int"](Math.max(t,2*this.allocated))):this.allocated>t&&this._snowResizeBuffer(this.allocated=t),this.length=t),this.data.setInt32(this.position,e,this.littleEndian),this.position+=4},writeShort:function(e){var t=this.position+2;this.length<t&&(this.allocated<t?this._snowResizeBuffer(this.allocated=m["int"](Math.max(t,2*this.allocated))):this.allocated>t&&this._snowResizeBuffer(this.allocated=t),this.length=t),this.data.setInt16(this.position,e,this.littleEndian),this.position+=2},writeUnsignedInt:function(e){var t=this.position+4;this.length<t&&(this.allocated<t?this._snowResizeBuffer(this.allocated=m["int"](Math.max(t,2*this.allocated))):this.allocated>t&&this._snowResizeBuffer(this.allocated=t),this.length=t),this.data.setUint32(this.position,e,this.littleEndian),this.position+=4},writeUnsignedShort:function(e){var t=this.position+2;this.length<t&&(this.allocated<t?this._snowResizeBuffer(this.allocated=m["int"](Math.max(t,2*this.allocated))):this.allocated>t&&this._snowResizeBuffer(this.allocated=t),this.length=t),this.data.setUint16(this.position,e,this.littleEndian),this.position+=2},writeUTF:function(e){this.writeUnsignedShort(this._getUTFBytesCount(e)),this.writeUTFBytes(e)},writeUTFBytes:function(e){for(var t=0,n=e.length;n>t;){var i=t++,s=e.charCodeAt(i);127>=s?this.writeByte(s):2047>=s?(this.writeByte(192|s>>6),this.writeByte(128|63&s)):65535>=s?(this.writeByte(224|s>>12),this.writeByte(128|s>>6&63),this.writeByte(128|63&s)):(this.writeByte(240|s>>18),this.writeByte(128|s>>12&63),this.writeByte(128|s>>6&63),this.writeByte(128|63&s))}},get_bytesAvailable:function(){return this.length-this.position},get_endian:function(){return this.littleEndian?"littleEndian":"bigEndian"},set_endian:function(e){return this.littleEndian="littleEndian"==e,e},set_length:function(e){return this.allocated<e?this._snowResizeBuffer(this.allocated=m["int"](Math.max(e,2*this.allocated))):this.allocated>e&&this._snowResizeBuffer(this.allocated=e),this.length=e,e},__class__:b.platform.web.utils.ByteArray,__properties__:{set_length:"set_length",set_endian:"set_endian",get_endian:"get_endian",get_bytesAvailable:"get_bytesAvailable"}},b.window={},b.window.WindowSystemBinding=function(){},b.window.WindowSystemBinding.__name__=!0,b.window.WindowSystemBinding.__interfaces__=[b.utils.AbstractClass],b.window.WindowSystemBinding.prototype={manager:null,lib:null,init:function(){throw"abstract method, must override"},process:function(){throw"abstract method, must override"},destroy:function(){throw"abstract method, must override"},listen:function(){throw"abstract method, must override"},unlisten:function(){throw"abstract method, must override"},create:function(){throw"abstract method, must override"},close:function(){throw"abstract method, must override"},show:function(){throw"abstract method, must override"},destroy_window:function(){throw"abstract method, must override"},update:function(){throw"abstract method, must override"},render:function(){throw"abstract method, must override"},swap:function(){throw"abstract method, must override"},simple_message:function(e,t,n){throw null==n&&(n=""),"abstract method, must override"},set_size:function(){throw"abstract method, must override"},set_position:function(){throw"abstract method, must override"},set_title:function(){throw"abstract method, must override"},set_max_size:function(){throw"abstract method, must override"},set_min_size:function(){throw"abstract method, must override"},fullscreen:function(e,t,n){throw null==n&&(n=!0),"abstract method, must override"},bordered:function(){throw"abstract method, must override"},grab:function(){throw"abstract method, must override"},set_cursor_position:function(){throw"abstract method, must override"},system_enable_cursor:function(){throw"abstract method, must override"},system_lock_cursor:function(){throw"abstract method, must override"},system_enable_vsync:function(){throw"abstract method, must override"},display_count:function(){throw"abstract method, must override"},display_mode_count:function(){throw"abstract method, must override"},display_native_mode:function(){throw"abstract method, must override"},display_current_mode:function(){throw"abstract method, must override"},display_mode:function(){throw"abstract method, must override"},display_bounds:function(){throw"abstract method, must override"},display_name:function(){throw"abstract method, must override"},__class__:b.window.WindowSystemBinding},b.platform.web.window={},b.platform.web.window.WindowSystem=function(e,t){this._cursor_visible=!0,this._pre_fs_height=0,this._pre_fs_width=0,this._pre_fs_s_height="",this._pre_fs_s_width="",this._pre_fs_margin="0",this._pre_fs_padding="0",this.seq_window=1,this.manager=e,this.lib=t,this.gl_contexts=new w.ds.IntMap},b.platform.web.window.WindowSystem.__name__=!0,b.platform.web.window.WindowSystem.__super__=b.window.WindowSystemBinding,b.platform.web.window.WindowSystem.prototype=e(b.window.WindowSystemBinding.prototype,{gl_contexts:null,seq_window:null,init:function(){},process:function(){},destroy:function(){},create:function(e,t){var n,i=this.seq_window,s=window.document;
n=s.createElement("canvas"),n.width=e.width,n.height=e.height,n.style.display="block",n.style.position="relative",n.style.margin="2em auto 0 auto",n.style.background="#000",window.document.body.appendChild(n);var r=v.html._CanvasElement.CanvasUtil.getContextWebGL(n,{alpha:!1,premultipliedAlpha:!1});if(null==r){var o="WebGL is required to run this!<br/><br/>";throw o+="visit http://get.webgl.org/ for help <br/>",o+="and contact the developer of the application",this.internal_fallback(o),o}null==b.platform.web.render.opengl.GL.current_context&&(b.platform.web.render.opengl.GL.current_context=r),this.gl_contexts.set(i,r);var a=this.get_real_window_position(n);e.x=a.x,e.y=a.y,null!=e.title&&""!=e.title&&(window.document.title=e.title),t(n,i,e),n.setAttribute("id","window"+i),this.seq_window++},destroy_window:function(e){window.document.body.removeChild(e.handle)},close:function(e){e.handle.style.display="none"},show:function(e){e.handle.style.display=null},update:function(e){var t=e.handle.getBoundingClientRect();t.left!=e.x||t.top!=e.y?this.lib.dispatch_system_event({type:b.types.SystemEventType.window,window:{type:b.types.WindowEventType.window_moved,timestamp:b.Snow.core.timestamp(),window_id:e.id,event:{x:t.left,y:t.top}}}):(t.width!=e.width||t.height!=e.height)&&this.lib.dispatch_system_event({type:b.types.SystemEventType.window,window:{type:b.types.WindowEventType.window_size_changed,timestamp:b.Snow.core.timestamp(),window_id:e.id,event:{x:t.width,y:t.height}}}),t=null},render:function(e){var t=this.gl_contexts.get(e.id);b.platform.web.render.opengl.GL.current_context!=t&&(b.platform.web.render.opengl.GL.current_context=t)},swap:function(){},simple_message:function(e,t,n){null==n&&(n=""),window.alert(t)},set_size:function(e,t,n){e.handle.style.width=""+t+"px",e.handle.style.height=""+n+"px"},set_position:function(e,t,n){e.handle.style.left=""+t+"px",e.handle.style.top=""+n+"px"},get_real_window_position:function(e){for(var t=0,n=0,i=e,s=!0,r=0;1==s;){if(r++,r>100){s=!1;break}null!=i.offsetParent?(t+=i.offsetLeft,n+=i.offsetTop,i=i.offsetParent):s=!1}return{x:t,y:n}},set_title:function(e,t){window.document.title=t},set_max_size:function(e,t,n){e.handle.style.maxWidth=""+t+"px",e.handle.style.maxHeight=""+n+"px"},set_min_size:function(e,t,n){e.handle.style.minWidth=""+t+"px",e.handle.style.minHeight=""+n+"px"},_pre_fs_padding:null,_pre_fs_margin:null,_pre_fs_s_width:null,_pre_fs_s_height:null,_pre_fs_width:null,_pre_fs_height:null,fullscreen:function(e,t,i){null==i&&(i=!0),t?i?(this._pre_fs_padding=e.handle.style.padding,this._pre_fs_margin=e.handle.style.margin,this._pre_fs_s_width=e.handle.style.width,this._pre_fs_s_height=e.handle.style.height,this._pre_fs_width=e.handle.width,this._pre_fs_height=e.handle.height,e.handle.style.margin="0",e.handle.style.padding="0",e.handle.style.width=window.innerWidth+"px",e.handle.style.height=window.innerHeight+"px",e.handle.width=window.innerWidth,e.handle.height=window.innerHeight):null==(S=e.handle,n(S,S.requestFullscreen))?null==(S=e.handle,n(S,S.requestFullScreen))?null==e.handle.webkitRequestFullscreen?null==e.handle.mozRequestFullScreen||e.handle.mozRequestFullScreen():e.handle.webkitRequestFullscreen():e.handle.requestFullScreen(0):e.handle.requestFullscreen():i&&(e.handle.style.padding=this._pre_fs_padding,e.handle.style.margin=this._pre_fs_margin,e.handle.style.width=this._pre_fs_s_width,e.handle.style.height=this._pre_fs_s_height,e.handle.width=this._pre_fs_width,e.handle.height=this._pre_fs_height)},bordered:function(){},grab:function(e,t){t&&(null==(S=e.handle,n(S,S.requestPointerLock))?null==e.handle.webkitRequestPointerLock?null==e.handle.mozRequestPointerLock||e.handle.mozRequestPointerLock():e.handle.webkitRequestPointerLock():e.handle.requestPointerLock())},set_cursor_position:function(){},cursor_style:null,_cursor_visible:null,system_enable_cursor:function(e){if(null==this.cursor_style){var t=window.document;this.cursor_style=t.createElement("style"),this.cursor_style.innerHTML="* { cursor:none; }"}e&&!this._cursor_visible?(this._cursor_visible=!0,window.document.body.removeChild(this.cursor_style)):!e&&this._cursor_visible&&(this._cursor_visible=!1,window.document.body.appendChild(this.cursor_style))},system_lock_cursor:function(e){null!=this.lib.window&&this.grab(this.lib.window,e)},system_enable_vsync:function(){return-1},display_count:function(){return 1},display_mode_count:function(){return 1},display_native_mode:function(){return{format:0,refresh_rate:0,width:window.screen.width,height:window.screen.height}},display_current_mode:function(e){return this.display_native_mode(e)},display_mode:function(e){return this.display_native_mode(e)},display_bounds:function(){return{x:0,y:0,width:window.innerWidth,height:window.innerHeight}},display_name:function(){return window.navigator.vendor},listen:function(e){e.handle.addEventListener("mouseleave",n(this,this.on_internal_leave)),e.handle.addEventListener("mouseenter",n(this,this.on_internal_enter))},unlisten:function(e){e.handle.removeEventListener("mouseleave",n(this,this.on_internal_leave)),e.handle.removeEventListener("mouseenter",n(this,this.on_internal_enter))},on_internal_leave:function(e){var t=this.lib.windowing.window_from_handle(e.target);this.lib.dispatch_system_event({type:b.types.SystemEventType.window,window:{type:b.types.WindowEventType.window_leave,timestamp:e.timeStamp,window_id:t.id,event:e}})},on_internal_enter:function(e){var t=this.lib.windowing.window_from_handle(e.target);this.lib.dispatch_system_event({type:b.types.SystemEventType.window,window:{type:b.types.WindowEventType.window_enter,timestamp:e.timeStamp,window_id:t.id,event:e}})},internal_fallback:function(e){var t,n,i=window.document;t=i.createElement("div");var s=window.document;n=s.createElement("div"),t.style.marginLeft="auto",t.style.marginRight="auto",t.style.color="#d3d3d3",t.style.marginTop="5em",t.style.fontSize="1.4em",t.style.fontFamily="helvetica,sans-serif",t.innerHTML=e,n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.display="block",n.style.minWidth="100%",n.style.minHeight="100%",n.style.textAlign="center",n.style.position="absolute",n.style.background="rgba(1,1,1,0.90)",n.appendChild(t),window.document.body.appendChild(n)},__class__:b.platform.web.window.WindowSystem}),b.types={},b.types.AssetType={__ename__:!0,__constructs__:["bytes","text","image","audio"]},b.types.AssetType.bytes=["bytes",0],b.types.AssetType.bytes.toString=i,b.types.AssetType.bytes.__enum__=b.types.AssetType,b.types.AssetType.text=["text",1],b.types.AssetType.text.toString=i,b.types.AssetType.text.__enum__=b.types.AssetType,b.types.AssetType.image=["image",2],b.types.AssetType.image.toString=i,b.types.AssetType.image.__enum__=b.types.AssetType,b.types.AssetType.audio=["audio",3],b.types.AssetType.audio.toString=i,b.types.AssetType.audio.__enum__=b.types.AssetType,b.types.AudioFormatType={__ename__:!0,__constructs__:["unknown","ogg","wav","pcm"]},b.types.AudioFormatType.unknown=["unknown",0],b.types.AudioFormatType.unknown.toString=i,b.types.AudioFormatType.unknown.__enum__=b.types.AudioFormatType,b.types.AudioFormatType.ogg=["ogg",1],b.types.AudioFormatType.ogg.toString=i,b.types.AudioFormatType.ogg.__enum__=b.types.AudioFormatType,b.types.AudioFormatType.wav=["wav",2],b.types.AudioFormatType.wav.toString=i,b.types.AudioFormatType.wav.__enum__=b.types.AudioFormatType,b.types.AudioFormatType.pcm=["pcm",3],b.types.AudioFormatType.pcm.toString=i,b.types.AudioFormatType.pcm.__enum__=b.types.AudioFormatType,b.types.SystemEventType={__ename__:!0,__constructs__:["unknown","init","ready","update","shutdown","window","input","quit","app_terminating","app_lowmemory","app_willenterbackground","app_didenterbackground","app_willenterforeground","app_didenterforeground","file"]},b.types.SystemEventType.unknown=["unknown",0],b.types.SystemEventType.unknown.toString=i,b.types.SystemEventType.unknown.__enum__=b.types.SystemEventType,b.types.SystemEventType.init=["init",1],b.types.SystemEventType.init.toString=i,b.types.SystemEventType.init.__enum__=b.types.SystemEventType,b.types.SystemEventType.ready=["ready",2],b.types.SystemEventType.ready.toString=i,b.types.SystemEventType.ready.__enum__=b.types.SystemEventType,b.types.SystemEventType.update=["update",3],b.types.SystemEventType.update.toString=i,b.types.SystemEventType.update.__enum__=b.types.SystemEventType,b.types.SystemEventType.shutdown=["shutdown",4],b.types.SystemEventType.shutdown.toString=i,b.types.SystemEventType.shutdown.__enum__=b.types.SystemEventType,b.types.SystemEventType.window=["window",5],b.types.SystemEventType.window.toString=i,b.types.SystemEventType.window.__enum__=b.types.SystemEventType,b.types.SystemEventType.input=["input",6],b.types.SystemEventType.input.toString=i,b.types.SystemEventType.input.__enum__=b.types.SystemEventType,b.types.SystemEventType.quit=["quit",7],b.types.SystemEventType.quit.toString=i,b.types.SystemEventType.quit.__enum__=b.types.SystemEventType,b.types.SystemEventType.app_terminating=["app_terminating",8],b.types.SystemEventType.app_terminating.toString=i,b.types.SystemEventType.app_terminating.__enum__=b.types.SystemEventType,b.types.SystemEventType.app_lowmemory=["app_lowmemory",9],b.types.SystemEventType.app_lowmemory.toString=i,b.types.SystemEventType.app_lowmemory.__enum__=b.types.SystemEventType,b.types.SystemEventType.app_willenterbackground=["app_willenterbackground",10],b.types.SystemEventType.app_willenterbackground.toString=i,b.types.SystemEventType.app_willenterbackground.__enum__=b.types.SystemEventType,b.types.SystemEventType.app_didenterbackground=["app_didenterbackground",11],b.types.SystemEventType.app_didenterbackground.toString=i,b.types.SystemEventType.app_didenterbackground.__enum__=b.types.SystemEventType,b.types.SystemEventType.app_willenterforeground=["app_willenterforeground",12],b.types.SystemEventType.app_willenterforeground.toString=i,b.types.SystemEventType.app_willenterforeground.__enum__=b.types.SystemEventType,b.types.SystemEventType.app_didenterforeground=["app_didenterforeground",13],b.types.SystemEventType.app_didenterforeground.toString=i,b.types.SystemEventType.app_didenterforeground.__enum__=b.types.SystemEventType,b.types.SystemEventType.file=["file",14],b.types.SystemEventType.file.toString=i,b.types.SystemEventType.file.__enum__=b.types.SystemEventType,b.types.FileEventType={__ename__:!0,__constructs__:["unknown","modify","remove","create","drop"]},b.types.FileEventType.unknown=["unknown",0],b.types.FileEventType.unknown.toString=i,b.types.FileEventType.unknown.__enum__=b.types.FileEventType,b.types.FileEventType.modify=["modify",1],b.types.FileEventType.modify.toString=i,b.types.FileEventType.modify.__enum__=b.types.FileEventType,b.types.FileEventType.remove=["remove",2],b.types.FileEventType.remove.toString=i,b.types.FileEventType.remove.__enum__=b.types.FileEventType,b.types.FileEventType.create=["create",3],b.types.FileEventType.create.toString=i,b.types.FileEventType.create.__enum__=b.types.FileEventType,b.types.FileEventType.drop=["drop",4],b.types.FileEventType.drop.toString=i,b.types.FileEventType.drop.__enum__=b.types.FileEventType,b.types.WindowEventType={__ename__:!0,__constructs__:["unknown","window_created","window_shown","window_hidden","window_exposed","window_moved","window_resized","window_size_changed","window_minimized","window_maximized","window_restored","window_enter","window_leave","window_focus_gained","window_focus_lost","window_close","window_destroy"]},b.types.WindowEventType.unknown=["unknown",0],b.types.WindowEventType.unknown.toString=i,b.types.WindowEventType.unknown.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_created=["window_created",1],b.types.WindowEventType.window_created.toString=i,b.types.WindowEventType.window_created.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_shown=["window_shown",2],b.types.WindowEventType.window_shown.toString=i,b.types.WindowEventType.window_shown.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_hidden=["window_hidden",3],b.types.WindowEventType.window_hidden.toString=i,b.types.WindowEventType.window_hidden.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_exposed=["window_exposed",4],b.types.WindowEventType.window_exposed.toString=i,b.types.WindowEventType.window_exposed.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_moved=["window_moved",5],b.types.WindowEventType.window_moved.toString=i,b.types.WindowEventType.window_moved.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_resized=["window_resized",6],b.types.WindowEventType.window_resized.toString=i,b.types.WindowEventType.window_resized.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_size_changed=["window_size_changed",7],b.types.WindowEventType.window_size_changed.toString=i,b.types.WindowEventType.window_size_changed.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_minimized=["window_minimized",8],b.types.WindowEventType.window_minimized.toString=i,b.types.WindowEventType.window_minimized.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_maximized=["window_maximized",9],b.types.WindowEventType.window_maximized.toString=i,b.types.WindowEventType.window_maximized.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_restored=["window_restored",10],b.types.WindowEventType.window_restored.toString=i,b.types.WindowEventType.window_restored.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_enter=["window_enter",11],b.types.WindowEventType.window_enter.toString=i,b.types.WindowEventType.window_enter.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_leave=["window_leave",12],b.types.WindowEventType.window_leave.toString=i,b.types.WindowEventType.window_leave.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_focus_gained=["window_focus_gained",13],b.types.WindowEventType.window_focus_gained.toString=i,b.types.WindowEventType.window_focus_gained.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_focus_lost=["window_focus_lost",14],b.types.WindowEventType.window_focus_lost.toString=i,b.types.WindowEventType.window_focus_lost.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_close=["window_close",15],b.types.WindowEventType.window_close.toString=i,b.types.WindowEventType.window_close.__enum__=b.types.WindowEventType,b.types.WindowEventType.window_destroy=["window_destroy",16],b.types.WindowEventType.window_destroy.toString=i,b.types.WindowEventType.window_destroy.__enum__=b.types.WindowEventType,b.types.InputEventType={__ename__:!0,__constructs__:["unknown","key","mouse","touch","joystick","controller"]},b.types.InputEventType.unknown=["unknown",0],b.types.InputEventType.unknown.toString=i,b.types.InputEventType.unknown.__enum__=b.types.InputEventType,b.types.InputEventType.key=["key",1],b.types.InputEventType.key.toString=i,b.types.InputEventType.key.__enum__=b.types.InputEventType,b.types.InputEventType.mouse=["mouse",2],b.types.InputEventType.mouse.toString=i,b.types.InputEventType.mouse.__enum__=b.types.InputEventType,b.types.InputEventType.touch=["touch",3],b.types.InputEventType.touch.toString=i,b.types.InputEventType.touch.__enum__=b.types.InputEventType,b.types.InputEventType.joystick=["joystick",4],b.types.InputEventType.joystick.toString=i,b.types.InputEventType.joystick.__enum__=b.types.InputEventType,b.types.InputEventType.controller=["controller",5],b.types.InputEventType.controller.toString=i,b.types.InputEventType.controller.__enum__=b.types.InputEventType,b.types.TextEventType={__ename__:!0,__constructs__:["edit","input"]},b.types.TextEventType.edit=["edit",0],b.types.TextEventType.edit.toString=i,b.types.TextEventType.edit.__enum__=b.types.TextEventType,b.types.TextEventType.input=["input",1],b.types.TextEventType.input.toString=i,b.types.TextEventType.input.__enum__=b.types.TextEventType,b.types.GamepadDeviceEventType={__ename__:!0,__constructs__:["device_added","device_removed","device_remapped"]},b.types.GamepadDeviceEventType.device_added=["device_added",0],b.types.GamepadDeviceEventType.device_added.toString=i,b.types.GamepadDeviceEventType.device_added.__enum__=b.types.GamepadDeviceEventType,b.types.GamepadDeviceEventType.device_removed=["device_removed",1],b.types.GamepadDeviceEventType.device_removed.toString=i,b.types.GamepadDeviceEventType.device_removed.__enum__=b.types.GamepadDeviceEventType,b.types.GamepadDeviceEventType.device_remapped=["device_remapped",2],b.types.GamepadDeviceEventType.device_remapped.toString=i,b.types.GamepadDeviceEventType.device_remapped.__enum__=b.types.GamepadDeviceEventType,b.types.SystemEvents=function(){},b.types.SystemEvents.__name__=!0,b.types.SystemEvents.typed=function(e){return e==b.types.SystemEvents.se_init?b.types.SystemEventType.init:e==b.types.SystemEvents.se_ready?b.types.SystemEventType.ready:e==b.types.SystemEvents.se_update?b.types.SystemEventType.update:e==b.types.SystemEvents.se_shutdown?b.types.SystemEventType.shutdown:e==b.types.SystemEvents.se_window?b.types.SystemEventType.window:e==b.types.SystemEvents.se_input?b.types.SystemEventType.input:e==b.types.SystemEvents.se_quit?b.types.SystemEventType.quit:e==b.types.SystemEvents.se_app_terminating?b.types.SystemEventType.app_terminating:e==b.types.SystemEvents.se_app_lowmemory?b.types.SystemEventType.app_lowmemory:e==b.types.SystemEvents.se_app_willenterbackground?b.types.SystemEventType.app_willenterbackground:e==b.types.SystemEvents.se_app_didenterbackground?b.types.SystemEventType.app_didenterbackground:e==b.types.SystemEvents.se_app_willenterforeground?b.types.SystemEventType.app_willenterforeground:e==b.types.SystemEvents.se_app_didenterforeground?b.types.SystemEventType.app_didenterforeground:e==b.types.SystemEvents.se_file?b.types.SystemEventType.file:b.types.SystemEventType.unknown},b.types.WindowEvents=function(){},b.types.WindowEvents.__name__=!0,b.types.WindowEvents.typed=function(e){return e==b.types.WindowEvents.we_created?b.types.WindowEventType.window_created:e==b.types.WindowEvents.we_shown?b.types.WindowEventType.window_shown:e==b.types.WindowEvents.we_hidden?b.types.WindowEventType.window_hidden:e==b.types.WindowEvents.we_exposed?b.types.WindowEventType.window_exposed:e==b.types.WindowEvents.we_moved?b.types.WindowEventType.window_moved:e==b.types.WindowEvents.we_resized?b.types.WindowEventType.window_resized:e==b.types.WindowEvents.we_size_changed?b.types.WindowEventType.window_size_changed:e==b.types.WindowEvents.we_minimized?b.types.WindowEventType.window_minimized:e==b.types.WindowEvents.we_maximized?b.types.WindowEventType.window_maximized:e==b.types.WindowEvents.we_restored?b.types.WindowEventType.window_restored:e==b.types.WindowEvents.we_enter?b.types.WindowEventType.window_enter:e==b.types.WindowEvents.we_leave?b.types.WindowEventType.window_leave:e==b.types.WindowEvents.we_focus_gained?b.types.WindowEventType.window_focus_gained:e==b.types.WindowEvents.we_focus_lost?b.types.WindowEventType.window_focus_lost:e==b.types.WindowEvents.we_close?b.types.WindowEventType.window_close:e==b.types.WindowEvents.we_destroy?b.types.WindowEventType.window_destroy:b.types.WindowEventType.unknown},b.types.InputEvents=function(){},b.types.InputEvents.__name__=!0,b.types.InputEvents.typed=function(e){return e==b.types.InputEvents.ie_unknown?b.types.InputEventType.unknown:e==b.types.InputEvents.ie_key?b.types.InputEventType.key:e==b.types.InputEvents.ie_mouse?b.types.InputEventType.mouse:e==b.types.InputEvents.ie_touch?b.types.InputEventType.touch:e==b.types.InputEvents.ie_joystick?b.types.InputEventType.joystick:e==b.types.InputEvents.ie_controller?b.types.InputEventType.controller:b.types.InputEventType.unknown},b.types.FileEvents=function(){},b.types.FileEvents.__name__=!0,b.types.FileEvents.typed=function(e){return e==b.types.FileEvents.fe_unknown?b.types.FileEventType.unknown:e==b.types.FileEvents.fe_modify?b.types.FileEventType.modify:e==b.types.FileEvents.fe_remove?b.types.FileEventType.remove:e==b.types.FileEvents.fe_create?b.types.FileEventType.create:e==b.types.FileEvents.fe_drop?b.types.FileEventType.drop:b.types.FileEventType.unknown},b.utils.AbstractClassBuilder=function(){},b.utils.AbstractClassBuilder.__name__=!0,b.utils.IMemoryRange=function(){},b.utils.IMemoryRange.__name__=!0,b.utils.IMemoryRange.prototype={getByteBuffer:null,getStart:null,getLength:null,__class__:b.utils.IMemoryRange},b.utils.Libs=function(){},b.utils.Libs.__name__=!0,b.utils.Libs.tryLoad=function(){return null},b.utils.Libs.findHaxeLib=function(){try{}catch(e){}return""},b.utils.Libs.get_system_name=function(){return window.navigator.userAgent},b.utils.Libs.web_add_lib=function(e,t){null==b.utils.Libs._web_libs&&(b.utils.Libs._web_libs=new w.ds.StringMap);var n=t;return b.utils.Libs._web_libs.set(e,n),!0},b.utils.Libs.web_lib_load=function(e,t){null==b.utils.Libs._web_libs&&(b.utils.Libs._web_libs=new w.ds.StringMap);var n=b.utils.Libs._web_libs.get(e);return null!=n?d.field(n,t):null},b.utils.Libs.load=function(e,t,n){null==n&&(n=0);var i=b.utils.Libs.web_lib_load(e,t);if(i)return i;null==b.utils.Libs.__moduleNames&&(b.utils.Libs.__moduleNames=new w.ds.StringMap),b.utils.Libs.__moduleNames.exists(e),b.utils.Libs.__moduleNames.set(e,e);var s=b.utils.Libs.tryLoad("./"+e,e,t,n);if(null==s&&(s=b.utils.Libs.tryLoad(".\\"+e,e,t,n)),null==s&&(s=b.utils.Libs.tryLoad(e,e,t,n)),null==s){var o;o="windows"==function(){var e,t=b.utils.Libs.get_system_name();return e=r.substr(t,7,null)}(this).toLowerCase()?"\\":"/";var a=b.utils.Libs.findHaxeLib("snow");""!=a&&(s=b.utils.Libs.tryLoad(a+o+"ndll"+o+b.utils.Libs.get_system_name()+o+e,e,t,n),null==s&&(s=b.utils.Libs.tryLoad(a+o+"ndll"+o+b.utils.Libs.get_system_name()+"64"+o+e,e,t,n)))}return b.utils.Libs.loaderTrace("Result : "+m.string(s)),s},b.utils.Libs.loaderTrace=function(){},b.utils.Timer=function(e){this.time=e,b.utils.Timer.running_timers.push(this),this.fire_at=b.utils.Timer.stamp()+this.time,this.running=!0},b.utils.Timer.__name__=!0,b.utils.Timer.measure=function(e,t){var n=b.utils.Timer.stamp(),i=e();return w.Log.trace(b.utils.Timer.stamp()-n+"s",t),i},b.utils.Timer.update=function(){for(var e=b.utils.Timer.stamp(),t=0,n=b.utils.Timer.running_timers;t<n.length;){var i=n[t];++t,i.running&&i.fire_at<e&&(i.fire_at+=i.time,i.run())}},b.utils.Timer.delay=function(e,t){var n=new b.utils.Timer(e);return n.run=function(){n.stop(),t()},n},b.utils.Timer.stamp=function(){return b.Snow.core.timestamp()},b.utils.Timer.prototype={time:null,fire_at:null,running:null,run:function(){},stop:function(){this.running&&(this.running=!1,r.remove(b.utils.Timer.running_timers,this))},__class__:b.utils.Timer},b.utils.format={},b.utils.format.png={},b.utils.format.png.Color={__ename__:!0,__constructs__:["ColGrey","ColTrue","ColIndexed"]},b.utils.format.png.Color.ColGrey=function(e){var t=["ColGrey",0,e];return t.__enum__=b.utils.format.png.Color,t.toString=i,t},b.utils.format.png.Color.ColTrue=function(e){var t=["ColTrue",1,e];return t.__enum__=b.utils.format.png.Color,t.toString=i,t},b.utils.format.png.Color.ColIndexed=["ColIndexed",2],b.utils.format.png.Color.ColIndexed.toString=i,b.utils.format.png.Color.ColIndexed.__enum__=b.utils.format.png.Color,b.utils.format.png.Chunk={__ename__:!0,__constructs__:["CEnd","CHeader","CData","CPalette","CUnknown"]},b.utils.format.png.Chunk.CEnd=["CEnd",0],b.utils.format.png.Chunk.CEnd.toString=i,b.utils.format.png.Chunk.CEnd.__enum__=b.utils.format.png.Chunk,b.utils.format.png.Chunk.CHeader=function(e){var t=["CHeader",1,e];return t.__enum__=b.utils.format.png.Chunk,t.toString=i,t},b.utils.format.png.Chunk.CData=function(e){var t=["CData",2,e];return t.__enum__=b.utils.format.png.Chunk,t.toString=i,t},b.utils.format.png.Chunk.CPalette=function(e){var t=["CPalette",3,e];return t.__enum__=b.utils.format.png.Chunk,t.toString=i,t},b.utils.format.png.Chunk.CUnknown=function(e,t){var n=["CUnknown",4,e,t];return n.__enum__=b.utils.format.png.Chunk,n.toString=i,n},b.utils.format.png.Reader=function(e){this.i=e,e.set_bigEndian(!0),this.checkCRC=!0},b.utils.format.png.Reader.__name__=!0,b.utils.format.png.Reader.prototype={i:null,checkCRC:null,read:function(){for(var e=0,t=[137,80,78,71,13,10,26,10];e<t.length;){var n=t[e];if(++e,this.i.readByte()!=n)throw"Invalid header"}for(var i=new a;;){var s=this.readChunk();if(i.add(s),s==b.utils.format.png.Chunk.CEnd)break}return i},readHeader:function(e){e.set_bigEndian(!0);var t,n=e.readInt32(),i=e.readInt32(),s=e.readByte(),r=e.readByte();switch(r){case 0:t=b.utils.format.png.Color.ColGrey(!1);break;case 2:t=b.utils.format.png.Color.ColTrue(!1);break;case 3:t=b.utils.format.png.Color.ColIndexed;break;case 4:t=b.utils.format.png.Color.ColGrey(!0);break;case 6:t=b.utils.format.png.Color.ColTrue(!0);break;default:throw"Unknown color model "+r+":"+s}var o=e.readByte(),a=e.readByte();if(0!=o||0!=a)throw"Invalid header";var l=e.readByte();if(0!=l&&1!=l)throw"Invalid header";return{width:n,height:i,colbits:s,color:t,interlaced:1==l}},readChunk:function(){var e=this.i.readInt32(),t=this.i.readString(4),n=this.i.read(e),i=this.i.readInt32();if(this.checkCRC){for(var s=new w.crypto.Crc32,o=0;4>o;){var a=o++;s["byte"](r.cca(t,a))}if(s.update(n,0,n.length),s.get()!=i)throw"CRC check failure"}switch(t){case"IEND":return b.utils.format.png.Chunk.CEnd;case"IHDR":return b.utils.format.png.Chunk.CHeader(this.readHeader(new w.io.BytesInput(n)));case"IDAT":return b.utils.format.png.Chunk.CData(n);case"PLTE":return b.utils.format.png.Chunk.CPalette(n);default:return b.utils.format.png.Chunk.CUnknown(t,n)}},__class__:b.utils.format.png.Reader},b.utils.format.png.Tools=function(){},b.utils.format.png.Tools.__name__=!0,b.utils.format.png.Tools.getHeader=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();switch(n[1]){case 1:var i=n[2];return i}}throw"Header not found"},b.utils.format.png.Tools.getPalette=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();switch(n[1]){case 3:var i=n[2];return i}}return null},b.utils.format.png.Tools.filter=function(e,t,n,i,s,r,o){null==o&&(o=4);var a;a=0==n?0:e.b[r-i];var l;l=0==t||0==n?0:e.b[r-i-o];var u=s+a-l,_=u-s;0>_&&(_=-_);var h=u-a;0>h&&(h=-h);var c=u-l;return 0>c&&(c=-c),h>=_&&c>=_?s:c>=h?a:l},b.utils.format.png.Tools.reverseBytes=function(e){for(var t=0,n=0,i=e.length>>2;i>n;){var s=(n++,e.b[t]),r=e.b[t+1],o=e.b[t+2],a=e.b[t+3],l=t++;e.b[l]=255&a;var u=t++;e.b[u]=255&o;var _=t++;e.b[_]=255&r;var h=t++;e.b[h]=255&s}},b.utils.format.png.Tools.extractGrey=function(e){for(var t=b.utils.format.png.Tools.getHeader(e),n=w.io.Bytes.alloc(t.width*t.height),i=null,s=null,r=e.iterator();r.hasNext();){var o=r.next();switch(o[1]){case 2:var a=o[2];null!=s?s.add(a):null==i?i=a:(s=new w.io.BytesBuffer,s.add(i),s.add(a),i=null)}}if(null!=s&&(i=s.getBytes()),null==i)throw"Data not found";i=b.utils.format.tools.Inflate.run(i);var l=0,u=0,_=t.color;switch(_[1]){case 0:var h=_[2];if(8!=t.colbits)throw"Unsupported color mode";var c,p=t.width;if(c=(h?2:1)*p+1,i.length<t.height*c)throw"Not enough data";var d;d=h?2:1;for(var m=0,f=t.height;f>m;){var g=m++,y=i.get(l++);switch(y){case 0:for(var v=0;p>v;){var x=(v++,i.b[l]);l+=d,n.set(u++,x)}break;case 1:for(var S=0,T=0;p>T;){{T++}S+=i.b[l],l+=d,n.set(u++,S)}break;case 2:var E;E=0==g?0:p;for(var k=0;p>k;){var N=(k++,i.b[l]+n.b[u-E]);l+=d,n.set(u++,N)}break;case 3:var L,G=0;L=0==g?0:p;for(var A=0;p>A;){{A++}G=i.b[l]+(G+n.b[u-L]>>1)&255,l+=d,n.set(u++,G)}break;case 4:for(var I=p,B=0,C=0;p>C;){var M=C++;B=b.utils.format.png.Tools.filter(n,M,g,I,B,u,1)+i.b[l]&255,l+=d,n.set(u++,B)}break;default:throw"Invalid filter "+y}}break;default:throw"Unsupported color mode"}return n},b.utils.format.png.Tools.extract32=function(e,t){var n,i=b.utils.format.png.Tools.getHeader(e);n=null==t?w.io.Bytes.alloc(i.width*i.height*4):t;for(var s=null,r=null,o=e.iterator();o.hasNext();){var a=o.next();switch(a[1]){case 2:var l=a[2];null!=r?r.add(l):null==s?s=l:(r=new w.io.BytesBuffer,r.add(s),r.add(l),s=null)}}if(null!=r&&(s=r.getBytes()),null==s)throw"Data not found";s=b.utils.format.tools.Inflate.run(s);var u=0,_=0,h=i.color;switch(h[1]){case 2:var c=b.utils.format.png.Tools.getPalette(e);if(null==c)throw"PNG Palette is missing";var p=null;try{for(var d=e.iterator();d.hasNext();){var m=d.next();switch(m[1]){case 4:switch(m[2]){case"tRNS":var f=m[3];throw p=f,"__break__"}}}}catch(g){if("__break__"!=g)throw g}var y=i.width,v=y+1;if(s.length<i.height*v)throw"Not enough data";for(var x,S,T,E=255,k=0,N=i.height;N>k;){var L=k++,G=s.get(u++);switch(G){case 0:for(var A=0;y>A;){var I=(A++,s.get(u++));x=c.b[3*I],S=c.b[3*I+1],T=c.b[3*I+2],null!=p&&(E=p.b[I]),n.set(_++,T),n.set(_++,S),n.set(_++,x),n.set(_++,E)}break;case 1:for(var B=0,C=0,M=0,R=0,z=0;y>z;){var V=(z++,s.get(u++));x=c.b[3*V],S=c.b[3*V+1],T=c.b[3*V+2],null!=p&&(E=p.b[V]),M+=T,n.set(_++,M),C+=S,n.set(_++,C),B+=x,n.set(_++,B),R+=E,n.set(_++,R),n.set(_++,E)}break;case 2:var P;P=0==L?0:4*y;for(var K=0;y>K;){var O=(K++,s.get(u++));x=c.b[3*O],S=c.b[3*O+1],T=c.b[3*O+2],null!=p&&(E=p.b[O]),n.b[_]=T+n.b[_-P]&255,_++,n.b[_]=S+n.b[_-P]&255,_++,n.b[_]=x+n.b[_-P]&255,_++,n.b[_]=E+n.b[_-P]&255,_++}break;case 3:var F,D=0,U=0,j=0,W=0;F=0==L?0:4*y;for(var H=0;y>H;){var q=(H++,s.get(u++));x=c.b[3*q],S=c.b[3*q+1],T=c.b[3*q+2],null!=p&&(E=p.b[q]),j=T+(j+n.b[_-F]>>1)&255,n.set(_++,j),U=S+(U+n.b[_-F]>>1)&255,n.set(_++,U),D=x+(D+n.b[_-F]>>1)&255,n.set(_++,D),D=E+(W+n.b[_-F]>>1)&255,n.set(_++,W)}break;case 4:for(var X=4*y,J=0,Z=0,Y=0,Q=0,$=0;y>$;){var et=$++,tt=s.get(u++);x=c.b[3*tt],S=c.b[3*tt+1],T=c.b[3*tt+2],null!=p&&(E=p.b[tt]),Y=b.utils.format.png.Tools.filter(n,et,L,X,Y,_,null)+T&255,n.set(_++,Y),Z=b.utils.format.png.Tools.filter(n,et,L,X,Z,_,null)+S&255,n.set(_++,Z),J=b.utils.format.png.Tools.filter(n,et,L,X,J,_,null)+x&255,n.set(_++,J),Q=b.utils.format.png.Tools.filter(n,et,L,X,Q,_,null)+E&255,n.set(_++,Q)}break;default:throw"Invalid filter "+G}}break;case 0:var nt=h[2];if(8!=i.colbits)throw"Unsupported color mode";var it,st=i.width;if(it=(nt?2:1)*st+1,s.length<i.height*it)throw"Not enough data";for(var rt=0,ot=i.height;ot>rt;){var at=rt++,lt=s.get(u++);switch(lt){case 0:if(nt)for(var ut=0;st>ut;){var _t=(ut++,s.get(u++));n.set(_++,_t),n.set(_++,_t),n.set(_++,_t),n.set(_++,s.get(u++))}else for(var ht=0;st>ht;){var ct=(ht++,s.get(u++));n.set(_++,ct),n.set(_++,ct),n.set(_++,ct),n.set(_++,255)}break;case 1:var pt=0,dt=0;if(nt)for(var mt=0;st>mt;){{mt++}pt+=s.get(u++),n.set(_++,pt),n.set(_++,pt),n.set(_++,pt),dt+=s.get(u++),n.set(_++,dt)}else for(var ft=0;st>ft;){{ft++}pt+=s.get(u++),n.set(_++,pt),n.set(_++,pt),n.set(_++,pt),n.set(_++,255)}break;case 2:var gt;if(gt=0==at?0:4*st,nt)for(var yt=0;st>yt;){var wt=(yt++,s.get(u++)+n.b[_-gt]);n.set(_++,wt),n.set(_++,wt),n.set(_++,wt),n.set(_++,s.get(u++)+n.b[_-gt])}else for(var vt=0;st>vt;){var bt=(vt++,s.get(u++)+n.b[_-gt]);n.set(_++,bt),n.set(_++,bt),n.set(_++,bt),n.set(_++,255)}break;case 3:var xt,St=0,Tt=0;if(xt=0==at?0:4*st,nt)for(var Et=0;st>Et;){{Et++}St=s.get(u++)+(St+n.b[_-xt]>>1)&255,n.set(_++,St),n.set(_++,St),n.set(_++,St),Tt=s.get(u++)+(Tt+n.b[_-xt]>>1)&255,n.set(_++,Tt)}else for(var kt=0;st>kt;){{kt++}St=s.get(u++)+(St+n.b[_-xt]>>1)&255,n.set(_++,St),n.set(_++,St),n.set(_++,St),n.set(_++,255)}break;case 4:var Nt=4*st,Lt=0,Gt=0;if(nt)for(var At=0;st>At;){var It=At++;Lt=b.utils.format.png.Tools.filter(n,It,at,Nt,Lt,_,null)+s.get(u++)&255,n.set(_++,Lt),n.set(_++,Lt),n.set(_++,Lt),Gt=b.utils.format.png.Tools.filter(n,It,at,Nt,Gt,_,null)+s.get(u++)&255,n.set(_++,Gt)}else for(var Bt=0;st>Bt;){var Ct=Bt++;Lt=b.utils.format.png.Tools.filter(n,Ct,at,Nt,Lt,_,null)+s.get(u++)&255,n.set(_++,Lt),n.set(_++,Lt),n.set(_++,Lt),n.set(_++,255)}break;default:throw"Invalid filter "+lt}}break;case 1:var Mt=h[2];if(8!=i.colbits)throw"Unsupported color mode";var Rt,zt=i.width;if(Rt=(Mt?4:3)*zt+1,s.length<i.height*Rt)throw"Not enough data";for(var Vt=0,Pt=i.height;Pt>Vt;){var Kt=Vt++,Ot=s.get(u++);switch(Ot){case 0:if(Mt)for(var Ft=0;zt>Ft;){{Ft++
}n.set(_++,s.b[u+2]),n.set(_++,s.b[u+1]),n.set(_++,s.b[u]),n.set(_++,s.b[u+3]),u+=4}else for(var Dt=0;zt>Dt;){{Dt++}n.set(_++,s.b[u+2]),n.set(_++,s.b[u+1]),n.set(_++,s.b[u]),n.set(_++,255),u+=3}break;case 1:var Ut=0,jt=0,Wt=0,Ht=0;if(Mt)for(var qt=0;zt>qt;){{qt++}Wt+=s.b[u+2],n.set(_++,Wt),jt+=s.b[u+1],n.set(_++,jt),Ut+=s.b[u],n.set(_++,Ut),Ht+=s.b[u+3],n.set(_++,Ht),u+=4}else for(var Xt=0;zt>Xt;){{Xt++}Wt+=s.b[u+2],n.set(_++,Wt),jt+=s.b[u+1],n.set(_++,jt),Ut+=s.b[u],n.set(_++,Ut),n.set(_++,255),u+=3}break;case 2:var Jt;if(Jt=0==Kt?0:4*zt,Mt)for(var Zt=0;zt>Zt;){{Zt++}n.b[_]=s.b[u+2]+n.b[_-Jt]&255,_++,n.b[_]=s.b[u+1]+n.b[_-Jt]&255,_++,n.b[_]=s.b[u]+n.b[_-Jt]&255,_++,n.b[_]=s.b[u+3]+n.b[_-Jt]&255,_++,u+=4}else for(var Yt=0;zt>Yt;){{Yt++}n.b[_]=s.b[u+2]+n.b[_-Jt]&255,_++,n.b[_]=s.b[u+1]+n.b[_-Jt]&255,_++,n.b[_]=s.b[u]+n.b[_-Jt]&255,_++,n.set(_++,255),u+=3}break;case 3:var Qt,$t=0,en=0,tn=0,nn=0;if(Qt=0==Kt?0:4*zt,Mt)for(var sn=0;zt>sn;){{sn++}tn=s.b[u+2]+(tn+n.b[_-Qt]>>1)&255,n.set(_++,tn),en=s.b[u+1]+(en+n.b[_-Qt]>>1)&255,n.set(_++,en),$t=s.b[u]+($t+n.b[_-Qt]>>1)&255,n.set(_++,$t),nn=s.b[u+3]+(nn+n.b[_-Qt]>>1)&255,n.set(_++,nn),u+=4}else for(var rn=0;zt>rn;){{rn++}tn=s.b[u+2]+(tn+n.b[_-Qt]>>1)&255,n.set(_++,tn),en=s.b[u+1]+(en+n.b[_-Qt]>>1)&255,n.set(_++,en),$t=s.b[u]+($t+n.b[_-Qt]>>1)&255,n.set(_++,$t),n.set(_++,255),u+=3}break;case 4:var on=4*zt,an=0,ln=0,un=0,_n=0;if(Mt)for(var hn=0;zt>hn;){var cn=hn++;un=b.utils.format.png.Tools.filter(n,cn,Kt,on,un,_,null)+s.b[u+2]&255,n.set(_++,un),ln=b.utils.format.png.Tools.filter(n,cn,Kt,on,ln,_,null)+s.b[u+1]&255,n.set(_++,ln),an=b.utils.format.png.Tools.filter(n,cn,Kt,on,an,_,null)+s.b[u]&255,n.set(_++,an),_n=b.utils.format.png.Tools.filter(n,cn,Kt,on,_n,_,null)+s.b[u+3]&255,n.set(_++,_n),u+=4}else for(var pn=0;zt>pn;){var dn=pn++;un=b.utils.format.png.Tools.filter(n,dn,Kt,on,un,_,null)+s.b[u+2]&255,n.set(_++,un),ln=b.utils.format.png.Tools.filter(n,dn,Kt,on,ln,_,null)+s.b[u+1]&255,n.set(_++,ln),an=b.utils.format.png.Tools.filter(n,dn,Kt,on,an,_,null)+s.b[u]&255,n.set(_++,an),n.set(_++,255),u+=3}break;default:throw"Invalid filter "+Ot}}}return n},b.utils.format.png.Tools.buildGrey=function(e,t,n){for(var i=w.io.Bytes.alloc(e*t+t),s=0,r=0,o=0;t>o;){{o++}i.set(s++,0);for(var l=0;e>l;){{l++}i.set(s++,n.get(r++))}}var u=new a;return u.add(b.utils.format.png.Chunk.CHeader({width:e,height:t,colbits:8,color:b.utils.format.png.Color.ColGrey(!1),interlaced:!1})),u.add(b.utils.format.png.Chunk.CData(b.utils.format.tools.Deflate.run(i))),u.add(b.utils.format.png.Chunk.CEnd),u},b.utils.format.png.Tools.buildRGB=function(e,t,n){for(var i=w.io.Bytes.alloc(e*t*3+t),s=0,r=0,o=0;t>o;){{o++}i.set(s++,0);for(var l=0;e>l;){{l++}i.set(s++,n.b[r+2]),i.set(s++,n.b[r+1]),i.set(s++,n.b[r]),r+=3}}var u=new a;return u.add(b.utils.format.png.Chunk.CHeader({width:e,height:t,colbits:8,color:b.utils.format.png.Color.ColTrue(!1),interlaced:!1})),u.add(b.utils.format.png.Chunk.CData(b.utils.format.tools.Deflate.run(i))),u.add(b.utils.format.png.Chunk.CEnd),u},b.utils.format.png.Tools.build32ARGB=function(e,t,n){for(var i=w.io.Bytes.alloc(e*t*4+t),s=0,r=0,o=0;t>o;){{o++}i.set(s++,0);for(var l=0;e>l;){{l++}i.set(s++,n.b[r+1]),i.set(s++,n.b[r+2]),i.set(s++,n.b[r+3]),i.set(s++,n.b[r]),r+=4}}var u=new a;return u.add(b.utils.format.png.Chunk.CHeader({width:e,height:t,colbits:8,color:b.utils.format.png.Color.ColTrue(!0),interlaced:!1})),u.add(b.utils.format.png.Chunk.CData(b.utils.format.tools.Deflate.run(i))),u.add(b.utils.format.png.Chunk.CEnd),u},b.utils.format.png.Tools.build32BGRA=function(e,t,n){for(var i=w.io.Bytes.alloc(e*t*4+t),s=0,r=0,o=0;t>o;){{o++}i.set(s++,0);for(var l=0;e>l;){{l++}i.set(s++,n.b[r+2]),i.set(s++,n.b[r+1]),i.set(s++,n.b[r]),i.set(s++,n.b[r+3]),r+=4}}var u=new a;return u.add(b.utils.format.png.Chunk.CHeader({width:e,height:t,colbits:8,color:b.utils.format.png.Color.ColTrue(!0),interlaced:!1})),u.add(b.utils.format.png.Chunk.CData(b.utils.format.tools.Deflate.run(i))),u.add(b.utils.format.png.Chunk.CEnd),u},b.utils.format.tools={},b.utils.format.tools.Adler32=function(){this.a1=1,this.a2=0},b.utils.format.tools.Adler32.__name__=!0,b.utils.format.tools.Adler32.read=function(e){var t=new b.utils.format.tools.Adler32,n=e.readByte(),i=e.readByte(),s=e.readByte(),r=e.readByte();return t.a1=s<<8|r,t.a2=n<<8|i,t},b.utils.format.tools.Adler32.prototype={a1:null,a2:null,update:function(e,t,n){for(var i=this.a1,s=this.a2,r=t,o=t+n;o>r;){var a=r++,l=e.b[a];i=(i+l)%65521,s=(s+i)%65521}this.a1=i,this.a2=s},equals:function(e){return e.a1==this.a1&&e.a2==this.a2},__class__:b.utils.format.tools.Adler32},b.utils.format.tools.Deflate=function(){},b.utils.format.tools.Deflate.__name__=!0,b.utils.format.tools.Deflate.run=function(){throw"Deflate is not supported on this platform"},b.utils.format.tools.Huffman={__ename__:!0,__constructs__:["Found","NeedBit","NeedBits"]},b.utils.format.tools.Huffman.Found=function(e){var t=["Found",0,e];return t.__enum__=b.utils.format.tools.Huffman,t.toString=i,t},b.utils.format.tools.Huffman.NeedBit=function(e,t){var n=["NeedBit",1,e,t];return n.__enum__=b.utils.format.tools.Huffman,n.toString=i,n},b.utils.format.tools.Huffman.NeedBits=function(e,t){var n=["NeedBits",2,e,t];return n.__enum__=b.utils.format.tools.Huffman,n.toString=i,n},b.utils.format.tools.HuffTools=function(){},b.utils.format.tools.HuffTools.__name__=!0,b.utils.format.tools.HuffTools.prototype={treeDepth:function(e){switch(e[1]){case 0:return 0;case 2:throw"assert";case 1:var t=e[3],n=e[2],i=this.treeDepth(n),s=this.treeDepth(t);return 1+(s>i?i:s)}},treeCompress:function(e){var t=this.treeDepth(e);if(0==t)return e;if(1==t)switch(e[1]){case 1:var n=e[3],i=e[2];return b.utils.format.tools.Huffman.NeedBit(this.treeCompress(i),this.treeCompress(n));default:throw"assert"}for(var s=1<<t,r=new Array,o=0;s>o;){{o++}r.push(b.utils.format.tools.Huffman.Found(-1))}return this.treeWalk(r,0,0,t,e),b.utils.format.tools.Huffman.NeedBits(t,r)},treeWalk:function(e,t,n,i,s){switch(s[1]){case 1:var r=s[3],o=s[2];i>0?(this.treeWalk(e,t,n+1,i-1,o),this.treeWalk(e,t|1<<n,n+1,i-1,r)):e[t]=this.treeCompress(s);break;default:e[t]=this.treeCompress(s)}},treeMake:function(e,t,n,i){if(i>t)throw"Invalid huffman";var s=n<<5|i;return e.exists(s)?b.utils.format.tools.Huffman.Found(e.get(s)):(n<<=1,i+=1,b.utils.format.tools.Huffman.NeedBit(this.treeMake(e,t,n,i),this.treeMake(e,t,1|n,i)))},make:function(e,t,n,i){var s=new Array,r=new Array;if(i>32)throw"Invalid huffman";for(var o=0;i>o;){{o++}s.push(0),r.push(0)}for(var a=0;n>a;){var l=a++,u=e[l+t];if(u>=i)throw"Invalid huffman";s[u]++}for(var _=0,h=1,c=i-1;c>h;){var p=h++;_=_+s[p]<<1,r[p]=_}for(var d=new w.ds.IntMap,m=0;n>m;){var f=m++,g=e[f+t];if(0!=g){var y=r[g-1];r[g-1]=y+1,d.set(y<<5|g,f)}}return this.treeCompress(b.utils.format.tools.Huffman.NeedBit(this.treeMake(d,i,0,1),this.treeMake(d,i,1,1)))},__class__:b.utils.format.tools.HuffTools},b.utils.format.tools.Inflate=function(){},b.utils.format.tools.Inflate.__name__=!0,b.utils.format.tools.Inflate.run=function(e){return b.utils.format.tools.InflateImpl.run(new w.io.BytesInput(e))},b.utils.format.tools._InflateImpl={},b.utils.format.tools._InflateImpl.Window=function(e){this.buffer=w.io.Bytes.alloc(65536),this.pos=0,e&&(this.crc=new b.utils.format.tools.Adler32)},b.utils.format.tools._InflateImpl.Window.__name__=!0,b.utils.format.tools._InflateImpl.Window.prototype={buffer:null,pos:null,crc:null,slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var e=w.io.Bytes.alloc(65536);this.pos-=32768,e.blit(0,this.buffer,32768,this.pos),this.buffer=e},addBytes:function(e,t,n){this.pos+n>65536&&this.slide(),this.buffer.blit(this.pos,e,t,n),this.pos+=n},addByte:function(e){65536==this.pos&&this.slide(),this.buffer.b[this.pos]=255&e,this.pos++},getLastChar:function(){return this.buffer.b[this.pos-1]},available:function(){return this.pos},checksum:function(){return null!=this.crc&&this.crc.update(this.buffer,0,this.pos),this.crc},__class__:b.utils.format.tools._InflateImpl.Window},b.utils.format.tools._InflateImpl.State={__ename__:!0,__constructs__:["Head","Block","CData","Flat","Crc","Dist","DistOne","Done"]},b.utils.format.tools._InflateImpl.State.Head=["Head",0],b.utils.format.tools._InflateImpl.State.Head.toString=i,b.utils.format.tools._InflateImpl.State.Head.__enum__=b.utils.format.tools._InflateImpl.State,b.utils.format.tools._InflateImpl.State.Block=["Block",1],b.utils.format.tools._InflateImpl.State.Block.toString=i,b.utils.format.tools._InflateImpl.State.Block.__enum__=b.utils.format.tools._InflateImpl.State,b.utils.format.tools._InflateImpl.State.CData=["CData",2],b.utils.format.tools._InflateImpl.State.CData.toString=i,b.utils.format.tools._InflateImpl.State.CData.__enum__=b.utils.format.tools._InflateImpl.State,b.utils.format.tools._InflateImpl.State.Flat=["Flat",3],b.utils.format.tools._InflateImpl.State.Flat.toString=i,b.utils.format.tools._InflateImpl.State.Flat.__enum__=b.utils.format.tools._InflateImpl.State,b.utils.format.tools._InflateImpl.State.Crc=["Crc",4],b.utils.format.tools._InflateImpl.State.Crc.toString=i,b.utils.format.tools._InflateImpl.State.Crc.__enum__=b.utils.format.tools._InflateImpl.State,b.utils.format.tools._InflateImpl.State.Dist=["Dist",5],b.utils.format.tools._InflateImpl.State.Dist.toString=i,b.utils.format.tools._InflateImpl.State.Dist.__enum__=b.utils.format.tools._InflateImpl.State,b.utils.format.tools._InflateImpl.State.DistOne=["DistOne",6],b.utils.format.tools._InflateImpl.State.DistOne.toString=i,b.utils.format.tools._InflateImpl.State.DistOne.__enum__=b.utils.format.tools._InflateImpl.State,b.utils.format.tools._InflateImpl.State.Done=["Done",7],b.utils.format.tools._InflateImpl.State.Done.toString=i,b.utils.format.tools._InflateImpl.State.Done.__enum__=b.utils.format.tools._InflateImpl.State,b.utils.format.tools.InflateImpl=function(e,t,n){null==n&&(n=!0),null==t&&(t=!0),this["final"]=!1,this.htools=new b.utils.format.tools.HuffTools,this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.len=0,this.dist=0,this.state=t?b.utils.format.tools._InflateImpl.State.Head:b.utils.format.tools._InflateImpl.State.Block,this.input=e,this.bits=0,this.nbits=0,this.needed=0,this.output=null,this.outpos=0,this.lengths=new Array;for(var i=0;19>i;){{i++}this.lengths.push(-1)}this.window=new b.utils.format.tools._InflateImpl.Window(n)},b.utils.format.tools.InflateImpl.__name__=!0,b.utils.format.tools.InflateImpl.run=function(e,t){null==t&&(t=65536);for(var n=w.io.Bytes.alloc(t),i=new w.io.BytesBuffer,s=new b.utils.format.tools.InflateImpl(e);;){var r=s.readBytes(n,0,t);if(i.addBytes(n,0,r),t>r)break}return i.getBytes()},b.utils.format.tools.InflateImpl.prototype={nbits:null,bits:null,state:null,"final":null,huffman:null,huffdist:null,htools:null,len:null,dist:null,needed:null,output:null,outpos:null,input:null,lengths:null,window:null,buildFixedHuffman:function(){if(null!=b.utils.format.tools.InflateImpl.FIXED_HUFFMAN)return b.utils.format.tools.InflateImpl.FIXED_HUFFMAN;for(var e=new Array,t=0;288>t;){var n=t++;e.push(143>=n?8:255>=n?9:279>=n?7:8)}return b.utils.format.tools.InflateImpl.FIXED_HUFFMAN=this.htools.make(e,0,288,10),b.utils.format.tools.InflateImpl.FIXED_HUFFMAN},readBytes:function(e,t,n){if(this.needed=n,this.outpos=t,this.output=e,n>0)for(;this.inflateLoop(););return n-this.needed},getBits:function(e){for(;this.nbits<e;)this.bits|=this.input.readByte()<<this.nbits,this.nbits+=8;var t=this.bits&(1<<e)-1;return this.nbits-=e,this.bits>>=e,t},getBit:function(){0==this.nbits&&(this.nbits=8,this.bits=this.input.readByte());var e=1==(1&this.bits);return this.nbits--,this.bits>>=1,e},getRevBits:function(e){return 0==e?0:this.getBit()?1<<e-1|this.getRevBits(e-1):this.getRevBits(e-1)},resetBits:function(){this.bits=0,this.nbits=0},addBytes:function(e,t,n){this.window.addBytes(e,t,n),this.output.blit(this.outpos,e,t,n),this.needed-=n,this.outpos+=n},addByte:function(e){this.window.addByte(e),this.output.b[this.outpos]=255&e,this.needed--,this.outpos++},addDistOne:function(e){for(var t=this.window.getLastChar(),n=0;e>n;){{n++}this.addByte(t)}},addDist:function(e,t){this.addBytes(this.window.buffer,this.window.pos-e,t)},applyHuffman:function(e){switch(e[1]){case 0:var t=e[2];return t;case 1:var n=e[3],i=e[2];return this.applyHuffman(this.getBit()?n:i);case 2:var s=e[3],r=e[2];return this.applyHuffman(s[this.getBits(r)])}},inflateLengths:function(e,t){for(var n=0,i=0;t>n;){var s=this.applyHuffman(this.huffman);switch(s){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:i=s,e[n]=s,n++;break;case 16:var r=n+3+this.getBits(2);if(r>t)throw"Invalid data";for(;r>n;)e[n]=i,n++;break;case 17:if(n+=3+this.getBits(3),n>t)throw"Invalid data";break;case 18:if(n+=11+this.getBits(7),n>t)throw"Invalid data";break;default:throw"Invalid data"}}},inflateLoop:function(){var e=this.state;switch(e[1]){case 0:var t=this.input.readByte(),n=15&t,i=t>>4;if(8!=n||7!=i)throw"Invalid data";var s=this.input.readByte(),r=0!=(32&s);if(((t<<8)+s)%31!=0)throw"Invalid data";if(r)throw"Unsupported dictionary";return this.state=b.utils.format.tools._InflateImpl.State.Block,!0;case 4:var o=this.window.checksum();if(null==o)return this.state=b.utils.format.tools._InflateImpl.State.Done,!0;var a=b.utils.format.tools.Adler32.read(this.input);if(!o.equals(a))throw"Invalid CRC";return this.state=b.utils.format.tools._InflateImpl.State.Done,!0;case 7:return!1;case 1:this["final"]=this.getBit();var l=this.getBits(2);switch(l){case 0:this.len=this.input.readUInt16();var u=this.input.readUInt16();if(u!=65535-this.len)throw"Invalid data";this.state=b.utils.format.tools._InflateImpl.State.Flat;var _=this.inflateLoop();return this.resetBits(),_;case 1:return this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.state=b.utils.format.tools._InflateImpl.State.CData,!0;case 2:for(var h=this.getBits(5)+257,c=this.getBits(5)+1,p=this.getBits(4)+4,d=0;p>d;){var m=d++;this.lengths[b.utils.format.tools.InflateImpl.CODE_LENGTHS_POS[m]]=this.getBits(3)}for(var f=p;19>f;){var g=f++;this.lengths[b.utils.format.tools.InflateImpl.CODE_LENGTHS_POS[g]]=0}this.huffman=this.htools.make(this.lengths,0,19,8);for(var y=new Array,w=0,v=h+c;v>w;){{w++}y.push(0)}return this.inflateLengths(y,h+c),this.huffdist=this.htools.make(y,h,c,16),this.huffman=this.htools.make(y,0,h,16),this.state=b.utils.format.tools._InflateImpl.State.CData,!0;default:throw"Invalid data"}break;case 3:var x;x=this.len<this.needed?this.len:this.needed;var S=this.input.read(x);return this.len-=x,this.addBytes(S,0,x),0==this.len&&(this.state=this["final"]?b.utils.format.tools._InflateImpl.State.Crc:b.utils.format.tools._InflateImpl.State.Block),this.needed>0;case 6:var T;return T=this.len<this.needed?this.len:this.needed,this.addDistOne(T),this.len-=T,0==this.len&&(this.state=b.utils.format.tools._InflateImpl.State.CData),this.needed>0;case 5:for(;this.len>0&&this.needed>0;){var E;E=this.len<this.dist?this.len:this.dist;var k;k=this.needed<E?this.needed:E,this.addDist(this.dist,k),this.len-=k}return 0==this.len&&(this.state=b.utils.format.tools._InflateImpl.State.CData),this.needed>0;case 2:var N=this.applyHuffman(this.huffman);if(256>N)return this.addByte(N),this.needed>0;if(256==N)return this.state=this["final"]?b.utils.format.tools._InflateImpl.State.Crc:b.utils.format.tools._InflateImpl.State.Block,!0;N-=257;var L=b.utils.format.tools.InflateImpl.LEN_EXTRA_BITS_TBL[N];if(-1==L)throw"Invalid data";this.len=b.utils.format.tools.InflateImpl.LEN_BASE_VAL_TBL[N]+this.getBits(L);var G;if(G=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist),L=b.utils.format.tools.InflateImpl.DIST_EXTRA_BITS_TBL[G],-1==L)throw"Invalid data";if(this.dist=b.utils.format.tools.InflateImpl.DIST_BASE_VAL_TBL[G]+this.getBits(L),this.dist>this.window.available())throw"Invalid data";return this.state=1==this.dist?b.utils.format.tools._InflateImpl.State.DistOne:b.utils.format.tools._InflateImpl.State.Dist,!0}},__class__:b.utils.format.tools.InflateImpl},b.window.Window=function(e,t){this.internal_resize=!1,this.internal_position=!1,this.minimized=!1,this.closed=!0,this.auto_render=!0,this.auto_swap=!0,this.fullscreen_desktop=!0,this.height=0,this.width=0,this.y=0,this.x=0,this.fullscreen=!1,this.grab=!1,this.bordered=!0,this.title="snow window",this.set_max_size({x:0,y:0}),this.set_min_size({x:0,y:0}),this.manager=e,this.asked_config=t,this.config=t,null==this.config.x&&(this.config.x=536805376),null==this.config.y&&(this.config.y=536805376),this.manager.platform.create(t,n(this,this.on_window_created))},b.window.Window.__name__=!0,b.window.Window.prototype={id:null,manager:null,asked_config:null,config:null,handle:null,onevent:null,onrender:null,title:null,bordered:null,grab:null,fullscreen:null,x:null,y:null,width:null,height:null,max_size:null,min_size:null,fullscreen_desktop:null,auto_swap:null,auto_render:null,closed:null,minimized:null,internal_position:null,internal_resize:null,on_window_created:function(e,t,n){return this.id=t,this.handle=e,null==this.handle?void w.Log.trace("   i / window / failed to create window",{fileName:"Window.hx",lineNumber:96,className:"snow.window.Window",methodName:"on_window_created"}):(this.closed=!1,this.config=n,this.internal_position=!0,this.set_x(n.x),this.set_y(n.y),this.internal_position=!1,this.internal_resize=!0,this.set_width(n.width),this.set_height(n.height),this.internal_resize=!1,void this.on_event({type:b.types.WindowEventType.window_created,window_id:t,timestamp:b.Snow.core.timestamp(),event:{}}))},on_event:function(e){var t=e.type;switch(t[1]){case 5:this.internal_position=!0,this.set_position(e.event.x,e.event.y),this.internal_position=!1;break;case 6:this.internal_resize=!0,this.set_size(e.event.x,e.event.y),this.internal_resize=!1;break;case 7:this.internal_resize=!0,this.set_size(e.event.x,e.event.y),this.internal_resize=!1;break;case 8:this.minimized=!0;break;case 10:this.minimized=!1}null!=this.onevent&&this.onevent(e)},update:function(){null==this.handle||this.closed||this.manager.platform.update(this)},render:function(){if(!this.minimized&&!this.closed&&null!=this.handle){if(this.manager.platform.render(this),null!=this.onrender)return this.onrender(this),void(this.auto_swap&&this.swap());b.platform.web.render.opengl.GL.clearColor(.8,.12,.12,1),b.platform.web.render.opengl.GL.clear(16384),this.auto_swap&&this.swap()}},swap:function(){null==this.handle||this.closed||this.minimized||this.manager.platform.swap(this)},destroy:function(){this.closed=!0,null!=this.handle&&(this.manager.remove(this),this.manager.platform.destroy_window(this),this.handle=null)},close:function(){this.closed=!0,null!=this.handle&&this.manager.platform.close(this)},show:function(){null!=this.handle&&(this.closed=!1,this.manager.platform.show(this))},simple_message:function(e,t){null==t&&(t=""),null!=this.handle&&this.manager.platform.simple_message(this,e,t)},get_fullscreen:function(){return this.fullscreen},set_fullscreen:function(e){return null!=this.handle&&this.manager.platform.fullscreen(this,e,this.fullscreen_desktop),this.fullscreen=e},get_bordered:function(){return this.bordered},get_grab:function(){return this.grab},get_max_size:function(){return this.max_size},get_min_size:function(){return this.min_size},get_title:function(){return this.title},set_title:function(e){return null!=this.handle&&this.manager.platform.set_title(this,e),this.title=e},set_x:function(e){return this.x=e,null==this.handle||this.internal_position||this.manager.platform.set_position(this,this.x,this.y),this.x},set_y:function(e){return this.y=e,null==this.handle||this.internal_position||this.manager.platform.set_position(this,this.x,this.y),this.y},set_width:function(e){return this.width=e,null==this.handle||this.internal_resize||this.manager.platform.set_size(this,this.width,this.height),this.width},set_height:function(e){return this.height=e,null==this.handle||this.internal_resize||this.manager.platform.set_size(this,this.width,this.height),this.height},set_cursor_position:function(e,t){null==this.handle||this.closed||this.manager.platform.set_cursor_position(this,e,t)},set_position:function(e,t){var n=this.internal_position;this.internal_position=!0,this.set_x(e),this.set_y(t),this.internal_position=n,null==this.handle||this.internal_position||this.manager.platform.set_position(this,this.x,this.y)},set_size:function(e,t){var n=this.internal_resize;this.internal_resize=!0,this.set_width(e),this.set_height(t),this.internal_resize=n,null==this.handle||this.internal_resize||this.manager.platform.set_size(this,e,t)},set_max_size:function(e){return null!=this.get_max_size()&&null!=this.handle&&this.manager.platform.set_max_size(this,e.x,e.y),this.max_size=e},set_min_size:function(e){return null!=this.get_min_size()&&null!=this.handle&&this.manager.platform.set_min_size(this,e.x,e.y),this.min_size=e},set_bordered:function(e){return null!=this.handle&&this.manager.platform.bordered(this,e),this.bordered=e},set_grab:function(e){return null!=this.handle&&this.manager.platform.grab(this,e),this.grab=e},__class__:b.window.Window,__properties__:{set_min_size:"set_min_size",get_min_size:"get_min_size",set_max_size:"set_max_size",get_max_size:"get_max_size",set_height:"set_height",set_width:"set_width",set_y:"set_y",set_x:"set_x",set_fullscreen:"set_fullscreen",get_fullscreen:"get_fullscreen",set_grab:"set_grab",get_grab:"get_grab",set_bordered:"set_bordered",get_bordered:"get_bordered",set_title:"set_title",get_title:"get_title"}},b.window.Windowing=function(e){this.window_count=0,this.lib=e,this.window_list=new w.ds.IntMap,this.window_handles=new w.ds.ObjectMap,this.platform=new b.platform.web.window.WindowSystem(this,this.lib),this.platform.init()},b.window.Windowing.__name__=!0,b.window.Windowing.prototype={window_list:null,window_handles:null,window_count:null,lib:null,platform:null,create:function(e){var t=new b.window.Window(this,e);return this.window_list.set(t.id,t),this.window_handles.set(t.handle,t.id),this.window_count++,this.platform.listen(t),(null==e.no_input||0==e.no_input)&&this.lib.input.listen(t),t},remove:function(e){this.window_list.remove(e.id),this.window_handles.remove(e.handle),this.window_count--,this.platform.unlisten(e),(null==e.config.no_input||0==e.config.no_input)&&this.lib.input.unlisten(e)},window_from_handle:function(e){if(null!=this.window_handles.h.__keys__[e.__id__]){var t=this.window_handles.h[e.__id__];return this.window_list.get(t)}return null},window_from_id:function(e){return this.window_list.get(e)},enable_vsync:function(e){return this.platform.system_enable_vsync(e)},enable_cursor:function(e){this.platform.system_enable_cursor(e)},enable_cursor_lock:function(e){this.platform.system_lock_cursor(e)},display_count:function(){return this.platform.display_count()},display_mode_count:function(e){return this.platform.display_mode_count(e)},display_native_mode:function(e){return this.platform.display_native_mode(e)},display_current_mode:function(e){return this.platform.display_current_mode(e)},display_mode:function(e,t){return this.platform.display_mode(e,t)},display_bounds:function(e){return this.platform.display_bounds(e)},display_name:function(e){return this.platform.display_name(e)},on_event:function(e){if(e.type==b.types.SystemEventType.window){var t=e.window;v.Boot.__instanceof(t.type,E)&&(t.type=b.types.WindowEvents.typed(t.type));var n=this.window_list.get(t.window_id);null!=n&&n.on_event(t)}},update:function(){this.platform.process();for(var e=this.window_list.iterator();e.hasNext();){var t=e.next();t.update()}for(var n=this.window_list.iterator();n.hasNext();){var i=n.next();i.auto_render&&i.render()}},destroy:function(){this.platform.destroy()},__class__:b.window.Windowing};var S,T=0;Array.prototype.indexOf&&(r.indexOf=function(e,t,n){return Array.prototype.indexOf.call(e,t,n)}),Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Math.isFinite=function(e){return isFinite(e)},Math.isNaN=function(e){return isNaN(e)},String.prototype.__class__=String,String.__name__=!0,Array.__name__=!0,Date.prototype.__class__=Date,Date.__name__=["Date"];var E={__name__:["Int"]},k={__name__:["Dynamic"]},N=Number;N.__name__=["Float"];var L=Boolean;L.__ename__=["Bool"];var G={__name__:["Class"]},A={};null==Array.prototype.filter&&(Array.prototype.filter=function(e){for(var t=[],n=0,i=this.length;i>n;){var s=n++,r=this[s];e(r)&&t.push(r)}return t}),w.Resource.content=[{name:"version",data:"MS4wLjAtYWxwaGEuMQ"},{name:"default.vert.glsl",data:"YXR0cmlidXRlIHZlYzMgdmVydGV4UG9zaXRpb247CmF0dHJpYnV0ZSB2ZWMyIHZlcnRleFRDb29yZDsKYXR0cmlidXRlIHZlYzQgdmVydGV4Q29sb3I7CmF0dHJpYnV0ZSB2ZWMzIHZlcnRleE5vcm1hbDsKCnZhcnlpbmcgdmVjMiB0Y29vcmQ7CnZhcnlpbmcgdmVjNCBjb2xvcjsKCnVuaWZvcm0gbWF0NCBwcm9qZWN0aW9uTWF0cml4Owp1bmlmb3JtIG1hdDQgbW9kZWxWaWV3TWF0cml4OwoKdm9pZCBtYWluKHZvaWQpIHsKCiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KHZlcnRleFBvc2l0aW9uLCAxLjApOwogICAgdGNvb3JkID0gdmVydGV4VENvb3JkOwogICAgY29sb3IgPSB2ZXJ0ZXhDb2xvcjsKICAgICAgICAvL2htbSEgSSB0aGluayBzaGFkZXJzIGFyZSBjb21waWxlZCBvcHRpbWlzZWQsIHJlbW92aW5nIHVudXNlZCB2YWx1ZXMgd2hpY2ggbWVhbnMKICAgICAgICAvL3RoYXQgdGhlIHNoYWRlcnMgZ2V0VmVydGV4Tm9ybWFsIGF0dHJpYnV0ZSByZXR1cm5zIGludmFsaWQgKC0xKSB2YWx1ZXMhCiAgICB2ZWMzIG4gPSB2ZXJ0ZXhOb3JtYWw7CiAgICAvLyBnbF9Qb2ludFNpemUgPSA1MTIuMDsKCn0"},{name:"build",data:"KzcyOTNhZjk2YTM"},{name:"default.frag.glsl",data:"dmFyeWluZyB2ZWMyIHRjb29yZDsKdmFyeWluZyB2ZWM0IGNvbG9yOwoKdm9pZCBtYWluKCkgewogICAgZ2xfRnJhZ0NvbG9yID0gY29sb3I7Cn0"},{name:"default.frag.textured.glsl",data:"dW5pZm9ybSBzYW1wbGVyMkQgdGV4MDsKdmFyeWluZyB2ZWMyIHRjb29yZDsKdmFyeWluZyB2ZWM0IGNvbG9yOwoKdm9pZCBtYWluKCkgewogICAgdmVjNCB0ZXhjb2xvciA9IHRleHR1cmUyRCh0ZXgwLCB0Y29vcmQpOwogICAgLy8gZmxvYXQgbHVtaW5vc2l0eSA9ICh0ZXhjb2xvci5yICsgdGV4Y29sb3IuZyArIHRleGNvbG9yLmIpIC8gMy4wOwogICAgLy8gdmVjNCBncmF5ID0gdmVjNChsdW1pbm9zaXR5LGx1bWlub3NpdHksbHVtaW5vc2l0eSwxKTsKICAgIC8vIHZlYzQgb2NvbG9yID0gdmVjNCh0ZXhjb2xvci5yLCB0ZXhjb2xvci5nLCB0ZXhjb2xvci5iLCAxKTsKICAgIC8vIHZlYzQgdXZjb2xvciA9IHZlYzQodGNvb3JkLngsIHRjb29yZC55LCAodGNvb3JkLngrdGNvb3JkLnkpKjIuMCwgMSk7CiAgICAvLyB2ZWM0IHdoaXRlID0gdmVjNCgxLCAxLCAxLCAwLjYpOwogICAgLy8gZ2xfRnJhZ0NvbG9yID0gZ3JheSAqICgodGNvb3JkLngrdGNvb3JkLnkpLzIuMCk7CiAgICBnbF9GcmFnQ29sb3IgPSBjb2xvciAqIHRleGNvbG9yOyAvL3ZlYzQoMCwwLjksMC42LDEpOyA7CiAgICAvLyBnbF9GcmFnQ29sb3IgPSB2ZWM0KGdsX1BvaW50Q29vcmQueCwgZ2xfUG9pbnRDb29yZC55LCAwLCAxKTsKICAgIC8vIHZlYzQgY2MgPSB1dmNvbG9yICogZ3JheTsKICAgIC8vIGdsX0ZyYWdDb2xvciA9IHRleGNvbG9yOwp9"}],l.version="dev",l.build="+7293af96a3",w.crypto.Base64.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w.crypto.Base64.BYTES=w.io.Bytes.ofString(w.crypto.Base64.CHARS),w.ds.ObjectMap.count=0,_.Core.core_tag_update="real dt",_.Core.core_tag_renderdt="render dt",_.Core.game_tag_update="game.update",_.Core.core_tag_render="core.render",_.Core.core_tag_debug="core.debug",_.Core.core_tag_updates="core.update_callbacks",_.Core.core_tag_events="core.events",_.Core.core_tag_audio="core.audio",_.Core.core_tag_input="core.input",_.Core.core_tag_timer="core.timer",_.Core.core_tag_scene="core.scene",_.Debug.shut_down=!1,_.Log._level=1,_.Log._log_width=16,_.Physics.tag_physics="physics",_.structural.BalancedBinarySearchTree.RED=!0,_.structural.BalancedBinarySearchTree.BLACK=!1,_.tween.actuators.SimpleActuator.actuators=new Array,_.tween.actuators.SimpleActuator.actuatorsLength=0,_.tween.actuators.SimpleActuator.addedEvent=!1,_.tween.actuators.SimpleActuator.update_timer=0,_.tween.actuators.SimpleActuator.current_time=0,_.tween.Actuate.defaultActuator=_.tween.actuators.SimpleActuator,_.tween.Actuate.defaultEase=_.tween.easing.Quad.get_easeOut(),_.tween.Actuate.targetLibraries=new w.ds.ObjectMap,_.utils.GeometryUtils.two_pi=6.283185307179586,_.utils.Maths.DEG2RAD=.017453292519943278,_.utils.Maths.RAD2DEG=57.29577951308238,_.utils.UUID.rule30=_.utils._UUID.Rule30.createWithLength(24),_.utils.UUID.hexChars="0123456789ABCDEF",x.geometry.Geometry._sequence_key=-1,b.Log._level=1,b.Log._log_width=16,b.input.Scancodes.MASK=1073741824,b.input.Scancodes.unknown=0,b.input.Scancodes.key_a=4,b.input.Scancodes.key_b=5,b.input.Scancodes.key_c=6,b.input.Scancodes.key_d=7,b.input.Scancodes.key_e=8,b.input.Scancodes.key_f=9,b.input.Scancodes.key_g=10,b.input.Scancodes.key_h=11,b.input.Scancodes.key_i=12,b.input.Scancodes.key_j=13,b.input.Scancodes.key_k=14,b.input.Scancodes.key_l=15,b.input.Scancodes.key_m=16,b.input.Scancodes.key_n=17,b.input.Scancodes.key_o=18,b.input.Scancodes.key_p=19,b.input.Scancodes.key_q=20,b.input.Scancodes.key_r=21,b.input.Scancodes.key_s=22,b.input.Scancodes.key_t=23,b.input.Scancodes.key_u=24,b.input.Scancodes.key_v=25,b.input.Scancodes.key_w=26,b.input.Scancodes.key_x=27,b.input.Scancodes.key_y=28,b.input.Scancodes.key_z=29,b.input.Scancodes.key_1=30,b.input.Scancodes.key_2=31,b.input.Scancodes.key_3=32,b.input.Scancodes.key_4=33,b.input.Scancodes.key_5=34,b.input.Scancodes.key_6=35,b.input.Scancodes.key_7=36,b.input.Scancodes.key_8=37,b.input.Scancodes.key_9=38,b.input.Scancodes.key_0=39,b.input.Scancodes.enter=40,b.input.Scancodes.escape=41,b.input.Scancodes.backspace=42,b.input.Scancodes.tab=43,b.input.Scancodes.space=44,b.input.Scancodes.minus=45,b.input.Scancodes.equals=46,b.input.Scancodes.leftbracket=47,b.input.Scancodes.rightbracket=48,b.input.Scancodes.backslash=49,b.input.Scancodes.nonushash=50,b.input.Scancodes.semicolon=51,b.input.Scancodes.apostrophe=52,b.input.Scancodes.grave=53,b.input.Scancodes.comma=54,b.input.Scancodes.period=55,b.input.Scancodes.slash=56,b.input.Scancodes.capslock=57,b.input.Scancodes.f1=58,b.input.Scancodes.f2=59,b.input.Scancodes.f3=60,b.input.Scancodes.f4=61,b.input.Scancodes.f5=62,b.input.Scancodes.f6=63,b.input.Scancodes.f7=64,b.input.Scancodes.f8=65,b.input.Scancodes.f9=66,b.input.Scancodes.f10=67,b.input.Scancodes.f11=68,b.input.Scancodes.f12=69,b.input.Scancodes.printscreen=70,b.input.Scancodes.scrolllock=71,b.input.Scancodes.pause=72,b.input.Scancodes.insert=73,b.input.Scancodes.home=74,b.input.Scancodes.pageup=75,b.input.Scancodes["delete"]=76,b.input.Scancodes.end=77,b.input.Scancodes.pagedown=78,b.input.Scancodes.right=79,b.input.Scancodes.left=80,b.input.Scancodes.down=81,b.input.Scancodes.up=82,b.input.Scancodes.numlockclear=83,b.input.Scancodes.kp_divide=84,b.input.Scancodes.kp_multiply=85,b.input.Scancodes.kp_minus=86,b.input.Scancodes.kp_plus=87,b.input.Scancodes.kp_enter=88,b.input.Scancodes.kp_1=89,b.input.Scancodes.kp_2=90,b.input.Scancodes.kp_3=91,b.input.Scancodes.kp_4=92,b.input.Scancodes.kp_5=93,b.input.Scancodes.kp_6=94,b.input.Scancodes.kp_7=95,b.input.Scancodes.kp_8=96,b.input.Scancodes.kp_9=97,b.input.Scancodes.kp_0=98,b.input.Scancodes.kp_period=99,b.input.Scancodes.nonusbackslash=100,b.input.Scancodes.application=101,b.input.Scancodes.power=102,b.input.Scancodes.kp_equals=103,b.input.Scancodes.f13=104,b.input.Scancodes.f14=105,b.input.Scancodes.f15=106,b.input.Scancodes.f16=107,b.input.Scancodes.f17=108,b.input.Scancodes.f18=109,b.input.Scancodes.f19=110,b.input.Scancodes.f20=111,b.input.Scancodes.f21=112,b.input.Scancodes.f22=113,b.input.Scancodes.f23=114,b.input.Scancodes.f24=115,b.input.Scancodes.execute=116,b.input.Scancodes.help=117,b.input.Scancodes.menu=118,b.input.Scancodes.select=119,b.input.Scancodes.stop=120,b.input.Scancodes.again=121,b.input.Scancodes.undo=122,b.input.Scancodes.cut=123,b.input.Scancodes.copy=124,b.input.Scancodes.paste=125,b.input.Scancodes.find=126,b.input.Scancodes.mute=127,b.input.Scancodes.volumeup=128,b.input.Scancodes.volumedown=129,b.input.Scancodes.kp_comma=133,b.input.Scancodes.kp_equalsas400=134,b.input.Scancodes.international1=135,b.input.Scancodes.international2=136,b.input.Scancodes.international3=137,b.input.Scancodes.international4=138,b.input.Scancodes.international5=139,b.input.Scancodes.international6=140,b.input.Scancodes.international7=141,b.input.Scancodes.international8=142,b.input.Scancodes.international9=143,b.input.Scancodes.lang1=144,b.input.Scancodes.lang2=145,b.input.Scancodes.lang3=146,b.input.Scancodes.lang4=147,b.input.Scancodes.lang5=148,b.input.Scancodes.lang6=149,b.input.Scancodes.lang7=150,b.input.Scancodes.lang8=151,b.input.Scancodes.lang9=152,b.input.Scancodes.alterase=153,b.input.Scancodes.sysreq=154,b.input.Scancodes.cancel=155,b.input.Scancodes.clear=156,b.input.Scancodes.prior=157,b.input.Scancodes.return2=158,b.input.Scancodes.separator=159,b.input.Scancodes.out=160,b.input.Scancodes.oper=161,b.input.Scancodes.clearagain=162,b.input.Scancodes.crsel=163,b.input.Scancodes.exsel=164,b.input.Scancodes.kp_00=176,b.input.Scancodes.kp_000=177,b.input.Scancodes.thousandsseparator=178,b.input.Scancodes.decimalseparator=179,b.input.Scancodes.currencyunit=180,b.input.Scancodes.currencysubunit=181,b.input.Scancodes.kp_leftparen=182,b.input.Scancodes.kp_rightparen=183,b.input.Scancodes.kp_leftbrace=184,b.input.Scancodes.kp_rightbrace=185,b.input.Scancodes.kp_tab=186,b.input.Scancodes.kp_backspace=187,b.input.Scancodes.kp_a=188,b.input.Scancodes.kp_b=189,b.input.Scancodes.kp_c=190,b.input.Scancodes.kp_d=191,b.input.Scancodes.kp_e=192,b.input.Scancodes.kp_f=193,b.input.Scancodes.kp_xor=194,b.input.Scancodes.kp_power=195,b.input.Scancodes.kp_percent=196,b.input.Scancodes.kp_less=197,b.input.Scancodes.kp_greater=198,b.input.Scancodes.kp_ampersand=199,b.input.Scancodes.kp_dblampersand=200,b.input.Scancodes.kp_verticalbar=201,b.input.Scancodes.kp_dblverticalbar=202,b.input.Scancodes.kp_colon=203,b.input.Scancodes.kp_hash=204,b.input.Scancodes.kp_space=205,b.input.Scancodes.kp_at=206,b.input.Scancodes.kp_exclam=207,b.input.Scancodes.kp_memstore=208,b.input.Scancodes.kp_memrecall=209,b.input.Scancodes.kp_memclear=210,b.input.Scancodes.kp_memadd=211,b.input.Scancodes.kp_memsubtract=212,b.input.Scancodes.kp_memmultiply=213,b.input.Scancodes.kp_memdivide=214,b.input.Scancodes.kp_plusminus=215,b.input.Scancodes.kp_clear=216,b.input.Scancodes.kp_clearentry=217,b.input.Scancodes.kp_binary=218,b.input.Scancodes.kp_octal=219,b.input.Scancodes.kp_decimal=220,b.input.Scancodes.kp_hexadecimal=221,b.input.Scancodes.lctrl=224,b.input.Scancodes.lshift=225,b.input.Scancodes.lalt=226,b.input.Scancodes.lmeta=227,b.input.Scancodes.rctrl=228,b.input.Scancodes.rshift=229,b.input.Scancodes.ralt=230,b.input.Scancodes.rmeta=231,b.input.Scancodes.mode=257,b.input.Scancodes.audionext=258,b.input.Scancodes.audioprev=259,b.input.Scancodes.audiostop=260,b.input.Scancodes.audioplay=261,b.input.Scancodes.audiomute=262,b.input.Scancodes.mediaselect=263,b.input.Scancodes.www=264,b.input.Scancodes.mail=265,b.input.Scancodes.calculator=266,b.input.Scancodes.computer=267,b.input.Scancodes.ac_search=268,b.input.Scancodes.ac_home=269,b.input.Scancodes.ac_back=270,b.input.Scancodes.ac_forward=271,b.input.Scancodes.ac_stop=272,b.input.Scancodes.ac_refresh=273,b.input.Scancodes.ac_bookmarks=274,b.input.Scancodes.brightnessdown=275,b.input.Scancodes.brightnessup=276,b.input.Scancodes.displayswitch=277,b.input.Scancodes.kbdillumtoggle=278,b.input.Scancodes.kbdillumdown=279,b.input.Scancodes.kbdillumup=280,b.input.Scancodes.eject=281,b.input.Scancodes.sleep=282,b.input.Scancodes.app1=283,b.input.Scancodes.app2=284,b.input.Scancodes.scancode_names=[null,null,null,null,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9","0","Enter","Escape","Backspace","Tab","Space","-","=","[","]","\\","#",";","'","`",",",".","/","CapsLock","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","PrintScreen","ScrollLock","Pause","Insert","Home","PageUp","Delete","End","PageDown","Right","Left","Down","Up","Numlock","Keypad /","Keypad *","Keypad -","Keypad +","Keypad Enter","Keypad 1","Keypad 2","Keypad 3","Keypad 4","Keypad 5","Keypad 6","Keypad 7","Keypad 8","Keypad 9","Keypad 0","Keypad .",null,"Application","Power","Keypad =","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","Execute","Help","Menu","Select","Stop","Again","Undo","Cut","Copy","Paste","Find","Mute","VolumeUp","VolumeDown",null,null,null,"Keypad ,","Keypad = (AS400)",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"AltErase","SysReq","Cancel","Clear","Prior","Enter","Separator","Out","Oper","Clear / Again","CrSel","ExSel",null,null,null,null,null,null,null,null,null,null,null,"Keypad 00","Keypad 000","ThousandsSeparator","DecimalSeparator","CurrencyUnit","CurrencySubUnit","Keypad (","Keypad )","Keypad {","Keypad }","Keypad Tab","Keypad Backspace","Keypad A","Keypad B","Keypad C","Keypad D","Keypad E","Keypad F","Keypad XOR","Keypad ^","Keypad %","Keypad <","Keypad >","Keypad &","Keypad &&","Keypad |","Keypad ||","Keypad :","Keypad #","Keypad Space","Keypad @","Keypad !","Keypad MemStore","Keypad MemRecall","Keypad MemClear","Keypad MemAdd","Keypad MemSubtract","Keypad MemMultiply","Keypad MemDivide","Keypad +/-","Keypad Clear","Keypad ClearEntry","Keypad Binary","Keypad Octal","Keypad Decimal","Keypad Hexadecimal",null,null,"Left Ctrl","Left Shift","Left Alt","Left GUI","Right Ctrl","Right Shift","Right Alt","Right GUI",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"ModeSwitch","AudioNext","AudioPrev","AudioStop","AudioPlay","AudioMute","MediaSelect","WWW","Mail","Calculator","Computer","AC Search","AC Home","AC Back","AC Forward","AC Stop","AC Refresh","AC Bookmarks","BrightnessDown","BrightnessUp","DisplaySwitch","KBDIllumToggle","KBDIllumDown","KBDIllumUp","Eject","Sleep"],b.input.Keycodes.unknown=0,b.input.Keycodes.enter=13,b.input.Keycodes.escape=27,b.input.Keycodes.backspace=8,b.input.Keycodes.tab=9,b.input.Keycodes.space=32,b.input.Keycodes.exclaim=33,b.input.Keycodes.quotedbl=34,b.input.Keycodes.hash=35,b.input.Keycodes.percent=37,b.input.Keycodes.dollar=36,b.input.Keycodes.ampersand=38,b.input.Keycodes.quote=39,b.input.Keycodes.leftparen=40,b.input.Keycodes.rightparen=41,b.input.Keycodes.asterisk=42,b.input.Keycodes.plus=43,b.input.Keycodes.comma=44,b.input.Keycodes.minus=45,b.input.Keycodes.period=46,b.input.Keycodes.slash=47,b.input.Keycodes.key_0=48,b.input.Keycodes.key_1=49,b.input.Keycodes.key_2=50,b.input.Keycodes.key_3=51,b.input.Keycodes.key_4=52,b.input.Keycodes.key_5=53,b.input.Keycodes.key_6=54,b.input.Keycodes.key_7=55,b.input.Keycodes.key_8=56,b.input.Keycodes.key_9=57,b.input.Keycodes.colon=58,b.input.Keycodes.semicolon=59,b.input.Keycodes.less=60,b.input.Keycodes.equals=61,b.input.Keycodes.greater=62,b.input.Keycodes.question=63,b.input.Keycodes.at=64,b.input.Keycodes.leftbracket=91,b.input.Keycodes.backslash=92,b.input.Keycodes.rightbracket=93,b.input.Keycodes.caret=94,b.input.Keycodes.underscore=95,b.input.Keycodes.backquote=96,b.input.Keycodes.key_a=97,b.input.Keycodes.key_b=98,b.input.Keycodes.key_c=99,b.input.Keycodes.key_d=100,b.input.Keycodes.key_e=101,b.input.Keycodes.key_f=102,b.input.Keycodes.key_g=103,b.input.Keycodes.key_h=104,b.input.Keycodes.key_i=105,b.input.Keycodes.key_j=106,b.input.Keycodes.key_k=107,b.input.Keycodes.key_l=108,b.input.Keycodes.key_m=109,b.input.Keycodes.key_n=110,b.input.Keycodes.key_o=111,b.input.Keycodes.key_p=112,b.input.Keycodes.key_q=113,b.input.Keycodes.key_r=114,b.input.Keycodes.key_s=115,b.input.Keycodes.key_t=116,b.input.Keycodes.key_u=117,b.input.Keycodes.key_v=118,b.input.Keycodes.key_w=119,b.input.Keycodes.key_x=120,b.input.Keycodes.key_y=121,b.input.Keycodes.key_z=122,b.input.Keycodes.capslock=b.input.Keycodes.from_scan(b.input.Scancodes.capslock),b.input.Keycodes.f1=b.input.Keycodes.from_scan(b.input.Scancodes.f1),b.input.Keycodes.f2=b.input.Keycodes.from_scan(b.input.Scancodes.f2),b.input.Keycodes.f3=b.input.Keycodes.from_scan(b.input.Scancodes.f3),b.input.Keycodes.f4=b.input.Keycodes.from_scan(b.input.Scancodes.f4),b.input.Keycodes.f5=b.input.Keycodes.from_scan(b.input.Scancodes.f5),b.input.Keycodes.f6=b.input.Keycodes.from_scan(b.input.Scancodes.f6),b.input.Keycodes.f7=b.input.Keycodes.from_scan(b.input.Scancodes.f7),b.input.Keycodes.f8=b.input.Keycodes.from_scan(b.input.Scancodes.f8),b.input.Keycodes.f9=b.input.Keycodes.from_scan(b.input.Scancodes.f9),b.input.Keycodes.f10=b.input.Keycodes.from_scan(b.input.Scancodes.f10),b.input.Keycodes.f11=b.input.Keycodes.from_scan(b.input.Scancodes.f11),b.input.Keycodes.f12=b.input.Keycodes.from_scan(b.input.Scancodes.f12),b.input.Keycodes.printscreen=b.input.Keycodes.from_scan(b.input.Scancodes.printscreen),b.input.Keycodes.scrolllock=b.input.Keycodes.from_scan(b.input.Scancodes.scrolllock),b.input.Keycodes.pause=b.input.Keycodes.from_scan(b.input.Scancodes.pause),b.input.Keycodes.insert=b.input.Keycodes.from_scan(b.input.Scancodes.insert),b.input.Keycodes.home=b.input.Keycodes.from_scan(b.input.Scancodes.home),b.input.Keycodes.pageup=b.input.Keycodes.from_scan(b.input.Scancodes.pageup),b.input.Keycodes["delete"]=127,b.input.Keycodes.end=b.input.Keycodes.from_scan(b.input.Scancodes.end),b.input.Keycodes.pagedown=b.input.Keycodes.from_scan(b.input.Scancodes.pagedown),b.input.Keycodes.right=b.input.Keycodes.from_scan(b.input.Scancodes.right),b.input.Keycodes.left=b.input.Keycodes.from_scan(b.input.Scancodes.left),b.input.Keycodes.down=b.input.Keycodes.from_scan(b.input.Scancodes.down),b.input.Keycodes.up=b.input.Keycodes.from_scan(b.input.Scancodes.up),b.input.Keycodes.numlockclear=b.input.Keycodes.from_scan(b.input.Scancodes.numlockclear),b.input.Keycodes.kp_divide=b.input.Keycodes.from_scan(b.input.Scancodes.kp_divide),b.input.Keycodes.kp_multiply=b.input.Keycodes.from_scan(b.input.Scancodes.kp_multiply),b.input.Keycodes.kp_minus=b.input.Keycodes.from_scan(b.input.Scancodes.kp_minus),b.input.Keycodes.kp_plus=b.input.Keycodes.from_scan(b.input.Scancodes.kp_plus),b.input.Keycodes.kp_enter=b.input.Keycodes.from_scan(b.input.Scancodes.kp_enter),b.input.Keycodes.kp_1=b.input.Keycodes.from_scan(b.input.Scancodes.kp_1),b.input.Keycodes.kp_2=b.input.Keycodes.from_scan(b.input.Scancodes.kp_2),b.input.Keycodes.kp_3=b.input.Keycodes.from_scan(b.input.Scancodes.kp_3),b.input.Keycodes.kp_4=b.input.Keycodes.from_scan(b.input.Scancodes.kp_4),b.input.Keycodes.kp_5=b.input.Keycodes.from_scan(b.input.Scancodes.kp_5),b.input.Keycodes.kp_6=b.input.Keycodes.from_scan(b.input.Scancodes.kp_6),b.input.Keycodes.kp_7=b.input.Keycodes.from_scan(b.input.Scancodes.kp_7),b.input.Keycodes.kp_8=b.input.Keycodes.from_scan(b.input.Scancodes.kp_8),b.input.Keycodes.kp_9=b.input.Keycodes.from_scan(b.input.Scancodes.kp_9),b.input.Keycodes.kp_0=b.input.Keycodes.from_scan(b.input.Scancodes.kp_0),b.input.Keycodes.kp_period=b.input.Keycodes.from_scan(b.input.Scancodes.kp_period),b.input.Keycodes.application=b.input.Keycodes.from_scan(b.input.Scancodes.application),b.input.Keycodes.power=b.input.Keycodes.from_scan(b.input.Scancodes.power),b.input.Keycodes.kp_equals=b.input.Keycodes.from_scan(b.input.Scancodes.kp_equals),b.input.Keycodes.f13=b.input.Keycodes.from_scan(b.input.Scancodes.f13),b.input.Keycodes.f14=b.input.Keycodes.from_scan(b.input.Scancodes.f14),b.input.Keycodes.f15=b.input.Keycodes.from_scan(b.input.Scancodes.f15),b.input.Keycodes.f16=b.input.Keycodes.from_scan(b.input.Scancodes.f16),b.input.Keycodes.f17=b.input.Keycodes.from_scan(b.input.Scancodes.f17),b.input.Keycodes.f18=b.input.Keycodes.from_scan(b.input.Scancodes.f18),b.input.Keycodes.f19=b.input.Keycodes.from_scan(b.input.Scancodes.f19),b.input.Keycodes.f20=b.input.Keycodes.from_scan(b.input.Scancodes.f20),b.input.Keycodes.f21=b.input.Keycodes.from_scan(b.input.Scancodes.f21),b.input.Keycodes.f22=b.input.Keycodes.from_scan(b.input.Scancodes.f22),b.input.Keycodes.f23=b.input.Keycodes.from_scan(b.input.Scancodes.f23),b.input.Keycodes.f24=b.input.Keycodes.from_scan(b.input.Scancodes.f24),b.input.Keycodes.execute=b.input.Keycodes.from_scan(b.input.Scancodes.execute),b.input.Keycodes.help=b.input.Keycodes.from_scan(b.input.Scancodes.help),b.input.Keycodes.menu=b.input.Keycodes.from_scan(b.input.Scancodes.menu),b.input.Keycodes.select=b.input.Keycodes.from_scan(b.input.Scancodes.select),b.input.Keycodes.stop=b.input.Keycodes.from_scan(b.input.Scancodes.stop),b.input.Keycodes.again=b.input.Keycodes.from_scan(b.input.Scancodes.again),b.input.Keycodes.undo=b.input.Keycodes.from_scan(b.input.Scancodes.undo),b.input.Keycodes.cut=b.input.Keycodes.from_scan(b.input.Scancodes.cut),b.input.Keycodes.copy=b.input.Keycodes.from_scan(b.input.Scancodes.copy),b.input.Keycodes.paste=b.input.Keycodes.from_scan(b.input.Scancodes.paste),b.input.Keycodes.find=b.input.Keycodes.from_scan(b.input.Scancodes.find),b.input.Keycodes.mute=b.input.Keycodes.from_scan(b.input.Scancodes.mute),b.input.Keycodes.volumeup=b.input.Keycodes.from_scan(b.input.Scancodes.volumeup),b.input.Keycodes.volumedown=b.input.Keycodes.from_scan(b.input.Scancodes.volumedown),b.input.Keycodes.kp_comma=b.input.Keycodes.from_scan(b.input.Scancodes.kp_comma),b.input.Keycodes.kp_equalsas400=b.input.Keycodes.from_scan(b.input.Scancodes.kp_equalsas400),b.input.Keycodes.alterase=b.input.Keycodes.from_scan(b.input.Scancodes.alterase),b.input.Keycodes.sysreq=b.input.Keycodes.from_scan(b.input.Scancodes.sysreq),b.input.Keycodes.cancel=b.input.Keycodes.from_scan(b.input.Scancodes.cancel),b.input.Keycodes.clear=b.input.Keycodes.from_scan(b.input.Scancodes.clear),b.input.Keycodes.prior=b.input.Keycodes.from_scan(b.input.Scancodes.prior),b.input.Keycodes.return2=b.input.Keycodes.from_scan(b.input.Scancodes.return2),b.input.Keycodes.separator=b.input.Keycodes.from_scan(b.input.Scancodes.separator),b.input.Keycodes.out=b.input.Keycodes.from_scan(b.input.Scancodes.out),b.input.Keycodes.oper=b.input.Keycodes.from_scan(b.input.Scancodes.oper),b.input.Keycodes.clearagain=b.input.Keycodes.from_scan(b.input.Scancodes.clearagain),b.input.Keycodes.crsel=b.input.Keycodes.from_scan(b.input.Scancodes.crsel),b.input.Keycodes.exsel=b.input.Keycodes.from_scan(b.input.Scancodes.exsel),b.input.Keycodes.kp_00=b.input.Keycodes.from_scan(b.input.Scancodes.kp_00),b.input.Keycodes.kp_000=b.input.Keycodes.from_scan(b.input.Scancodes.kp_000),b.input.Keycodes.thousandsseparator=b.input.Keycodes.from_scan(b.input.Scancodes.thousandsseparator),b.input.Keycodes.decimalseparator=b.input.Keycodes.from_scan(b.input.Scancodes.decimalseparator),b.input.Keycodes.currencyunit=b.input.Keycodes.from_scan(b.input.Scancodes.currencyunit),b.input.Keycodes.currencysubunit=b.input.Keycodes.from_scan(b.input.Scancodes.currencysubunit),b.input.Keycodes.kp_leftparen=b.input.Keycodes.from_scan(b.input.Scancodes.kp_leftparen),b.input.Keycodes.kp_rightparen=b.input.Keycodes.from_scan(b.input.Scancodes.kp_rightparen),b.input.Keycodes.kp_leftbrace=b.input.Keycodes.from_scan(b.input.Scancodes.kp_leftbrace),b.input.Keycodes.kp_rightbrace=b.input.Keycodes.from_scan(b.input.Scancodes.kp_rightbrace),b.input.Keycodes.kp_tab=b.input.Keycodes.from_scan(b.input.Scancodes.kp_tab),b.input.Keycodes.kp_backspace=b.input.Keycodes.from_scan(b.input.Scancodes.kp_backspace),b.input.Keycodes.kp_a=b.input.Keycodes.from_scan(b.input.Scancodes.kp_a),b.input.Keycodes.kp_b=b.input.Keycodes.from_scan(b.input.Scancodes.kp_b),b.input.Keycodes.kp_c=b.input.Keycodes.from_scan(b.input.Scancodes.kp_c),b.input.Keycodes.kp_d=b.input.Keycodes.from_scan(b.input.Scancodes.kp_d),b.input.Keycodes.kp_e=b.input.Keycodes.from_scan(b.input.Scancodes.kp_e),b.input.Keycodes.kp_f=b.input.Keycodes.from_scan(b.input.Scancodes.kp_f),b.input.Keycodes.kp_xor=b.input.Keycodes.from_scan(b.input.Scancodes.kp_xor),b.input.Keycodes.kp_power=b.input.Keycodes.from_scan(b.input.Scancodes.kp_power),b.input.Keycodes.kp_percent=b.input.Keycodes.from_scan(b.input.Scancodes.kp_percent),b.input.Keycodes.kp_less=b.input.Keycodes.from_scan(b.input.Scancodes.kp_less),b.input.Keycodes.kp_greater=b.input.Keycodes.from_scan(b.input.Scancodes.kp_greater),b.input.Keycodes.kp_ampersand=b.input.Keycodes.from_scan(b.input.Scancodes.kp_ampersand),b.input.Keycodes.kp_dblampersand=b.input.Keycodes.from_scan(b.input.Scancodes.kp_dblampersand),b.input.Keycodes.kp_verticalbar=b.input.Keycodes.from_scan(b.input.Scancodes.kp_verticalbar),b.input.Keycodes.kp_dblverticalbar=b.input.Keycodes.from_scan(b.input.Scancodes.kp_dblverticalbar),b.input.Keycodes.kp_colon=b.input.Keycodes.from_scan(b.input.Scancodes.kp_colon),b.input.Keycodes.kp_hash=b.input.Keycodes.from_scan(b.input.Scancodes.kp_hash),b.input.Keycodes.kp_space=b.input.Keycodes.from_scan(b.input.Scancodes.kp_space),b.input.Keycodes.kp_at=b.input.Keycodes.from_scan(b.input.Scancodes.kp_at),b.input.Keycodes.kp_exclam=b.input.Keycodes.from_scan(b.input.Scancodes.kp_exclam),b.input.Keycodes.kp_memstore=b.input.Keycodes.from_scan(b.input.Scancodes.kp_memstore),b.input.Keycodes.kp_memrecall=b.input.Keycodes.from_scan(b.input.Scancodes.kp_memrecall),b.input.Keycodes.kp_memclear=b.input.Keycodes.from_scan(b.input.Scancodes.kp_memclear),b.input.Keycodes.kp_memadd=b.input.Keycodes.from_scan(b.input.Scancodes.kp_memadd),b.input.Keycodes.kp_memsubtract=b.input.Keycodes.from_scan(b.input.Scancodes.kp_memsubtract),b.input.Keycodes.kp_memmultiply=b.input.Keycodes.from_scan(b.input.Scancodes.kp_memmultiply),b.input.Keycodes.kp_memdivide=b.input.Keycodes.from_scan(b.input.Scancodes.kp_memdivide),b.input.Keycodes.kp_plusminus=b.input.Keycodes.from_scan(b.input.Scancodes.kp_plusminus),b.input.Keycodes.kp_clear=b.input.Keycodes.from_scan(b.input.Scancodes.kp_clear),b.input.Keycodes.kp_clearentry=b.input.Keycodes.from_scan(b.input.Scancodes.kp_clearentry),b.input.Keycodes.kp_binary=b.input.Keycodes.from_scan(b.input.Scancodes.kp_binary),b.input.Keycodes.kp_octal=b.input.Keycodes.from_scan(b.input.Scancodes.kp_octal),b.input.Keycodes.kp_decimal=b.input.Keycodes.from_scan(b.input.Scancodes.kp_decimal),b.input.Keycodes.kp_hexadecimal=b.input.Keycodes.from_scan(b.input.Scancodes.kp_hexadecimal),b.input.Keycodes.lctrl=b.input.Keycodes.from_scan(b.input.Scancodes.lctrl),b.input.Keycodes.lshift=b.input.Keycodes.from_scan(b.input.Scancodes.lshift),b.input.Keycodes.lalt=b.input.Keycodes.from_scan(b.input.Scancodes.lalt),b.input.Keycodes.lmeta=b.input.Keycodes.from_scan(b.input.Scancodes.lmeta),b.input.Keycodes.rctrl=b.input.Keycodes.from_scan(b.input.Scancodes.rctrl),b.input.Keycodes.rshift=b.input.Keycodes.from_scan(b.input.Scancodes.rshift),b.input.Keycodes.ralt=b.input.Keycodes.from_scan(b.input.Scancodes.ralt),b.input.Keycodes.rmeta=b.input.Keycodes.from_scan(b.input.Scancodes.rmeta),b.input.Keycodes.mode=b.input.Keycodes.from_scan(b.input.Scancodes.mode),b.input.Keycodes.audionext=b.input.Keycodes.from_scan(b.input.Scancodes.audionext),b.input.Keycodes.audioprev=b.input.Keycodes.from_scan(b.input.Scancodes.audioprev),b.input.Keycodes.audiostop=b.input.Keycodes.from_scan(b.input.Scancodes.audiostop),b.input.Keycodes.audioplay=b.input.Keycodes.from_scan(b.input.Scancodes.audioplay),b.input.Keycodes.audiomute=b.input.Keycodes.from_scan(b.input.Scancodes.audiomute),b.input.Keycodes.mediaselect=b.input.Keycodes.from_scan(b.input.Scancodes.mediaselect),b.input.Keycodes.www=b.input.Keycodes.from_scan(b.input.Scancodes.www),b.input.Keycodes.mail=b.input.Keycodes.from_scan(b.input.Scancodes.mail),b.input.Keycodes.calculator=b.input.Keycodes.from_scan(b.input.Scancodes.calculator),b.input.Keycodes.computer=b.input.Keycodes.from_scan(b.input.Scancodes.computer),b.input.Keycodes.ac_search=b.input.Keycodes.from_scan(b.input.Scancodes.ac_search),b.input.Keycodes.ac_home=b.input.Keycodes.from_scan(b.input.Scancodes.ac_home),b.input.Keycodes.ac_back=b.input.Keycodes.from_scan(b.input.Scancodes.ac_back),b.input.Keycodes.ac_forward=b.input.Keycodes.from_scan(b.input.Scancodes.ac_forward),b.input.Keycodes.ac_stop=b.input.Keycodes.from_scan(b.input.Scancodes.ac_stop),b.input.Keycodes.ac_refresh=b.input.Keycodes.from_scan(b.input.Scancodes.ac_refresh),b.input.Keycodes.ac_bookmarks=b.input.Keycodes.from_scan(b.input.Scancodes.ac_bookmarks),b.input.Keycodes.brightnessdown=b.input.Keycodes.from_scan(b.input.Scancodes.brightnessdown),b.input.Keycodes.brightnessup=b.input.Keycodes.from_scan(b.input.Scancodes.brightnessup),b.input.Keycodes.displayswitch=b.input.Keycodes.from_scan(b.input.Scancodes.displayswitch),b.input.Keycodes.kbdillumtoggle=b.input.Keycodes.from_scan(b.input.Scancodes.kbdillumtoggle),b.input.Keycodes.kbdillumdown=b.input.Keycodes.from_scan(b.input.Scancodes.kbdillumdown),b.input.Keycodes.kbdillumup=b.input.Keycodes.from_scan(b.input.Scancodes.kbdillumup),b.input.Keycodes.eject=b.input.Keycodes.from_scan(b.input.Scancodes.eject),b.input.Keycodes.sleep=b.input.Keycodes.from_scan(b.input.Scancodes.sleep),b.platform.web.render.opengl.GL.DEPTH_BUFFER_BIT=256,b.platform.web.render.opengl.GL.STENCIL_BUFFER_BIT=1024,b.platform.web.render.opengl.GL.COLOR_BUFFER_BIT=16384,b.platform.web.render.opengl.GL.POINTS=0,b.platform.web.render.opengl.GL.LINES=1,b.platform.web.render.opengl.GL.LINE_LOOP=2,b.platform.web.render.opengl.GL.LINE_STRIP=3,b.platform.web.render.opengl.GL.TRIANGLES=4,b.platform.web.render.opengl.GL.TRIANGLE_STRIP=5,b.platform.web.render.opengl.GL.TRIANGLE_FAN=6,b.platform.web.render.opengl.GL.ZERO=0,b.platform.web.render.opengl.GL.ONE=1,b.platform.web.render.opengl.GL.SRC_COLOR=768,b.platform.web.render.opengl.GL.ONE_MINUS_SRC_COLOR=769,b.platform.web.render.opengl.GL.SRC_ALPHA=770,b.platform.web.render.opengl.GL.ONE_MINUS_SRC_ALPHA=771,b.platform.web.render.opengl.GL.DST_ALPHA=772,b.platform.web.render.opengl.GL.ONE_MINUS_DST_ALPHA=773,b.platform.web.render.opengl.GL.DST_COLOR=774,b.platform.web.render.opengl.GL.ONE_MINUS_DST_COLOR=775,b.platform.web.render.opengl.GL.SRC_ALPHA_SATURATE=776,b.platform.web.render.opengl.GL.FUNC_ADD=32774,b.platform.web.render.opengl.GL.BLEND_EQUATION=32777,b.platform.web.render.opengl.GL.BLEND_EQUATION_RGB=32777,b.platform.web.render.opengl.GL.BLEND_EQUATION_ALPHA=34877,b.platform.web.render.opengl.GL.FUNC_SUBTRACT=32778,b.platform.web.render.opengl.GL.FUNC_REVERSE_SUBTRACT=32779,b.platform.web.render.opengl.GL.BLEND_DST_RGB=32968,b.platform.web.render.opengl.GL.BLEND_SRC_RGB=32969,b.platform.web.render.opengl.GL.BLEND_DST_ALPHA=32970,b.platform.web.render.opengl.GL.BLEND_SRC_ALPHA=32971,b.platform.web.render.opengl.GL.CONSTANT_COLOR=32769,b.platform.web.render.opengl.GL.ONE_MINUS_CONSTANT_COLOR=32770,b.platform.web.render.opengl.GL.CONSTANT_ALPHA=32771,b.platform.web.render.opengl.GL.ONE_MINUS_CONSTANT_ALPHA=32772,b.platform.web.render.opengl.GL.BLEND_COLOR=32773,b.platform.web.render.opengl.GL.ARRAY_BUFFER=34962,b.platform.web.render.opengl.GL.ELEMENT_ARRAY_BUFFER=34963,b.platform.web.render.opengl.GL.ARRAY_BUFFER_BINDING=34964,b.platform.web.render.opengl.GL.ELEMENT_ARRAY_BUFFER_BINDING=34965,b.platform.web.render.opengl.GL.STREAM_DRAW=35040,b.platform.web.render.opengl.GL.STATIC_DRAW=35044,b.platform.web.render.opengl.GL.DYNAMIC_DRAW=35048,b.platform.web.render.opengl.GL.BUFFER_SIZE=34660,b.platform.web.render.opengl.GL.BUFFER_USAGE=34661,b.platform.web.render.opengl.GL.CURRENT_VERTEX_ATTRIB=34342,b.platform.web.render.opengl.GL.FRONT=1028,b.platform.web.render.opengl.GL.BACK=1029,b.platform.web.render.opengl.GL.FRONT_AND_BACK=1032,b.platform.web.render.opengl.GL.CULL_FACE=2884,b.platform.web.render.opengl.GL.BLEND=3042,b.platform.web.render.opengl.GL.DITHER=3024,b.platform.web.render.opengl.GL.STENCIL_TEST=2960,b.platform.web.render.opengl.GL.DEPTH_TEST=2929,b.platform.web.render.opengl.GL.SCISSOR_TEST=3089,b.platform.web.render.opengl.GL.POLYGON_OFFSET_FILL=32823,b.platform.web.render.opengl.GL.SAMPLE_ALPHA_TO_COVERAGE=32926,b.platform.web.render.opengl.GL.SAMPLE_COVERAGE=32928,b.platform.web.render.opengl.GL.NO_ERROR=0,b.platform.web.render.opengl.GL.INVALID_ENUM=1280,b.platform.web.render.opengl.GL.INVALID_VALUE=1281,b.platform.web.render.opengl.GL.INVALID_OPERATION=1282,b.platform.web.render.opengl.GL.OUT_OF_MEMORY=1285,b.platform.web.render.opengl.GL.CW=2304,b.platform.web.render.opengl.GL.CCW=2305,b.platform.web.render.opengl.GL.LINE_WIDTH=2849,b.platform.web.render.opengl.GL.ALIASED_POINT_SIZE_RANGE=33901,b.platform.web.render.opengl.GL.ALIASED_LINE_WIDTH_RANGE=33902,b.platform.web.render.opengl.GL.CULL_FACE_MODE=2885,b.platform.web.render.opengl.GL.FRONT_FACE=2886,b.platform.web.render.opengl.GL.DEPTH_RANGE=2928,b.platform.web.render.opengl.GL.DEPTH_WRITEMASK=2930,b.platform.web.render.opengl.GL.DEPTH_CLEAR_VALUE=2931,b.platform.web.render.opengl.GL.DEPTH_FUNC=2932,b.platform.web.render.opengl.GL.STENCIL_CLEAR_VALUE=2961,b.platform.web.render.opengl.GL.STENCIL_FUNC=2962,b.platform.web.render.opengl.GL.STENCIL_FAIL=2964,b.platform.web.render.opengl.GL.STENCIL_PASS_DEPTH_FAIL=2965,b.platform.web.render.opengl.GL.STENCIL_PASS_DEPTH_PASS=2966,b.platform.web.render.opengl.GL.STENCIL_REF=2967,b.platform.web.render.opengl.GL.STENCIL_VALUE_MASK=2963,b.platform.web.render.opengl.GL.STENCIL_WRITEMASK=2968,b.platform.web.render.opengl.GL.STENCIL_BACK_FUNC=34816,b.platform.web.render.opengl.GL.STENCIL_BACK_FAIL=34817,b.platform.web.render.opengl.GL.STENCIL_BACK_PASS_DEPTH_FAIL=34818,b.platform.web.render.opengl.GL.STENCIL_BACK_PASS_DEPTH_PASS=34819,b.platform.web.render.opengl.GL.STENCIL_BACK_REF=36003,b.platform.web.render.opengl.GL.STENCIL_BACK_VALUE_MASK=36004,b.platform.web.render.opengl.GL.STENCIL_BACK_WRITEMASK=36005,b.platform.web.render.opengl.GL.VIEWPORT=2978,b.platform.web.render.opengl.GL.SCISSOR_BOX=3088,b.platform.web.render.opengl.GL.COLOR_CLEAR_VALUE=3106,b.platform.web.render.opengl.GL.COLOR_WRITEMASK=3107,b.platform.web.render.opengl.GL.UNPACK_ALIGNMENT=3317,b.platform.web.render.opengl.GL.PACK_ALIGNMENT=3333,b.platform.web.render.opengl.GL.MAX_TEXTURE_SIZE=3379,b.platform.web.render.opengl.GL.MAX_VIEWPORT_DIMS=3386,b.platform.web.render.opengl.GL.SUBPIXEL_BITS=3408,b.platform.web.render.opengl.GL.RED_BITS=3410,b.platform.web.render.opengl.GL.GREEN_BITS=3411,b.platform.web.render.opengl.GL.BLUE_BITS=3412,b.platform.web.render.opengl.GL.ALPHA_BITS=3413,b.platform.web.render.opengl.GL.DEPTH_BITS=3414,b.platform.web.render.opengl.GL.STENCIL_BITS=3415,b.platform.web.render.opengl.GL.POLYGON_OFFSET_UNITS=10752,b.platform.web.render.opengl.GL.POLYGON_OFFSET_FACTOR=32824,b.platform.web.render.opengl.GL.TEXTURE_BINDING_2D=32873,b.platform.web.render.opengl.GL.SAMPLE_BUFFERS=32936,b.platform.web.render.opengl.GL.SAMPLES=32937,b.platform.web.render.opengl.GL.SAMPLE_COVERAGE_VALUE=32938,b.platform.web.render.opengl.GL.SAMPLE_COVERAGE_INVERT=32939,b.platform.web.render.opengl.GL.COMPRESSED_TEXTURE_FORMATS=34467,b.platform.web.render.opengl.GL.DONT_CARE=4352,b.platform.web.render.opengl.GL.FASTEST=4353,b.platform.web.render.opengl.GL.NICEST=4354,b.platform.web.render.opengl.GL.GENERATE_MIPMAP_HINT=33170,b.platform.web.render.opengl.GL.BYTE=5120,b.platform.web.render.opengl.GL.UNSIGNED_BYTE=5121,b.platform.web.render.opengl.GL.SHORT=5122,b.platform.web.render.opengl.GL.UNSIGNED_SHORT=5123,b.platform.web.render.opengl.GL.INT=5124,b.platform.web.render.opengl.GL.UNSIGNED_INT=5125,b.platform.web.render.opengl.GL.FLOAT=5126,b.platform.web.render.opengl.GL.DEPTH_COMPONENT=6402,b.platform.web.render.opengl.GL.ALPHA=6406,b.platform.web.render.opengl.GL.RGB=6407,b.platform.web.render.opengl.GL.RGBA=6408,b.platform.web.render.opengl.GL.LUMINANCE=6409,b.platform.web.render.opengl.GL.LUMINANCE_ALPHA=6410,b.platform.web.render.opengl.GL.UNSIGNED_SHORT_4_4_4_4=32819,b.platform.web.render.opengl.GL.UNSIGNED_SHORT_5_5_5_1=32820,b.platform.web.render.opengl.GL.UNSIGNED_SHORT_5_6_5=33635,b.platform.web.render.opengl.GL.FRAGMENT_SHADER=35632,b.platform.web.render.opengl.GL.VERTEX_SHADER=35633,b.platform.web.render.opengl.GL.MAX_VERTEX_ATTRIBS=34921,b.platform.web.render.opengl.GL.MAX_VERTEX_UNIFORM_VECTORS=36347,b.platform.web.render.opengl.GL.MAX_VARYING_VECTORS=36348,b.platform.web.render.opengl.GL.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,b.platform.web.render.opengl.GL.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,b.platform.web.render.opengl.GL.MAX_TEXTURE_IMAGE_UNITS=34930,b.platform.web.render.opengl.GL.MAX_FRAGMENT_UNIFORM_VECTORS=36349,b.platform.web.render.opengl.GL.SHADER_TYPE=35663,b.platform.web.render.opengl.GL.DELETE_STATUS=35712,b.platform.web.render.opengl.GL.LINK_STATUS=35714,b.platform.web.render.opengl.GL.VALIDATE_STATUS=35715,b.platform.web.render.opengl.GL.ATTACHED_SHADERS=35717,b.platform.web.render.opengl.GL.ACTIVE_UNIFORMS=35718,b.platform.web.render.opengl.GL.ACTIVE_ATTRIBUTES=35721,b.platform.web.render.opengl.GL.SHADING_LANGUAGE_VERSION=35724,b.platform.web.render.opengl.GL.CURRENT_PROGRAM=35725,b.platform.web.render.opengl.GL.NEVER=512,b.platform.web.render.opengl.GL.LESS=513,b.platform.web.render.opengl.GL.EQUAL=514,b.platform.web.render.opengl.GL.LEQUAL=515,b.platform.web.render.opengl.GL.GREATER=516,b.platform.web.render.opengl.GL.NOTEQUAL=517,b.platform.web.render.opengl.GL.GEQUAL=518,b.platform.web.render.opengl.GL.ALWAYS=519,b.platform.web.render.opengl.GL.KEEP=7680,b.platform.web.render.opengl.GL.REPLACE=7681,b.platform.web.render.opengl.GL.INCR=7682,b.platform.web.render.opengl.GL.DECR=7683,b.platform.web.render.opengl.GL.INVERT=5386,b.platform.web.render.opengl.GL.INCR_WRAP=34055,b.platform.web.render.opengl.GL.DECR_WRAP=34056,b.platform.web.render.opengl.GL.VENDOR=7936,b.platform.web.render.opengl.GL.RENDERER=7937,b.platform.web.render.opengl.GL.VERSION=7938,b.platform.web.render.opengl.GL.NEAREST=9728,b.platform.web.render.opengl.GL.LINEAR=9729,b.platform.web.render.opengl.GL.NEAREST_MIPMAP_NEAREST=9984,b.platform.web.render.opengl.GL.LINEAR_MIPMAP_NEAREST=9985,b.platform.web.render.opengl.GL.NEAREST_MIPMAP_LINEAR=9986,b.platform.web.render.opengl.GL.LINEAR_MIPMAP_LINEAR=9987,b.platform.web.render.opengl.GL.TEXTURE_MAG_FILTER=10240,b.platform.web.render.opengl.GL.TEXTURE_MIN_FILTER=10241,b.platform.web.render.opengl.GL.TEXTURE_WRAP_S=10242,b.platform.web.render.opengl.GL.TEXTURE_WRAP_T=10243,b.platform.web.render.opengl.GL.TEXTURE_2D=3553,b.platform.web.render.opengl.GL.TEXTURE=5890,b.platform.web.render.opengl.GL.TEXTURE_CUBE_MAP=34067,b.platform.web.render.opengl.GL.TEXTURE_BINDING_CUBE_MAP=34068,b.platform.web.render.opengl.GL.TEXTURE_CUBE_MAP_POSITIVE_X=34069,b.platform.web.render.opengl.GL.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,b.platform.web.render.opengl.GL.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,b.platform.web.render.opengl.GL.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,b.platform.web.render.opengl.GL.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,b.platform.web.render.opengl.GL.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,b.platform.web.render.opengl.GL.MAX_CUBE_MAP_TEXTURE_SIZE=34076,b.platform.web.render.opengl.GL.TEXTURE0=33984,b.platform.web.render.opengl.GL.TEXTURE1=33985,b.platform.web.render.opengl.GL.TEXTURE2=33986,b.platform.web.render.opengl.GL.TEXTURE3=33987,b.platform.web.render.opengl.GL.TEXTURE4=33988,b.platform.web.render.opengl.GL.TEXTURE5=33989,b.platform.web.render.opengl.GL.TEXTURE6=33990,b.platform.web.render.opengl.GL.TEXTURE7=33991,b.platform.web.render.opengl.GL.TEXTURE8=33992,b.platform.web.render.opengl.GL.TEXTURE9=33993,b.platform.web.render.opengl.GL.TEXTURE10=33994,b.platform.web.render.opengl.GL.TEXTURE11=33995,b.platform.web.render.opengl.GL.TEXTURE12=33996,b.platform.web.render.opengl.GL.TEXTURE13=33997,b.platform.web.render.opengl.GL.TEXTURE14=33998,b.platform.web.render.opengl.GL.TEXTURE15=33999,b.platform.web.render.opengl.GL.TEXTURE16=34e3,b.platform.web.render.opengl.GL.TEXTURE17=34001,b.platform.web.render.opengl.GL.TEXTURE18=34002,b.platform.web.render.opengl.GL.TEXTURE19=34003,b.platform.web.render.opengl.GL.TEXTURE20=34004,b.platform.web.render.opengl.GL.TEXTURE21=34005,b.platform.web.render.opengl.GL.TEXTURE22=34006,b.platform.web.render.opengl.GL.TEXTURE23=34007,b.platform.web.render.opengl.GL.TEXTURE24=34008,b.platform.web.render.opengl.GL.TEXTURE25=34009,b.platform.web.render.opengl.GL.TEXTURE26=34010,b.platform.web.render.opengl.GL.TEXTURE27=34011,b.platform.web.render.opengl.GL.TEXTURE28=34012,b.platform.web.render.opengl.GL.TEXTURE29=34013,b.platform.web.render.opengl.GL.TEXTURE30=34014,b.platform.web.render.opengl.GL.TEXTURE31=34015,b.platform.web.render.opengl.GL.ACTIVE_TEXTURE=34016,b.platform.web.render.opengl.GL.REPEAT=10497,b.platform.web.render.opengl.GL.CLAMP_TO_EDGE=33071,b.platform.web.render.opengl.GL.MIRRORED_REPEAT=33648,b.platform.web.render.opengl.GL.FLOAT_VEC2=35664,b.platform.web.render.opengl.GL.FLOAT_VEC3=35665,b.platform.web.render.opengl.GL.FLOAT_VEC4=35666,b.platform.web.render.opengl.GL.INT_VEC2=35667,b.platform.web.render.opengl.GL.INT_VEC3=35668,b.platform.web.render.opengl.GL.INT_VEC4=35669,b.platform.web.render.opengl.GL.BOOL=35670,b.platform.web.render.opengl.GL.BOOL_VEC2=35671,b.platform.web.render.opengl.GL.BOOL_VEC3=35672,b.platform.web.render.opengl.GL.BOOL_VEC4=35673,b.platform.web.render.opengl.GL.FLOAT_MAT2=35674,b.platform.web.render.opengl.GL.FLOAT_MAT3=35675,b.platform.web.render.opengl.GL.FLOAT_MAT4=35676,b.platform.web.render.opengl.GL.SAMPLER_2D=35678,b.platform.web.render.opengl.GL.SAMPLER_CUBE=35680,b.platform.web.render.opengl.GL.VERTEX_ATTRIB_ARRAY_ENABLED=34338,b.platform.web.render.opengl.GL.VERTEX_ATTRIB_ARRAY_SIZE=34339,b.platform.web.render.opengl.GL.VERTEX_ATTRIB_ARRAY_STRIDE=34340,b.platform.web.render.opengl.GL.VERTEX_ATTRIB_ARRAY_TYPE=34341,b.platform.web.render.opengl.GL.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,b.platform.web.render.opengl.GL.VERTEX_ATTRIB_ARRAY_POINTER=34373,b.platform.web.render.opengl.GL.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,b.platform.web.render.opengl.GL.VERTEX_PROGRAM_POINT_SIZE=34370,b.platform.web.render.opengl.GL.POINT_SPRITE=34913,b.platform.web.render.opengl.GL.COMPILE_STATUS=35713,b.platform.web.render.opengl.GL.LOW_FLOAT=36336,b.platform.web.render.opengl.GL.MEDIUM_FLOAT=36337,b.platform.web.render.opengl.GL.HIGH_FLOAT=36338,b.platform.web.render.opengl.GL.LOW_INT=36339,b.platform.web.render.opengl.GL.MEDIUM_INT=36340,b.platform.web.render.opengl.GL.HIGH_INT=36341,b.platform.web.render.opengl.GL.FRAMEBUFFER=36160,b.platform.web.render.opengl.GL.RENDERBUFFER=36161,b.platform.web.render.opengl.GL.RGBA4=32854,b.platform.web.render.opengl.GL.RGB5_A1=32855,b.platform.web.render.opengl.GL.RGB565=36194,b.platform.web.render.opengl.GL.DEPTH_COMPONENT16=33189,b.platform.web.render.opengl.GL.STENCIL_INDEX=6401,b.platform.web.render.opengl.GL.STENCIL_INDEX8=36168,b.platform.web.render.opengl.GL.DEPTH_STENCIL=34041,b.platform.web.render.opengl.GL.RENDERBUFFER_WIDTH=36162,b.platform.web.render.opengl.GL.RENDERBUFFER_HEIGHT=36163,b.platform.web.render.opengl.GL.RENDERBUFFER_INTERNAL_FORMAT=36164,b.platform.web.render.opengl.GL.RENDERBUFFER_RED_SIZE=36176,b.platform.web.render.opengl.GL.RENDERBUFFER_GREEN_SIZE=36177,b.platform.web.render.opengl.GL.RENDERBUFFER_BLUE_SIZE=36178,b.platform.web.render.opengl.GL.RENDERBUFFER_ALPHA_SIZE=36179,b.platform.web.render.opengl.GL.RENDERBUFFER_DEPTH_SIZE=36180,b.platform.web.render.opengl.GL.RENDERBUFFER_STENCIL_SIZE=36181,b.platform.web.render.opengl.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,b.platform.web.render.opengl.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,b.platform.web.render.opengl.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,b.platform.web.render.opengl.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,b.platform.web.render.opengl.GL.COLOR_ATTACHMENT0=36064,b.platform.web.render.opengl.GL.DEPTH_ATTACHMENT=36096,b.platform.web.render.opengl.GL.STENCIL_ATTACHMENT=36128,b.platform.web.render.opengl.GL.DEPTH_STENCIL_ATTACHMENT=33306,b.platform.web.render.opengl.GL.NONE=0,b.platform.web.render.opengl.GL.FRAMEBUFFER_COMPLETE=36053,b.platform.web.render.opengl.GL.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,b.platform.web.render.opengl.GL.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,b.platform.web.render.opengl.GL.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,b.platform.web.render.opengl.GL.FRAMEBUFFER_UNSUPPORTED=36061,b.platform.web.render.opengl.GL.FRAMEBUFFER_BINDING=36006,b.platform.web.render.opengl.GL.RENDERBUFFER_BINDING=36007,b.platform.web.render.opengl.GL.MAX_RENDERBUFFER_SIZE=34024,b.platform.web.render.opengl.GL.INVALID_FRAMEBUFFER_OPERATION=1286,b.platform.web.render.opengl.GL.UNPACK_FLIP_Y_WEBGL=37440,b.platform.web.render.opengl.GL.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,b.platform.web.render.opengl.GL.CONTEXT_LOST_WEBGL=37442,b.platform.web.render.opengl.GL.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,b.platform.web.render.opengl.GL.BROWSER_DEFAULT_WEBGL=37444,b.platform.web.utils.ByteArray.BIG_ENDIAN="bigEndian",b.platform.web.utils.ByteArray.LITTLE_ENDIAN="littleEndian",b.types.SystemEvents.se_unknown=0,b.types.SystemEvents.se_init=1,b.types.SystemEvents.se_ready=2,b.types.SystemEvents.se_update=3,b.types.SystemEvents.se_shutdown=4,b.types.SystemEvents.se_window=5,b.types.SystemEvents.se_input=6,b.types.SystemEvents.se_quit=7,b.types.SystemEvents.se_app_terminating=8,b.types.SystemEvents.se_app_lowmemory=9,b.types.SystemEvents.se_app_willenterbackground=10,b.types.SystemEvents.se_app_didenterbackground=11,b.types.SystemEvents.se_app_willenterforeground=12,b.types.SystemEvents.se_app_didenterforeground=13,b.types.SystemEvents.se_file=14,b.types.WindowEvents.we_unknown=0,b.types.WindowEvents.we_created=1,b.types.WindowEvents.we_shown=2,b.types.WindowEvents.we_hidden=3,b.types.WindowEvents.we_exposed=4,b.types.WindowEvents.we_moved=5,b.types.WindowEvents.we_resized=6,b.types.WindowEvents.we_size_changed=7,b.types.WindowEvents.we_minimized=8,b.types.WindowEvents.we_maximized=9,b.types.WindowEvents.we_restored=10,b.types.WindowEvents.we_enter=11,b.types.WindowEvents.we_leave=12,b.types.WindowEvents.we_focus_gained=13,b.types.WindowEvents.we_focus_lost=14,b.types.WindowEvents.we_close=15,b.types.WindowEvents.we_destroy=16,b.types.InputEvents.ie_unknown=0,b.types.InputEvents.ie_key=1,b.types.InputEvents.ie_mouse=2,b.types.InputEvents.ie_touch=3,b.types.InputEvents.ie_joystick=4,b.types.InputEvents.ie_controller=5,b.types.FileEvents.fe_unknown=0,b.types.FileEvents.fe_modify=1,b.types.FileEvents.fe_remove=2,b.types.FileEvents.fe_create=3,b.types.FileEvents.fe_drop=4,b.utils.Timer.running_timers=[],b.utils.format.tools._InflateImpl.Window.SIZE=32768,b.utils.format.tools._InflateImpl.Window.BUFSIZE=65536,b.utils.format.tools.InflateImpl.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1],b.utils.format.tools.InflateImpl.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],b.utils.format.tools.InflateImpl.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1],b.utils.format.tools.InflateImpl.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],b.utils.format.tools.InflateImpl.CODE_LENGTHS_POS=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u.main()
}();