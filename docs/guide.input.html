<!DOCTYPE html>
<html>
    
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link rel="shortcut icon" href="./images/favicon.png" />

        <link rel="stylesheet" type="text/css" href="./css/style.css" media="all">
        <link rel="stylesheet" type="text/css" href="./css/code.css" media="all">
        <link rel="stylesheet" type="text/css" href="./css/font.css" media="all">
        
        <script src="./js/jquery-2.0.3.min.js"> </script>

        <script>

            $(document).ready(function() {

                $('.section').css('display','none');
                $('.readmore').click(function(e){
                    var _child = $(this).parent().find('.section').first();
                    var _opp = 'block';
                    if( _child.css('display') == 'block' ) {
                        _opp = 'none';
                        $(this).text('more ...');
                    } else {
                        $(this).text('less ...');
                    }
                    _child.css('display', _opp);
                });

                $('div.sample').on('click', function(e){
                        //get the data tag
                    var content = $(this).attr('data-content');
                        //remove clicking handler
                    $(this).off('click');
                        //replace the content!
                    $(this).html('<iframe src="'+content+'" sandbox="allow-same-origin allow-scripts" style="overflow:hidden; scrollbar:none; border: 0; width:645px; height:450px;"></iframe> ')
                });

            }); //document.ready

        </script>
    </head>

    <body>
        <div class="content">
            <p><a href="index.html"><img src="http://luxeengine.com/images/logo.png" alt="Logo"></a></p>
<h3 id="-to-the-prev-guide-guide-sprites-html-"><a href="guide.sprites.html">To the prev guide</a></h3>
<h3 id="-to-the-next-guide-guide-basiccomponents-html-"><a href="guide.basiccomponents.html">To the next guide</a></h3>
<h3 id="-view-all-guides-guide-html-"><a href="guide.html">View all guides</a></h3>
<hr>
<h2 id="handling-input-in-luxe">Handling input in luxe</h2>
<p><em>This tutorial assumes you are familiar with the basics of <a href="guide.gettingstarted.html">getting started with luxe</a>, and <a href="guide.sprites.html">displaying stuff</a> on screen.</em></p>
<h3 id="different-types-of-input">Different types of input</h3>
<hr>
<p>Luxe supports all common types of input out of the box:</p>
<ul>
<li>Touch/Multitouch input (on mobile devices)</li>
<li>Mouse input</li>
<li>Gamepad/Joystick input</li>
<li>Keyboard input</li>
</ul>
<h3 id="accessing-input-events">Accessing input events</h3>
<hr>
<p>Your Game class has a bunch of functions that can (and will) be called when an event happens. The reason that this is a function (and not say, an event) is because a function call is immediate.</p>
<p>As soon as luxe obtains an input event from the system it will immediately call your code to handle it. This is to avoid unnessary delays in handling touches or key/gamepad press and minimize latency when making games.</p>
<h3 id="the-specific-event-types">The specific event types</h3>
<hr>
<p>Each type of event have a typed event structure, for the details of the event.<br>For example, here is a touch event :</p>
<pre><code><div class="highlight"><pre><span class="kd">typedef</span> <span class="nc">TouchEvent</span> <span class="p">=</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="vi">state</span> <span class="p">:</span> <span class="nc">TouchState</span><span class="p">;</span>
    <span class="kd">var</span> <span class="vi">flags</span> <span class="p">:</span> <span class="nc">Int</span><span class="p">;</span>
    <span class="kd">var</span> <span class="vi">ID</span> <span class="p">:</span> <span class="nc">Int</span><span class="p">;</span>
    <span class="kd">var</span> <span class="vi">x</span> <span class="p">:</span> <span class="nc">Float</span><span class="p">;</span>
    <span class="kd">var</span> <span class="vi">y</span> <span class="p">:</span> <span class="nc">Float</span><span class="p">;</span>
    <span class="kd">var</span> <span class="vi">raw</span> <span class="p">:</span> <span class="nc">Dynamic</span><span class="p">;</span>
<span class="p">}</span><span class="err">;</span>
</pre></div>

</code></pre><p>You may also note the <code>raw</code> property.<br>Sometimes you need to know some value from the OS/platform that luxe is not explicitly exposing.</p>
<p>For this purpose all of the events (MouseEvent, TouchEvent, GamepadEvent, KeyEvent) pass a property through the event object.
This is the exact event structure, untouched, low level (you can use <code>trace(event.raw)</code> to dump it’s contents.</p>
<h2 id="named-input">Named input</h2>
<hr>
<p>Sometimes it is convenient to bind multiple events to the same piece of code. Sometimes a person playing the game will want to use W/A/S/D and sometimes they would prefer the arrow keys. The combinations of sensible defaults for this can quickly escalate.</p>
<p>It is always useful to be able to refer to an input binding by name (rather than the exact key) for things like customisable key binding screens.</p>
<p>For these reasons, luxe offers a named input binding system, where multiple events (even of different types) can be bound to a single spot, so you can handle them accordingly.</p>
<p>Let’s use a common example where the jump key might be Z, Space, and Right Mouse.</p>
<pre><code><div class="highlight"><pre><span class="err">Luxe.input.add(&#39;jump&#39;,</span> <span class="err">KeyValue.key_Z);</span>
<span class="err">Luxe.input.add(&#39;jump&#39;,</span> <span class="err">KeyValue.space);</span>
<span class="err">Luxe.input.add(&#39;jump&#39;,</span> <span class="err">MouseButton.right);</span>
</pre></div>

</code></pre><h3 id="handling-the-named-input">handling the named input</h3>
<hr>
<p>Now that you have the named input bound, you can listen for the event using <code>oninputdown</code> or <code>oninputup</code>.</p>
<pre><code><div class="highlight"><pre><span class="kd">public</span> <span class="err">function</span> <span class="err">oninputup(</span> <span class="err">event_name:String,</span> <span class="err">event:InputEvent</span> <span class="err">)</span> <span class="err">{</span>

    <span class="err">switch(</span> <span class="err">event_name</span> <span class="err">)</span> <span class="err">{</span>
        <span class="err">case</span> <span class="err">&#39;jump&#39;:</span>
            <span class="err">player.jump();</span>
    <span class="err">}</span> <span class="c1">//switch</span>

<span class="err">}</span> 
</pre></div>

</code></pre><p>You can make the assumption here that all types of input mapped to jump, should call jump directly. But - the even is typed as InputEvent, and contains the following information :</p>
<pre><code><div class="highlight"><pre><span class="kd">typedef</span> <span class="nc">InputEvent</span> <span class="p">=</span> <span class="p">{</span>
    <span class="err">type</span>             <span class="err">:</span> <span class="err">InputType</span><span class="p">,</span>
    <span class="err">?touch_event</span>     <span class="err">:</span> <span class="err">TouchEvent</span><span class="p">,</span>
    <span class="err">?mouse_event</span>     <span class="err">:</span> <span class="err">MouseEvent</span><span class="p">,</span>
    <span class="err">?key_event</span>       <span class="err">:</span> <span class="err">KeyEvent</span><span class="p">,</span>
    <span class="err">?gamepad_event</span>   <span class="err">:</span> <span class="err">GamepadEvent</span>
<span class="p">}</span> 
</pre></div>

</code></pre><p>When the event originates from a mouse event, the <code>event.type</code> will be <code>InputType.mouse</code>, and the <code>event.mouse_event</code> will be populated with the originating event.</p>
<pre><code><div class="highlight"><pre><span class="kd">enum</span> <span class="nc">InputType</span> <span class="p">{</span>
    <span class="vi">mouse</span><span class="p">;</span>
    <span class="vi">touch</span><span class="p">;</span>
    <span class="vi">keys</span><span class="p">;</span>
    <span class="vi">gamepad</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

</code></pre><hr>
<h2 id="additional-information">Additional information</h2>
<hr>
<p><a name="handlers"> </a>
Here is a full list of functions, with commented descriptions :</p>
<pre><code><div class="highlight"><pre><span class="c1">//Keyboard</span>

    <span class="kd">public</span> <span class="err">function</span> <span class="err">onkeydown(</span> <span class="err">event:KeyEvent</span> <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//as soon as a key is pushed down</span>
    <span class="err">}</span>

    <span class="kd">public</span> <span class="err">function</span> <span class="err">onkeyup(</span> <span class="err">event:KeyEvent</span> <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//as soon as a key is released</span>
    <span class="err">}</span>

<span class="c1">//Mouse    </span>

    <span class="kd">public</span> <span class="err">function</span> <span class="err">onmousedown(</span> <span class="err">event:MouseEvent</span> <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//as soon as a mouse button is pushed down</span>
    <span class="err">}</span>

    <span class="kd">public</span> <span class="err">function</span> <span class="err">onmouseup(</span> <span class="err">event:MouseEvent</span> <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//as soon as a mouse button is released</span>
    <span class="err">}</span>

    <span class="kd">public</span> <span class="err">function</span> <span class="err">onmousemove(</span> <span class="err">event:MouseEvent</span> <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//every time the mouse moves</span>
    <span class="err">}</span>

<span class="c1">//Touch    </span>

    <span class="kd">public</span> <span class="err">function</span> <span class="err">ontouchbegin(</span> <span class="err">event:TouchEvent</span> <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//as soon as a touch is detected (event contains a unique touch ID)</span>
    <span class="err">}</span>

    <span class="kd">public</span> <span class="err">function</span> <span class="err">ontouchend(</span> <span class="err">event:TouchEvent</span> <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//as soon as a touch is released (event contains a unique touch ID, to know which)</span>
    <span class="err">}</span>

    <span class="kd">public</span> <span class="err">function</span> <span class="err">ontouchmove(</span> <span class="err">event:TouchEvent</span> <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//as soon as a touch is moved (event contains a unique touch ID, to know which)</span>
    <span class="err">}</span>

<span class="c1">//Gamepad    </span>

    <span class="kd">public</span> <span class="err">function</span> <span class="err">ongamepadaxis(</span> <span class="err">event:GamepadEvent</span> <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//when a gamepad axis changes</span>
    <span class="err">}</span>

    <span class="kd">public</span> <span class="err">function</span> <span class="err">ongamepadball(</span> <span class="err">event:GamepadEvent</span>  <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//when a gamepad ball changes</span>
    <span class="err">}</span>

    <span class="kd">public</span> <span class="err">function</span> <span class="err">ongamepadhat(</span> <span class="err">event:GamepadEvent</span>  <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//when a gamepad hat is pressed (D-pad)</span>
    <span class="err">}</span>    

    <span class="kd">public</span> <span class="err">function</span> <span class="err">ongamepadbuttondown(</span> <span class="err">event:GamepadEvent</span> <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//when a gamepad button is pressed down</span>
    <span class="err">}</span>    

    <span class="kd">public</span> <span class="err">function</span> <span class="err">ongamepadbuttonup(</span> <span class="err">event:GamepadEvent</span> <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//when a gamepad button is released</span>
    <span class="err">}</span>

<span class="c1">//Input    </span>

    <span class="kd">public</span> <span class="err">function</span> <span class="err">oninputup(</span> <span class="err">named_input:String,</span> <span class="err">e:InputEvent</span> <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//called when a bound named input event is released  </span>
    <span class="err">}</span> 

    <span class="kd">public</span> <span class="err">function</span> <span class="err">oninputdown(</span> <span class="err">named_input:String,</span> <span class="err">e:InputEvent</span> <span class="err">)</span> <span class="err">{</span>
        <span class="c1">//called when a bound named input event is pressed</span>
    <span class="err">}</span>
</pre></div>

</code></pre><hr>
<h3 id="-to-the-prev-guide-guide-gettingstarted-html-"><a href="guide.gettingstarted.html">To the prev guide</a></h3>
<h3 id="-to-the-next-guide-guide-basiccomponents-html-"><a href="guide.basiccomponents.html">To the next guide</a></h3>
<h3 id="-back-to-guides-guide-html-"><a href="guide.html">Back to guides</a></h3>
<p>&nbsp;<br>&nbsp;<br>&nbsp;   </p>

        </div>
    </body>

</html>