<!DOCTYPE html>
<html>

    <head>
        <title>snow - </title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link rel="shortcut icon" href="./images/favicon.png" />

        <link rel="stylesheet" type="text/css" href="./css/style.css" media="all">
        <link rel="stylesheet" type="text/css" href="./css/code.css" media="all">
        <link rel="stylesheet" type="text/css" href="./css/font.css" media="all">

        <link rel="stylesheet" type="text/css" href="./css/tooltipster.css" media="all">
        <link rel="stylesheet" type="text/css" href="./css/tooltipster-shadow.css" media="all">

        <script src="./js/jquery-2.0.3.min.js"> </script>
        <script src="./js/jquery.tooltipster.min.js"> </script>

        <script>

            $(document).ready(function() {

                $('.section').css('display','none');
                $('.readmore').click(function(e){
                    var _child = $(this).parent().find('.section').first();
                    var _opp = 'block';
                    if( _child.css('display') == 'block' ) {
                        _opp = 'none';
                    } else {
                    }
                    _child.css('display', _opp);
                });

                $('div.sample').on('click', function(e){
                        //get the data tag
                    var content = $(this).attr('data-content');
                        //remove clicking handler
                    $(this).off('click');
                        //replace the content!
                    $(this).html('<iframe src="'+content+'" sandbox="allow-same-origin allow-scripts" style="overflow:hidden; scrollbar:none; border: 0; width:645px; height:450px;"></iframe> ')
                });

                $('.tooltip').tooltipster({
                    theme:'tooltipster-shadow'
                });

            }); //document.ready

        </script>
    </head>

    <body>
        <div class="content">
            <p><a href="index.html"><img src="http://luxeengine.com/images/logo.png" alt="Logo"></a></p>
<h3 id="-to-the-prev-guide-guide-sprites-html-"><a href="guide.sprites.html">To the prev guide</a></h3>
<h3 id="-to-the-next-guide-guide-basiccomponents-html-"><a href="guide.basiccomponents.html">To the next guide</a></h3>
<h3 id="-view-all-guides-guide-html-"><a href="guide.html">View all guides</a></h3>
<hr>
<h2 id="handling-input-in-luxe">Handling input in luxe</h2>
<p><em>This tutorial assumes you are familiar with the basics of <a href="guide.gettingstarted.html">getting started with luxe</a>, and <a href="guide.sprites.html">displaying stuff</a> on screen.</em></p>
<h3 id="different-types-of-input">Different types of input</h3>
<hr>
<p>Luxe supports all common types of input out of the box:</p>
<ul>
<li>Touch/Multitouch input (on mobile devices)</li>
<li>Mouse input</li>
<li>Gamepad/Joystick input</li>
<li>Keyboard input</li>
</ul>
<h3 id="accessing-input-events">Accessing input events</h3>
<hr>
<p>Your Game class has a bunch of functions that can (and will) be called when an event happens. The reason that this is a function (and not say, an event) is because a function call is immediate.</p>
<p>As soon as luxe obtains an input event from the system it will immediately call your code to handle it. This is to avoid unnessary delays in handling touches or key/gamepad press and minimize latency when making games.</p>
<h3 id="the-specific-event-types">The specific event types</h3>
<hr>
<p>Each type of event have a typed event structure, for the details of the event.<br>For example, here is a touch event :</p>
<pre><code><span class="hljs-keyword">typedef</span> TouchEvent = {
    <span class="hljs-keyword">var</span> state : TouchState;
    <span class="hljs-keyword">var</span> flags : Int;
    <span class="hljs-keyword">var</span> ID : Int;
    <span class="hljs-keyword">var</span> x : Float;
    <span class="hljs-keyword">var</span> y : Float;
    <span class="hljs-keyword">var</span> raw : Dynamic;
};
</code></pre><p>You may also note the <code>raw</code> property.<br>Sometimes you need to know some value from the OS/platform that luxe is not explicitly exposing.</p>
<p>For this purpose all of the events (MouseEvent, TouchEvent, GamepadEvent, KeyEvent) pass a property through the event object.
This is the exact event structure, untouched, low level (you can use <code>trace(event.raw)</code> to dump it’s contents.</p>
<h2 id="named-input">Named input</h2>
<hr>
<p>Sometimes it is convenient to bind multiple events to the same piece of code. Sometimes a person playing the game will want to use W/A/S/D and sometimes they would prefer the arrow keys. The combinations of sensible defaults for this can quickly escalate.</p>
<p>It is always useful to be able to refer to an input binding by name (rather than the exact key) for things like customisable key binding screens.</p>
<p>For these reasons, luxe offers a named input binding system, where multiple events (even of different types) can be bound to a single spot, so you can handle them accordingly.</p>
<p>Let’s use a common example where the jump key might be Z, Space, and Right Mouse.</p>
<pre><code>Luxe.input.add(<span class="hljs-string">'jump'</span>, KeyValue.key_Z);
Luxe.input.add(<span class="hljs-string">'jump'</span>, KeyValue.space);
Luxe.input.add(<span class="hljs-string">'jump'</span>, MouseButton.right);
</code></pre><h3 id="handling-the-named-input">handling the named input</h3>
<hr>
<p>Now that you have the named input bound, you can listen for the event using <code>oninputdown</code> or <code>oninputup</code>.</p>
<pre><code><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">oninputup</span><span class="hljs-params">( event_name:String, event:InputEvent )</span> </span>{

    <span class="hljs-keyword">switch</span>( event_name ) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'jump'</span>:
            player.jump();
    } <span class="hljs-comment">//switch</span>

} 
</code></pre><p>You can make the assumption here that all types of input mapped to jump, should call jump directly. But - the even is typed as InputEvent, and contains the following information :</p>
<pre><code><span class="hljs-keyword">typedef</span> InputEvent = {
    type             : InputType,
    ?touch_event     : TouchEvent,
    ?mouse_event     : MouseEvent,
    ?key_event       : KeyEvent,
    ?gamepad_event   : GamepadEvent
} 
</code></pre><p>When the event originates from a mouse event, the <code>event.type</code> will be <code>InputType.mouse</code>, and the <code>event.mouse_event</code> will be populated with the originating event.</p>
<pre><code><span class="hljs-keyword">enum</span> InputType {
    mouse;
    touch;
    keys;
    gamepad;
}
</code></pre><hr>
<h2 id="additional-information">Additional information</h2>
<hr>
<p><a name="handlers"> </a>
Here is a full list of functions, with commented descriptions :</p>
<pre><code><span class="hljs-comment">//Keyboard</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onkeydown</span><span class="hljs-params">( event:KeyEvent )</span> </span>{
        <span class="hljs-comment">//as soon as a key is pushed down</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onkeyup</span><span class="hljs-params">( event:KeyEvent )</span> </span>{
        <span class="hljs-comment">//as soon as a key is released</span>
    }

<span class="hljs-comment">//Mouse    </span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onmousedown</span><span class="hljs-params">( event:MouseEvent )</span> </span>{
        <span class="hljs-comment">//as soon as a mouse button is pushed down</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onmouseup</span><span class="hljs-params">( event:MouseEvent )</span> </span>{
        <span class="hljs-comment">//as soon as a mouse button is released</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onmousemove</span><span class="hljs-params">( event:MouseEvent )</span> </span>{
        <span class="hljs-comment">//every time the mouse moves</span>
    }

<span class="hljs-comment">//Touch    </span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ontouchbegin</span><span class="hljs-params">( event:TouchEvent )</span> </span>{
        <span class="hljs-comment">//as soon as a touch is detected (event contains a unique touch ID)</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ontouchend</span><span class="hljs-params">( event:TouchEvent )</span> </span>{
        <span class="hljs-comment">//as soon as a touch is released (event contains a unique touch ID, to know which)</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ontouchmove</span><span class="hljs-params">( event:TouchEvent )</span> </span>{
        <span class="hljs-comment">//as soon as a touch is moved (event contains a unique touch ID, to know which)</span>
    }

<span class="hljs-comment">//Gamepad    </span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ongamepadaxis</span><span class="hljs-params">( event:GamepadEvent )</span> </span>{
        <span class="hljs-comment">//when a gamepad axis changes</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ongamepadball</span><span class="hljs-params">( event:GamepadEvent  )</span> </span>{
        <span class="hljs-comment">//when a gamepad ball changes</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ongamepadhat</span><span class="hljs-params">( event:GamepadEvent  )</span> </span>{
        <span class="hljs-comment">//when a gamepad hat is pressed (D-pad)</span>
    }    

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ongamepadbuttondown</span><span class="hljs-params">( event:GamepadEvent )</span> </span>{
        <span class="hljs-comment">//when a gamepad button is pressed down</span>
    }    

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ongamepadbuttonup</span><span class="hljs-params">( event:GamepadEvent )</span> </span>{
        <span class="hljs-comment">//when a gamepad button is released</span>
    }

<span class="hljs-comment">//Input    </span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">oninputup</span><span class="hljs-params">( named_input:String, e:InputEvent )</span> </span>{
        <span class="hljs-comment">//called when a bound named input event is released  </span>
    } 

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">oninputdown</span><span class="hljs-params">( named_input:String, e:InputEvent )</span> </span>{
        <span class="hljs-comment">//called when a bound named input event is pressed</span>
    }
</code></pre><hr>
<h3 id="-to-the-prev-guide-guide-gettingstarted-html-"><a href="guide.gettingstarted.html">To the prev guide</a></h3>
<h3 id="-to-the-next-guide-guide-basiccomponents-html-"><a href="guide.basiccomponents.html">To the next guide</a></h3>
<h3 id="-back-to-guides-guide-html-"><a href="guide.html">Back to guides</a></h3>
<p>&nbsp;<br>&nbsp;<br>&nbsp;   </p>

        </div>
    </body>

</html>