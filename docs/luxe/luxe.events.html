<!DOCTYPE html><html lang="en"><head><title>luxe/luxe.events</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="luxe/luxe.events"><meta name="groc-project-path" content="Luxe/luxe/luxe.events.md"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path">Luxe/luxe/luxe.events.md</div></div><div id="document"><div class="segment"><div class="comments"><div class="wrapper"><p><img src="http://underscorediscovery.com/sven/images/logo.png" alt="Logo" title="" /></p>

<h1 id="luxeindexhtml"><a href="../index.html">luxe</a></h1>

<h3 id="backtotypestypeshtml"><a href="types.html">Back to types</a></h3>

<h2 id="luxe-events-api">Luxe Events API</h2>

<p>The events class offers a way to communicate across components, entities, classes and more by a generic messaging system.   </p>

<p>There are two ways to trigger an event, one which sends the event into a queue to be processed in the next frame - and one that will fire the event immediately. There are times when immediacy is important, such as return values from a handler and race conditions - but for the majority of cases you can queue them safely. See examples at the end.</p>

<p><em>Listen for an event, by connecting a handler</em></p>

<p><strong>connect</strong>    event name, listening function (returns an event ID to use later)
<code>var eventid = Luxe.events.connect( event_name : String, listener : Dynamic -&gt; Void ) : String</code></p>

<p><strong>disconnect</strong>    event id from connect (returns if the event was removed)
<code>var success = Luxe.events.disconnect( event_id : String ) : Bool</code></p>

<p><strong>queue</strong>    event name, properties to forward to the listeners (returns an event id, not used often)
<code>var queueid = Luxe.events.queue( event_name : String, properties : Dynamic = null ) : String</code></p>

<p><strong>dequeue</strong>    event id ( returns if the event was removed )
<code>var success = Luxe.events.dequeue( event_id: String ) : Bool</code></p>

<p><strong>fire</strong> event name, properties to forward to the listeners (returns true if the event was found)
<code>var success = Luxe.events.fire( event_name : String, properties : Dynamic = null ) : Bool</code></p>

<p><strong>schedule</strong> time in seconds, event name to fire, properties to forward (returns an event id for unschedule)
<code>var eventid = Luxe.events.schedule( time:Float, event_name : String, properties : Dynamic = null) : String</code></p>

<p><strong>unschedule</strong> event id (returns if the schedule was cancelled )
<code>var success = Luxe.events.unschedule( schedule_id : String ) : Bool</code></p>

<h3 id="examples">examples</h3>

<p>Since event names are string, you can group events by delimeter. A planned feature for the near future is to include filtering or listening to events by 'namespace', like <code>Luxe.events.connect('game.player.*')</code> for debugging and such.</p>

<pre><code>    var event_id = Luxe.events.connect('debug:event1', function(e) { trace('event listener 1 : ' + e); });
    Luxe.events.connect('debug:event1', function(e) { trace('event listener 2 : ' +e); });
    Luxe.events.connect('debug:event1', function(e) { trace('event listener 3 : ' + e); });

    trace('registered debug:event1 ' + event_id); 

    Luxe.events.fire('debug:event1', {
        name : 'test event',
        date : Date.now()
    });

        //remove one of them
    Luxe.events.disconnect( event_id );

        //now only two listeners
    Luxe.events.fire('debug:event1', {
        name : 'test event',
        date : Date.now()
    });

        //fire next frame
    Luxe.events.queue('debug:event1');

        //fire two seconds from now
    Luxe.events.schedule( 2.0 , 'debug:event1');
</code></pre>

<p><em>wip</em></p></div></div></div></div></body></html>